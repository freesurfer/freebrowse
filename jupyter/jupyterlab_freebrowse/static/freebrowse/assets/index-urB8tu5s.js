const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blosc-E49GQuAK.js","./chunk-INHXZS53-D3tQiqtZ.js","./lz4-BIGKWw27.js","./zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var mw=Object.defineProperty;var a0=e=>{throw TypeError(e)};var pw=(e,t,n)=>t in e?mw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>pw(e,typeof t!="symbol"?t+"":t,n),mc=(e,t,n)=>t.has(e)||a0("Cannot "+n);var me=(e,t,n)=>(mc(e,t,"read from private field"),n?n.call(e):t.get(e)),Je=(e,t,n)=>t.has(e)?a0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ye=(e,t,n,r)=>(mc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),pc=(e,t,n)=>(mc(e,t,"access private method"),n);function gw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function G1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y1={exports:{}},Nl={},W1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),Aw=Symbol.for("react.portal"),vw=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),bw=Symbol.for("react.context"),Cw=Symbol.for("react.forward_ref"),Sw=Symbol.for("react.suspense"),Ew=Symbol.for("react.memo"),Mw=Symbol.for("react.lazy"),l0=Symbol.iterator;function Dw(e){return e===null||typeof e!="object"?null:(e=l0&&e[l0]||e["@@iterator"],typeof e=="function"?e:null)}var H1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X1=Object.assign,K1={};function Xi(e,t,n){this.props=e,this.context=t,this.refs=K1,this.updater=n||H1}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _1(){}_1.prototype=Xi.prototype;function Gd(e,t,n){this.props=e,this.context=t,this.refs=K1,this.updater=n||H1}var Yd=Gd.prototype=new _1;Yd.constructor=Gd;X1(Yd,Xi.prototype);Yd.isPureReactComponent=!0;var c0=Array.isArray,Q1=Object.prototype.hasOwnProperty,Wd={current:null},q1={key:!0,ref:!0,__self:!0,__source:!0};function Z1(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Q1.call(t,r)&&!q1.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yo,type:e,key:s,ref:o,props:i,_owner:Wd.current}}function Tw(e,t){return{$$typeof:yo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hd(e){return typeof e=="object"&&e!==null&&e.$$typeof===yo}function Iw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var u0=/\/+/g;function gc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Iw(""+e.key):t.toString(36)}function ma(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yo:case Aw:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+gc(o,0):r,c0(i)?(n="",e!=null&&(n=e.replace(u0,"$&/")+"/"),ma(i,t,n,"",function(c){return c})):i!=null&&(Hd(i)&&(i=Tw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(u0,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",c0(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+gc(s,a);o+=ma(s,t,n,l,i)}else if(l=Dw(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+gc(s,a++),o+=ma(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Oo(e,t,n){if(e==null)return e;var r=[],i=0;return ma(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Fw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},pa={transition:null},Rw={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:pa,ReactCurrentOwner:Wd};function J1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Oo,forEach:function(e,t,n){Oo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Oo(e,function(){t++}),t},toArray:function(e){return Oo(e,function(t){return t})||[]},only:function(e){if(!Hd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=Xi;ve.Fragment=vw;ve.Profiler=ww;ve.PureComponent=Gd;ve.StrictMode=xw;ve.Suspense=Sw;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;ve.act=J1;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=X1({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Wd.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Q1.call(t,l)&&!q1.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:yo,type:e.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(e){return e={$$typeof:bw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yw,_context:e},e.Consumer=e};ve.createElement=Z1;ve.createFactory=function(e){var t=Z1.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:Cw,render:e}};ve.isValidElement=Hd;ve.lazy=function(e){return{$$typeof:Mw,_payload:{_status:-1,_result:e},_init:Fw}};ve.memo=function(e,t){return{$$typeof:Ew,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=pa.transition;pa.transition={};try{e()}finally{pa.transition=t}};ve.unstable_act=J1;ve.useCallback=function(e,t){return It.current.useCallback(e,t)};ve.useContext=function(e){return It.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return It.current.useDeferredValue(e)};ve.useEffect=function(e,t){return It.current.useEffect(e,t)};ve.useId=function(){return It.current.useId()};ve.useImperativeHandle=function(e,t,n){return It.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return It.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return It.current.useReducer(e,t,n)};ve.useRef=function(e){return It.current.useRef(e)};ve.useState=function(e){return It.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return It.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return It.current.useTransition()};ve.version="18.3.1";W1.exports=ve;var I=W1.exports;const it=G1(I),Xd=gw({__proto__:null,default:it},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=I,Nw=Symbol.for("react.element"),kw=Symbol.for("react.fragment"),Bw=Object.prototype.hasOwnProperty,Vw=Pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uw={key:!0,ref:!0,__self:!0,__source:!0};function $1(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Bw.call(t,r)&&!Uw.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Nw,type:e,key:s,ref:o,props:i,_owner:Vw.current}}Nl.Fragment=kw;Nl.jsx=$1;Nl.jsxs=$1;Y1.exports=Nl;var D=Y1.exports,ep={exports:{}},Kt={},tp={exports:{}},np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,Y){var j=L.length;L.push(Y);e:for(;0<j;){var $=j-1>>>1,X=L[$];if(0<i(X,Y))L[$]=Y,L[j]=X,j=$;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Y=L[0],j=L.pop();if(j!==Y){L[0]=j;e:for(var $=0,X=L.length,H=X>>>1;$<H;){var K=2*($+1)-1,te=L[K],ae=K+1,le=L[ae];if(0>i(te,j))ae<X&&0>i(le,te)?(L[$]=le,L[ae]=j,$=ae):(L[$]=te,L[K]=j,$=K);else if(ae<X&&0>i(le,j))L[$]=le,L[ae]=j,$=ae;else break e}}return Y}function i(L,Y){var j=L.sortIndex-Y.sortIndex;return j!==0?j:L.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(L){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=L)r(c),Y.sortIndex=Y.expirationTime,t(l,Y);else break;Y=n(c)}}function w(L){if(g=!1,x(L),!p)if(n(l)!==null)p=!0,U(b);else{var Y=n(c);Y!==null&&G(w,Y.startTime-L)}}function b(L,Y){p=!1,g&&(g=!1,m(S),S=-1),f=!0;var j=h;try{for(x(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||L&&!F());){var $=d.callback;if(typeof $=="function"){d.callback=null,h=d.priorityLevel;var X=$(d.expirationTime<=Y);Y=e.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),x(Y)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var K=n(c);K!==null&&G(w,K.startTime-Y),H=!1}return H}finally{d=null,h=j,f=!1}}var y=!1,C=null,S=-1,E=5,T=-1;function F(){return!(e.unstable_now()-T<E)}function M(){if(C!==null){var L=e.unstable_now();T=L;var Y=!0;try{Y=C(!0,L)}finally{Y?B():(y=!1,C=null)}}else y=!1}var B;if(typeof A=="function")B=function(){A(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,z=P.port2;P.port1.onmessage=M,B=function(){z.postMessage(null)}}else B=function(){v(M,0)};function U(L){C=L,y||(y=!0,B())}function G(L,Y){S=v(function(){L(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,U(b))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var j=h;h=Y;try{return L()}finally{h=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,Y){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=h;h=L;try{return Y()}finally{h=j}},e.unstable_scheduleCallback=function(L,Y,j){var $=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?$+j:$):j=$,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,L={id:u++,callback:Y,priorityLevel:L,startTime:j,expirationTime:X,sortIndex:-1},j>$?(L.sortIndex=j,t(c,L),n(l)===null&&L===n(c)&&(g?(m(S),S=-1):g=!0,G(w,j-$))):(L.sortIndex=X,t(l,L),p||f||(p=!0,U(b))),L},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(L){var Y=h;return function(){var j=h;h=Y;try{return L.apply(this,arguments)}finally{h=j}}}})(np);tp.exports=np;var Lw=tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=I,Xt=Lw;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rp=new Set,js={};function Zr(e,t){Ui(e,t),Ui(e+"Capture",t)}function Ui(e,t){for(js[e]=t,e=0;e<t.length;e++)rp.add(t[e])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=Object.prototype.hasOwnProperty,zw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d0={},h0={};function jw(e){return bu.call(h0,e)?!0:bu.call(d0,e)?!1:zw.test(e)?h0[e]=!0:(d0[e]=!0,!1)}function Gw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Yw(e,t,n,r){if(t===null||typeof t>"u"||Gw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ft(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kd=/[\-:]([a-z])/g;function _d(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kd,_d);vt[t]=new Ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kd,_d);vt[t]=new Ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kd,_d);vt[t]=new Ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qd(e,t,n,r){var i=vt.hasOwnProperty(t)?vt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Yw(t,n,i,r)&&(n=null),r||i===null?jw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yn=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zo=Symbol.for("react.element"),hi=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),qd=Symbol.for("react.strict_mode"),Cu=Symbol.for("react.profiler"),ip=Symbol.for("react.provider"),sp=Symbol.for("react.context"),Zd=Symbol.for("react.forward_ref"),Su=Symbol.for("react.suspense"),Eu=Symbol.for("react.suspense_list"),Jd=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),op=Symbol.for("react.offscreen"),f0=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=f0&&e[f0]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Object.assign,Ac;function gs(e){if(Ac===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ac=t&&t[1]||""}return`
`+Ac+e}var vc=!1;function xc(e,t){if(!e||vc)return"";vc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{vc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gs(e):""}function Ww(e){switch(e.tag){case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return e=xc(e.type,!1),e;case 11:return e=xc(e.type.render,!1),e;case 1:return e=xc(e.type,!0),e;default:return""}}function Mu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case hi:return"Portal";case Cu:return"Profiler";case qd:return"StrictMode";case Su:return"Suspense";case Eu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sp:return(e.displayName||"Context")+".Consumer";case ip:return(e._context.displayName||"Context")+".Provider";case Zd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jd:return t=e.displayName||null,t!==null?t:Mu(e.type)||"Memo";case Qn:t=e._payload,e=e._init;try{return Mu(e(t))}catch{}}return null}function Hw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mu(t);case 8:return t===qd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ap(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xw(e){var t=ap(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jo(e){e._valueTracker||(e._valueTracker=Xw(e))}function lp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ap(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Du(e,t){var n=t.checked;return Ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function m0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cp(e,t){t=t.checked,t!=null&&Qd(e,"checked",t,!1)}function Tu(e,t){cp(e,t);var n=Ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Iu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Iu(e,t.type,Ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function p0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Iu(e,t,n){(t!=="number"||Ka(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var As=Array.isArray;function Mi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ar(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Fu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function g0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if(As(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ar(n)}}function up(e,t){var n=Ar(t.value),r=Ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function A0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ru(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Go,hp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Go=Go||document.createElement("div"),Go.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Go.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kw=["Webkit","ms","Moz","O"];Object.keys(Ts).forEach(function(e){Kw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ts[t]=Ts[e]})});function fp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ts.hasOwnProperty(e)&&Ts[e]?(""+t).trim():t+"px"}function mp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var _w=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pu(e,t){if(t){if(_w[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function Nu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ku=null;function $d(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bu=null,Di=null,Ti=null;function v0(e){if(e=So(e)){if(typeof Bu!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Ll(t),Bu(e.stateNode,e.type,t))}}function pp(e){Di?Ti?Ti.push(e):Ti=[e]:Di=e}function gp(){if(Di){var e=Di,t=Ti;if(Ti=Di=null,v0(e),t)for(e=0;e<t.length;e++)v0(t[e])}}function Ap(e,t){return e(t)}function vp(){}var wc=!1;function xp(e,t,n){if(wc)return e(t,n);wc=!0;try{return Ap(e,t,n)}finally{wc=!1,(Di!==null||Ti!==null)&&(vp(),gp())}}function Ys(e,t){var n=e.stateNode;if(n===null)return null;var r=Ll(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var Vu=!1;if(Ln)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{Vu=!1}function Qw(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Is=!1,_a=null,Qa=!1,Uu=null,qw={onError:function(e){Is=!0,_a=e}};function Zw(e,t,n,r,i,s,o,a,l){Is=!1,_a=null,Qw.apply(qw,arguments)}function Jw(e,t,n,r,i,s,o,a,l){if(Zw.apply(this,arguments),Is){if(Is){var c=_a;Is=!1,_a=null}else throw Error(Z(198));Qa||(Qa=!0,Uu=c)}}function Jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x0(e){if(Jr(e)!==e)throw Error(Z(188))}function $w(e){var t=e.alternate;if(!t){if(t=Jr(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return x0(i),e;if(s===r)return x0(i),t;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function yp(e){return e=$w(e),e!==null?bp(e):null}function bp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bp(e);if(t!==null)return t;e=e.sibling}return null}var Cp=Xt.unstable_scheduleCallback,w0=Xt.unstable_cancelCallback,e5=Xt.unstable_shouldYield,t5=Xt.unstable_requestPaint,Ze=Xt.unstable_now,n5=Xt.unstable_getCurrentPriorityLevel,eh=Xt.unstable_ImmediatePriority,Sp=Xt.unstable_UserBlockingPriority,qa=Xt.unstable_NormalPriority,r5=Xt.unstable_LowPriority,Ep=Xt.unstable_IdlePriority,kl=null,bn=null;function i5(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:a5,s5=Math.log,o5=Math.LN2;function a5(e){return e>>>=0,e===0?32:31-(s5(e)/o5|0)|0}var Yo=64,Wo=4194304;function vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Za(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=vs(a):(s&=o,s!==0&&(r=vs(s)))}else o=n&~i,o!==0?r=vs(o):s!==0&&(r=vs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-mn(t),i=1<<n,r|=e[n],t&=~i;return r}function l5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c5(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-mn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=l5(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Lu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mp(){var e=Yo;return Yo<<=1,!(Yo&4194240)&&(Yo=64),e}function yc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mn(t),e[t]=n}function u5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-mn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function th(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Fe=0;function Dp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tp,nh,Ip,Fp,Rp,Ou=!1,Ho=[],ar=null,lr=null,cr=null,Ws=new Map,Hs=new Map,Jn=[],d5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y0(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(t.pointerId)}}function rs(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=So(t),t!==null&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function h5(e,t,n,r,i){switch(t){case"focusin":return ar=rs(ar,e,t,n,r,i),!0;case"dragenter":return lr=rs(lr,e,t,n,r,i),!0;case"mouseover":return cr=rs(cr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ws.set(s,rs(Ws.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hs.set(s,rs(Hs.get(s)||null,e,t,n,r,i)),!0}return!1}function Pp(e){var t=Br(e.target);if(t!==null){var n=Jr(t);if(n!==null){if(t=n.tag,t===13){if(t=wp(n),t!==null){e.blockedOn=t,Rp(e.priority,function(){Ip(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ga(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ku=r,n.target.dispatchEvent(r),ku=null}else return t=So(n),t!==null&&nh(t),e.blockedOn=n,!1;t.shift()}return!0}function b0(e,t,n){ga(e)&&n.delete(t)}function f5(){Ou=!1,ar!==null&&ga(ar)&&(ar=null),lr!==null&&ga(lr)&&(lr=null),cr!==null&&ga(cr)&&(cr=null),Ws.forEach(b0),Hs.forEach(b0)}function is(e,t){e.blockedOn===t&&(e.blockedOn=null,Ou||(Ou=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,f5)))}function Xs(e){function t(i){return is(i,e)}if(0<Ho.length){is(Ho[0],e);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ar!==null&&is(ar,e),lr!==null&&is(lr,e),cr!==null&&is(cr,e),Ws.forEach(t),Hs.forEach(t),n=0;n<Jn.length;n++)r=Jn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jn.length&&(n=Jn[0],n.blockedOn===null);)Pp(n),n.blockedOn===null&&Jn.shift()}var Ii=Yn.ReactCurrentBatchConfig,Ja=!0;function m5(e,t,n,r){var i=Fe,s=Ii.transition;Ii.transition=null;try{Fe=1,rh(e,t,n,r)}finally{Fe=i,Ii.transition=s}}function p5(e,t,n,r){var i=Fe,s=Ii.transition;Ii.transition=null;try{Fe=4,rh(e,t,n,r)}finally{Fe=i,Ii.transition=s}}function rh(e,t,n,r){if(Ja){var i=zu(e,t,n,r);if(i===null)Rc(e,t,r,$a,n),y0(e,r);else if(h5(i,e,t,n,r))r.stopPropagation();else if(y0(e,r),t&4&&-1<d5.indexOf(e)){for(;i!==null;){var s=So(i);if(s!==null&&Tp(s),s=zu(e,t,n,r),s===null&&Rc(e,t,r,$a,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rc(e,t,r,null,n)}}var $a=null;function zu(e,t,n,r){if($a=null,e=$d(r),e=Br(e),e!==null)if(t=Jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $a=e,null}function Np(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n5()){case eh:return 1;case Sp:return 4;case qa:case r5:return 16;case Ep:return 536870912;default:return 16}default:return 16}}var nr=null,ih=null,Aa=null;function kp(){if(Aa)return Aa;var e,t=ih,n=t.length,r,i="value"in nr?nr.value:nr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Aa=i.slice(e,1<r?1-r:void 0)}function va(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function C0(){return!1}function _t(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xo:C0,this.isPropagationStopped=C0,this}return Ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=_t(Ki),Co=Ke({},Ki,{view:0,detail:0}),g5=_t(Co),bc,Cc,ss,Bl=Ke({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ss&&(ss&&e.type==="mousemove"?(bc=e.screenX-ss.screenX,Cc=e.screenY-ss.screenY):Cc=bc=0,ss=e),bc)},movementY:function(e){return"movementY"in e?e.movementY:Cc}}),S0=_t(Bl),A5=Ke({},Bl,{dataTransfer:0}),v5=_t(A5),x5=Ke({},Co,{relatedTarget:0}),Sc=_t(x5),w5=Ke({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),y5=_t(w5),b5=Ke({},Ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C5=_t(b5),S5=Ke({},Ki,{data:0}),E0=_t(S5),E5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=D5[e])?!!t[e]:!1}function oh(){return T5}var I5=Ke({},Co,{key:function(e){if(e.key){var t=E5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?M5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oh,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F5=_t(I5),R5=Ke({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=_t(R5),P5=Ke({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oh}),N5=_t(P5),k5=Ke({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),B5=_t(k5),V5=Ke({},Bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),U5=_t(V5),L5=[9,13,27,32],ah=Ln&&"CompositionEvent"in window,Fs=null;Ln&&"documentMode"in document&&(Fs=document.documentMode);var O5=Ln&&"TextEvent"in window&&!Fs,Bp=Ln&&(!ah||Fs&&8<Fs&&11>=Fs),D0=" ",T0=!1;function Vp(e,t){switch(e){case"keyup":return L5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mi=!1;function z5(e,t){switch(e){case"compositionend":return Up(t);case"keypress":return t.which!==32?null:(T0=!0,D0);case"textInput":return e=t.data,e===D0&&T0?null:e;default:return null}}function j5(e,t){if(mi)return e==="compositionend"||!ah&&Vp(e,t)?(e=kp(),Aa=ih=nr=null,mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bp&&t.locale!=="ko"?null:t.data;default:return null}}var G5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!G5[e.type]:t==="textarea"}function Lp(e,t,n,r){pp(r),t=el(t,"onChange"),0<t.length&&(n=new sh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rs=null,Ks=null;function Y5(e){Qp(e,0)}function Vl(e){var t=Ai(e);if(lp(t))return e}function W5(e,t){if(e==="change")return t}var Op=!1;if(Ln){var Ec;if(Ln){var Mc="oninput"in document;if(!Mc){var F0=document.createElement("div");F0.setAttribute("oninput","return;"),Mc=typeof F0.oninput=="function"}Ec=Mc}else Ec=!1;Op=Ec&&(!document.documentMode||9<document.documentMode)}function R0(){Rs&&(Rs.detachEvent("onpropertychange",zp),Ks=Rs=null)}function zp(e){if(e.propertyName==="value"&&Vl(Ks)){var t=[];Lp(t,Ks,e,$d(e)),xp(Y5,t)}}function H5(e,t,n){e==="focusin"?(R0(),Rs=t,Ks=n,Rs.attachEvent("onpropertychange",zp)):e==="focusout"&&R0()}function X5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(Ks)}function K5(e,t){if(e==="click")return Vl(t)}function _5(e,t){if(e==="input"||e==="change")return Vl(t)}function Q5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:Q5;function _s(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bu.call(t,i)||!gn(e[i],t[i]))return!1}return!0}function P0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function N0(e,t){var n=P0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=P0(n)}}function jp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gp(){for(var e=window,t=Ka();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ka(e.document)}return t}function lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function q5(e){var t=Gp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&jp(n.ownerDocument.documentElement,n)){if(r!==null&&lh(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=N0(n,s);var o=N0(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Z5=Ln&&"documentMode"in document&&11>=document.documentMode,pi=null,ju=null,Ps=null,Gu=!1;function k0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gu||pi==null||pi!==Ka(r)||(r=pi,"selectionStart"in r&&lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ps&&_s(Ps,r)||(Ps=r,r=el(ju,"onSelect"),0<r.length&&(t=new sh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function Ko(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gi={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},Dc={},Yp={};Ln&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function Ul(e){if(Dc[e])return Dc[e];if(!gi[e])return e;var t=gi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yp)return Dc[e]=t[n];return e}var Wp=Ul("animationend"),Hp=Ul("animationiteration"),Xp=Ul("animationstart"),Kp=Ul("transitionend"),_p=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){_p.set(e,t),Zr(t,[e])}for(var Tc=0;Tc<B0.length;Tc++){var Ic=B0[Tc],J5=Ic.toLowerCase(),$5=Ic[0].toUpperCase()+Ic.slice(1);xr(J5,"on"+$5)}xr(Wp,"onAnimationEnd");xr(Hp,"onAnimationIteration");xr(Xp,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(Kp,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e3=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function V0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jw(r,t,void 0,e),e.currentTarget=null}function Qp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;V0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;V0(i,a,c),s=l}}}if(Qa)throw e=Uu,Qa=!1,Uu=null,e}function ke(e,t){var n=t[Ku];n===void 0&&(n=t[Ku]=new Set);var r=e+"__bubble";n.has(r)||(qp(t,e,2,!1),n.add(r))}function Fc(e,t,n){var r=0;t&&(r|=4),qp(n,e,r,t)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Qs(e){if(!e[_o]){e[_o]=!0,rp.forEach(function(n){n!=="selectionchange"&&(e3.has(n)||Fc(n,!1,e),Fc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_o]||(t[_o]=!0,Fc("selectionchange",!1,t))}}function qp(e,t,n,r){switch(Np(t)){case 1:var i=m5;break;case 4:i=p5;break;default:i=rh}n=i.bind(null,t,n,e),i=void 0,!Vu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rc(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Br(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}xp(function(){var c=s,u=$d(n),d=[];e:{var h=_p.get(e);if(h!==void 0){var f=sh,p=e;switch(e){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":f=F5;break;case"focusin":p="focus",f=Sc;break;case"focusout":p="blur",f=Sc;break;case"beforeblur":case"afterblur":f=Sc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=v5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=N5;break;case Wp:case Hp:case Xp:f=y5;break;case Kp:f=B5;break;case"scroll":f=g5;break;case"wheel":f=U5;break;case"copy":case"cut":case"paste":f=C5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=M0}var g=(t&4)!==0,v=!g&&e==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var A=c,x;A!==null;){x=A;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,m!==null&&(w=Ys(A,m),w!=null&&g.push(qs(A,w,x)))),v)break;A=A.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&n!==ku&&(p=n.relatedTarget||n.fromElement)&&(Br(p)||p[On]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Br(p):null,p!==null&&(v=Jr(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=S0,w="onMouseLeave",m="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(g=M0,w="onPointerLeave",m="onPointerEnter",A="pointer"),v=f==null?h:Ai(f),x=p==null?h:Ai(p),h=new g(w,A+"leave",f,n,u),h.target=v,h.relatedTarget=x,w=null,Br(u)===c&&(g=new g(m,A+"enter",p,n,u),g.target=x,g.relatedTarget=v,w=g),v=w,f&&p)t:{for(g=f,m=p,A=0,x=g;x;x=si(x))A++;for(x=0,w=m;w;w=si(w))x++;for(;0<A-x;)g=si(g),A--;for(;0<x-A;)m=si(m),x--;for(;A--;){if(g===m||m!==null&&g===m.alternate)break t;g=si(g),m=si(m)}g=null}else g=null;f!==null&&U0(d,h,f,g,!1),p!==null&&v!==null&&U0(d,v,p,g,!0)}}e:{if(h=c?Ai(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=W5;else if(I0(h))if(Op)b=_5;else{b=X5;var y=H5}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=K5);if(b&&(b=b(e,c))){Lp(d,b,n,u);break e}y&&y(e,h,c),e==="focusout"&&(y=h._wrapperState)&&y.controlled&&h.type==="number"&&Iu(h,"number",h.value)}switch(y=c?Ai(c):window,e){case"focusin":(I0(y)||y.contentEditable==="true")&&(pi=y,ju=c,Ps=null);break;case"focusout":Ps=ju=pi=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,k0(d,n,u);break;case"selectionchange":if(Z5)break;case"keydown":case"keyup":k0(d,n,u)}var C;if(ah)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else mi?Vp(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Bp&&n.locale!=="ko"&&(mi||S!=="onCompositionStart"?S==="onCompositionEnd"&&mi&&(C=kp()):(nr=u,ih="value"in nr?nr.value:nr.textContent,mi=!0)),y=el(c,S),0<y.length&&(S=new E0(S,e,null,n,u),d.push({event:S,listeners:y}),C?S.data=C:(C=Up(n),C!==null&&(S.data=C)))),(C=O5?z5(e,n):j5(e,n))&&(c=el(c,"onBeforeInput"),0<c.length&&(u=new E0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}Qp(d,t)})}function qs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function el(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ys(e,n),s!=null&&r.unshift(qs(e,s,i)),s=Ys(e,t),s!=null&&r.push(qs(e,s,i))),e=e.return}return r}function si(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function U0(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ys(n,s),l!=null&&o.unshift(qs(n,l,a))):i||(l=Ys(n,s),l!=null&&o.push(qs(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var t3=/\r\n?/g,n3=/\u0000|\uFFFD/g;function L0(e){return(typeof e=="string"?e:""+e).replace(t3,`
`).replace(n3,"")}function Qo(e,t,n){if(t=L0(t),L0(e)!==t&&n)throw Error(Z(425))}function tl(){}var Yu=null,Wu=null;function Hu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xu=typeof setTimeout=="function"?setTimeout:void 0,r3=typeof clearTimeout=="function"?clearTimeout:void 0,O0=typeof Promise=="function"?Promise:void 0,i3=typeof queueMicrotask=="function"?queueMicrotask:typeof O0<"u"?function(e){return O0.resolve(null).then(e).catch(s3)}:Xu;function s3(e){setTimeout(function(){throw e})}function Pc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Xs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xs(t)}function ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function z0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),yn="__reactFiber$"+_i,Zs="__reactProps$"+_i,On="__reactContainer$"+_i,Ku="__reactEvents$"+_i,o3="__reactListeners$"+_i,a3="__reactHandles$"+_i;function Br(e){var t=e[yn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[On]||n[yn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=z0(e);e!==null;){if(n=e[yn])return n;e=z0(e)}return t}e=n,n=e.parentNode}return null}function So(e){return e=e[yn]||e[On],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Ll(e){return e[Zs]||null}var _u=[],vi=-1;function wr(e){return{current:e}}function Ve(e){0>vi||(e.current=_u[vi],_u[vi]=null,vi--)}function Re(e,t){vi++,_u[vi]=e.current,e.current=t}var vr={},St=wr(vr),Vt=wr(!1),Wr=vr;function Li(e,t){var n=e.type.contextTypes;if(!n)return vr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ut(e){return e=e.childContextTypes,e!=null}function nl(){Ve(Vt),Ve(St)}function j0(e,t,n){if(St.current!==vr)throw Error(Z(168));Re(St,t),Re(Vt,n)}function Zp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Z(108,Hw(e)||"Unknown",i));return Ke({},n,r)}function rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vr,Wr=St.current,Re(St,e),Re(Vt,Vt.current),!0}function G0(e,t,n){var r=e.stateNode;if(!r)throw Error(Z(169));n?(e=Zp(e,t,Wr),r.__reactInternalMemoizedMergedChildContext=e,Ve(Vt),Ve(St),Re(St,e)):Ve(Vt),Re(Vt,n)}var Fn=null,Ol=!1,Nc=!1;function Jp(e){Fn===null?Fn=[e]:Fn.push(e)}function l3(e){Ol=!0,Jp(e)}function yr(){if(!Nc&&Fn!==null){Nc=!0;var e=0,t=Fe;try{var n=Fn;for(Fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fn=null,Ol=!1}catch(i){throw Fn!==null&&(Fn=Fn.slice(e+1)),Cp(eh,yr),i}finally{Fe=t,Nc=!1}}return null}var xi=[],wi=0,il=null,sl=0,Qt=[],qt=0,Hr=null,Rn=1,Pn="";function Ir(e,t){xi[wi++]=sl,xi[wi++]=il,il=e,sl=t}function $p(e,t,n){Qt[qt++]=Rn,Qt[qt++]=Pn,Qt[qt++]=Hr,Hr=e;var r=Rn;e=Pn;var i=32-mn(r)-1;r&=~(1<<i),n+=1;var s=32-mn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rn=1<<32-mn(t)+i|n<<i|r,Pn=s+e}else Rn=1<<s|n<<i|r,Pn=e}function ch(e){e.return!==null&&(Ir(e,1),$p(e,1,0))}function uh(e){for(;e===il;)il=xi[--wi],xi[wi]=null,sl=xi[--wi],xi[wi]=null;for(;e===Hr;)Hr=Qt[--qt],Qt[qt]=null,Pn=Qt[--qt],Qt[qt]=null,Rn=Qt[--qt],Qt[qt]=null}var Ht=null,Wt=null,Ge=!1,hn=null;function e2(e,t){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Y0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ht=e,Wt=ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ht=e,Wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hr!==null?{id:Rn,overflow:Pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ht=e,Wt=null,!0):!1;default:return!1}}function Qu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qu(e){if(Ge){var t=Wt;if(t){var n=t;if(!Y0(e,t)){if(Qu(e))throw Error(Z(418));t=ur(n.nextSibling);var r=Ht;t&&Y0(e,t)?e2(r,n):(e.flags=e.flags&-4097|2,Ge=!1,Ht=e)}}else{if(Qu(e))throw Error(Z(418));e.flags=e.flags&-4097|2,Ge=!1,Ht=e}}}function W0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function qo(e){if(e!==Ht)return!1;if(!Ge)return W0(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hu(e.type,e.memoizedProps)),t&&(t=Wt)){if(Qu(e))throw t2(),Error(Z(418));for(;t;)e2(e,t),t=ur(t.nextSibling)}if(W0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wt=ur(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wt=null}}else Wt=Ht?ur(e.stateNode.nextSibling):null;return!0}function t2(){for(var e=Wt;e;)e=ur(e.nextSibling)}function Oi(){Wt=Ht=null,Ge=!1}function dh(e){hn===null?hn=[e]:hn.push(e)}var c3=Yn.ReactCurrentBatchConfig;function os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function Zo(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function H0(e){var t=e._init;return t(e._payload)}function n2(e){function t(m,A){if(e){var x=m.deletions;x===null?(m.deletions=[A],m.flags|=16):x.push(A)}}function n(m,A){if(!e)return null;for(;A!==null;)t(m,A),A=A.sibling;return null}function r(m,A){for(m=new Map;A!==null;)A.key!==null?m.set(A.key,A):m.set(A.index,A),A=A.sibling;return m}function i(m,A){return m=mr(m,A),m.index=0,m.sibling=null,m}function s(m,A,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<A?(m.flags|=2,A):x):(m.flags|=2,A)):(m.flags|=1048576,A)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,A,x,w){return A===null||A.tag!==6?(A=zc(x,m.mode,w),A.return=m,A):(A=i(A,x),A.return=m,A)}function l(m,A,x,w){var b=x.type;return b===fi?u(m,A,x.props.children,w,x.key):A!==null&&(A.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qn&&H0(b)===A.type)?(w=i(A,x.props),w.ref=os(m,A,x),w.return=m,w):(w=Ea(x.type,x.key,x.props,null,m.mode,w),w.ref=os(m,A,x),w.return=m,w)}function c(m,A,x,w){return A===null||A.tag!==4||A.stateNode.containerInfo!==x.containerInfo||A.stateNode.implementation!==x.implementation?(A=jc(x,m.mode,w),A.return=m,A):(A=i(A,x.children||[]),A.return=m,A)}function u(m,A,x,w,b){return A===null||A.tag!==7?(A=jr(x,m.mode,w,b),A.return=m,A):(A=i(A,x),A.return=m,A)}function d(m,A,x){if(typeof A=="string"&&A!==""||typeof A=="number")return A=zc(""+A,m.mode,x),A.return=m,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case zo:return x=Ea(A.type,A.key,A.props,null,m.mode,x),x.ref=os(m,null,A),x.return=m,x;case hi:return A=jc(A,m.mode,x),A.return=m,A;case Qn:var w=A._init;return d(m,w(A._payload),x)}if(As(A)||ts(A))return A=jr(A,m.mode,x,null),A.return=m,A;Zo(m,A)}return null}function h(m,A,x,w){var b=A!==null?A.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:a(m,A,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zo:return x.key===b?l(m,A,x,w):null;case hi:return x.key===b?c(m,A,x,w):null;case Qn:return b=x._init,h(m,A,b(x._payload),w)}if(As(x)||ts(x))return b!==null?null:u(m,A,x,w,null);Zo(m,x)}return null}function f(m,A,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(x)||null,a(A,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zo:return m=m.get(w.key===null?x:w.key)||null,l(A,m,w,b);case hi:return m=m.get(w.key===null?x:w.key)||null,c(A,m,w,b);case Qn:var y=w._init;return f(m,A,x,y(w._payload),b)}if(As(w)||ts(w))return m=m.get(x)||null,u(A,m,w,b,null);Zo(A,w)}return null}function p(m,A,x,w){for(var b=null,y=null,C=A,S=A=0,E=null;C!==null&&S<x.length;S++){C.index>S?(E=C,C=null):E=C.sibling;var T=h(m,C,x[S],w);if(T===null){C===null&&(C=E);break}e&&C&&T.alternate===null&&t(m,C),A=s(T,A,S),y===null?b=T:y.sibling=T,y=T,C=E}if(S===x.length)return n(m,C),Ge&&Ir(m,S),b;if(C===null){for(;S<x.length;S++)C=d(m,x[S],w),C!==null&&(A=s(C,A,S),y===null?b=C:y.sibling=C,y=C);return Ge&&Ir(m,S),b}for(C=r(m,C);S<x.length;S++)E=f(C,m,S,x[S],w),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?S:E.key),A=s(E,A,S),y===null?b=E:y.sibling=E,y=E);return e&&C.forEach(function(F){return t(m,F)}),Ge&&Ir(m,S),b}function g(m,A,x,w){var b=ts(x);if(typeof b!="function")throw Error(Z(150));if(x=b.call(x),x==null)throw Error(Z(151));for(var y=b=null,C=A,S=A=0,E=null,T=x.next();C!==null&&!T.done;S++,T=x.next()){C.index>S?(E=C,C=null):E=C.sibling;var F=h(m,C,T.value,w);if(F===null){C===null&&(C=E);break}e&&C&&F.alternate===null&&t(m,C),A=s(F,A,S),y===null?b=F:y.sibling=F,y=F,C=E}if(T.done)return n(m,C),Ge&&Ir(m,S),b;if(C===null){for(;!T.done;S++,T=x.next())T=d(m,T.value,w),T!==null&&(A=s(T,A,S),y===null?b=T:y.sibling=T,y=T);return Ge&&Ir(m,S),b}for(C=r(m,C);!T.done;S++,T=x.next())T=f(C,m,S,T.value,w),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?S:T.key),A=s(T,A,S),y===null?b=T:y.sibling=T,y=T);return e&&C.forEach(function(M){return t(m,M)}),Ge&&Ir(m,S),b}function v(m,A,x,w){if(typeof x=="object"&&x!==null&&x.type===fi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case zo:e:{for(var b=x.key,y=A;y!==null;){if(y.key===b){if(b=x.type,b===fi){if(y.tag===7){n(m,y.sibling),A=i(y,x.props.children),A.return=m,m=A;break e}}else if(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qn&&H0(b)===y.type){n(m,y.sibling),A=i(y,x.props),A.ref=os(m,y,x),A.return=m,m=A;break e}n(m,y);break}else t(m,y);y=y.sibling}x.type===fi?(A=jr(x.props.children,m.mode,w,x.key),A.return=m,m=A):(w=Ea(x.type,x.key,x.props,null,m.mode,w),w.ref=os(m,A,x),w.return=m,m=w)}return o(m);case hi:e:{for(y=x.key;A!==null;){if(A.key===y)if(A.tag===4&&A.stateNode.containerInfo===x.containerInfo&&A.stateNode.implementation===x.implementation){n(m,A.sibling),A=i(A,x.children||[]),A.return=m,m=A;break e}else{n(m,A);break}else t(m,A);A=A.sibling}A=jc(x,m.mode,w),A.return=m,m=A}return o(m);case Qn:return y=x._init,v(m,A,y(x._payload),w)}if(As(x))return p(m,A,x,w);if(ts(x))return g(m,A,x,w);Zo(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,A!==null&&A.tag===6?(n(m,A.sibling),A=i(A,x),A.return=m,m=A):(n(m,A),A=zc(x,m.mode,w),A.return=m,m=A),o(m)):n(m,A)}return v}var zi=n2(!0),r2=n2(!1),ol=wr(null),al=null,yi=null,hh=null;function fh(){hh=yi=al=null}function mh(e){var t=ol.current;Ve(ol),e._currentValue=t}function Zu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t){al=e,hh=yi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bt=!0),e.firstContext=null)}function tn(e){var t=e._currentValue;if(hh!==e)if(e={context:e,memoizedValue:t,next:null},yi===null){if(al===null)throw Error(Z(308));yi=e,al.dependencies={lanes:0,firstContext:e}}else yi=yi.next=e;return t}var Vr=null;function ph(e){Vr===null?Vr=[e]:Vr.push(e)}function i2(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ph(t)):(n.next=i.next,i.next=n),t.interleaved=n,zn(e,r)}function zn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qn=!1;function gh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,zn(e,n)}return i=r.interleaved,i===null?(t.next=t,ph(r)):(t.next=i.next,i.next=t),r.interleaved=t,zn(e,n)}function xa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,th(e,n)}}function X0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ll(e,t,n,r){var i=e.updateQueue;qn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ke({},d,h);break e;case 2:qn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Kr|=o,e.lanes=o,e.memoizedState=d}}function K0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Eo={},Cn=wr(Eo),Js=wr(Eo),$s=wr(Eo);function Ur(e){if(e===Eo)throw Error(Z(174));return e}function Ah(e,t){switch(Re($s,t),Re(Js,e),Re(Cn,Eo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ru(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ru(t,e)}Ve(Cn),Re(Cn,t)}function ji(){Ve(Cn),Ve(Js),Ve($s)}function o2(e){Ur($s.current);var t=Ur(Cn.current),n=Ru(t,e.type);t!==n&&(Re(Js,e),Re(Cn,n))}function vh(e){Js.current===e&&(Ve(Cn),Ve(Js))}var We=wr(0);function cl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kc=[];function xh(){for(var e=0;e<kc.length;e++)kc[e]._workInProgressVersionPrimary=null;kc.length=0}var wa=Yn.ReactCurrentDispatcher,Bc=Yn.ReactCurrentBatchConfig,Xr=0,He=null,rt=null,lt=null,ul=!1,Ns=!1,eo=0,u3=0;function wt(){throw Error(Z(321))}function wh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gn(e[n],t[n]))return!1;return!0}function yh(e,t,n,r,i,s){if(Xr=s,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wa.current=e===null||e.memoizedState===null?m3:p3,e=n(r,i),Ns){s=0;do{if(Ns=!1,eo=0,25<=s)throw Error(Z(301));s+=1,lt=rt=null,t.updateQueue=null,wa.current=g3,e=n(r,i)}while(Ns)}if(wa.current=dl,t=rt!==null&&rt.next!==null,Xr=0,lt=rt=He=null,ul=!1,t)throw Error(Z(300));return e}function bh(){var e=eo!==0;return eo=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?He.memoizedState=lt=e:lt=lt.next=e,lt}function nn(){if(rt===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=lt===null?He.memoizedState:lt.next;if(t!==null)lt=t,rt=e;else{if(e===null)throw Error(Z(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},lt===null?He.memoizedState=lt=e:lt=lt.next=e}return lt}function to(e,t){return typeof t=="function"?t(e):t}function Vc(e){var t=nn(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=rt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Xr&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,He.lanes|=u,Kr|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,gn(r,t.memoizedState)||(Bt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,He.lanes|=s,Kr|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Uc(e){var t=nn(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);gn(s,t.memoizedState)||(Bt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function a2(){}function l2(e,t){var n=He,r=nn(),i=t(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Bt=!0),r=r.queue,Ch(d2.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,no(9,u2.bind(null,n,r,i,t),void 0,null),ut===null)throw Error(Z(349));Xr&30||c2(n,t,i)}return i}function c2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function u2(e,t,n,r){t.value=n,t.getSnapshot=r,h2(t)&&f2(e)}function d2(e,t,n){return n(function(){h2(t)&&f2(e)})}function h2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gn(e,n)}catch{return!0}}function f2(e){var t=zn(e,1);t!==null&&pn(t,e,1,-1)}function _0(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:e},t.queue=e,e=e.dispatch=f3.bind(null,He,e),[t.memoizedState,e]}function no(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function m2(){return nn().memoizedState}function ya(e,t,n,r){var i=xn();He.flags|=e,i.memoizedState=no(1|t,n,void 0,r===void 0?null:r)}function zl(e,t,n,r){var i=nn();r=r===void 0?null:r;var s=void 0;if(rt!==null){var o=rt.memoizedState;if(s=o.destroy,r!==null&&wh(r,o.deps)){i.memoizedState=no(t,n,s,r);return}}He.flags|=e,i.memoizedState=no(1|t,n,s,r)}function Q0(e,t){return ya(8390656,8,e,t)}function Ch(e,t){return zl(2048,8,e,t)}function p2(e,t){return zl(4,2,e,t)}function g2(e,t){return zl(4,4,e,t)}function A2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function v2(e,t,n){return n=n!=null?n.concat([e]):null,zl(4,4,A2.bind(null,t,e),n)}function Sh(){}function x2(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function w2(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function y2(e,t,n){return Xr&21?(gn(n,t)||(n=Mp(),He.lanes|=n,Kr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=n)}function d3(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var r=Bc.transition;Bc.transition={};try{e(!1),t()}finally{Fe=n,Bc.transition=r}}function b2(){return nn().memoizedState}function h3(e,t,n){var r=fr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C2(e))S2(t,n);else if(n=i2(e,t,n,r),n!==null){var i=Tt();pn(n,e,r,i),E2(n,t,r)}}function f3(e,t,n){var r=fr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C2(e))S2(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,gn(a,o)){var l=t.interleaved;l===null?(i.next=i,ph(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=i2(e,t,i,r),n!==null&&(i=Tt(),pn(n,e,r,i),E2(n,t,r))}}function C2(e){var t=e.alternate;return e===He||t!==null&&t===He}function S2(e,t){Ns=ul=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function E2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,th(e,n)}}var dl={readContext:tn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},m3={readContext:tn,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:tn,useEffect:Q0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ya(4194308,4,A2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4194308,4,e,t)},useInsertionEffect:function(e,t){return ya(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=h3.bind(null,He,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:_0,useDebugValue:Sh,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=_0(!1),t=e[0];return e=d3.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=He,i=xn();if(Ge){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),ut===null)throw Error(Z(349));Xr&30||c2(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Q0(d2.bind(null,r,s,e),[e]),r.flags|=2048,no(9,u2.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=xn(),t=ut.identifierPrefix;if(Ge){var n=Pn,r=Rn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=u3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},p3={readContext:tn,useCallback:x2,useContext:tn,useEffect:Ch,useImperativeHandle:v2,useInsertionEffect:p2,useLayoutEffect:g2,useMemo:w2,useReducer:Vc,useRef:m2,useState:function(){return Vc(to)},useDebugValue:Sh,useDeferredValue:function(e){var t=nn();return y2(t,rt.memoizedState,e)},useTransition:function(){var e=Vc(to)[0],t=nn().memoizedState;return[e,t]},useMutableSource:a2,useSyncExternalStore:l2,useId:b2,unstable_isNewReconciler:!1},g3={readContext:tn,useCallback:x2,useContext:tn,useEffect:Ch,useImperativeHandle:v2,useInsertionEffect:p2,useLayoutEffect:g2,useMemo:w2,useReducer:Uc,useRef:m2,useState:function(){return Uc(to)},useDebugValue:Sh,useDeferredValue:function(e){var t=nn();return rt===null?t.memoizedState=e:y2(t,rt.memoizedState,e)},useTransition:function(){var e=Uc(to)[0],t=nn().memoizedState;return[e,t]},useMutableSource:a2,useSyncExternalStore:l2,useId:b2,unstable_isNewReconciler:!1};function cn(e,t){if(e&&e.defaultProps){t=Ke({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ju(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jl={isMounted:function(e){return(e=e._reactInternals)?Jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=fr(e),s=Bn(r,i);s.payload=t,n!=null&&(s.callback=n),t=dr(e,s,i),t!==null&&(pn(t,e,i,r),xa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=fr(e),s=Bn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=dr(e,s,i),t!==null&&(pn(t,e,i,r),xa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),r=fr(e),i=Bn(n,r);i.tag=2,t!=null&&(i.callback=t),t=dr(e,i,r),t!==null&&(pn(t,e,r,n),xa(t,e,r))}};function q0(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!_s(n,r)||!_s(i,s):!0}function M2(e,t,n){var r=!1,i=vr,s=t.contextType;return typeof s=="object"&&s!==null?s=tn(s):(i=Ut(t)?Wr:St.current,r=t.contextTypes,s=(r=r!=null)?Li(e,i):vr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Z0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jl.enqueueReplaceState(t,t.state,null)}function $u(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},gh(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=tn(s):(s=Ut(t)?Wr:St.current,i.context=Li(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ju(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&jl.enqueueReplaceState(i,i.state,null),ll(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gi(e,t){try{var n="",r=t;do n+=Ww(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Lc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ed(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var A3=typeof WeakMap=="function"?WeakMap:Map;function D2(e,t,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){fl||(fl=!0,ud=r),ed(e,t)},n}function T2(e,t,n){n=Bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ed(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ed(e,t),typeof r!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function J0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new A3;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=R3.bind(null,e,t,n),t.then(e,e))}function $0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function em(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Bn(-1,1),t.tag=2,dr(n,t,1))),n.lanes|=1),e)}var v3=Yn.ReactCurrentOwner,Bt=!1;function Mt(e,t,n,r){t.child=e===null?r2(t,null,n,r):zi(t,e.child,n,r)}function tm(e,t,n,r,i){n=n.render;var s=t.ref;return Fi(t,i),r=yh(e,t,n,r,s,i),n=bh(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jn(e,t,i)):(Ge&&n&&ch(t),t.flags|=1,Mt(e,t,r,i),t.child)}function nm(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Ph(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,I2(e,t,s,r,i)):(e=Ea(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_s,n(o,r)&&e.ref===t.ref)return jn(e,t,i)}return t.flags|=1,e=mr(s,r),e.ref=t.ref,e.return=t,t.child=e}function I2(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(_s(s,r)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Bt=!0);else return t.lanes=e.lanes,jn(e,t,i)}return td(e,t,n,r,i)}function F2(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Ci,Yt),Yt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Ci,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Re(Ci,Yt),Yt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Re(Ci,Yt),Yt|=r;return Mt(e,t,i,n),t.child}function R2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function td(e,t,n,r,i){var s=Ut(n)?Wr:St.current;return s=Li(t,s),Fi(t,i),n=yh(e,t,n,r,s,i),r=bh(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jn(e,t,i)):(Ge&&r&&ch(t),t.flags|=1,Mt(e,t,n,i),t.child)}function rm(e,t,n,r,i){if(Ut(n)){var s=!0;rl(t)}else s=!1;if(Fi(t,i),t.stateNode===null)ba(e,t),M2(t,n,r),$u(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tn(c):(c=Ut(n)?Wr:St.current,c=Li(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Z0(t,o,r,c),qn=!1;var h=t.memoizedState;o.state=h,ll(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Vt.current||qn?(typeof u=="function"&&(Ju(t,n,u,r),l=t.memoizedState),(a=qn||q0(t,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,s2(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:cn(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=Ut(n)?Wr:St.current,l=Li(t,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Z0(t,o,r,l),qn=!1,h=t.memoizedState,o.state=h,ll(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Vt.current||qn?(typeof f=="function"&&(Ju(t,n,f,r),p=t.memoizedState),(c=qn||q0(t,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return nd(e,t,n,r,s,i)}function nd(e,t,n,r,i,s){R2(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&G0(t,n,!1),jn(e,t,s);r=t.stateNode,v3.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=zi(t,e.child,null,s),t.child=zi(t,null,a,s)):Mt(e,t,a,s),t.memoizedState=r.state,i&&G0(t,n,!0),t.child}function P2(e){var t=e.stateNode;t.pendingContext?j0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&j0(e,t.context,!1),Ah(e,t.containerInfo)}function im(e,t,n,r,i){return Oi(),dh(i),t.flags|=256,Mt(e,t,n,r),t.child}var rd={dehydrated:null,treeContext:null,retryLane:0};function id(e){return{baseLanes:e,cachePool:null,transitions:null}}function N2(e,t,n){var r=t.pendingProps,i=We.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Re(We,i&1),e===null)return qu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wl(o,r,0,null),e=jr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=id(n),t.memoizedState=rd,e):Eh(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return x3(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=mr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=mr(a,s):(s=jr(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?id(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=rd,r}return s=e.child,e=s.sibling,r=mr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Eh(e,t){return t=Wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jo(e,t,n,r){return r!==null&&dh(r),zi(t,e.child,null,n),e=Eh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x3(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Lc(Error(Z(422))),Jo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Wl({mode:"visible",children:r.children},i,0,null),s=jr(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&zi(t,e.child,null,o),t.child.memoizedState=id(o),t.memoizedState=rd,s);if(!(t.mode&1))return Jo(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Lc(s,r,void 0),Jo(e,t,o,r)}if(a=(o&e.childLanes)!==0,Bt||a){if(r=ut,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zn(e,i),pn(r,e,i,-1))}return Rh(),r=Lc(Error(Z(421))),Jo(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=P3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wt=ur(i.nextSibling),Ht=t,Ge=!0,hn=null,e!==null&&(Qt[qt++]=Rn,Qt[qt++]=Pn,Qt[qt++]=Hr,Rn=e.id,Pn=e.overflow,Hr=t),t=Eh(t,r.children),t.flags|=4096,t)}function sm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Zu(e.return,t,n)}function Oc(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function k2(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(e,t,r.children,n),r=We.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sm(e,n,t);else if(e.tag===19)sm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(We,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&cl(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Oc(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&cl(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Oc(t,!0,n,null,s);break;case"together":Oc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=mr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function w3(e,t,n){switch(t.tag){case 3:P2(t),Oi();break;case 5:o2(t);break;case 1:Ut(t.type)&&rl(t);break;case 4:Ah(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Re(ol,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(We,We.current&1),t.flags|=128,null):n&t.child.childLanes?N2(e,t,n):(Re(We,We.current&1),e=jn(e,t,n),e!==null?e.sibling:null);Re(We,We.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return k2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(We,We.current),r)break;return null;case 22:case 23:return t.lanes=0,F2(e,t,n)}return jn(e,t,n)}var B2,sd,V2,U2;B2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sd=function(){};V2=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ur(Cn.current);var s=null;switch(n){case"input":i=Du(e,i),r=Du(e,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=Fu(e,i),r=Fu(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=tl)}Pu(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(js.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(js.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};U2=function(e,t,n,r){n!==r&&(t.flags|=4)};function as(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function y3(e,t,n){var r=t.pendingProps;switch(uh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return Ut(t.type)&&nl(),yt(t),null;case 3:return r=t.stateNode,ji(),Ve(Vt),Ve(St),xh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(fd(hn),hn=null))),sd(e,t),yt(t),null;case 5:vh(t);var i=Ur($s.current);if(n=t.type,e!==null&&t.stateNode!=null)V2(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return yt(t),null}if(e=Ur(Cn.current),qo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[yn]=t,r[Zs]=s,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<xs.length;i++)ke(xs[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":m0(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":g0(r,s),ke("invalid",r)}Pu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,a,e),i=["children",""+a]):js.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":jo(r),p0(r,s,!0);break;case"textarea":jo(r),A0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[yn]=t,e[Zs]=r,B2(e,t,!1,!1),t.stateNode=e;e:{switch(o=Nu(n,r),n){case"dialog":ke("cancel",e),ke("close",e),i=r;break;case"iframe":case"object":case"embed":ke("load",e),i=r;break;case"video":case"audio":for(i=0;i<xs.length;i++)ke(xs[i],e);i=r;break;case"source":ke("error",e),i=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),i=r;break;case"details":ke("toggle",e),i=r;break;case"input":m0(e,r),i=Du(e,r),ke("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),ke("invalid",e);break;case"textarea":g0(e,r),i=Fu(e,r),ke("invalid",e);break;default:i=r}Pu(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?mp(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hp(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Gs(e,l):typeof l=="number"&&Gs(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(js.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",e):l!=null&&Qd(e,s,l,o))}switch(n){case"input":jo(e),p0(e,r,!1);break;case"textarea":jo(e),A0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ar(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Mi(e,!!r.multiple,s,!1):r.defaultValue!=null&&Mi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yt(t),null;case 6:if(e&&t.stateNode!=null)U2(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(n=Ur($s.current),Ur(Cn.current),qo(t)){if(r=t.stateNode,n=t.memoizedProps,r[yn]=t,(s=r.nodeValue!==n)&&(e=Ht,e!==null))switch(e.tag){case 3:Qo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=t,t.stateNode=r}return yt(t),null;case 13:if(Ve(We),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Wt!==null&&t.mode&1&&!(t.flags&128))t2(),Oi(),t.flags|=98560,s=!1;else if(s=qo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Z(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[yn]=t}else Oi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yt(t),s=!1}else hn!==null&&(fd(hn),hn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||We.current&1?st===0&&(st=3):Rh())),t.updateQueue!==null&&(t.flags|=4),yt(t),null);case 4:return ji(),sd(e,t),e===null&&Qs(t.stateNode.containerInfo),yt(t),null;case 10:return mh(t.type._context),yt(t),null;case 17:return Ut(t.type)&&nl(),yt(t),null;case 19:if(Ve(We),s=t.memoizedState,s===null)return yt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)as(s,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=cl(e),o!==null){for(t.flags|=128,as(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(We,We.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ze()>Yi&&(t.flags|=128,r=!0,as(s,!1),t.lanes=4194304)}else{if(!r)if(e=cl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),as(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return yt(t),null}else 2*Ze()-s.renderingStartTime>Yi&&n!==1073741824&&(t.flags|=128,r=!0,as(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=We.current,Re(We,r?n&1|2:n&1),t):(yt(t),null);case 22:case 23:return Fh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yt&1073741824&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function b3(e,t){switch(uh(t),t.tag){case 1:return Ut(t.type)&&nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),Ve(Vt),Ve(St),xh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vh(t),null;case 13:if(Ve(We),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(We),null;case 4:return ji(),null;case 10:return mh(t.type._context),null;case 22:case 23:return Fh(),null;case 24:return null;default:return null}}var $o=!1,Ct=!1,C3=typeof WeakSet=="function"?WeakSet:Set,re=null;function bi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function od(e,t,n){try{n()}catch(r){_e(e,t,r)}}var om=!1;function S3(e,t){if(Yu=Ja,e=Gp(),lh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wu={focusedElem:e,selectionRange:n},Ja=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=t.stateNode,A=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:cn(t.type,g),v);m.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(w){_e(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return p=om,om=!1,p}function ks(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&od(t,n,s)}i=i.next}while(i!==r)}}function Gl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ad(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function L2(e){var t=e.alternate;t!==null&&(e.alternate=null,L2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yn],delete t[Zs],delete t[Ku],delete t[o3],delete t[a3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function O2(e){return e.tag===5||e.tag===3||e.tag===4}function am(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||O2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tl));else if(r!==4&&(e=e.child,e!==null))for(ld(e,t,n),e=e.sibling;e!==null;)ld(e,t,n),e=e.sibling}function cd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cd(e,t,n),e=e.sibling;e!==null;)cd(e,t,n),e=e.sibling}var pt=null,un=!1;function Hn(e,t,n){for(n=n.child;n!==null;)z2(e,t,n),n=n.sibling}function z2(e,t,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:Ct||bi(n,t);case 6:var r=pt,i=un;pt=null,Hn(e,t,n),pt=r,un=i,pt!==null&&(un?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(un?(e=pt,n=n.stateNode,e.nodeType===8?Pc(e.parentNode,n):e.nodeType===1&&Pc(e,n),Xs(e)):Pc(pt,n.stateNode));break;case 4:r=pt,i=un,pt=n.stateNode.containerInfo,un=!0,Hn(e,t,n),pt=r,un=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&od(n,t,o),i=i.next}while(i!==r)}Hn(e,t,n);break;case 1:if(!Ct&&(bi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_e(n,t,a)}Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Hn(e,t,n),Ct=r):Hn(e,t,n);break;default:Hn(e,t,n)}}function lm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new C3),t.forEach(function(r){var i=N3.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function on(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:pt=a.stateNode,un=!1;break e;case 3:pt=a.stateNode.containerInfo,un=!0;break e;case 4:pt=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(pt===null)throw Error(Z(160));z2(s,o,i),pt=null,un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){_e(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)j2(t,e),t=t.sibling}function j2(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(on(t,e),An(e),r&4){try{ks(3,e,e.return),Gl(3,e)}catch(g){_e(e,e.return,g)}try{ks(5,e,e.return)}catch(g){_e(e,e.return,g)}}break;case 1:on(t,e),An(e),r&512&&n!==null&&bi(n,n.return);break;case 5:if(on(t,e),An(e),r&512&&n!==null&&bi(n,n.return),e.flags&32){var i=e.stateNode;try{Gs(i,"")}catch(g){_e(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cp(i,s),Nu(a,o);var c=Nu(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?mp(i,d):u==="dangerouslySetInnerHTML"?hp(i,d):u==="children"?Gs(i,d):Qd(i,u,d,c)}switch(a){case"input":Tu(i,s);break;case"textarea":up(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Mi(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Mi(i,!!s.multiple,s.defaultValue,!0):Mi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zs]=s}catch(g){_e(e,e.return,g)}}break;case 6:if(on(t,e),An(e),r&4){if(e.stateNode===null)throw Error(Z(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){_e(e,e.return,g)}}break;case 3:if(on(t,e),An(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(t.containerInfo)}catch(g){_e(e,e.return,g)}break;case 4:on(t,e),An(e);break;case 13:on(t,e),An(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Th=Ze())),r&4&&lm(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ct=(c=Ct)||u,on(t,e),Ct=c):on(t,e),An(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(re=e,u=e.child;u!==null;){for(d=re=u;re!==null;){switch(h=re,f=h.child,h.tag){case 0:case 11:case 14:case 15:ks(4,h,h.return);break;case 1:bi(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){_e(r,n,g)}}break;case 5:bi(h,h.return);break;case 22:if(h.memoizedState!==null){um(d);continue}}f!==null?(f.return=h,re=f):um(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fp("display",o))}catch(g){_e(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){_e(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(t,e),An(e),r&4&&lm(e);break;case 21:break;default:on(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(O2(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gs(i,""),r.flags&=-33);var s=am(e);cd(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=am(e);ld(e,a,o);break;default:throw Error(Z(161))}}catch(l){_e(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function E3(e,t,n){re=e,G2(e)}function G2(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$o;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=$o;var c=Ct;if($o=o,(Ct=l)&&!c)for(re=i;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?dm(i):l!==null?(l.return=o,re=l):dm(i);for(;s!==null;)re=s,G2(s),s=s.sibling;re=i,$o=a,Ct=c}cm(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):cm(e)}}function cm(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||Gl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:cn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&K0(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}K0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Xs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ct||t.flags&512&&ad(t)}catch(h){_e(t,t.return,h)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function um(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function dm(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gl(4,t)}catch(l){_e(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){_e(t,i,l)}}var s=t.return;try{ad(t)}catch(l){_e(t,s,l)}break;case 5:var o=t.return;try{ad(t)}catch(l){_e(t,o,l)}}}catch(l){_e(t,t.return,l)}if(t===e){re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,re=a;break}re=t.return}}var M3=Math.ceil,hl=Yn.ReactCurrentDispatcher,Mh=Yn.ReactCurrentOwner,$t=Yn.ReactCurrentBatchConfig,ye=0,ut=null,et=null,gt=0,Yt=0,Ci=wr(0),st=0,ro=null,Kr=0,Yl=0,Dh=0,Bs=null,kt=null,Th=0,Yi=1/0,In=null,fl=!1,ud=null,hr=null,ea=!1,rr=null,ml=0,Vs=0,dd=null,Ca=-1,Sa=0;function Tt(){return ye&6?Ze():Ca!==-1?Ca:Ca=Ze()}function fr(e){return e.mode&1?ye&2&&gt!==0?gt&-gt:c3.transition!==null?(Sa===0&&(Sa=Mp()),Sa):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:Np(e.type)),e):1}function pn(e,t,n,r){if(50<Vs)throw Vs=0,dd=null,Error(Z(185));bo(e,n,r),(!(ye&2)||e!==ut)&&(e===ut&&(!(ye&2)&&(Yl|=n),st===4&&$n(e,gt)),Lt(e,r),n===1&&ye===0&&!(t.mode&1)&&(Yi=Ze()+500,Ol&&yr()))}function Lt(e,t){var n=e.callbackNode;c5(e,t);var r=Za(e,e===ut?gt:0);if(r===0)n!==null&&w0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&w0(n),t===1)e.tag===0?l3(hm.bind(null,e)):Jp(hm.bind(null,e)),i3(function(){!(ye&6)&&yr()}),n=null;else{switch(Dp(r)){case 1:n=eh;break;case 4:n=Sp;break;case 16:n=qa;break;case 536870912:n=Ep;break;default:n=qa}n=q2(n,Y2.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Y2(e,t){if(Ca=-1,Sa=0,ye&6)throw Error(Z(327));var n=e.callbackNode;if(Ri()&&e.callbackNode!==n)return null;var r=Za(e,e===ut?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=pl(e,r);else{t=r;var i=ye;ye|=2;var s=H2();(ut!==e||gt!==t)&&(In=null,Yi=Ze()+500,zr(e,t));do try{I3();break}catch(a){W2(e,a)}while(!0);fh(),hl.current=s,ye=i,et!==null?t=0:(ut=null,gt=0,t=st)}if(t!==0){if(t===2&&(i=Lu(e),i!==0&&(r=i,t=hd(e,i))),t===1)throw n=ro,zr(e,0),$n(e,r),Lt(e,Ze()),n;if(t===6)$n(e,r);else{if(i=e.current.alternate,!(r&30)&&!D3(i)&&(t=pl(e,r),t===2&&(s=Lu(e),s!==0&&(r=s,t=hd(e,s))),t===1))throw n=ro,zr(e,0),$n(e,r),Lt(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Z(345));case 2:Fr(e,kt,In);break;case 3:if($n(e,r),(r&130023424)===r&&(t=Th+500-Ze(),10<t)){if(Za(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Xu(Fr.bind(null,e,kt,In),t);break}Fr(e,kt,In);break;case 4:if($n(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-mn(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*M3(r/1960))-r,10<r){e.timeoutHandle=Xu(Fr.bind(null,e,kt,In),r);break}Fr(e,kt,In);break;case 5:Fr(e,kt,In);break;default:throw Error(Z(329))}}}return Lt(e,Ze()),e.callbackNode===n?Y2.bind(null,e):null}function hd(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(zr(e,t).flags|=256),e=pl(e,t),e!==2&&(t=kt,kt=n,t!==null&&fd(t)),e}function fd(e){kt===null?kt=e:kt.push.apply(kt,e)}function D3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $n(e,t){for(t&=~Dh,t&=~Yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mn(t),r=1<<n;e[n]=-1,t&=~r}}function hm(e){if(ye&6)throw Error(Z(327));Ri();var t=Za(e,0);if(!(t&1))return Lt(e,Ze()),null;var n=pl(e,t);if(e.tag!==0&&n===2){var r=Lu(e);r!==0&&(t=r,n=hd(e,r))}if(n===1)throw n=ro,zr(e,0),$n(e,t),Lt(e,Ze()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,kt,In),Lt(e,Ze()),null}function Ih(e,t){var n=ye;ye|=1;try{return e(t)}finally{ye=n,ye===0&&(Yi=Ze()+500,Ol&&yr())}}function _r(e){rr!==null&&rr.tag===0&&!(ye&6)&&Ri();var t=ye;ye|=1;var n=$t.transition,r=Fe;try{if($t.transition=null,Fe=1,e)return e()}finally{Fe=r,$t.transition=n,ye=t,!(ye&6)&&yr()}}function Fh(){Yt=Ci.current,Ve(Ci)}function zr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,r3(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(uh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nl();break;case 3:ji(),Ve(Vt),Ve(St),xh();break;case 5:vh(r);break;case 4:ji();break;case 13:Ve(We);break;case 19:Ve(We);break;case 10:mh(r.type._context);break;case 22:case 23:Fh()}n=n.return}if(ut=e,et=e=mr(e.current,null),gt=Yt=t,st=0,ro=null,Dh=Yl=Kr=0,kt=Bs=null,Vr!==null){for(t=0;t<Vr.length;t++)if(n=Vr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vr=null}return e}function W2(e,t){do{var n=et;try{if(fh(),wa.current=dl,ul){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ul=!1}if(Xr=0,lt=rt=He=null,Ns=!1,eo=0,Mh.current=null,n===null||n.return===null){st=1,ro=t,et=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=$0(o);if(f!==null){f.flags&=-257,em(f,o,a,s,t),f.mode&1&&J0(s,c,t),t=f,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){J0(s,c,t),Rh();break e}l=Error(Z(426))}}else if(Ge&&a.mode&1){var v=$0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),em(v,o,a,s,t),dh(Gi(l,a));break e}}s=l=Gi(l,a),st!==4&&(st=2),Bs===null?Bs=[s]:Bs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=D2(s,l,t);X0(s,m);break e;case 1:a=l;var A=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(hr===null||!hr.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=T2(s,a,t);X0(s,w);break e}}s=s.return}while(s!==null)}K2(n)}catch(b){t=b,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function H2(){var e=hl.current;return hl.current=dl,e===null?dl:e}function Rh(){(st===0||st===3||st===2)&&(st=4),ut===null||!(Kr&268435455)&&!(Yl&268435455)||$n(ut,gt)}function pl(e,t){var n=ye;ye|=2;var r=H2();(ut!==e||gt!==t)&&(In=null,zr(e,t));do try{T3();break}catch(i){W2(e,i)}while(!0);if(fh(),ye=n,hl.current=r,et!==null)throw Error(Z(261));return ut=null,gt=0,st}function T3(){for(;et!==null;)X2(et)}function I3(){for(;et!==null&&!e5();)X2(et)}function X2(e){var t=Q2(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?K2(e):et=t,Mh.current=null}function K2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=b3(n,t),n!==null){n.flags&=32767,et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,et=null;return}}else if(n=y3(n,t,Yt),n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);st===0&&(st=5)}function Fr(e,t,n){var r=Fe,i=$t.transition;try{$t.transition=null,Fe=1,F3(e,t,n,r)}finally{$t.transition=i,Fe=r}return null}function F3(e,t,n,r){do Ri();while(rr!==null);if(ye&6)throw Error(Z(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(u5(e,s),e===ut&&(et=ut=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ea||(ea=!0,q2(qa,function(){return Ri(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$t.transition,$t.transition=null;var o=Fe;Fe=1;var a=ye;ye|=4,Mh.current=null,S3(e,n),j2(n,e),q5(Wu),Ja=!!Yu,Wu=Yu=null,e.current=n,E3(n),t5(),ye=a,Fe=o,$t.transition=s}else e.current=n;if(ea&&(ea=!1,rr=e,ml=i),s=e.pendingLanes,s===0&&(hr=null),i5(n.stateNode),Lt(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fl)throw fl=!1,e=ud,ud=null,e;return ml&1&&e.tag!==0&&Ri(),s=e.pendingLanes,s&1?e===dd?Vs++:(Vs=0,dd=e):Vs=0,yr(),null}function Ri(){if(rr!==null){var e=Dp(ml),t=$t.transition,n=Fe;try{if($t.transition=null,Fe=16>e?16:e,rr===null)var r=!1;else{if(e=rr,rr=null,ml=0,ye&6)throw Error(Z(331));var i=ye;for(ye|=4,re=e.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(re=c;re!==null;){var u=re;switch(u.tag){case 0:case 11:case 15:ks(8,u,s)}var d=u.child;if(d!==null)d.return=u,re=d;else for(;re!==null;){u=re;var h=u.sibling,f=u.return;if(L2(u),u===c){re=null;break}if(h!==null){h.return=f,re=h;break}re=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ks(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,re=m;break e}re=s.return}}var A=e.current;for(re=A;re!==null;){o=re;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,re=x;else e:for(o=A;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gl(9,a)}}catch(b){_e(a,a.return,b)}if(a===o){re=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,re=w;break e}re=a.return}}if(ye=i,yr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(kl,e)}catch{}r=!0}return r}finally{Fe=n,$t.transition=t}}return!1}function fm(e,t,n){t=Gi(n,t),t=D2(e,t,1),e=dr(e,t,1),t=Tt(),e!==null&&(bo(e,1,t),Lt(e,t))}function _e(e,t,n){if(e.tag===3)fm(e,e,n);else for(;t!==null;){if(t.tag===3){fm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hr===null||!hr.has(r))){e=Gi(n,e),e=T2(t,e,1),t=dr(t,e,1),e=Tt(),t!==null&&(bo(t,1,e),Lt(t,e));break}}t=t.return}}function R3(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(gt&n)===n&&(st===4||st===3&&(gt&130023424)===gt&&500>Ze()-Th?zr(e,0):Dh|=n),Lt(e,t)}function _2(e,t){t===0&&(e.mode&1?(t=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):t=1);var n=Tt();e=zn(e,t),e!==null&&(bo(e,t,n),Lt(e,n))}function P3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_2(e,n)}function N3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(t),_2(e,n)}var Q2;Q2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)Bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Bt=!1,w3(e,t,n);Bt=!!(e.flags&131072)}else Bt=!1,Ge&&t.flags&1048576&&$p(t,sl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ba(e,t),e=t.pendingProps;var i=Li(t,St.current);Fi(t,n),i=yh(null,t,r,e,i,n);var s=bh();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ut(r)?(s=!0,rl(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gh(t),i.updater=jl,t.stateNode=i,i._reactInternals=t,$u(t,r,e,n),t=nd(null,t,r,!0,s,n)):(t.tag=0,Ge&&s&&ch(t),Mt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ba(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=B3(r),e=cn(r,e),i){case 0:t=td(null,t,r,e,n);break e;case 1:t=rm(null,t,r,e,n);break e;case 11:t=tm(null,t,r,e,n);break e;case 14:t=nm(null,t,r,cn(r.type,e),n);break e}throw Error(Z(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:cn(r,i),td(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:cn(r,i),rm(e,t,r,i,n);case 3:e:{if(P2(t),e===null)throw Error(Z(387));r=t.pendingProps,s=t.memoizedState,i=s.element,s2(e,t),ll(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Gi(Error(Z(423)),t),t=im(e,t,r,n,i);break e}else if(r!==i){i=Gi(Error(Z(424)),t),t=im(e,t,r,n,i);break e}else for(Wt=ur(t.stateNode.containerInfo.firstChild),Ht=t,Ge=!0,hn=null,n=r2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===i){t=jn(e,t,n);break e}Mt(e,t,r,n)}t=t.child}return t;case 5:return o2(t),e===null&&qu(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Hu(r,i)?o=null:s!==null&&Hu(r,s)&&(t.flags|=32),R2(e,t),Mt(e,t,o,n),t.child;case 6:return e===null&&qu(t),null;case 13:return N2(e,t,n);case 4:return Ah(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zi(t,null,r,n):Mt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:cn(r,i),tm(e,t,r,i,n);case 7:return Mt(e,t,t.pendingProps,n),t.child;case 8:return Mt(e,t,t.pendingProps.children,n),t.child;case 12:return Mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Re(ol,r._currentValue),r._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===i.children&&!Vt.current){t=jn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Bn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Zu(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Zu(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Fi(t,n),i=tn(i),r=r(i),t.flags|=1,Mt(e,t,r,n),t.child;case 14:return r=t.type,i=cn(r,t.pendingProps),i=cn(r.type,i),nm(e,t,r,i,n);case 15:return I2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:cn(r,i),ba(e,t),t.tag=1,Ut(r)?(e=!0,rl(t)):e=!1,Fi(t,n),M2(t,r,i),$u(t,r,i,n),nd(null,t,r,!0,e,n);case 19:return k2(e,t,n);case 22:return F2(e,t,n)}throw Error(Z(156,t.tag))};function q2(e,t){return Cp(e,t)}function k3(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,n,r){return new k3(e,t,n,r)}function Ph(e){return e=e.prototype,!(!e||!e.isReactComponent)}function B3(e){if(typeof e=="function")return Ph(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zd)return 11;if(e===Jd)return 14}return 2}function mr(e,t){var n=e.alternate;return n===null?(n=Jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ea(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Ph(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fi:return jr(n.children,i,s,t);case qd:o=8,i|=8;break;case Cu:return e=Jt(12,n,t,i|2),e.elementType=Cu,e.lanes=s,e;case Su:return e=Jt(13,n,t,i),e.elementType=Su,e.lanes=s,e;case Eu:return e=Jt(19,n,t,i),e.elementType=Eu,e.lanes=s,e;case op:return Wl(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ip:o=10;break e;case sp:o=9;break e;case Zd:o=11;break e;case Jd:o=14;break e;case Qn:o=16,r=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=Jt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function jr(e,t,n,r){return e=Jt(7,e,r,t),e.lanes=n,e}function Wl(e,t,n,r){return e=Jt(22,e,r,t),e.elementType=op,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return e=Jt(6,e,null,t),e.lanes=n,e}function jc(e,t,n){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function V3(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yc(0),this.expirationTimes=yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nh(e,t,n,r,i,s,o,a,l){return e=new V3(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Jt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gh(s),e}function U3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Z2(e){if(!e)return vr;e=e._reactInternals;e:{if(Jr(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if(Ut(n))return Zp(e,n,t)}return t}function J2(e,t,n,r,i,s,o,a,l){return e=Nh(n,r,!0,e,i,s,o,a,l),e.context=Z2(null),n=e.current,r=Tt(),i=fr(n),s=Bn(r,i),s.callback=t??null,dr(n,s,i),e.current.lanes=i,bo(e,i,r),Lt(e,r),e}function Hl(e,t,n,r){var i=t.current,s=Tt(),o=fr(i);return n=Z2(n),t.context===null?t.context=n:t.pendingContext=n,t=Bn(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dr(i,t,o),e!==null&&(pn(e,i,o,s),xa(e,i,o)),o}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kh(e,t){mm(e,t),(e=e.alternate)&&mm(e,t)}function L3(){return null}var $2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bh(e){this._internalRoot=e}Xl.prototype.render=Bh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));Hl(e,t,null,null)};Xl.prototype.unmount=Bh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_r(function(){Hl(null,e,null,null)}),t[On]=null}};function Xl(e){this._internalRoot=e}Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jn.length&&t!==0&&t<Jn[n].priority;n++);Jn.splice(n,0,e),n===0&&Pp(e)}};function Vh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pm(){}function O3(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=gl(o);s.call(c)}}var o=J2(t,r,e,0,null,!1,!1,"",pm);return e._reactRootContainer=o,e[On]=o.current,Qs(e.nodeType===8?e.parentNode:e),_r(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=gl(l);a.call(c)}}var l=Nh(e,0,!1,null,null,!1,!1,"",pm);return e._reactRootContainer=l,e[On]=l.current,Qs(e.nodeType===8?e.parentNode:e),_r(function(){Hl(t,l,n,r)}),l}function _l(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=gl(o);a.call(l)}}Hl(t,o,e,i)}else o=O3(n,t,e,i,r);return gl(o)}Tp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vs(t.pendingLanes);n!==0&&(th(t,n|1),Lt(t,Ze()),!(ye&6)&&(Yi=Ze()+500,yr()))}break;case 13:_r(function(){var r=zn(e,1);if(r!==null){var i=Tt();pn(r,e,1,i)}}),kh(e,1)}};nh=function(e){if(e.tag===13){var t=zn(e,134217728);if(t!==null){var n=Tt();pn(t,e,134217728,n)}kh(e,134217728)}};Ip=function(e){if(e.tag===13){var t=fr(e),n=zn(e,t);if(n!==null){var r=Tt();pn(n,e,t,r)}kh(e,t)}};Fp=function(){return Fe};Rp=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}};Bu=function(e,t,n){switch(t){case"input":if(Tu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ll(r);if(!i)throw Error(Z(90));lp(r),Tu(r,i)}}}break;case"textarea":up(e,n);break;case"select":t=n.value,t!=null&&Mi(e,!!n.multiple,t,!1)}};Ap=Ih;vp=_r;var z3={usingClientEntryPoint:!1,Events:[So,Ai,Ll,pp,gp,Ih]},ls={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j3={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yp(e),e===null?null:e.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||L3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{kl=ta.inject(j3),bn=ta}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z3;Kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vh(t))throw Error(Z(200));return U3(e,t,null,n)};Kt.createRoot=function(e,t){if(!Vh(e))throw Error(Z(299));var n=!1,r="",i=$2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Nh(e,1,!1,null,null,n,!1,r,i),e[On]=t.current,Qs(e.nodeType===8?e.parentNode:e),new Bh(t)};Kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=yp(t),e=e===null?null:e.stateNode,e};Kt.flushSync=function(e){return _r(e)};Kt.hydrate=function(e,t,n){if(!Kl(t))throw Error(Z(200));return _l(null,e,t,!0,n)};Kt.hydrateRoot=function(e,t,n){if(!Vh(e))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=J2(t,null,e,1,n??null,i,!1,s,o),e[On]=t.current,Qs(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)};Kt.render=function(e,t,n){if(!Kl(t))throw Error(Z(200));return _l(null,e,t,!1,n)};Kt.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(Z(40));return e._reactRootContainer?(_r(function(){_l(null,null,e,!1,function(){e._reactRootContainer=null,e[On]=null})}),!0):!1};Kt.unstable_batchedUpdates=Ih;Kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kl(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return _l(e,t,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function eg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eg)}catch(e){console.error(e)}}eg(),ep.exports=Kt;var G3=ep.exports,tg,gm=G3;tg=gm.createRoot,gm.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Am="popstate";function Y3(e={}){function t(i,s){let{pathname:o="/",search:a="",hash:l=""}=$r(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),md("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:io(s))}function r(i,s){rn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return H3(t,n,r,e)}function Xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function W3(){return Math.random().toString(36).substring(2,10)}function vm(e,t){return{usr:e.state,key:e.key,idx:t}}function md(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?$r(t):t,state:n,key:t&&t.key||r||W3()}}function io({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function $r(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function H3(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let v=u(),m=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:m})}function h(v,m){a="PUSH";let A=md(g.location,v,m);n&&n(A,v),c=u()+1;let x=vm(A,c),w=g.createHref(A);try{o.pushState(x,"",w)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(w)}s&&l&&l({action:a,location:g.location,delta:1})}function f(v,m){a="REPLACE";let A=md(g.location,v,m);n&&n(A,v),c=u();let x=vm(A,c),w=g.createHref(A);o.replaceState(x,"",w),s&&l&&l({action:a,location:g.location,delta:0})}function p(v){return X3(v)}let g={get action(){return a},get location(){return e(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Am,d),l=v,()=>{i.removeEventListener(Am,d),l=null}},createHref(v){return t(i,v)},createURL:p,encodeLocation(v){let m=p(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(v){return o.go(v)}};return g}function X3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:io(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function ng(e,t,n="/"){return K3(e,t,n,!1)}function K3(e,t,n,r){let i=typeof t=="string"?$r(t):t,s=Gn(i.pathname||"/",n);if(s==null)return null;let o=rg(e);_3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=s4(s);a=r4(o[l],c,r)}return a}function rg(e,t=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;Xe(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let d=Vn([r,u.relativePath]),h=n.concat(u);o.children&&o.children.length>0&&(Xe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),rg(o.children,t,h,d,l)),!(o.path==null&&!o.index)&&t.push({path:d,score:t4(d,o.index),routesMeta:h})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of ig(o.path))s(o,a,!0,c)}),t}function ig(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ig(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function _3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:n4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Q3=/^:[\w-]+$/,q3=3,Z3=2,J3=1,$3=10,e4=-2,xm=e=>e==="*";function t4(e,t){let n=e.split("/"),r=n.length;return n.some(xm)&&(r+=e4),t&&(r+=Z3),n.filter(i=>!xm(i)).reduce((i,s)=>i+(Q3.test(s)?q3:s===""?J3:$3),r)}function n4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function r4(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",d=Al({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Al({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Vn([s,d.pathname]),pathnameBase:u4(Vn([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Vn([s,d.pathnameBase]))}return o}function Al(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=i4(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return d&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function i4(e,t=!1,n=!0){rn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function s4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Gn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var o4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a4=e=>o4.test(e);function l4(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$r(e):e,s;if(n)if(a4(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),rn(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=wm(n.substring(1),"/"):s=wm(n,t)}else s=t;return{pathname:s,search:d4(r),hash:h4(i)}}function wm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gc(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function sg(e){let t=c4(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function og(e,t,n,r=!1){let i;typeof e=="string"?i=$r(e):(i={...e},Xe(!i.pathname||!i.pathname.includes("?"),Gc("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),Gc("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),Gc("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=l4(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Vn=e=>e.join("/").replace(/\/\/+/g,"/"),u4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),d4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,h4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function f4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ag=["POST","PUT","PATCH","DELETE"];new Set(ag);var m4=["GET",...ag];new Set(m4);var Qi=I.createContext(null);Qi.displayName="DataRouter";var Ql=I.createContext(null);Ql.displayName="DataRouterState";I.createContext(!1);var lg=I.createContext({isTransitioning:!1});lg.displayName="ViewTransition";var p4=I.createContext(new Map);p4.displayName="Fetchers";var g4=I.createContext(null);g4.displayName="Await";var Sn=I.createContext(null);Sn.displayName="Navigation";var Mo=I.createContext(null);Mo.displayName="Location";var Wn=I.createContext({outlet:null,matches:[],isDataRoute:!1});Wn.displayName="Route";var Uh=I.createContext(null);Uh.displayName="RouteError";function A4(e,{relative:t}={}){Xe(Do(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Sn),{hash:i,pathname:s,search:o}=To(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:Vn([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Do(){return I.useContext(Mo)!=null}function ei(){return Xe(Do(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Mo).location}var cg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ug(e){I.useContext(Sn).static||I.useLayoutEffect(e)}function v4(){let{isDataRoute:e}=I.useContext(Wn);return e?R4():x4()}function x4(){Xe(Do(),"useNavigate() may be used only in the context of a <Router> component.");let e=I.useContext(Qi),{basename:t,navigator:n}=I.useContext(Sn),{matches:r}=I.useContext(Wn),{pathname:i}=ei(),s=JSON.stringify(sg(r)),o=I.useRef(!1);return ug(()=>{o.current=!0}),I.useCallback((l,c={})=>{if(rn(o.current,cg),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=og(l,JSON.parse(s),i,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Vn([t,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[t,n,s,i,e])}I.createContext(null);function To(e,{relative:t}={}){let{matches:n}=I.useContext(Wn),{pathname:r}=ei(),i=JSON.stringify(sg(n));return I.useMemo(()=>og(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function w4(e,t){return dg(e,t)}function dg(e,t,n,r,i){var A;Xe(Do(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext(Sn),{matches:o}=I.useContext(Wn),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";hg(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let h=ei(),f;if(t){let x=typeof t=="string"?$r(t):t;Xe(u==="/"||((A=x.pathname)==null?void 0:A.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=h;let p=f.pathname||"/",g=p;if(u!=="/"){let x=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=ng(e,{pathname:g});rn(d||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),rn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=E4(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Vn([u,s.encodeLocation?s.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Vn([u,s.encodeLocation?s.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,i);return t&&m?I.createElement(Mo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},m):m}function y4(){let e=F4(),t=f4(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,o)}var b4=I.createElement(y4,null),C4=class extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?I.createElement(Wn.Provider,{value:this.props.routeContext},I.createElement(Uh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S4({routeContext:e,match:t,children:n}){let r=I.useContext(Qi);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(Wn.Provider,{value:e},n)}function E4(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n==null?void 0:n.errors;if(o!=null){let u=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Xe(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&r?(u,d)=>{var h,f;r(u,{location:n.location,params:((f=(h=n.matches)==null?void 0:h[0])==null?void 0:f.params)??{},errorInfo:d})}:void 0;return s.reduceRight((u,d,h)=>{let f,p=!1,g=null,v=null;n&&(f=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||b4,a&&(l<0&&h===0?(hg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):l===h&&(p=!0,v=d.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,h+1)),A=()=>{let x;return f?x=g:p?x=v:d.route.Component?x=I.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,I.createElement(S4,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?I.createElement(C4,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:A(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):A()},null)}function Lh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M4(e){let t=I.useContext(Qi);return Xe(t,Lh(e)),t}function D4(e){let t=I.useContext(Ql);return Xe(t,Lh(e)),t}function T4(e){let t=I.useContext(Wn);return Xe(t,Lh(e)),t}function Oh(e){let t=T4(e),n=t.matches[t.matches.length-1];return Xe(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function I4(){return Oh("useRouteId")}function F4(){var r;let e=I.useContext(Uh),t=D4("useRouteError"),n=Oh("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function R4(){let{router:e}=M4("useNavigate"),t=Oh("useNavigate"),n=I.useRef(!1);return ug(()=>{n.current=!0}),I.useCallback(async(i,s={})=>{rn(n.current,cg),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var ym={};function hg(e,t,n){!t&&!ym[e]&&(ym[e]=!0,rn(!1,n))}I.memo(P4);function P4({routes:e,future:t,state:n,unstable_onError:r}){return dg(e,void 0,n,r,t)}function fg(e){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function N4({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Xe(!Do(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=I.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=$r(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,f=I.useMemo(()=>{let p=Gn(l,o);return p==null?null:{location:{pathname:p,search:c,hash:u,state:d,key:h},navigationType:r}},[o,l,c,u,d,h,r]);return rn(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:I.createElement(Sn.Provider,{value:a},I.createElement(Mo.Provider,{children:t,value:f}))}function k4({children:e,location:t}){return w4(pd(e),t)}function pd(e,t=[]){let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,pd(r.props.children,s));return}Xe(r.type===fg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pd(r.props.children,s)),n.push(o)}),n}var Ma="get",Da="application/x-www-form-urlencoded";function ql(e){return e!=null&&typeof e.tagName=="string"}function B4(e){return ql(e)&&e.tagName.toLowerCase()==="button"}function V4(e){return ql(e)&&e.tagName.toLowerCase()==="form"}function U4(e){return ql(e)&&e.tagName.toLowerCase()==="input"}function L4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O4(e,t){return e.button===0&&(!t||t==="_self")&&!L4(e)}var na=null;function z4(){if(na===null)try{new FormData(document.createElement("form"),0),na=!1}catch{na=!0}return na}var j4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yc(e){return e!=null&&!j4.has(e)?(rn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Da}"`),null):e}function G4(e,t){let n,r,i,s,o;if(V4(e)){let a=e.getAttribute("action");r=a?Gn(a,t):null,n=e.getAttribute("method")||Ma,i=Yc(e.getAttribute("enctype"))||Da,s=new FormData(e)}else if(B4(e)||U4(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Gn(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ma,i=Yc(e.getAttribute("formenctype"))||Yc(a.getAttribute("enctype"))||Da,s=new FormData(a,e),!z4()){let{name:c,type:u,value:d}=e;if(u==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,d)}}else{if(ql(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ma,r=null,i=Da,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zh(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Y4(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Gn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function W4(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function H4(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function X4(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await W4(s,n);return o.links?o.links():[]}return[]}));return q4(r.flat(1).filter(H4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bm(e,t,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?t.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function K4(e,t,{includeHydrateFallback:n}={}){return _4(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function _4(e){return[...new Set(e)]}function Q4(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function q4(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(Q4(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function mg(){let e=I.useContext(Qi);return zh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Z4(){let e=I.useContext(Ql);return zh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var jh=I.createContext(void 0);jh.displayName="FrameworkContext";function pg(){let e=I.useContext(jh);return zh(e,"You must render this element inside a <HydratedRouter> element"),e}function J4(e,t){let n=I.useContext(jh),[r,i]=I.useState(!1),[s,o]=I.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=I.useRef(null);I.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=m=>{m.forEach(A=>{o(A.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[e]),I.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,h,{}]:[s,h,{onFocus:cs(a,f),onBlur:cs(l,p),onMouseEnter:cs(c,f),onMouseLeave:cs(u,p),onTouchStart:cs(d,f)}]:[!1,h,{}]}function cs(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $4({page:e,...t}){let{router:n}=mg(),r=I.useMemo(()=>ng(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?I.createElement(ty,{page:e,matches:r,...t}):null}function ey(e){let{manifest:t,routeModules:n}=pg(),[r,i]=I.useState([]);return I.useEffect(()=>{let s=!1;return X4(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function ty({page:e,matches:t,...n}){let r=ei(),{manifest:i,routeModules:s}=pg(),{basename:o}=mg(),{loaderData:a,matches:l}=Z4(),c=I.useMemo(()=>bm(e,t,l,i,r,"data"),[e,t,l,i,r]),u=I.useMemo(()=>bm(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=I.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(t.forEach(m=>{var x;let A=i.routes[m.route.id];!A||!A.hasLoader||(!c.some(w=>w.route.id===m.route.id)&&m.route.id in a&&((x=s[m.route.id])!=null&&x.shouldRevalidate)||A.hasClientLoader?g=!0:p.add(m.route.id))}),p.size===0)return[];let v=Y4(e,o,"data");return g&&p.size>0&&v.searchParams.set("_routes",t.filter(m=>p.has(m.route.id)).map(m=>m.route.id).join(",")),[v.pathname+v.search]},[o,a,r,i,c,t,e,s]),h=I.useMemo(()=>K4(u,i),[u,i]),f=ey(u);return I.createElement(I.Fragment,null,d.map(p=>I.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>I.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>I.createElement("link",{key:p,nonce:n.nonce,...g})))}function ny(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var gg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gg&&(window.__reactRouterVersion="7.9.6")}catch{}function ry({basename:e,children:t,window:n}){let r=I.useRef();r.current==null&&(r.current=Y3({window:n,v5Compat:!0}));let i=r.current,[s,o]=I.useState({action:i.action,location:i.location}),a=I.useCallback(l=>{I.startTransition(()=>o(l))},[o]);return I.useLayoutEffect(()=>i.listen(a),[i,a]),I.createElement(N4,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var Ag=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vg=I.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},f){let{basename:p}=I.useContext(Sn),g=typeof c=="string"&&Ag.test(c),v,m=!1;if(typeof c=="string"&&g&&(v=c,gg))try{let E=new URL(window.location.href),T=c.startsWith("//")?new URL(E.protocol+c):new URL(c),F=Gn(T.pathname,p);T.origin===E.origin&&F!=null?c=F+T.search+T.hash:m=!0}catch{rn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=A4(c,{relative:i}),[x,w,b]=J4(r,h),y=ay(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function C(E){t&&t(E),E.defaultPrevented||y(E)}let S=I.createElement("a",{...h,...b,href:v||A,onClick:m||s?t:C,ref:ny(f,w),target:l,"data-discover":!g&&n==="render"?"true":void 0});return x&&!g?I.createElement(I.Fragment,null,S,I.createElement($4,{page:A})):S});vg.displayName="Link";var iy=I.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let d=To(o,{relative:c.relative}),h=ei(),f=I.useContext(Ql),{navigator:p,basename:g}=I.useContext(Sn),v=f!=null&&hy(d)&&a===!0,m=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,A=h.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(A=A.toLowerCase(),x=x?x.toLowerCase():null,m=m.toLowerCase()),x&&g&&(x=Gn(x,g)||x);const w=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let b=A===m||!i&&A.startsWith(m)&&A.charAt(w)==="/",y=x!=null&&(x===m||!i&&x.startsWith(m)&&x.charAt(m.length)==="/"),C={isActive:b,isPending:y,isTransitioning:v},S=b?t:void 0,E;typeof r=="function"?E=r(C):E=[r,b?"active":null,y?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T=typeof s=="function"?s(C):s;return I.createElement(vg,{...c,"aria-current":S,className:E,ref:u,style:T,to:o,viewTransition:a},typeof l=="function"?l(C):l)});iy.displayName="NavLink";var sy=I.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Ma,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=uy(),g=dy(a,{relative:c}),v=o.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&Ag.test(a),A=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let w=x.nativeEvent.submitter,b=(w==null?void 0:w.getAttribute("formmethod"))||o;p(w||x.currentTarget,{fetcherKey:t,method:b,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return I.createElement("form",{ref:f,method:v,action:g,onSubmit:r?l:A,...h,"data-discover":!m&&e==="render"?"true":void 0})});sy.displayName="Form";function oy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xg(e){let t=I.useContext(Qi);return Xe(t,oy(e)),t}function ay(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=v4(),l=ei(),c=To(e,{relative:s});return I.useCallback(u=>{if(O4(u,t)){u.preventDefault();let d=n!==void 0?n:io(l)===io(c);a(e,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,t,e,i,s,o])}var ly=0,cy=()=>`__${String(++ly)}__`;function uy(){let{router:e}=xg("useSubmit"),{basename:t}=I.useContext(Sn),n=I4();return I.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=G4(r,t);if(i.navigate===!1){let u=i.fetcherKey||cy();await e.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function dy(e,{relative:t}={}){let{basename:n}=I.useContext(Sn),r=I.useContext(Wn);Xe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...To(e||".",{relative:t})},o=ei();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Vn([n,s.pathname])),io(s)}function hy(e,{relative:t}={}){let n=I.useContext(lg);Xe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xg("useViewTransitionState"),i=To(e,{relative:t});if(!n.isTransitioning)return!1;let s=Gn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Gn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Al(i.pathname,o)!=null||Al(i.pathname,s)!=null}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),my=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Cm=e=>{const t=my(e);return t.charAt(0).toUpperCase()+t.slice(1)},wg=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),py=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>I.createElement("svg",{ref:l,...gy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:wg("lucide",i),...!s&&!py(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>I.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(e,t)=>{const n=I.forwardRef(({className:r,...i},s)=>I.createElement(Ay,{ref:s,iconNode:t,className:wg(`lucide-${fy(Cm(e))}`,`lucide-${e}`,r),...i}));return n.displayName=Cm(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],yg=Me("box",vy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Wc=Me("brain",xy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yy=Me("check",wy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Cy=Me("circle-dot",by);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ey=Me("columns-3",Sy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]],Sm=Me("contrast",My);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Em=Me("crosshair",Dy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Iy=Me("download",Ty);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hc=Me("eye-off",Fy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xc=Me("eye",Ry);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Ny=Me("file",Py);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]],By=Me("grid-2x2",ky);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Uy=Me("image",Vy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Oy=Me("maximize-2",Ly);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],jy=Me("moon",zy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Yy=Me("mouse-pointer",Gy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Hy=Me("move",Wy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ky=Me("panel-bottom",Xy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Qy=Me("panel-left",_y);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Zy=Me("panel-right",qy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Kc=Me("pencil",Jy);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],eb=Me("ruler",$y);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mm=Me("save",tb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rb=Me("settings",nb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sb=Me("square-pen",ib);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ab=Me("square",ob);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],cb=Me("sun",lb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Dm=Me("trash-2",ub);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],hb=Me("undo",db);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vl=Me("upload",fb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pb=Me("x",mb);function Tm(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Zl(...e){return t=>{let n=!1;const r=e.map(i=>{const s=Tm(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Tm(e[i],null)}}}}function dt(...e){return I.useCallback(Zl(...e),e)}var gb=Symbol.for("react.lazy"),xl=Xd[" use ".trim().toString()];function Ab(e){return typeof e=="object"&&e!==null&&"then"in e}function bg(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===gb&&"_payload"in e&&Ab(e._payload)}function Cg(e){const t=xb(e),n=I.forwardRef((r,i)=>{let{children:s,...o}=r;bg(s)&&typeof xl=="function"&&(s=xl(s._payload));const a=I.Children.toArray(s),l=a.find(yb);if(l){const c=l.props.children,u=a.map(d=>d===l?I.Children.count(c)>1?I.Children.only(null):I.isValidElement(c)?c.props.children:null:d);return D.jsx(t,{...o,ref:i,children:I.isValidElement(c)?I.cloneElement(c,void 0,u):null})}return D.jsx(t,{...o,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var vb=Cg("Slot");function xb(e){const t=I.forwardRef((n,r)=>{let{children:i,...s}=n;if(bg(i)&&typeof xl=="function"&&(i=xl(i._payload)),I.isValidElement(i)){const o=Cb(i),a=bb(s,i.props);return i.type!==I.Fragment&&(a.ref=r?Zl(r,o):o),I.cloneElement(i,a)}return I.Children.count(i)>1?I.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wb=Symbol("radix.slottable");function yb(e){return I.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wb}function bb(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Cb(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Sg(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Sg(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Eg(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Sg(e))&&(r&&(r+=" "),r+=t);return r}const Im=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Fm=Eg,Mg=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Fm(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=Im(u)||Im(d);return i[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(p=>{let[g,v]=p;return Array.isArray(v)?v.includes({...s,...a}[g]):{...s,...a}[g]===v})?[...c,d,h]:c},[]);return Fm(e,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Sb=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},Eb=(e,t)=>({classGroupId:e,validator:t}),Dg=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),wl="-",Rm=[],Mb="arbitrary..",Db=e=>{const t=Ib(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Tb(o);const a=o.split(wl),l=a[0]===""&&a.length>1?1:0;return Tg(a,l,t)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?Sb(c,l):l:c||Rm}return n[o]||Rm}}},Tg=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const i=e[t],s=n.nextPart.get(i);if(s){const c=Tg(e,t+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=t===0?e.join(wl):e.slice(t).join(wl),l=o.length;for(let c=0;c<l;c++){const u=o[c];if(u.validator(a))return u.classGroupId}},Tb=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?Mb+r:void 0})(),Ib=e=>{const{theme:t,classGroups:n}=e;return Fb(n,t)},Fb=(e,t)=>{const n=Dg();for(const r in e){const i=e[r];Gh(i,n,r,t)}return n},Gh=(e,t,n,r)=>{const i=e.length;for(let s=0;s<i;s++){const o=e[s];Rb(o,t,n,r)}},Rb=(e,t,n,r)=>{if(typeof e=="string"){Pb(e,t,n);return}if(typeof e=="function"){Nb(e,t,n,r);return}kb(e,t,n,r)},Pb=(e,t,n)=>{const r=e===""?t:Ig(t,e);r.classGroupId=n},Nb=(e,t,n,r)=>{if(Bb(e)){Gh(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(Eb(n,e))},kb=(e,t,n,r)=>{const i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];Gh(l,Ig(t,a),n,r)}},Ig=(e,t)=>{let n=e;const r=t.split(wl),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=Dg(),n.nextPart.set(o,a)),n=a}return n},Bb=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Vb=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},gd="!",Pm=":",Ub=[],Nm=(e,t,n,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),Lb=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let o=0,a=0,l=0,c;const u=i.length;for(let g=0;g<u;g++){const v=i[g];if(o===0&&a===0){if(v===Pm){s.push(i.slice(l,g)),l=g+1;continue}if(v==="/"){c=g;continue}}v==="["?o++:v==="]"?o--:v==="("?a++:v===")"&&a--}const d=s.length===0?i:i.slice(l);let h=d,f=!1;d.endsWith(gd)?(h=d.slice(0,-1),f=!0):d.startsWith(gd)&&(h=d.slice(1),f=!0);const p=c&&c>l?c-l:void 0;return Nm(s,f,h,p)};if(t){const i=t+Pm,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):Nm(Ub,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},Ob=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=t.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},zb=e=>({cache:Vb(e.cacheSize),parseClassName:Lb(e),sortModifiers:Ob(e),...Db(e)}),jb=/\s+/,Gb=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,o=[],a=e.trim().split(jb);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let v=!!g,m=r(v?p.substring(0,g):p);if(!m){if(!v){l=u+(l.length>0?" "+l:l);continue}if(m=r(p),!m){l=u+(l.length>0?" "+l:l);continue}v=!1}const A=h.length===0?"":h.length===1?h[0]:s(h).join(":"),x=f?A+gd:A,w=x+m;if(o.indexOf(w)>-1)continue;o.push(w);const b=i(m,v);for(let y=0;y<b.length;++y){const C=b[y];o.push(x+C)}l=u+(l.length>0?" "+l:l)}return l},Yb=(...e)=>{let t=0,n,r,i="";for(;t<e.length;)(n=e[t++])&&(r=Fg(n))&&(i&&(i+=" "),i+=r);return i},Fg=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Fg(e[r]))&&(n&&(n+=" "),n+=t);return n},Wb=(e,...t)=>{let n,r,i,s;const o=l=>{const c=t.reduce((u,d)=>d(u),e());return n=zb(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=Gb(l,n);return i(l,u),u};return s=o,(...l)=>s(Yb(...l))},Hb=[],nt=e=>{const t=n=>n[e]||Hb;return t.isThemeGetter=!0,t},Rg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Pg=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Xb=/^\d+\/\d+$/,Kb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_b=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,qb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Zb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oi=e=>Xb.test(e),pe=e=>!!e&&!Number.isNaN(Number(e)),Xn=e=>!!e&&Number.isInteger(Number(e)),_c=e=>e.endsWith("%")&&pe(e.slice(0,-1)),Dn=e=>Kb.test(e),Jb=()=>!0,$b=e=>_b.test(e)&&!Qb.test(e),Ng=()=>!1,eC=e=>qb.test(e),tC=e=>Zb.test(e),nC=e=>!ie(e)&&!se(e),rC=e=>qi(e,Vg,Ng),ie=e=>Rg.test(e),Dr=e=>qi(e,Ug,$b),Qc=e=>qi(e,lC,pe),km=e=>qi(e,kg,Ng),iC=e=>qi(e,Bg,tC),ra=e=>qi(e,Lg,eC),se=e=>Pg.test(e),us=e=>Zi(e,Ug),sC=e=>Zi(e,cC),Bm=e=>Zi(e,kg),oC=e=>Zi(e,Vg),aC=e=>Zi(e,Bg),ia=e=>Zi(e,Lg,!0),qi=(e,t,n)=>{const r=Rg.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Zi=(e,t,n=!1)=>{const r=Pg.exec(e);return r?r[1]?t(r[1]):n:!1},kg=e=>e==="position"||e==="percentage",Bg=e=>e==="image"||e==="url",Vg=e=>e==="length"||e==="size"||e==="bg-size",Ug=e=>e==="length",lC=e=>e==="number",cC=e=>e==="family-name",Lg=e=>e==="shadow",uC=()=>{const e=nt("color"),t=nt("font"),n=nt("text"),r=nt("font-weight"),i=nt("tracking"),s=nt("leading"),o=nt("breakpoint"),a=nt("container"),l=nt("spacing"),c=nt("radius"),u=nt("shadow"),d=nt("inset-shadow"),h=nt("text-shadow"),f=nt("drop-shadow"),p=nt("blur"),g=nt("perspective"),v=nt("aspect"),m=nt("ease"),A=nt("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],b=()=>[...w(),se,ie],y=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],S=()=>[se,ie,l],E=()=>[oi,"full","auto",...S()],T=()=>[Xn,"none","subgrid",se,ie],F=()=>["auto",{span:["full",Xn,se,ie]},Xn,se,ie],M=()=>[Xn,"auto",se,ie],B=()=>["auto","min","max","fr",se,ie],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...S()],G=()=>[oi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],L=()=>[e,se,ie],Y=()=>[...w(),Bm,km,{position:[se,ie]}],j=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",oC,rC,{size:[se,ie]}],X=()=>[_c,us,Dr],H=()=>["","none","full",c,se,ie],K=()=>["",pe,us,Dr],te=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[pe,_c,Bm,km],De=()=>["","none",p,se,ie],fe=()=>["none",pe,se,ie],Ce=()=>["none",pe,se,ie],Se=()=>[pe,se,ie],tt=()=>[oi,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Dn],breakpoint:[Dn],color:[Jb],container:[Dn],"drop-shadow":[Dn],ease:["in","out","in-out"],font:[nC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Dn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Dn],shadow:[Dn],spacing:["px",pe],text:[Dn],"text-shadow":[Dn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oi,ie,se,v]}],container:["container"],columns:[{columns:[pe,ie,se,a]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:y()}],"overflow-x":[{"overflow-x":y()}],"overflow-y":[{"overflow-y":y()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Xn,"auto",se,ie]}],basis:[{basis:[oi,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[pe,oi,"auto","initial","none",ie]}],grow:[{grow:["",pe,se,ie]}],shrink:[{shrink:["",pe,se,ie]}],order:[{order:[Xn,"first","last","none",se,ie]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[a,"screen",...G()]}],"min-w":[{"min-w":[a,"screen","none",...G()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",n,us,Dr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,se,Qc]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",_c,ie]}],"font-family":[{font:[sC,ie,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,se,ie]}],"line-clamp":[{"line-clamp":[pe,"none",se,Qc]}],leading:[{leading:[s,...S()]}],"list-image":[{"list-image":["none",se,ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",se,ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[pe,"from-font","auto",se,Dr]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[pe,"auto",se,ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se,ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se,ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:j()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xn,se,ie],radial:["",se,ie],conic:[Xn,se,ie]},aC,iC]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:K()}],"border-w-x":[{"border-x":K()}],"border-w-y":[{"border-y":K()}],"border-w-s":[{"border-s":K()}],"border-w-e":[{"border-e":K()}],"border-w-t":[{"border-t":K()}],"border-w-r":[{"border-r":K()}],"border-w-b":[{"border-b":K()}],"border-w-l":[{"border-l":K()}],"divide-x":[{"divide-x":K()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":K()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[pe,se,ie]}],"outline-w":[{outline:["",pe,us,Dr]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",u,ia,ra]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",d,ia,ra]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[pe,Dr]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":K()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",h,ia,ra]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[pe,se,ie]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[pe]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[se,ie]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[pe]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:j()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",se,ie]}],filter:[{filter:["","none",se,ie]}],blur:[{blur:De()}],brightness:[{brightness:[pe,se,ie]}],contrast:[{contrast:[pe,se,ie]}],"drop-shadow":[{"drop-shadow":["","none",f,ia,ra]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",pe,se,ie]}],"hue-rotate":[{"hue-rotate":[pe,se,ie]}],invert:[{invert:["",pe,se,ie]}],saturate:[{saturate:[pe,se,ie]}],sepia:[{sepia:["",pe,se,ie]}],"backdrop-filter":[{"backdrop-filter":["","none",se,ie]}],"backdrop-blur":[{"backdrop-blur":De()}],"backdrop-brightness":[{"backdrop-brightness":[pe,se,ie]}],"backdrop-contrast":[{"backdrop-contrast":[pe,se,ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",pe,se,ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[pe,se,ie]}],"backdrop-invert":[{"backdrop-invert":["",pe,se,ie]}],"backdrop-opacity":[{"backdrop-opacity":[pe,se,ie]}],"backdrop-saturate":[{"backdrop-saturate":[pe,se,ie]}],"backdrop-sepia":[{"backdrop-sepia":["",pe,se,ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",se,ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[pe,"initial",se,ie]}],ease:[{ease:["linear","initial",m,se,ie]}],delay:[{delay:[pe,se,ie]}],animate:[{animate:["none",A,se,ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,se,ie]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Se()}],"skew-x":[{"skew-x":Se()}],"skew-y":[{"skew-y":Se()}],transform:[{transform:[se,ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tt()}],"translate-x":[{"translate-x":tt()}],"translate-y":[{"translate-y":tt()}],"translate-z":[{"translate-z":tt()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se,ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se,ie]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[pe,us,Dr,Qc]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dC=Wb(uC);function Ie(...e){return dC(Eg(e))}const hC=Mg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ze({className:e,variant:t,size:n,asChild:r=!1,...i}){const s=r?vb:"button";return D.jsx(s,{"data-slot":"button",className:Ie(hC({variant:t,size:n,className:e})),...i})}function Ue(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function ti(e,t=[]){let n=[];function r(s,o){const a=I.createContext(o),l=n.length;n=[...n,o];const c=d=>{var m;const{scope:h,children:f,...p}=d,g=((m=h==null?void 0:h[e])==null?void 0:m[l])||a,v=I.useMemo(()=>p,Object.values(p));return D.jsx(g.Provider,{value:v,children:f})};c.displayName=s+"Provider";function u(d,h){var g;const f=((g=h==null?void 0:h[e])==null?void 0:g[l])||a,p=I.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return I.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,fC(i,...t)]}function fC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Vm(e){const t=mC(e),n=I.forwardRef((r,i)=>{const{children:s,...o}=r,a=I.Children.toArray(s),l=a.find(gC);if(l){const c=l.props.children,u=a.map(d=>d===l?I.Children.count(c)>1?I.Children.only(null):I.isValidElement(c)?c.props.children:null:d);return D.jsx(t,{...o,ref:i,children:I.isValidElement(c)?I.cloneElement(c,void 0,u):null})}return D.jsx(t,{...o,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function mC(e){const t=I.forwardRef((n,r)=>{const{children:i,...s}=n;if(I.isValidElement(i)){const o=vC(i),a=AC(s,i.props);return i.type!==I.Fragment&&(a.ref=r?Zl(r,o):o),I.cloneElement(i,a)}return I.Children.count(i)>1?I.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var pC=Symbol("radix.slottable");function gC(e){return I.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===pC}function AC(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function vC(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Og(e){const t=e+"CollectionProvider",[n,r]=ti(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:m}=g,A=it.useRef(null),x=it.useRef(new Map).current;return D.jsx(i,{scope:v,itemMap:x,collectionRef:A,children:m})};o.displayName=t;const a=e+"CollectionSlot",l=Vm(a),c=it.forwardRef((g,v)=>{const{scope:m,children:A}=g,x=s(a,m),w=dt(v,x.collectionRef);return D.jsx(l,{ref:w,children:A})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=Vm(u),f=it.forwardRef((g,v)=>{const{scope:m,children:A,...x}=g,w=it.useRef(null),b=dt(v,w),y=s(u,m);return it.useEffect(()=>(y.itemMap.set(w,{ref:w,...x}),()=>void y.itemMap.delete(w))),D.jsx(h,{[d]:"",ref:b,children:A})});f.displayName=u;function p(g){const v=s(e+"CollectionConsumer",g);return it.useCallback(()=>{const A=v.collectionRef.current;if(!A)return[];const x=Array.from(A.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((y,C)=>x.indexOf(y.ref.current)-x.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},p,r]}var Wi=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},xC=Xd[" useId ".trim().toString()]||(()=>{}),wC=0;function zg(e){const[t,n]=I.useState(xC());return Wi(()=>{n(r=>r??String(wC++))},[e]),e||(t?`radix-${t}`:"")}function yC(e){const t=bC(e),n=I.forwardRef((r,i)=>{const{children:s,...o}=r,a=I.Children.toArray(s),l=a.find(SC);if(l){const c=l.props.children,u=a.map(d=>d===l?I.Children.count(c)>1?I.Children.only(null):I.isValidElement(c)?c.props.children:null:d);return D.jsx(t,{...o,ref:i,children:I.isValidElement(c)?I.cloneElement(c,void 0,u):null})}return D.jsx(t,{...o,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function bC(e){const t=I.forwardRef((n,r)=>{const{children:i,...s}=n;if(I.isValidElement(i)){const o=MC(i),a=EC(s,i.props);return i.type!==I.Fragment&&(a.ref=r?Zl(r,o):o),I.cloneElement(i,a)}return I.Children.count(i)>1?I.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var CC=Symbol("radix.slottable");function SC(e){return I.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===CC}function EC(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function MC(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var DC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qe=DC.reduce((e,t)=>{const n=yC(`Primitive.${t}`),r=I.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function er(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}var TC=Xd[" useInsertionEffect ".trim().toString()]||Wi;function ni({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,o]=IC({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:i;{const u=I.useRef(e!==void 0);I.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=I.useCallback(u=>{var d;if(a){const h=FC(u)?u(e):u;h!==e&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,e,s,o]);return[l,c]}function IC({defaultProp:e,onChange:t}){const[n,r]=I.useState(e),i=I.useRef(n),s=I.useRef(t);return TC(()=>{s.current=t},[t]),I.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function FC(e){return typeof e=="function"}var RC=I.createContext(void 0);function Io(e){const t=I.useContext(RC);return e||t||"ltr"}var qc="rovingFocusGroup.onEntryFocus",PC={bubbles:!1,cancelable:!0},Fo="RovingFocusGroup",[Ad,jg,NC]=Og(Fo),[kC,Jl]=ti(Fo,[NC]),[BC,VC]=kC(Fo),Gg=I.forwardRef((e,t)=>D.jsx(Ad.Provider,{scope:e.__scopeRovingFocusGroup,children:D.jsx(Ad.Slot,{scope:e.__scopeRovingFocusGroup,children:D.jsx(UC,{...e,ref:t})})}));Gg.displayName=Fo;var UC=I.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=I.useRef(null),f=dt(t,h),p=Io(s),[g,v]=ni({prop:o,defaultProp:a??null,onChange:l,caller:Fo}),[m,A]=I.useState(!1),x=er(c),w=jg(n),b=I.useRef(!1),[y,C]=I.useState(0);return I.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(qc,x),()=>S.removeEventListener(qc,x)},[x]),D.jsx(BC,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:g,onItemFocus:I.useCallback(S=>v(S),[v]),onItemShiftTab:I.useCallback(()=>A(!0),[]),onFocusableItemAdd:I.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:I.useCallback(()=>C(S=>S-1),[]),children:D.jsx(qe.div,{tabIndex:m||y===0?-1:0,"data-orientation":r,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:Ue(e.onMouseDown,()=>{b.current=!0}),onFocus:Ue(e.onFocus,S=>{const E=!b.current;if(S.target===S.currentTarget&&E&&!m){const T=new CustomEvent(qc,PC);if(S.currentTarget.dispatchEvent(T),!T.defaultPrevented){const F=w().filter(U=>U.focusable),M=F.find(U=>U.active),B=F.find(U=>U.id===g),z=[M,B,...F].filter(Boolean).map(U=>U.ref.current);Hg(z,u)}}b.current=!1}),onBlur:Ue(e.onBlur,()=>A(!1))})})}),Yg="RovingFocusGroupItem",Wg=I.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=e,l=zg(),c=s||l,u=VC(Yg,n),d=u.currentTabStopId===c,h=jg(n),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=u;return I.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),D.jsx(Ad.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:D.jsx(qe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Ue(e.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:Ue(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ue(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const m=zC(v,u.orientation,u.dir);if(m!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=h().filter(w=>w.focusable).map(w=>w.ref.current);if(m==="last")x.reverse();else if(m==="prev"||m==="next"){m==="prev"&&x.reverse();const w=x.indexOf(v.currentTarget);x=u.loop?jC(x,w+1):x.slice(w+1)}setTimeout(()=>Hg(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});Wg.displayName=Yg;var LC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function OC(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zC(e,t,n){const r=OC(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LC[r]}function Hg(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function jC(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Xg=Gg,Kg=Wg;function GC(e,t){return I.useReducer((n,r)=>t[n][r]??n,e)}var ri=e=>{const{present:t,children:n}=e,r=YC(t),i=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),s=dt(r.ref,WC(i));return typeof n=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};ri.displayName="Presence";function YC(e){const[t,n]=I.useState(),r=I.useRef(null),i=I.useRef(e),s=I.useRef("none"),o=e?"mounted":"unmounted",[a,l]=GC(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const c=sa(r.current);s.current=a==="mounted"?c:"none"},[a]),Wi(()=>{const c=r.current,u=i.current;if(u!==e){const h=s.current,f=sa(c);e?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Wi(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=f=>{const g=sa(r.current).includes(CSS.escape(f.animationName));if(f.target===t&&g&&(l("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=f=>{f.target===t&&(s.current=sa(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function sa(e){return(e==null?void 0:e.animationName)||"none"}function WC(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var $l="Tabs",[HC]=ti($l,[Jl]),_g=Jl(),[XC,Yh]=HC($l),Qg=I.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=Io(a),[d,h]=ni({prop:r,onChange:i,defaultProp:s??"",caller:$l});return D.jsx(XC,{scope:n,baseId:zg(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:D.jsx(qe.div,{dir:u,"data-orientation":o,...c,ref:t})})});Qg.displayName=$l;var qg="TabsList",Zg=I.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=Yh(qg,n),o=_g(n);return D.jsx(Xg,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:D.jsx(qe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});Zg.displayName=qg;var Jg="TabsTrigger",$g=I.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,o=Yh(Jg,n),a=_g(n),l=nA(o.baseId,r),c=rA(o.baseId,r),u=r===o.value;return D.jsx(Kg,{asChild:!0,...a,focusable:!i,active:u,children:D.jsx(qe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:Ue(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ue(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ue(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});$g.displayName=Jg;var eA="TabsContent",tA=I.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=e,a=Yh(eA,n),l=nA(a.baseId,r),c=rA(a.baseId,r),u=r===a.value,d=I.useRef(u);return I.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),D.jsx(ri,{present:i||u,children:({present:h})=>D.jsx(qe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});tA.displayName=eA;function nA(e,t){return`${e}-trigger-${t}`}function rA(e,t){return`${e}-content-${t}`}var KC=Qg,_C=Zg,QC=$g,qC=tA;function ZC({className:e,...t}){return D.jsx(KC,{"data-slot":"tabs",className:Ie("flex flex-col gap-2",e),...t})}function JC({className:e,...t}){return D.jsx(_C,{"data-slot":"tabs-list",className:Ie("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Zc({className:e,...t}){return D.jsx(QC,{"data-slot":"tabs-trigger",className:Ie("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ds({className:e,...t}){return D.jsx(qC,{"data-slot":"tabs-content",className:Ie("flex-1 outline-none",e),...t})}function Wh(e,[t,n]){return Math.min(n,Math.max(t,e))}function $C(e,t){return I.useReducer((n,r)=>t[n][r]??n,e)}var Hh="ScrollArea",[iA]=ti(Hh),[e6,sn]=iA(Hh),sA=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,l]=I.useState(null),[c,u]=I.useState(null),[d,h]=I.useState(null),[f,p]=I.useState(null),[g,v]=I.useState(null),[m,A]=I.useState(0),[x,w]=I.useState(0),[b,y]=I.useState(!1),[C,S]=I.useState(!1),E=dt(t,F=>l(F)),T=Io(i);return D.jsx(e6,{scope:n,type:r,dir:T,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:b,onScrollbarXEnabledChange:y,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:C,onScrollbarYEnabledChange:S,onCornerWidthChange:A,onCornerHeightChange:w,children:D.jsx(qe.div,{dir:T,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":m+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});sA.displayName=Hh;var oA="ScrollAreaViewport",aA=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=e,o=sn(oA,n),a=I.useRef(null),l=dt(t,a,o.onViewportChange);return D.jsxs(D.Fragment,{children:[D.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),D.jsx(qe.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:D.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});aA.displayName=oA;var En="ScrollAreaScrollbar",lA=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sn(En,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?D.jsx(t6,{...r,ref:t,forceMount:n}):i.type==="scroll"?D.jsx(n6,{...r,ref:t,forceMount:n}):i.type==="auto"?D.jsx(cA,{...r,ref:t,forceMount:n}):i.type==="always"?D.jsx(Xh,{...r,ref:t}):null});lA.displayName=En;var t6=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sn(En,e.__scopeScrollArea),[s,o]=I.useState(!1);return I.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),D.jsx(ri,{present:n||s,children:D.jsx(cA,{"data-state":s?"visible":"hidden",...r,ref:t})})}),n6=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sn(En,e.__scopeScrollArea),s=e.orientation==="horizontal",o=tc(()=>l("SCROLL_END"),100),[a,l]=$C("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return I.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),I.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(l("SCROLL"),o()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l,o]),D.jsx(ri,{present:n||a!=="hidden",children:D.jsx(Xh,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ue(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ue(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),cA=I.forwardRef((e,t)=>{const n=sn(En,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",l=tc(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return Hi(n.viewport,l),Hi(n.content,l),D.jsx(ri,{present:r||s,children:D.jsx(Xh,{"data-state":s?"visible":"hidden",...i,ref:t})})}),Xh=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=sn(En,e.__scopeScrollArea),s=I.useRef(null),o=I.useRef(0),[a,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=mA(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,f){return l6(h,o.current,a,f)}return n==="horizontal"?D.jsx(r6,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,f=Um(h,a,i.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}}):n==="vertical"?D.jsx(i6,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,f=Um(h,a);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}}):null}),r6=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=sn(En,e.__scopeScrollArea),[o,a]=I.useState(),l=I.useRef(null),c=dt(t,l,s.onScrollbarXChange);return I.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),D.jsx(dA,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ec(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),gA(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:bl(o.paddingLeft),paddingEnd:bl(o.paddingRight)}})}})}),i6=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=sn(En,e.__scopeScrollArea),[o,a]=I.useState(),l=I.useRef(null),c=dt(t,l,s.onScrollbarYChange);return I.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),D.jsx(dA,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ec(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),gA(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:bl(o.paddingTop),paddingEnd:bl(o.paddingBottom)}})}})}),[s6,uA]=iA(En),dA=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,f=sn(En,n),[p,g]=I.useState(null),v=dt(t,E=>g(E)),m=I.useRef(null),A=I.useRef(""),x=f.viewport,w=r.content-r.viewport,b=er(u),y=er(l),C=tc(d,10);function S(E){if(m.current){const T=E.clientX-m.current.left,F=E.clientY-m.current.top;c({x:T,y:F})}}return I.useEffect(()=>{const E=T=>{const F=T.target;(p==null?void 0:p.contains(F))&&b(T,w)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[x,p,w,b]),I.useEffect(y,[r,y]),Hi(p,C),Hi(f.content,C),D.jsx(s6,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:er(s),onThumbPointerUp:er(o),onThumbPositionChange:y,onThumbPointerDown:er(a),children:D.jsx(qe.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Ue(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),m.current=p.getBoundingClientRect(),A.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),S(E))}),onPointerMove:Ue(e.onPointerMove,S),onPointerUp:Ue(e.onPointerUp,E=>{const T=E.target;T.hasPointerCapture(E.pointerId)&&T.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=A.current,f.viewport&&(f.viewport.style.scrollBehavior=""),m.current=null})})})}),yl="ScrollAreaThumb",hA=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uA(yl,e.__scopeScrollArea);return D.jsx(ri,{present:n||i.hasThumb,children:D.jsx(o6,{ref:t,...r})})}),o6=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=sn(yl,n),o=uA(yl,n),{onThumbPositionChange:a}=o,l=dt(t,d=>o.onThumbChange(d)),c=I.useRef(void 0),u=tc(()=>{c.current&&(c.current(),c.current=void 0)},100);return I.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!c.current){const f=c6(d,a);c.current=f,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,a]),D.jsx(qe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ue(e.onPointerDownCapture,d=>{const f=d.target.getBoundingClientRect(),p=d.clientX-f.left,g=d.clientY-f.top;o.onThumbPointerDown({x:p,y:g})}),onPointerUp:Ue(e.onPointerUp,o.onThumbPointerUp)})});hA.displayName=yl;var Kh="ScrollAreaCorner",fA=I.forwardRef((e,t)=>{const n=sn(Kh,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?D.jsx(a6,{...e,ref:t}):null});fA.displayName=Kh;var a6=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=sn(Kh,n),[s,o]=I.useState(0),[a,l]=I.useState(0),c=!!(s&&a);return Hi(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),Hi(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),c?D.jsx(qe.div,{...r,ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function bl(e){return e?parseInt(e,10):0}function mA(e,t){const n=e/t;return isNaN(n)?0:n}function ec(e){const t=mA(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function l6(e,t,n,r="ltr"){const i=ec(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return pA([l,c],d)(e)}function Um(e,t,n="ltr"){const r=ec(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=Wh(e,l);return pA([0,o],[0,a])(c)}function pA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function gA(e,t){return e>0&&e<t}var c6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function tc(e,t){const n=er(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Hi(e,t){const n=er(t);Wi(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var u6=sA,d6=aA,h6=fA;function hs({className:e,children:t,...n}){return D.jsxs(u6,{"data-slot":"scroll-area",className:Ie("relative",e),...n,children:[D.jsx(d6,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),D.jsx(f6,{}),D.jsx(h6,{})]})}function f6({className:e,orientation:t="vertical",...n}){return D.jsx(lA,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Ie("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:D.jsx(hA,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function AA(e){const t=I.useRef({value:e,previous:e});return I.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function vA(e){const[t,n]=I.useState(void 0);return Wi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var nc="Checkbox",[m6]=ti(nc),[p6,_h]=m6(nc);function g6(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[h,f]=ni({prop:n,defaultProp:i??!1,onChange:l,caller:nc}),[p,g]=I.useState(null),[v,m]=I.useState(null),A=I.useRef(!1),x=p?!!o||!!p.closest("form"):!0,w={checked:h,disabled:s,setChecked:f,control:p,setControl:g,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:A,required:c,defaultChecked:pr(i)?!1:i,isFormControl:x,bubbleInput:v,setBubbleInput:m};return D.jsx(p6,{scope:t,...w,children:A6(d)?d(w):r})}var xA="CheckboxTrigger",wA=I.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:s,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:f,bubbleInput:p}=_h(xA,e),g=dt(i,u),v=I.useRef(l);return I.useEffect(()=>{const m=s==null?void 0:s.form;if(m){const A=()=>d(v.current);return m.addEventListener("reset",A),()=>m.removeEventListener("reset",A)}},[s,d]),D.jsx(qe.button,{type:"button",role:"checkbox","aria-checked":pr(l)?"mixed":l,"aria-required":c,"data-state":MA(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Ue(t,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:Ue(n,m=>{d(A=>pr(A)?!0:!A),p&&f&&(h.current=m.isPropagationStopped(),h.current||m.stopPropagation())})})});wA.displayName=xA;var yA=I.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...d}=e;return D.jsx(g6,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>D.jsxs(D.Fragment,{children:[D.jsx(wA,{...d,ref:t,__scopeCheckbox:n}),h&&D.jsx(EA,{__scopeCheckbox:n})]})})});yA.displayName=nc;var bA="CheckboxIndicator",CA=I.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,s=_h(bA,n);return D.jsx(ri,{present:r||pr(s.checked)||s.checked===!0,children:D.jsx(qe.span,{"data-state":MA(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});CA.displayName=bA;var SA="CheckboxBubbleInput",EA=I.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:d,bubbleInput:h,setBubbleInput:f}=_h(SA,e),p=dt(n,f),g=AA(s),v=vA(r);I.useEffect(()=>{const A=h;if(!A)return;const x=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(x,"checked").set,y=!i.current;if(g!==s&&b){const C=new Event("click",{bubbles:y});A.indeterminate=pr(s),b.call(A,pr(s)?!1:s),A.dispatchEvent(C)}},[h,g,s,i]);const m=I.useRef(pr(s)?!1:s);return D.jsx(qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??m.current,required:a,disabled:l,name:c,value:u,form:d,...t,tabIndex:-1,ref:p,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});EA.displayName=SA;function A6(e){return typeof e=="function"}function pr(e){return e==="indeterminate"}function MA(e){return pr(e)?"indeterminate":e?"checked":"unchecked"}function Kn({className:e,...t}){return D.jsx(yA,{"data-slot":"checkbox",className:Ie("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:D.jsx(CA,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:D.jsx(yy,{className:"size-3.5"})})})}var v6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],x6=v6.reduce((e,t)=>{const n=Cg(`Primitive.${t}`),r=I.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),w6="Label",DA=I.forwardRef((e,t)=>D.jsx(x6.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));DA.displayName=w6;var y6=DA;function ft({className:e,...t}){return D.jsx(y6,{"data-slot":"label",className:Ie("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Si=I.forwardRef(({className:e,type:t,...n},r)=>D.jsx("input",{type:t,className:Ie("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Si.displayName="Input";const Jc=({open:e=!1,onOpenChange:t,children:n})=>(I.useEffect(()=>{const r=i=>{i.key==="Escape"&&e&&(t==null||t(!1))};return e&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e,t]),e?D.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[D.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>t==null?void 0:t(!1)}),D.jsx("div",{className:"relative",children:n})]}):null),Ta=I.forwardRef(({className:e,children:t,onClose:n,...r},i)=>D.jsxs("div",{ref:i,className:Ie("relative bg-background border rounded-lg shadow-lg p-6 w-full max-w-lg mx-4","animate-in fade-in-0 zoom-in-95",e),...r,children:[n&&D.jsx("button",{onClick:n,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:D.jsx(pb,{className:"h-4 w-4"})}),t]}));Ta.displayName="DialogContent";const $c=({className:e,...t})=>D.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left mb-4",e),...t}),Ia=I.forwardRef(({className:e,...t},n)=>D.jsx("h2",{ref:n,className:Ie("text-lg font-semibold leading-none tracking-tight",e),...t}));Ia.displayName="DialogTitle";const Fa=I.forwardRef(({className:e,...t},n)=>D.jsx("p",{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Fa.displayName="DialogDescription";const eu=({className:e,...t})=>D.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6",e),...t});var TA=["PageUp","PageDown"],IA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],FA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ji="Slider",[vd,b6,C6]=Og(Ji),[RA]=ti(Ji,[C6]),[S6,rc]=RA(Ji),PA=I.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...g}=e,v=I.useRef(new Set),m=I.useRef(0),x=o==="horizontal"?E6:M6,[w=[],b]=ni({prop:u,defaultProp:c,onChange:F=>{var B;(B=[...v.current][m.current])==null||B.focus(),d(F)}}),y=I.useRef(w);function C(F){const M=R6(w,F);T(F,M)}function S(F){T(F,m.current)}function E(){const F=y.current[m.current];w[m.current]!==F&&h(w)}function T(F,M,{commit:B}={commit:!1}){const P=B6(s),z=V6(Math.round((F-r)/s)*s+r,P),U=Wh(z,[r,i]);b((G=[])=>{const L=I6(G,U,M);if(k6(L,l*s)){m.current=L.indexOf(U);const Y=String(L)!==String(G);return Y&&B&&h(L),Y?L:G}else return G})}return D.jsx(S6,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:m,thumbs:v.current,values:w,orientation:o,form:p,children:D.jsx(vd.Provider,{scope:e.__scopeSlider,children:D.jsx(vd.Slot,{scope:e.__scopeSlider,children:D.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:t,onPointerDown:Ue(g.onPointerDown,()=>{a||(y.current=w)}),min:r,max:i,inverted:f,onSlideStart:a?void 0:C,onSlideMove:a?void 0:S,onSlideEnd:a?void 0:E,onHomeKeyDown:()=>!a&&T(r,0,{commit:!0}),onEndKeyDown:()=>!a&&T(i,w.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:M})=>{if(!a){const z=TA.includes(F.key)||F.shiftKey&&IA.includes(F.key)?10:1,U=m.current,G=w[U],L=s*z*M;T(G+L,U,{commit:!0})}}})})})})});PA.displayName=Ji;var[NA,kA]=RA(Ji,{startEdge:"left",endEdge:"right",size:"width",direction:1}),E6=I.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,h]=I.useState(null),f=dt(t,x=>h(x)),p=I.useRef(void 0),g=Io(i),v=g==="ltr",m=v&&!s||!v&&s;function A(x){const w=p.current||d.getBoundingClientRect(),b=[0,w.width],C=Qh(b,m?[n,r]:[r,n]);return p.current=w,C(x-w.left)}return D.jsx(NA,{scope:e.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width",children:D.jsx(BA,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const w=A(x.clientX);o==null||o(w)},onSlideMove:x=>{const w=A(x.clientX);a==null||a(w)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:x=>{const b=FA[m?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:b?-1:1})}})})}),M6=I.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=e,u=I.useRef(null),d=dt(t,u),h=I.useRef(void 0),f=!i;function p(g){const v=h.current||u.current.getBoundingClientRect(),m=[0,v.height],x=Qh(m,f?[r,n]:[n,r]);return h.current=v,x(g-v.top)}return D.jsx(NA,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:D.jsx(BA,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=p(g.clientY);s==null||s(v)},onSlideMove:g=>{const v=p(g.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const m=FA[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:m?-1:1})}})})}),BA=I.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=e,u=rc(Ji,n);return D.jsx(qe.span,{...c,ref:t,onKeyDown:Ue(e.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):TA.concat(IA).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Ue(e.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():r(d)}),onPointerMove:Ue(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Ue(e.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),VA="SliderTrack",UA=I.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=rc(VA,n);return D.jsx(qe.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});UA.displayName=VA;var xd="SliderRange",LA=I.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=rc(xd,n),s=kA(xd,n),o=I.useRef(null),a=dt(t,o),l=i.values.length,c=i.values.map(h=>jA(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return D.jsx(qe.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});LA.displayName=xd;var wd="SliderThumb",OA=I.forwardRef((e,t)=>{const n=b6(e.__scopeSlider),[r,i]=I.useState(null),s=dt(t,a=>i(a)),o=I.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return D.jsx(D6,{...e,ref:s,index:o})}),D6=I.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...s}=e,o=rc(wd,n),a=kA(wd,n),[l,c]=I.useState(null),u=dt(t,A=>c(A)),d=l?o.form||!!l.closest("form"):!0,h=vA(l),f=o.values[r],p=f===void 0?0:jA(f,o.min,o.max),g=F6(r,o.values.length),v=h==null?void 0:h[a.size],m=v?P6(v,p,a.direction):0;return I.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),D.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${m}px)`},children:[D.jsx(vd.ItemSlot,{scope:e.__scopeSlider,children:D.jsx(qe.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:Ue(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&D.jsx(zA,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},r)]})});OA.displayName=wd;var T6="RadioBubbleInput",zA=I.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const i=I.useRef(null),s=dt(i,r),o=AA(t);return I.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const d=new Event("input",{bubbles:!0});u.call(a,t),a.dispatchEvent(d)}},[o,t]),D.jsx(qe.input,{style:{display:"none"},...n,ref:s,defaultValue:t})});zA.displayName=T6;function I6(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,s)=>i-s)}function jA(e,t,n){const s=100/(n-t)*(e-t);return Wh(s,[0,100])}function F6(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function R6(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function P6(e,t,n){const r=e/2,s=Qh([0,50],[0,r]);return(r-s(t)*n)*n}function N6(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function k6(e,t){if(t>0){const n=N6(e);return Math.min(...n)>=t}return!0}function Qh(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function B6(e){return(String(e).split(".")[1]||"").length}function V6(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var U6=PA,L6=UA,O6=LA,z6=OA;function j6({className:e,defaultValue:t,value:n,min:r=0,max:i=100,...s}){const o=I.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,i],[n,t,r,i]);return D.jsxs(U6,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:i,className:Ie("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...s,children:[D.jsx(L6,{"data-slot":"slider-track",className:Ie("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:D.jsx(O6,{"data-slot":"slider-range",className:Ie("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(a,l)=>D.jsx(z6,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}const jt=I.forwardRef(({label:e,value:t,onValueChange:n,min:r=0,max:i=100,step:s=1,decimalPlaces:o=2,className:a,disabled:l=!1,...c},u)=>{const[d,h]=I.useState(t),f=I.useRef(),p=x=>Number(x.toFixed(o));I.useEffect(()=>{h(t)},[t]);const g=I.useCallback(x=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{n(x)},50)},[n]),v=x=>{const w=x[0];h(w),g(w)},m=x=>{const w=parseFloat(x.target.value);if(!isNaN(w)){const b=Math.min(Math.max(w,r),i);h(b),g(b)}},A=x=>{const w=parseFloat(x.target.value);(isNaN(w)||w<r||w>i)&&(h(t),x.target.value=t.toString())};return D.jsxs("div",{ref:u,className:Ie("space-y-2",a),...c,children:[D.jsx(ft,{className:"text-sm font-medium",children:e}),D.jsxs("div",{className:"flex items-center space-x-3",children:[D.jsx(j6,{value:[d],onValueChange:v,min:r,max:i,step:s,disabled:l,className:"flex-1"}),D.jsx(Si,{type:"number",value:p(d),onChange:m,onBlur:A,min:r,max:i,step:s,disabled:l,className:"w-20 text-center"})]})]})});jt.displayName="LabeledSliderWithInput";const Ra=I.forwardRef(({className:e,children:t,...n},r)=>D.jsx("select",{className:Ie("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n,children:t}));Ra.displayName="Select";var GA="Toggle",YA=I.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...s}=e,[o,a]=ni({prop:n,onChange:i,defaultProp:r??!1,caller:GA});return D.jsx(qe.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:Ue(e.onClick,()=>{e.disabled||a(!o)})})});YA.displayName=GA;var br="ToggleGroup",[WA]=ti(br,[Jl]),HA=Jl(),qh=it.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const i=r;return D.jsx(G6,{...i,ref:t})}if(n==="multiple"){const i=r;return D.jsx(Y6,{...i,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${br}\``)});qh.displayName=br;var[XA,KA]=WA(br),G6=it.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=e,[o,a]=ni({prop:n,defaultProp:r??"",onChange:i,caller:br});return D.jsx(XA,{scope:e.__scopeToggleGroup,type:"single",value:it.useMemo(()=>o?[o]:[],[o]),onItemActivate:a,onItemDeactivate:it.useCallback(()=>a(""),[a]),children:D.jsx(_A,{...s,ref:t})})}),Y6=it.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=e,[o,a]=ni({prop:n,defaultProp:r??[],onChange:i,caller:br}),l=it.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=it.useCallback(u=>a((d=[])=>d.filter(h=>h!==u)),[a]);return D.jsx(XA,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:c,children:D.jsx(_A,{...s,ref:t})})});qh.displayName=br;var[W6,H6]=WA(br),_A=it.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:a=!0,...l}=e,c=HA(n),u=Io(o),d={role:"group",dir:u,...l};return D.jsx(W6,{scope:n,rovingFocus:i,disabled:r,children:i?D.jsx(Xg,{asChild:!0,...c,orientation:s,dir:u,loop:a,children:D.jsx(qe.div,{...d,ref:t})}):D.jsx(qe.div,{...d,ref:t})})}),Cl="ToggleGroupItem",QA=it.forwardRef((e,t)=>{const n=KA(Cl,e.__scopeToggleGroup),r=H6(Cl,e.__scopeToggleGroup),i=HA(e.__scopeToggleGroup),s=n.value.includes(e.value),o=r.disabled||e.disabled,a={...e,pressed:s,disabled:o},l=it.useRef(null);return r.rovingFocus?D.jsx(Kg,{asChild:!0,...i,focusable:!o,active:s,ref:l,children:D.jsx(Lm,{...a,ref:t})}):D.jsx(Lm,{...a,ref:t})});QA.displayName=Cl;var Lm=it.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...i}=e,s=KA(Cl,n),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=s.type==="single"?o:void 0;return D.jsx(YA,{...a,...i,ref:t,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),X6=qh,K6=QA;const _6=Mg("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),qA=I.createContext({size:"default",variant:"default"});function ZA({className:e,variant:t,size:n,children:r,...i}){return D.jsx(X6,{"data-slot":"toggle-group","data-variant":t,"data-size":n,className:Ie("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...i,children:D.jsx(qA.Provider,{value:{variant:t,size:n},children:r})})}function Rr({className:e,children:t,variant:n,size:r,...i}){const s=I.useContext(qA);return D.jsx(K6,{"data-slot":"toggle-group-item","data-variant":s.variant||n,"data-size":s.size||r,className:Ie(_6({variant:s.variant||n,size:s.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",e),...i,children:t})}const Q6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QAMQBwAP8c8a2UAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAAB3RJTUUH4AEUExQQFfKCQgAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAACcElEQVRIx5XWT4hXVRQH8M9vxmlKzE2CVqJiMgUzGUoLQQXN1iqI5EJQGUJIRURBDF20aSMRJFGgtGjhwkWUiEkKuhBSzDaJCFI0VCr4Lx3UmhF/br5P7jzm93N+Fx73vXPPPd97zv2ec163iY0GJmVuoEsHG1vJm3l/DWuxHI8xhJm4gB9wVYejAu3G+7gTsNu4i0eFrIldeKETgO7MG2JgFIewEIvwHt7FTvwRnc8maryK7QCuYxgftgnlW/g5IKs68eJgNm0uZC+iJx72YnLki3OQv/HKRGK/IsZP4+Vx9CYV71Xs92fPYBtvn41dUV5TyObiK/Tn+2NsLdb78RcuxtOWINPwYwCWFvIvw55/cTTrlzC/0Pk18uklQD1hXg3fv8tpKsWrATgQ6n6OKSFCNc5kXh6gxngAs3OBV/CwoOw/ife+nPoObuFmLh7OJRGXlHdaBxjI/EstJ/pxGa8nP07hDcxInnThBG5gdRmdOsDDFqHbiJ+wHutwLSdclvUe3I8HjfESqxovZR7J/D/2xMBxfBLqDuIbfBQbo0VY/msHUHH8cSHblqJ2JF58GoqOhDFL8aRFnoz9wO+Z5xWys4n7b/ggbOrDbpyvMalZXPq4WbwgSkcxNbJZAZhR6E8Jo8pkXIkH+L5GkDGjp6hDa1scpJ6lVbk4ln2LW/WaSrAE9+L6rMJIV/E0csKq4G2K8ZNF52tb8PYW5aCvIESjBihl+nr03+mkhX6dTcPYkTt4s0jGOTic3GkV0ud2tS0BaNaekVCziT9Tnzpq+tWFj6bBb8fb6cm94f4QvsC3RQifdPoD0D2BX5SedjpPAbRYi2qFhp13AAAAAElFTkSuQmCC",q6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAAB3RJTUUH4AEUEzUtwQXbsAAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAAB9klEQVRIx8WWP2gUQRTGf7u3yRGJKInkOAlXnNZaiE0Kg6nOQAohtWhrmjQemICCkM7SXkFBThBLlYCkC0JIUihnEbETD5EkFzn1ksvafAPPcY/duxQZWIaZeX++9733ZhaOeYRHPE8VGAauAh+B78BF4CHwFXgJjPWLPADuA3GG75PkM488sCPlA6AJzAMPjNELwKpZd4DxNEYcihj4o7niyUSebBFoGPnJNPQN4BD4oXUuAYSlY0DzsommbID8o3hOlMTACWCwh3wBrAP7wJtugksy/jhBmYyJdFEkjk2PxxAYAT4DH7yIHonOCS+xTdkYTUq4Oyyaw23gNbAB1LXnyncpAW1DeyWXP+vlpOa2Di8Dp4FrwFMjd0ZOF7WeMfT91FywlAZy5Pg7pSp4IsMVleE9yZcl9w54DryVfqCmi4HrpsIIhd45GBLfd83eTY+KEvDK5CwQqPdi4LYa9r8GcxG4+j+vko26NJwD6NB+kY3ZpDJfUZNtATeEYCCl/R24KaBqQOZ9vVDIDyXQMglLGzXR0pFuLU1hLq1hvPFNsi+A6aw36q4Q1RW+5T004V8yYK5kNZ4DFqT0W/Me8Eznt1SOv7ybl17fhbJKtWVQOodts1ft91WLDBUTHto7wNkuV3jfzgrAmu6gTA9+v38YUS9KfwHiN479kenpigAAAABJRU5ErkJggg==",Z6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAAB3RJTUUH4AEUExsoumgmEwAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAACHUlEQVRIx+XVy4tOYRwH8M+M4R0iWcnrkgYxZTkimRIWppRSaLCxIAvFxj/AjFtsWFlQFBvCgrAQBuU2WbmMYWbIbWdqZsiMvDa/U09vx8zbTFaeenrOOb/v7/J8f5fDP15VFcpTXKnsHPUaV4Hz6tHeYAIGMQsbMAef8Ru9uIUvgS1gKGQVrdo49+NjUJHuAbzDc6xM9MZXYjwD3cavMHgVu3EXp/EtcfYdnVhWCa0ZXZdC+RNW5+AKaMCxoGso8DcwbSTjeyPyXiyIb5NGSOYRvAwnjzH9b8D56ApgU1k+YB1acAit2JbI6/A6dJ9hap6DAwE4VZaP+oisC5dxAReD+05sCdxC3AwbrZGPqjT6AfTHc7amRMLPYnZOUDtC72i8L43yLWFGSu3O+HiwzMBctKMRRVzH+8C+wSIsL+uBEyFvhprYDSG8X+agBw9wDRNxBifxFZvxNMr2YaLzNs7FmQNJBHnVsgfn8QF9OBy36cDa4Lotwc+Mszs1sj2udS+nlrPmKSblWEqacGOMk+Yo2e6Q1aVJnhw0lHA8blYdgEJg9oW8HSvwKGeMZLsl088o6o/SasSqABXwI+RLsCaa8EXkZRPWR7UUQ3YnHPfkDb8inoTxrUkDdcS3QfzEvGHyNeIc2hVRl8LwuXh+FQ1WX4avjhxle1inNUnztAVtpZz+qBrLX6wmGXBNMVmvRA7GbFwOt7Xxd/uP1x8qjZQl/fBreAAAAABJRU5ErkJggg==";function J6({currentView:e,onViewChange:t}){return D.jsx("div",{className:"flex items-center",children:D.jsxs(ZA,{type:"single",value:e,onValueChange:n=>n&&t(n),children:[D.jsxs(Rr,{value:"axial","aria-label":"Axial view",title:"Axial view",children:[D.jsx("img",{src:Q6,alt:"axial",className:"dark:invert"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Axial"})]}),D.jsxs(Rr,{value:"coronal","aria-label":"Coronal view",title:"Coronal view",children:[D.jsx("img",{src:q6,alt:"coronal",className:"dark:invert"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Coronal"})]}),D.jsxs(Rr,{value:"sagittal","aria-label":"Sagittal view",title:"Sagittal view",children:[D.jsx("img",{src:Z6,alt:"sagittal",className:"dark:invert"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Sagittal"})]}),D.jsxs(Rr,{value:"render","aria-label":"Render view",title:"Render view",children:[D.jsx(yg,{className:"h-4 w-4 mr-1"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Render"})]}),D.jsxs(Rr,{value:"ACS","aria-label":"Multi view",title:"Multi view",children:[D.jsx(Ey,{className:"h-4 w-4 mr-1"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"ACS"})]}),D.jsxs(Rr,{value:"ACSR","aria-label":"Multi+Render",title:"Multi+Render",children:[D.jsx(By,{className:"h-4 w-4 mr-1"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"ACSR"})]})]})})}var Pa=1e-6,ht=typeof Float32Array<"u"?Float32Array:Array;function yd(){var e=new ht(9);return ht!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function $6(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ir(e,t,n,r,i,s,o,a,l){var c=new ht(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function eS(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=u*o-a*c,h=-u*s+a*l,f=c*s-o*l,p=n*d+r*h+i*f;return p?(p=1/p,e[0]=d*p,e[1]=(-u*r+i*c)*p,e[2]=(a*r-i*o)*p,e[3]=h*p,e[4]=(u*n-i*l)*p,e[5]=(-a*n+i*s)*p,e[6]=f*p,e[7]=(-c*n+r*l)*p,e[8]=(o*n-r*s)*p,e):null}function JA(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],g=n[3],v=n[4],m=n[5],A=n[6],x=n[7],w=n[8];return e[0]=h*r+f*o+p*c,e[1]=h*i+f*a+p*u,e[2]=h*s+f*l+p*d,e[3]=g*r+v*o+m*c,e[4]=g*i+v*a+m*u,e[5]=g*s+v*l+m*d,e[6]=A*r+x*o+w*c,e[7]=A*i+x*a+w*u,e[8]=A*s+x*l+w*d,e}function ge(){var e=new ht(16);return ht!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Qe(e){var t=new ht(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function tS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function en(e,t,n,r,i,s,o,a,l,c,u,d,h,f,p,g){var v=new ht(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=i,v[5]=s,v[6]=o,v[7]=a,v[8]=l,v[9]=c,v[10]=u,v[11]=d,v[12]=h,v[13]=f,v[14]=p,v[15]=g,v}function $A(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ot(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function zt(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],v=t[14],m=t[15],A=n*a-r*o,x=n*l-i*o,w=n*c-s*o,b=r*l-i*a,y=r*c-s*a,C=i*c-s*l,S=u*g-d*p,E=u*v-h*p,T=u*m-f*p,F=d*v-h*g,M=d*m-f*g,B=h*m-f*v,P=A*B-x*M+w*F+b*T-y*E+C*S;return P?(P=1/P,e[0]=(a*B-l*M+c*F)*P,e[1]=(i*M-r*B-s*F)*P,e[2]=(g*C-v*y+m*b)*P,e[3]=(h*y-d*C-f*b)*P,e[4]=(l*T-o*B-c*E)*P,e[5]=(n*B-i*T+s*E)*P,e[6]=(v*w-p*C-m*x)*P,e[7]=(u*C-h*w+f*x)*P,e[8]=(o*M-a*T+c*S)*P,e[9]=(r*T-n*M-s*S)*P,e[10]=(p*y-g*w+m*A)*P,e[11]=(d*w-u*y-f*A)*P,e[12]=(a*E-o*F-l*S)*P,e[13]=(n*F-r*E+i*S)*P,e[14]=(g*x-p*b-v*A)*P,e[15]=(u*b-d*x+h*A)*P,e):null}function Gr(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],g=t[12],v=t[13],m=t[14],A=t[15],x=n[0],w=n[1],b=n[2],y=n[3];return e[0]=x*r+w*a+b*d+y*g,e[1]=x*i+w*l+b*h+y*v,e[2]=x*s+w*c+b*f+y*m,e[3]=x*o+w*u+b*p+y*A,x=n[4],w=n[5],b=n[6],y=n[7],e[4]=x*r+w*a+b*d+y*g,e[5]=x*i+w*l+b*h+y*v,e[6]=x*s+w*c+b*f+y*m,e[7]=x*o+w*u+b*p+y*A,x=n[8],w=n[9],b=n[10],y=n[11],e[8]=x*r+w*a+b*d+y*g,e[9]=x*i+w*l+b*h+y*v,e[10]=x*s+w*c+b*f+y*m,e[11]=x*o+w*u+b*p+y*A,x=n[12],w=n[13],b=n[14],y=n[15],e[12]=x*r+w*a+b*d+y*g,e[13]=x*i+w*l+b*h+y*v,e[14]=x*s+w*c+b*f+y*m,e[15]=x*o+w*u+b*p+y*A,e}function Pi(e,t,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,d,h,f,p,g,v,m;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],a=t[1],l=t[2],c=t[3],u=t[4],d=t[5],h=t[6],f=t[7],p=t[8],g=t[9],v=t[10],m=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=d,e[6]=h,e[7]=f,e[8]=p,e[9]=g,e[10]=v,e[11]=m,e[12]=o*r+u*i+p*s+t[12],e[13]=a*r+d*i+g*s+t[13],e[14]=l*r+h*i+v*s+t[14],e[15]=c*r+f*i+m*s+t[15]),e}function ev(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Sl(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*r,e[5]=o*i+u*r,e[6]=a*i+d*r,e[7]=l*i+h*r,e[8]=c*i-s*r,e[9]=u*i-o*r,e[10]=d*i-a*r,e[11]=h*i-l*r,e}function El(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*r,e[1]=o*i+u*r,e[2]=a*i+d*r,e[3]=l*i+h*r,e[4]=c*i-s*r,e[5]=u*i-o*r,e[6]=d*i-a*r,e[7]=h*i-l*r,e}function nS(e,t,n){var r=n[0],i=n[1],s=n[2],o=Math.sqrt(r*r+i*i+s*s),a,l,c;return o<Pa?null:(o=1/o,r*=o,i*=o,s*=o,a=Math.sin(t),l=Math.cos(t),c=1-l,e[0]=r*r*c+l,e[1]=i*r*c+s*a,e[2]=s*r*c-i*a,e[3]=0,e[4]=r*i*c-s*a,e[5]=i*i*c+l,e[6]=s*i*c+r*a,e[7]=0,e[8]=r*s*c+i*a,e[9]=i*s*c-r*a,e[10]=s*s*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function rS(e,t,n,r,i,s,o){var a=1/(t-n),l=1/(r-i),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(o+s)*c,e[15]=1,e}var Ml=rS;function iS(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}var tv=Gr;function Te(){var e=new ht(3);return ht!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fn(e){var t=new ht(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function gr(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function q(e,t,n){var r=new ht(3);return r[0]=e,r[1]=t,r[2]=n,r}function Om(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Yr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Pe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Zh(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Jh(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function sS(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function oS(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function aS(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Zt(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function lS(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Na(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],l=n[2];return e[0]=i*l-s*a,e[1]=s*o-r*l,e[2]=r*a-i*o,e}function cS(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e}function zm(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function tu(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],a=t[2],l=Math.sqrt((n*n+r*r+i*i)*(s*s+o*o+a*a)),c=l&&lS(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function uS(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],a=t[2];return Math.abs(n-s)<=Pa*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=Pa*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=Pa*Math.max(1,Math.abs(i),Math.abs(a))}var jm=Pe,so=gr;(function(){var e=Te();return function(t,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,a=r;a<l;a+=n)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],s(e,e,o),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}})();function Un(){var e=new ht(4);return ht!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Nn(e){var t=new ht(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Le(e,t,n,r){var i=new ht(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Gm(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function dS(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function hS(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function At(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}var fS=dS;(function(){var e=Un();return function(t,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,a=r;a<l;a+=n)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],e[3]=t[a+3],s(e,e,o),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2],t[a+3]=e[3];return t}})();function mS(){var e=new ht(2);return ht!=Float32Array&&(e[0]=0,e[1]=0),e}function pS(e,t){var n=new ht(2);return n[0]=e,n[1]=t,n}(function(){var e=mS();return function(t,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,a=r;a<l;a+=n)e[0]=t[a],e[1]=t[a+1],s(e,e,o),t[a]=e[0],t[a+1]=e[1];return t}})();var Lr=256,ka=[],oa;for(;Lr--;)ka[Lr]=(Lr+256).toString(16).substring(1);function bd(){var e=0,t,n="";if(!oa||Lr+16>256){for(oa=Array(e=256);e--;)oa[e]=256*Math.random()|0;e=Lr=0}for(;e<16;e++)t=oa[Lr+e],e==6?n+=ka[t&15|64]:e==8?n+=ka[t&63|128]:n+=ka[t],e&1&&e>1&&e<11&&(n+="-");return Lr++,n}var gS=function(t,n){var r=t.length;if(t===n)return!0;if(r!==n.length)return!1;for(var i=0;i<r;i++)if(t[i]!==n[i])return!1;return!0};const AS=G1(gS),nv=-1,ic=0,Us=1,Dl=2,$h=3,ef=4,tf=5,nf=6,rv=7,iv=8,Ym=typeof self=="object"?self:globalThis,vS=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case ic:case nv:return n(o,i);case Us:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Dl:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case $h:return n(new Date(o),i);case ef:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case tf:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case nf:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case rv:{const{name:a,message:l}=o;return n(new Ym[a](l),i)}case iv:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new Ym[s](o),i)};return r},xS=e=>vS(new Map,e)(0),ai="",{toString:wS}={},{keys:yS}=Object,fs=e=>{const t=typeof e;if(t!=="object"||!e)return[ic,t];const n=wS.call(e).slice(8,-1);switch(n){case"Array":return[Us,ai];case"Object":return[Dl,ai];case"Date":return[$h,ai];case"RegExp":return[ef,ai];case"Map":return[tf,ai];case"Set":return[nf,ai];case"DataView":return[Us,n]}return n.includes("Array")?[Us,n]:n.includes("Error")?[rv,n]:[Dl,n]},aa=([e,t])=>e===ic&&(t==="function"||t==="symbol"),bS=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=fs(o);switch(a){case ic:{let u=o;switch(l){case"bigint":a=iv,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([nv],o)}return i([a,u],o)}case Us:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const u=[],d=i([a,u],o);for(const h of o)u.push(s(h));return d}case Dl:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const u=[],d=i([a,u],o);for(const h of yS(o))(e||!aa(fs(o[h])))&&u.push([s(h),s(o[h])]);return d}case $h:return i([a,o.toISOString()],o);case ef:{const{source:u,flags:d}=o;return i([a,{source:u,flags:d}],o)}case tf:{const u=[],d=i([a,u],o);for(const[h,f]of o)(e||!(aa(fs(h))||aa(fs(f))))&&u.push([s(h),s(f)]);return d}case nf:{const u=[],d=i([a,u],o);for(const h of o)(e||!aa(fs(h)))&&u.push(s(h));return d}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},CS=(e,{json:t,lossy:n}={})=>{const r=[];return bS(!(t||n),!!t,new Map,r)(e),r};var ct=Uint8Array,Ei=Uint16Array,SS=Int32Array,sv=new ct([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ov=new ct([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ES=new ct([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),av=function(e,t){for(var n=new Ei(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new SS(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},lv=av(sv,2),cv=lv.b,MS=lv.r;cv[28]=258,MS[258]=28;var DS=av(ov,0),TS=DS.b,Cd=new Ei(32768);for(var Be=0;Be<32768;++Be){var _n=(Be&43690)>>1|(Be&21845)<<1;_n=(_n&52428)>>2|(_n&13107)<<2,_n=(_n&61680)>>4|(_n&3855)<<4,Cd[Be]=((_n&65280)>>8|(_n&255)<<8)>>1}var Ls=function(e,t,n){for(var r=e.length,i=0,s=new Ei(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new Ei(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Ei(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],d=o[e[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[Cd[d]>>l]=c}else for(a=new Ei(r),i=0;i<r;++i)e[i]&&(a[i]=Cd[o[e[i]-1]++]>>15-e[i]);return a},Ro=new ct(288);for(var Be=0;Be<144;++Be)Ro[Be]=8;for(var Be=144;Be<256;++Be)Ro[Be]=9;for(var Be=256;Be<280;++Be)Ro[Be]=7;for(var Be=280;Be<288;++Be)Ro[Be]=8;var uv=new ct(32);for(var Be=0;Be<32;++Be)uv[Be]=5;var IS=Ls(Ro,9,1),FS=Ls(uv,5,1),nu=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},an=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},ru=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},dv=function(e){return(e+7)/8|0},Ba=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new ct(e.subarray(t,n))},RS=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Dt=function(e,t,n){var r=new Error(t||RS[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Dt),!n)throw r;return r},sc=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new ct(0);var o=!n,a=o||t.i!=2,l=t.i;o&&(n=new ct(i*3));var c=function(Se){var tt=n.length;if(Se>tt){var xt=new ct(Math.max(tt*2,Se));xt.set(n),n=xt}},u=t.f||0,d=t.p||0,h=t.b||0,f=t.l,p=t.d,g=t.m,v=t.n,m=i*8;do{if(!f){u=an(e,d,1);var A=an(e,d+1,3);if(d+=3,A)if(A==1)f=IS,p=FS,g=9,v=5;else if(A==2){var y=an(e,d,31)+257,C=an(e,d+10,15)+4,S=y+an(e,d+5,31)+1;d+=14;for(var E=new ct(S),T=new ct(19),F=0;F<C;++F)T[ES[F]]=an(e,d+F*3,7);d+=C*3;for(var M=nu(T),B=(1<<M)-1,P=Ls(T,M,1),F=0;F<S;){var z=P[an(e,d,B)];d+=z&15;var x=z>>4;if(x<16)E[F++]=x;else{var U=0,G=0;for(x==16?(G=3+an(e,d,3),d+=2,U=E[F-1]):x==17?(G=3+an(e,d,7),d+=3):x==18&&(G=11+an(e,d,127),d+=7);G--;)E[F++]=U}}var L=E.subarray(0,y),Y=E.subarray(y);g=nu(L),v=nu(Y),f=Ls(L,g,1),p=Ls(Y,v,1)}else Dt(1);else{var x=dv(d)+4,w=e[x-4]|e[x-3]<<8,b=x+w;if(b>i){l&&Dt(0);break}a&&c(h+w),n.set(e.subarray(x,b),h),t.b=h+=w,t.p=d=b*8,t.f=u;continue}if(d>m){l&&Dt(0);break}}a&&c(h+131072);for(var j=(1<<g)-1,$=(1<<v)-1,X=d;;X=d){var U=f[ru(e,d)&j],H=U>>4;if(d+=U&15,d>m){l&&Dt(0);break}if(U||Dt(2),H<256)n[h++]=H;else if(H==256){X=d,f=null;break}else{var K=H-254;if(H>264){var F=H-257,te=sv[F];K=an(e,d,(1<<te)-1)+cv[F],d+=te}var ae=p[ru(e,d)&$],le=ae>>4;ae||Dt(3),d+=ae&15;var Y=TS[le];if(le>3){var te=ov[le];Y+=ru(e,d)&(1<<te)-1,d+=te}if(d>m){l&&Dt(0);break}a&&c(h+131072);var De=h+K;if(h<Y){var fe=s-Y,Ce=Math.min(Y,De);for(fe+h<0&&Dt(3);h<Ce;++h)n[h]=r[fe+h]}for(;h<De;++h)n[h]=n[h-Y]}}t.l=f,t.p=X,t.b=h,t.f=u,f&&(u=1,t.m=g,t.d=p,t.n=v)}while(!u);return h!=n.length&&o?Ba(n,0,h):n.subarray(0,h)},PS=new ct(0),hv=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Dt(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},NS=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},kS=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Dt(6,"invalid zlib data"),(e[1]>>5&1)==1&&Dt(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2},iu=function(){function e(t,n){typeof t=="function"&&(n=t,t={}),this.ondata=n;var r=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:r?r.length:0},this.o=new ct(32768),this.p=new ct(0),r&&this.o.set(r)}return e.prototype.e=function(t){if(this.ondata||Dt(5),this.d&&Dt(4),!this.p.length)this.p=t;else if(t.length){var n=new ct(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length),this.p=n}},e.prototype.c=function(t){this.s.i=+(this.d=t||!1);var n=this.s.b,r=sc(this.p,this.s,this.o);this.ondata(Ba(r,n,this.s.b),this.d),this.o=Ba(r,this.s.b-32768),this.s.b=this.o.length,this.p=Ba(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,n){this.e(t),this.c(n)},e}();function BS(e,t){return sc(e,{i:2},t,t)}var VS=function(){function e(t,n){this.v=1,this.r=0,iu.call(this,t,n)}return e.prototype.push=function(t,n){if(iu.prototype.e.call(this,t),this.r+=t.length,this.v){var r=this.p.subarray(this.v-1),i=r.length>3?hv(r):4;if(i>r.length){if(!n)return}else this.v>1&&this.onmember&&this.onmember(this.r-r.length);this.p=r.subarray(i),this.v=0}iu.prototype.c.call(this,n),this.s.f&&!this.s.l&&!n&&(this.v=dv(this.s.p)+9,this.s={i:0},this.o=new ct(0),this.push(new ct(0),n))},e}();function US(e,t){var n=hv(e);return n+8>e.length&&Dt(6,"invalid gzip data"),sc(e.subarray(n,-8),{i:2},new ct(NS(e)),t)}function LS(e,t){return sc(e.subarray(kS(e),-4),{i:2},t,t)}function OS(e,t){return e[0]==31&&e[1]==139&&e[2]==8?US(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?BS(e,t):LS(e,t)}var zS=typeof TextDecoder<"u"&&new TextDecoder,jS=0;try{zS.decode(PS,{stream:!0}),jS=1}catch{}class fv{constructor(t,n,r,i){O(this,"esize");O(this,"ecode");O(this,"edata");O(this,"littleEndian");if(t%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=t,this.ecode=n,this.edata=r,this.littleEndian=i}toArrayBuffer(){let t=new Uint8Array(this.esize),n=new Uint8Array(this.edata);t.set(n,8);let r=new DataView(t.buffer);return r.setInt32(0,this.esize,this.littleEndian),r.setInt32(4,this.ecode,this.littleEndian),t.buffer}}const Et=class Et{static getStringAt(t,n,r){var i="",s,o;for(s=n;s<r;s+=1)o=t.getUint8(s),o!==0&&(i+=String.fromCharCode(o));return i}static getIntAt(t,n,r){return t.getInt32(n,r)}static getFloatAt(t,n,r){return t.getFloat32(n,r)}static getDoubleAt(t,n,r){return t.getFloat64(n,r)}static getInt64At(t,n,r){const i=t.getUint32(n,r),s=t.getInt32(n+4,r);let o;return r?o=s*2**32+i:o=i*2**32+s,s<0&&(o+=-1*2**32*2**32),o}static getUint64At(t,n,r){const i=t.getUint32(n+(r?0:4),r),s=t.getUint32(n+(r?4:0),r);return r?s*2**32+i:i*2**32+s}static getExtensionsAt(t,n,r,i){let s=[],o=n;for(;o<i;){let a=r,l=Et.getIntAt(t,o,r);if(!l)break;if(l+o>i&&(a=!a,l=Et.getIntAt(t,o,a),l+o>i))throw new Error("This does not appear to be a valid NIFTI extension");if(l%16!=0)throw new Error("This does not appear to be a NIFTI extension");let c=Et.getIntAt(t,o+4,a),u=t.buffer.slice(o+8,o+l),d=new fv(l,c,u,a);s.push(d),o+=l}return s}static toArrayBuffer(t){var n,r,i;for(n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0;i<t.length;i+=1)r[i]=t[i];return n}static isString(t){return typeof t=="string"||t instanceof String}static formatNumber(t,n=void 0){let r;return Et.isString(t)?r=Number(t):r=t,n?r=r.toPrecision(5):r=r.toPrecision(7),parseFloat(r)}static makeCRCTable(){let t,n=[];for(var r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;n[r]=t}return n}static crc32(t){Et.crcTable||(Et.crcTable=Et.makeCRCTable());const n=Et.crcTable;let r=-1;for(var i=0;i<t.byteLength;i++)r=r>>>8^n[(r^t.getUint8(i))&255];return(r^-1)>>>0}};O(Et,"crcTable",null),O(Et,"GUNZIP_MAGIC_COOKIE1",31),O(Et,"GUNZIP_MAGIC_COOKIE2",139),O(Et,"getByteAt",function(t,n){return t.getUint8(n)}),O(Et,"getShortAt",function(t,n,r){return t.getInt16(n,r)});let J=Et;const ee=class ee{constructor(){O(this,"littleEndian",!1);O(this,"dim_info",0);O(this,"dims",[]);O(this,"intent_p1",0);O(this,"intent_p2",0);O(this,"intent_p3",0);O(this,"intent_code",0);O(this,"datatypeCode",0);O(this,"numBitsPerVoxel",0);O(this,"slice_start",0);O(this,"slice_end",0);O(this,"slice_code",0);O(this,"pixDims",[]);O(this,"vox_offset",0);O(this,"scl_slope",1);O(this,"scl_inter",0);O(this,"xyzt_units",0);O(this,"cal_max",0);O(this,"cal_min",0);O(this,"slice_duration",0);O(this,"toffset",0);O(this,"description","");O(this,"aux_file","");O(this,"intent_name","");O(this,"qform_code",0);O(this,"sform_code",0);O(this,"quatern_a",0);O(this,"quatern_b",0);O(this,"quatern_c",0);O(this,"quatern_d",0);O(this,"qoffset_x",0);O(this,"qoffset_y",0);O(this,"qoffset_z",0);O(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);O(this,"qfac",1);O(this,"quatern_R");O(this,"magic","0");O(this,"isHDR",!1);O(this,"extensionFlag",[0,0,0,0]);O(this,"extensionSize",0);O(this,"extensionCode",0);O(this,"extensions",[]);O(this,"getDatatypeCodeString",function(t){return t===ee.TYPE_UINT8?"1-Byte Unsigned Integer":t===ee.TYPE_INT16?"2-Byte Signed Integer":t===ee.TYPE_INT32?"4-Byte Signed Integer":t===ee.TYPE_FLOAT32?"4-Byte Float":t===ee.TYPE_FLOAT64?"8-Byte Float":t===ee.TYPE_RGB24?"RGB":t===ee.TYPE_INT8?"1-Byte Signed Integer":t===ee.TYPE_UINT16?"2-Byte Unsigned Integer":t===ee.TYPE_UINT32?"4-Byte Unsigned Integer":t===ee.TYPE_INT64?"8-Byte Signed Integer":t===ee.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"});O(this,"getTransformCodeString",function(t){return t===ee.XFORM_SCANNER_ANAT?"Scanner":t===ee.XFORM_ALIGNED_ANAT?"Aligned":t===ee.XFORM_TALAIRACH?"Talairach":t===ee.XFORM_MNI_152?"MNI":"Unknown"});O(this,"getUnitsCodeString",function(t){return t===ee.UNITS_METER?"Meters":t===ee.UNITS_MM?"Millimeters":t===ee.UNITS_MICRON?"Microns":t===ee.UNITS_SEC?"Seconds":t===ee.UNITS_MSEC?"Milliseconds":t===ee.UNITS_USEC?"Microseconds":t===ee.UNITS_HZ?"Hz":t===ee.UNITS_PPM?"PPM":t===ee.UNITS_RADS?"Rads":"Unknown"});O(this,"nifti_mat33_mul",function(t,n){var r=[[0,0,0],[0,0,0],[0,0,0]],i,s;for(i=0;i<3;i+=1)for(s=0;s<3;s+=1)r[i][s]=t[i][0]*n[0][s]+t[i][1]*n[1][s]+t[i][2]*n[2][s];return r});O(this,"nifti_mat33_determ",function(t){var n,r,i,s,o,a,l,c,u;return n=t[0][0],r=t[0][1],i=t[0][2],s=t[1][0],o=t[1][1],a=t[1][2],l=t[2][0],c=t[2][1],u=t[2][2],n*o*u-n*c*a-s*r*u+s*c*i+l*r*a-l*o*i})}readHeader(t){var n=new DataView(t),r=J.getIntAt(n,0,this.littleEndian),i,s,o,a;if(r!==ee.MAGIC_COOKIE&&(this.littleEndian=!0,r=J.getIntAt(n,0,this.littleEndian)),r!==ee.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=J.getByteAt(n,39),i=0;i<8;i+=1)a=40+i*2,this.dims[i]=J.getShortAt(n,a,this.littleEndian);for(this.intent_p1=J.getFloatAt(n,56,this.littleEndian),this.intent_p2=J.getFloatAt(n,60,this.littleEndian),this.intent_p3=J.getFloatAt(n,64,this.littleEndian),this.intent_code=J.getShortAt(n,68,this.littleEndian),this.datatypeCode=J.getShortAt(n,70,this.littleEndian),this.numBitsPerVoxel=J.getShortAt(n,72,this.littleEndian),this.slice_start=J.getShortAt(n,74,this.littleEndian),i=0;i<8;i+=1)a=76+i*4,this.pixDims[i]=J.getFloatAt(n,a,this.littleEndian);if(this.vox_offset=J.getFloatAt(n,108,this.littleEndian),this.scl_slope=J.getFloatAt(n,112,this.littleEndian),this.scl_inter=J.getFloatAt(n,116,this.littleEndian),this.slice_end=J.getShortAt(n,120,this.littleEndian),this.slice_code=J.getByteAt(n,122),this.xyzt_units=J.getByteAt(n,123),this.cal_max=J.getFloatAt(n,124,this.littleEndian),this.cal_min=J.getFloatAt(n,128,this.littleEndian),this.slice_duration=J.getFloatAt(n,132,this.littleEndian),this.toffset=J.getFloatAt(n,136,this.littleEndian),this.description=J.getStringAt(n,148,228),this.aux_file=J.getStringAt(n,228,252),this.qform_code=J.getShortAt(n,252,this.littleEndian),this.sform_code=J.getShortAt(n,254,this.littleEndian),this.quatern_b=J.getFloatAt(n,256,this.littleEndian),this.quatern_c=J.getFloatAt(n,260,this.littleEndian),this.quatern_d=J.getFloatAt(n,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=J.getFloatAt(n,268,this.littleEndian),this.qoffset_y=J.getFloatAt(n,272,this.littleEndian),this.qoffset_z=J.getFloatAt(n,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const l=this.quatern_a,c=this.quatern_b,u=this.quatern_c,d=this.quatern_d;for(this.qfac=this.pixDims[0]===0?1:this.pixDims[0],this.quatern_R=[[l*l+c*c-u*u-d*d,2*c*u-2*l*d,2*c*d+2*l*u],[2*c*u+2*l*d,l*l+u*u-c*c-d*d,2*u*d-2*l*c],[2*c*d-2*l*u,2*u*d+2*l*c,l*l+d*d-u*u-c*c]],s=0;s<3;s+=1)for(o=0;o<3;o+=1)this.affine[s][o]=this.quatern_R[s][o]*this.pixDims[o+1],o===2&&(this.affine[s][o]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(s=0;s<3;s+=1)for(o=0;o<4;o+=1)a=280+(s*4+o)*4,this.affine[s][o]=J.getFloatAt(n,a,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=J.getStringAt(n,328,344),this.magic=J.getStringAt(n,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,ee.MAGIC_NUMBER2),n.byteLength>ee.MAGIC_COOKIE){this.extensionFlag[0]=J.getByteAt(n,348),this.extensionFlag[1]=J.getByteAt(n,349),this.extensionFlag[2]=J.getByteAt(n,350),this.extensionFlag[3]=J.getByteAt(n,351);let l=!0;!this.isHDR&&this.vox_offset<=352&&(l=!1),n.byteLength<=368&&(l=!1),l&&this.extensionFlag[0]&&(this.extensions=J.getExtensionsAt(n,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var t=J.formatNumber,n="";return n+="Dim Info = "+this.dim_info+`
`,n+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,n+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,n+="Intent Code = "+this.intent_code+`
`,n+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,n+="Bits Per Voxel = "+this.numBitsPerVoxel+`
`,n+="Slice Start = "+this.slice_start+`
`,n+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,n+="Image Offset = "+this.vox_offset+`
`,n+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,n+="Slice End = "+this.slice_end+`
`,n+="Slice Code = "+this.slice_code+`
`,n+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(ee.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(ee.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,n+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,n+="Slice Duration = "+this.slice_duration+`
`,n+="Time Axis Shift = "+this.toffset+`
`,n+='Description: "'+this.description+`"
`,n+='Auxiliary File: "'+this.aux_file+`"
`,n+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,n+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,n+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,n+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,n+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,n+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,n+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,n+='Intent Name: "'+this.intent_name+`"
`,this.extensionFlag[0]&&(n+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+`
`),n}getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(t,n,r,i,s,o,a,l,c,u){var d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],h,f=t,p=n,g=r,v,m,A;return d[3][0]=d[3][1]=d[3][2]=0,d[3][3]=1,h=1-(f*f+p*p+g*g),h<1e-7?(h=1/Math.sqrt(f*f+p*p+g*g),f*=h,p*=h,g*=h,h=0):h=Math.sqrt(h),v=a>0?a:1,m=l>0?l:1,A=c>0?c:1,u<0&&(A=-A),d[0][0]=(h*h+f*f-p*p-g*g)*v,d[0][1]=2*(f*p-h*g)*m,d[0][2]=2*(f*g+h*p)*A,d[1][0]=2*(f*p+h*g)*v,d[1][1]=(h*h+p*p-f*f-g*g)*m,d[1][2]=2*(p*g-h*f)*A,d[2][0]=2*(f*g-h*p)*v,d[2][1]=2*(p*g+h*f)*m,d[2][2]=(h*h+g*g-p*p-f*f)*A,d[0][3]=i,d[1][3]=s,d[2][3]=o,d}convertNiftiSFormToNEMA(t){var n,r,i,s,o,a,l,c,u,d,h,f,p,g,v,m,A,x,w,b,y,C,S,E,T,F,M,B,P,z,U,G,L,Y;if(v=0,M=[[0,0,0],[0,0,0],[0,0,0]],B=[[0,0,0],[0,0,0],[0,0,0]],n=t[0][0],r=t[0][1],i=t[0][2],s=t[1][0],o=t[1][1],a=t[1][2],l=t[2][0],c=t[2][1],u=t[2][2],d=Math.sqrt(n*n+s*s+l*l),d===0||(n/=d,s/=d,l/=d,d=Math.sqrt(r*r+o*o+c*c),d===0))return null;if(r/=d,o/=d,c/=d,d=n*r+s*o+l*c,Math.abs(d)>1e-4){if(r-=d*n,o-=d*s,c-=d*l,d=Math.sqrt(r*r+o*o+c*c),d===0)return null;r/=d,o/=d,c/=d}if(d=Math.sqrt(i*i+a*a+u*u),d===0?(i=s*c-l*o,a=l*r-c*n,u=n*o-s*r):(i/=d,a/=d,u/=d),d=n*i+s*a+l*u,Math.abs(d)>1e-4){if(i-=d*n,a-=d*s,u-=d*l,d=Math.sqrt(i*i+a*a+u*u),d===0)return null;i/=d,a/=d,u/=d}if(d=r*i+o*a+c*u,Math.abs(d)>1e-4){if(i-=d*r,a-=d*o,u-=d*c,d=Math.sqrt(i*i+a*a+u*u),d===0)return null;i/=d,a/=d,u/=d}if(M[0][0]=n,M[0][1]=r,M[0][2]=i,M[1][0]=s,M[1][1]=o,M[1][2]=a,M[2][0]=l,M[2][1]=c,M[2][2]=u,h=this.nifti_mat33_determ(M),h===0)return null;for(F=-666,w=C=S=E=1,b=2,y=3,p=1;p<=3;p+=1)for(g=1;g<=3;g+=1)if(p!==g){for(v=1;v<=3;v+=1)if(!(p===v||g===v))for(B[0][0]=B[0][1]=B[0][2]=B[1][0]=B[1][1]=B[1][2]=B[2][0]=B[2][1]=B[2][2]=0,m=-1;m<=1;m+=2)for(A=-1;A<=1;A+=2)for(x=-1;x<=1;x+=2)B[0][p-1]=m,B[1][g-1]=A,B[2][v-1]=x,f=this.nifti_mat33_determ(B),f*h>0&&(T=this.nifti_mat33_mul(B,M),d=T[0][0]+T[1][1]+T[2][2],d>F&&(F=d,w=p,b=g,y=v,C=m,S=A,E=x))}switch(P=z=U=G=L=Y="",w*C){case 1:P="X",G="+";break;case-1:P="X",G="-";break;case 2:P="Y",G="+";break;case-2:P="Y",G="-";break;case 3:P="Z",G="+";break;case-3:P="Z",G="-";break}switch(b*S){case 1:z="X",L="+";break;case-1:z="X",L="-";break;case 2:z="Y",L="+";break;case-2:z="Y",L="-";break;case 3:z="Z",L="+";break;case-3:z="Z",L="-";break}switch(y*E){case 1:U="X",Y="+";break;case-1:U="X",Y="-";break;case 2:U="Y",Y="+";break;case-2:U="Y",Y="-";break;case 3:U="Z",Y="+";break;case-3:U="Z",Y="-";break}return P+z+U+G+L+Y}getExtensionLocation(){return ee.MAGIC_COOKIE+4}getExtensionSize(t){return J.getIntAt(t,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(t){return J.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)}addExtension(t,n=-1){n==-1?this.extensions.push(t):this.extensions.splice(n,0,t),this.vox_offset+=t.esize}removeExtension(t){let n=this.extensions[t];n&&(this.vox_offset-=n.esize),this.extensions.splice(t,1)}toArrayBuffer(t=!1){let i=352;if(t)for(let l of this.extensions)i+=l.esize;let s=new Uint8Array(i),o=new DataView(s.buffer);o.setInt32(0,348,this.littleEndian),o.setUint8(39,this.dim_info);for(let l=0;l<8;l++)o.setUint16(40+2*l,this.dims[l],this.littleEndian);o.setFloat32(56,this.intent_p1,this.littleEndian),o.setFloat32(60,this.intent_p2,this.littleEndian),o.setFloat32(64,this.intent_p3,this.littleEndian),o.setInt16(68,this.intent_code,this.littleEndian),o.setInt16(70,this.datatypeCode,this.littleEndian),o.setInt16(72,this.numBitsPerVoxel,this.littleEndian),o.setInt16(74,this.slice_start,this.littleEndian);for(let l=0;l<8;l++)o.setFloat32(76+4*l,this.pixDims[l],this.littleEndian);o.setFloat32(108,this.vox_offset,this.littleEndian),o.setFloat32(112,this.scl_slope,this.littleEndian),o.setFloat32(116,this.scl_inter,this.littleEndian),o.setInt16(120,this.slice_end,this.littleEndian),o.setUint8(122,this.slice_code),o.setUint8(123,this.xyzt_units),o.setFloat32(124,this.cal_max,this.littleEndian),o.setFloat32(128,this.cal_min,this.littleEndian),o.setFloat32(132,this.slice_duration,this.littleEndian),o.setFloat32(136,this.toffset,this.littleEndian),s.set(new TextEncoder().encode(this.description),148),s.set(new TextEncoder().encode(this.aux_file),228),o.setInt16(252,this.qform_code,this.littleEndian),o.setInt16(254,this.sform_code,this.littleEndian),o.setFloat32(256,this.quatern_b,this.littleEndian),o.setFloat32(260,this.quatern_c,this.littleEndian),o.setFloat32(264,this.quatern_d,this.littleEndian),o.setFloat32(268,this.qoffset_x,this.littleEndian),o.setFloat32(272,this.qoffset_y,this.littleEndian),o.setFloat32(276,this.qoffset_z,this.littleEndian);const a=this.affine.flat();for(let l=0;l<12;l++)o.setFloat32(280+4*l,a[l],this.littleEndian);if(s.set(new TextEncoder().encode(this.intent_name),328),s.set(new TextEncoder().encode(this.magic),344),t){s.set(Uint8Array.from([1,0,0,0]),348);let l=this.getExtensionLocation();for(const c of this.extensions)o.setInt32(l,c.esize,c.littleEndian),o.setInt32(l+4,c.ecode,c.littleEndian),s.set(new Uint8Array(c.edata),l+8),l+=c.esize}else s.set(new Uint8Array(4).fill(0),348);return s.buffer}};O(ee,"TYPE_NONE",0),O(ee,"TYPE_BINARY",1),O(ee,"TYPE_UINT8",2),O(ee,"TYPE_INT16",4),O(ee,"TYPE_INT32",8),O(ee,"TYPE_FLOAT32",16),O(ee,"TYPE_COMPLEX64",32),O(ee,"TYPE_FLOAT64",64),O(ee,"TYPE_RGB24",128),O(ee,"TYPE_INT8",256),O(ee,"TYPE_UINT16",512),O(ee,"TYPE_UINT32",768),O(ee,"TYPE_INT64",1024),O(ee,"TYPE_UINT64",1280),O(ee,"TYPE_FLOAT128",1536),O(ee,"TYPE_COMPLEX128",1792),O(ee,"TYPE_COMPLEX256",2048),O(ee,"XFORM_UNKNOWN",0),O(ee,"XFORM_SCANNER_ANAT",1),O(ee,"XFORM_ALIGNED_ANAT",2),O(ee,"XFORM_TALAIRACH",3),O(ee,"XFORM_MNI_152",4),O(ee,"SPATIAL_UNITS_MASK",7),O(ee,"TEMPORAL_UNITS_MASK",56),O(ee,"UNITS_UNKNOWN",0),O(ee,"UNITS_METER",1),O(ee,"UNITS_MM",2),O(ee,"UNITS_MICRON",3),O(ee,"UNITS_SEC",8),O(ee,"UNITS_MSEC",16),O(ee,"UNITS_USEC",24),O(ee,"UNITS_HZ",32),O(ee,"UNITS_PPM",40),O(ee,"UNITS_RADS",48),O(ee,"MAGIC_COOKIE",348),O(ee,"STANDARD_HEADER_SIZE",348),O(ee,"MAGIC_NUMBER_LOCATION",344),O(ee,"MAGIC_NUMBER",[110,43,49]),O(ee,"MAGIC_NUMBER2",[110,105,49]),O(ee,"EXTENSION_HEADER_SIZE",8);let he=ee;const wn=class wn{constructor(){O(this,"littleEndian",!1);O(this,"dim_info",0);O(this,"dims",[]);O(this,"intent_p1",0);O(this,"intent_p2",0);O(this,"intent_p3",0);O(this,"intent_code",0);O(this,"datatypeCode",0);O(this,"numBitsPerVoxel",0);O(this,"slice_start",0);O(this,"slice_end",0);O(this,"slice_code",0);O(this,"pixDims",[]);O(this,"vox_offset",0);O(this,"scl_slope",1);O(this,"scl_inter",0);O(this,"xyzt_units",0);O(this,"cal_max",0);O(this,"cal_min",0);O(this,"slice_duration",0);O(this,"toffset",0);O(this,"description","");O(this,"aux_file","");O(this,"intent_name","");O(this,"qform_code",0);O(this,"sform_code",0);O(this,"quatern_b",0);O(this,"quatern_c",0);O(this,"quatern_d",0);O(this,"qoffset_x",0);O(this,"qoffset_y",0);O(this,"qoffset_z",0);O(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);O(this,"magic","0");O(this,"extensionFlag",[0,0,0,0]);O(this,"extensions",[]);O(this,"extensionSize",0);O(this,"extensionCode",0);O(this,"getExtensionLocation",function(){return wn.MAGIC_COOKIE+4});O(this,"getExtensionSize",he.prototype.getExtensionSize);O(this,"getExtensionCode",he.prototype.getExtensionCode);O(this,"addExtension",he.prototype.addExtension);O(this,"removeExtension",he.prototype.removeExtension);O(this,"getDatatypeCodeString",he.prototype.getDatatypeCodeString);O(this,"getTransformCodeString",he.prototype.getTransformCodeString);O(this,"getUnitsCodeString",he.prototype.getUnitsCodeString);O(this,"getQformMat",he.prototype.getQformMat);O(this,"convertNiftiQFormToNiftiSForm",he.prototype.convertNiftiQFormToNiftiSForm);O(this,"convertNiftiSFormToNEMA",he.prototype.convertNiftiSFormToNEMA);O(this,"nifti_mat33_mul",he.prototype.nifti_mat33_mul);O(this,"nifti_mat33_determ",he.prototype.nifti_mat33_determ)}readHeader(t){var n=new DataView(t),r=J.getIntAt(n,0,this.littleEndian),i,s,o,a;if(r!==wn.MAGIC_COOKIE&&(this.littleEndian=!0,r=J.getIntAt(n,0,this.littleEndian)),r!==wn.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=J.getStringAt(n,4,12),this.datatypeCode=J.getShortAt(n,12,this.littleEndian),this.numBitsPerVoxel=J.getShortAt(n,14,this.littleEndian),i=0;i<8;i+=1)a=16+i*8,this.dims[i]=J.getInt64At(n,a,this.littleEndian);for(this.intent_p1=J.getDoubleAt(n,80,this.littleEndian),this.intent_p2=J.getDoubleAt(n,88,this.littleEndian),this.intent_p3=J.getDoubleAt(n,96,this.littleEndian),i=0;i<8;i+=1)a=104+i*8,this.pixDims[i]=J.getDoubleAt(n,a,this.littleEndian);for(this.vox_offset=J.getInt64At(n,168,this.littleEndian),this.scl_slope=J.getDoubleAt(n,176,this.littleEndian),this.scl_inter=J.getDoubleAt(n,184,this.littleEndian),this.cal_max=J.getDoubleAt(n,192,this.littleEndian),this.cal_min=J.getDoubleAt(n,200,this.littleEndian),this.slice_duration=J.getDoubleAt(n,208,this.littleEndian),this.toffset=J.getDoubleAt(n,216,this.littleEndian),this.slice_start=J.getInt64At(n,224,this.littleEndian),this.slice_end=J.getInt64At(n,232,this.littleEndian),this.description=J.getStringAt(n,240,320),this.aux_file=J.getStringAt(n,320,344),this.qform_code=J.getIntAt(n,344,this.littleEndian),this.sform_code=J.getIntAt(n,348,this.littleEndian),this.quatern_b=J.getDoubleAt(n,352,this.littleEndian),this.quatern_c=J.getDoubleAt(n,360,this.littleEndian),this.quatern_d=J.getDoubleAt(n,368,this.littleEndian),this.qoffset_x=J.getDoubleAt(n,376,this.littleEndian),this.qoffset_y=J.getDoubleAt(n,384,this.littleEndian),this.qoffset_z=J.getDoubleAt(n,392,this.littleEndian),s=0;s<3;s+=1)for(o=0;o<4;o+=1)a=400+(s*4+o)*8,this.affine[s][o]=J.getDoubleAt(n,a,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=J.getIntAt(n,496,this.littleEndian),this.xyzt_units=J.getIntAt(n,500,this.littleEndian),this.intent_code=J.getIntAt(n,504,this.littleEndian),this.intent_name=J.getStringAt(n,508,524),this.dim_info=J.getByteAt(n,524),n.byteLength>wn.MAGIC_COOKIE&&(this.extensionFlag[0]=J.getByteAt(n,540),this.extensionFlag[1]=J.getByteAt(n,541),this.extensionFlag[2]=J.getByteAt(n,542),this.extensionFlag[3]=J.getByteAt(n,543),this.extensionFlag[0]&&(this.extensions=J.getExtensionsAt(n,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var t=J.formatNumber,n="";return n+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,n+="Bits Per Voxel =  = "+this.numBitsPerVoxel+`
`,n+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,n+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,n+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,n+="Image Offset = "+this.vox_offset+`
`,n+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,n+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,n+="Slice Duration = "+this.slice_duration+`
`,n+="Time Axis Shift = "+this.toffset+`
`,n+="Slice Start = "+this.slice_start+`
`,n+="Slice End = "+this.slice_end+`
`,n+='Description: "'+this.description+`"
`,n+='Auxiliary File: "'+this.aux_file+`"
`,n+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,n+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,n+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,n+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,n+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,n+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,n+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,n+="Slice Code = "+this.slice_code+`
`,n+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(he.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(he.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,n+="Intent Code = "+this.intent_code+`
`,n+='Intent Name: "'+this.intent_name+`"
`,n+="Dim Info = "+this.dim_info+`
`,n}toArrayBuffer(t=!1){let i=544;if(t)for(let l of this.extensions)i+=l.esize;let s=new Uint8Array(i),o=new DataView(s.buffer);o.setInt32(0,540,this.littleEndian),s.set(new TextEncoder().encode(this.magic),4),o.setInt16(12,this.datatypeCode,this.littleEndian),o.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let l=0;l<8;l++)o.setBigInt64(16+8*l,BigInt(this.dims[l]),this.littleEndian);o.setFloat64(80,this.intent_p1,this.littleEndian),o.setFloat64(88,this.intent_p2,this.littleEndian),o.setFloat64(96,this.intent_p3,this.littleEndian);for(let l=0;l<8;l++)o.setFloat64(104+8*l,this.pixDims[l],this.littleEndian);o.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),o.setFloat64(176,this.scl_slope,this.littleEndian),o.setFloat64(184,this.scl_inter,this.littleEndian),o.setFloat64(192,this.cal_max,this.littleEndian),o.setFloat64(200,this.cal_min,this.littleEndian),o.setFloat64(208,this.slice_duration,this.littleEndian),o.setFloat64(216,this.toffset,this.littleEndian),o.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),o.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),s.set(new TextEncoder().encode(this.description),240),s.set(new TextEncoder().encode(this.aux_file),320),o.setInt32(344,this.qform_code,this.littleEndian),o.setInt32(348,this.sform_code,this.littleEndian),o.setFloat64(352,this.quatern_b,this.littleEndian),o.setFloat64(360,this.quatern_c,this.littleEndian),o.setFloat64(368,this.quatern_d,this.littleEndian),o.setFloat64(376,this.qoffset_x,this.littleEndian),o.setFloat64(384,this.qoffset_y,this.littleEndian),o.setFloat64(392,this.qoffset_z,this.littleEndian);const a=this.affine.flat();for(let l=0;l<12;l++)o.setFloat64(400+8*l,a[l],this.littleEndian);if(o.setInt32(496,this.slice_code,this.littleEndian),o.setInt32(500,this.xyzt_units,this.littleEndian),o.setInt32(504,this.intent_code,this.littleEndian),s.set(new TextEncoder().encode(this.intent_name),508),o.setUint8(524,this.dim_info),t){s.set(Uint8Array.from([1,0,0,0]),540);let l=this.getExtensionLocation();for(const c of this.extensions)o.setInt32(l,c.esize,c.littleEndian),o.setInt32(l+4,c.ecode,c.littleEndian),s.set(new Uint8Array(c.edata),l+8),l+=c.esize}else s.set(new Uint8Array(4).fill(0),540);return s.buffer}};O(wn,"MAGIC_COOKIE",540),O(wn,"MAGIC_NUMBER_LOCATION",4),O(wn,"MAGIC_NUMBER",[110,43,50,0,13,10,26,10]),O(wn,"MAGIC_NUMBER2",[110,105,50,0,13,10,26,10]);let Nt=wn;function GS(e,t=!1){var n,r,i,s;return e.byteLength<he.STANDARD_HEADER_SIZE?!1:(n=new DataView(e),n&&(r=n.getUint8(he.MAGIC_NUMBER_LOCATION)),i=n.getUint8(he.MAGIC_NUMBER_LOCATION+1),s=n.getUint8(he.MAGIC_NUMBER_LOCATION+2),t&&r===he.MAGIC_NUMBER2[0]&&i===he.MAGIC_NUMBER2[1]&&s===he.MAGIC_NUMBER2[2]?!0:r===he.MAGIC_NUMBER[0]&&i===he.MAGIC_NUMBER[1]&&s===he.MAGIC_NUMBER[2])}function YS(e,t=!1){var n,r,i,s;return e.byteLength<he.STANDARD_HEADER_SIZE?!1:(n=new DataView(e),r=n.getUint8(Nt.MAGIC_NUMBER_LOCATION),i=n.getUint8(Nt.MAGIC_NUMBER_LOCATION+1),s=n.getUint8(Nt.MAGIC_NUMBER_LOCATION+2),t&&r===Nt.MAGIC_NUMBER2[0]&&i===Nt.MAGIC_NUMBER2[1]&&s===Nt.MAGIC_NUMBER2[2]?!0:r===Nt.MAGIC_NUMBER[0]&&i===Nt.MAGIC_NUMBER[1]&&s===Nt.MAGIC_NUMBER[2])}function rf(e){var t,n,r;return!!(e&&(t=new DataView(e),n=t.getUint8(0),r=t.getUint8(1),n===J.GUNZIP_MAGIC_COOKIE1||r===J.GUNZIP_MAGIC_COOKIE2))}function WS(e){return OS(new Uint8Array(e)).buffer}async function HS(e){const t=new Uint8Array(e),n=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",r=new DecompressionStream(n),i=r.writable.getWriter();i.write(t).catch(console.error);const s=i.close().catch(console.error),a=await new Response(r.readable).arrayBuffer();return await s,a}async function Wm(e,t=1/0){const n=f=>f[0]===31&&f[1]===139&&f[2]===8?"gzip":f[0]===120&&[1,94,156,218].includes(f[1])?"deflate":"deflate-raw",r=new Uint8Array(e),i=n(r),s=new DecompressionStream(i),o=new TransformStream({transform(f,p){p.enqueue(f)},flush(f){f.terminate()}}),{readable:a,writable:l}=s,c=l.getWriter(),u=a.pipeThrough(o).getReader();c.write(r).catch(f=>{f instanceof Error&&f.name==="AbortError"||console.error("Error during write:",f)});const d=[];let h=0;try{for(;h<t;){const{done:f,value:p}=await u.read();if(f)break;const g=t-h,v=p.subarray(0,Math.min(p.length,g));if(d.push(v),h+=v.length,h>=t){await Promise.all([u.cancel().catch(()=>{}),c.abort().catch(()=>{})]);break}}}catch(f){f instanceof Error&&f.name==="AbortError"||console.error("Error during decompression:",f)}finally{await Promise.allSettled([u.cancel().catch(()=>{}),c.close().catch(()=>{})])}return d.length===1?d[0].buffer:d.reduce((f,p)=>{const g=new Uint8Array(f.byteLength+p.byteLength);return g.set(new Uint8Array(f),0),g.set(p,f.byteLength),g.buffer},new ArrayBuffer(0))}function XS(e,t=!1){let n=null;if(rf(e)&&(e=WS(e)),GS(e,t)?n=new he:YS(e,t)&&(n=new Nt),n)n.readHeader(e);else throw new Error("That file does not appear to be NIFTI!");return n}async function Po(e,t=!1){if(!rf(e))return XS(e,t);let n=null,r=await Wm(e,540),i=!0,s=!0;var o=new DataView(r);const a=o.getInt32(0,!0),l=o.getInt32(0,!1);if(a!==348)if(l===348)i=!1;else if(a===540)s=!1;else if(l===540)s=!1,i=!1;else throw new Error("That file does not appear to be NIFTI!");let c=Math.round(o.getFloat32(108,i));return Nt&&(c=J.getUint64At(o,168,i)),c>r.byteLength&&(r=await Wm(e,c)),s?n=new he:n=new Nt,n.readHeader(r),n}function KS(e){return e.extensionFlag[0]!=0}function Hm(e,t){var n=e.vox_offset,r=1,i=1;e.dims[4]&&(r=e.dims[4]),e.dims[5]&&(i=e.dims[5]);var s=e.dims[1]*e.dims[2]*e.dims[3]*r*i*(e.numBitsPerVoxel/8);return t.slice(n,n+s)}function mv(e,t,n,r={}){return t!==void 0&&n!==void 0&&(r={...r,headers:{...r.headers,Range:`bytes=${t}-${t+n-1}`}}),fetch(e,r)}function _S(e,t){return{...e,...t,headers:{...e.headers,...t.headers}}}function Xm(e,t){const n=typeof e=="string"?new URL(e):e;n.pathname.endsWith("/")||(n.pathname+="/");const r=new URL(t.slice(1),n);return r.search=n.search,r}async function Km(e){if(e.status!==404){if(e.status===200||e.status===206)return new Uint8Array(await e.arrayBuffer());throw new Error(`Unexpected response status ${e.status} ${e.statusText}`)}}async function QS(e,t,n,r){if(r)return fetch(e,{...n,headers:{...n.headers,Range:`bytes=-${t}`}});let i=await fetch(e,{...n,method:"HEAD"});if(!i.ok)return i;let s=i.headers.get("Content-Length"),o=Number(s);return mv(e,o-t,o,n)}var lo,co,uo,Sd;class qS{constructor(t,n={}){Je(this,uo);O(this,"url");Je(this,lo);Je(this,co);this.url=t,Ye(this,lo,n.overrides??{}),Ye(this,co,n.useSuffixRequest??!1)}async get(t,n={}){let r=Xm(this.url,t).href,i=await fetch(r,pc(this,uo,Sd).call(this,n));return Km(i)}async getRange(t,n,r={}){let i=Xm(this.url,t),s=pc(this,uo,Sd).call(this,r),o;return"suffixLength"in n?o=await QS(i,n.suffixLength,s,me(this,co)):o=await mv(i,n.offset,n.length,s),Km(o)}}lo=new WeakMap,co=new WeakMap,uo=new WeakSet,Sd=function(t){return _S(me(this,lo),t)};const ZS="modulepreload",JS=function(e,t){return new URL(e,t).href},_m={},su=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=JS(c,r),c in _m)return;_m[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let p=o.length-1;p>=0;p--){const g=o[p];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ZS,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var Gt;class pv{constructor(t,n,r){Je(this,Gt);typeof t=="number"?Ye(this,Gt,new Uint8Array(t)):t instanceof ArrayBuffer?Ye(this,Gt,new Uint8Array(t,n,r)):Ye(this,Gt,new Uint8Array(Array.from(t,i=>i?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return me(this,Gt).byteOffset}get byteLength(){return me(this,Gt).byteLength}get buffer(){return me(this,Gt).buffer}get length(){return me(this,Gt).length}get(t){let n=me(this,Gt)[t];return typeof n=="number"?n!==0:n}set(t,n){me(this,Gt)[t]=n?1:0}fill(t){me(this,Gt).fill(t?1:0)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}Gt=new WeakMap;var ki;class sf{constructor(t,n,r,i){O(this,"_data");O(this,"chars");Je(this,ki);if(this.chars=t,Ye(this,ki,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*t);else if(n instanceof ArrayBuffer)i&&(i=i*t),this._data=new Uint8Array(n,r,i);else{let s=Array.from(n);this._data=new Uint8Array(s.length*t);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(t){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*t,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(t,n){const r=new Uint8Array(this.buffer,this.byteOffset+this.chars*t,this.chars);r.fill(0),r.set(me(this,ki).encode(n))}fill(t){const n=me(this,ki).encode(t);for(let r=0;r<this.length;r++)this._data.set(n,r*this.chars)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}ki=new WeakMap;var bt;const Pf=class Pf{constructor(t,n,r,i){Je(this,bt);O(this,"chars");if(this.chars=t,typeof n=="number")Ye(this,bt,new Int32Array(n*t));else if(n instanceof ArrayBuffer)i&&(i*=t),Ye(this,bt,new Int32Array(n,r,i));else{const s=n,o=new Pf(t,1);Ye(this,bt,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*me(o,bt)}()))}}get BYTES_PER_ELEMENT(){return me(this,bt).BYTES_PER_ELEMENT*this.chars}get byteLength(){return me(this,bt).byteLength}get byteOffset(){return me(this,bt).byteOffset}get buffer(){return me(this,bt).buffer}get length(){return me(this,bt).length/this.chars}get(t){const n=this.chars*t;let r="";for(let i=0;i<this.chars;i++)r+=String.fromCodePoint(me(this,bt)[n+i]);return r.replace(/\u0000/g,"")}set(t,n){const r=this.chars*t,i=me(this,bt).subarray(r,r+this.chars);i.fill(0);for(let s=0;s<this.chars;s++)i[s]=n.codePointAt(s)??0}fill(t){this.set(0,t);let n=me(this,bt).subarray(0,this.chars);for(let r=1;r<this.length;r++)me(this,bt).set(n,r*this.chars)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}};bt=new WeakMap;let oo=Pf;function No(e){const t=new TextDecoder().decode(e);return JSON.parse(t)}function Qm(e,t){const n=t/2,r=t-1;let i=0;for(let s=0;s<e.length;s+=t)for(let o=0;o<n;o+=1)i=e[s+o],e[s+o]=e[s+r-o],e[s+r-o]=i}function gv(e){if(e==="v2:object")return globalThis.Array;let t=e.match(/v2:([US])(\d+)/);if(t){let[,r,i]=t;return(r==="U"?oo:sf).bind(null,Number(i))}let n={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float16:globalThis.Float16Array,float32:Float32Array,float64:Float64Array,bool:pv}[e];return ot(n,`Unknown or unsupported data_type: ${e}`),n}function Qr(e,t){const n=e.length;typeof t=="string"&&(t=t==="C"?Array.from({length:n},(s,o)=>o):Array.from({length:n},(s,o)=>n-1-o)),ot(n===t.length,"Order length must match the number of dimensions.");let r=1,i=new Array(n);for(let s=t.length-1;s>=0;s--)i[t[s]]=r,r*=e[t[s]];return i}function $S({name:e,configuration:t}){if(e==="default"){const n=(t==null?void 0:t.separator)??"/";return r=>["c",...r].join(n)}if(e==="v2"){const n=(t==null?void 0:t.separator)??".";return r=>r.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${e}`)}function eE(e){if(e==="|O")return{data_type:"v2:object"};let t=e.match(/^([<|>])(.*)$/);ot(t,`Invalid dtype: ${e}`);let[,n,r]=t,i={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f2:"float16",f4:"float32",f8:"float64"}[r]??(r.startsWith("S")||r.startsWith("U")?`v2:${r}`:void 0);return ot(i,`Unsupported or unknown dtype: ${e}`),n==="|"?{data_type:i}:{data_type:i,endian:n==="<"?"little":"big"}}function tE(e,t={}){let n=[],r=eE(e.dtype);e.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in r&&r.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:i,...s}of e.filters??[])n.push({name:i,configuration:s});if(e.compressor){let{id:i,...s}=e.compressor;n.push({name:i,configuration:s})}return{zarr_format:3,node_type:"array",shape:e.shape,data_type:r.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:e.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:e.dimension_separator??"."}},codecs:n,fill_value:e.fill_value,attributes:t}}function nE(e,t={}){return{zarr_format:3,node_type:"group",attributes:t}}function rE(e,t){if(t!=="number"&&t!=="bigint"&&t!=="boolean"&&t!=="object"&&t!=="string")return e===t;let n=e==="bool";if(t==="boolean")return n;let r=e.startsWith("v2:U")||e.startsWith("v2:S");if(t==="string")return r;let i=e==="int64"||e==="uint64";if(t==="bigint")return i;let s=e==="v2:object";return t==="object"?s:!r&&!i&&!n&&!s}function iE(e){return(e==null?void 0:e.name)==="sharding_indexed"}function Av(e){return(e.data_type==="uint64"||e.data_type==="int64")&&e.fill_value!=null?BigInt(e.fill_value):e.fill_value}function vv(e,...t){if(!t.some(n=>e instanceof n))throw e}function ot(e,t=""){if(!e)throw new Error(t)}async function xv(e,{format:t,signal:n}){const r=e instanceof Response?e:new Response(e);ot(r.body,"Response does not contain body.");try{return await new Response(r.body.pipeThrough(new DecompressionStream(t),{signal:n})).arrayBuffer()}catch{throw n==null||n.throwIfAborted(),new Error(`Failed to decode ${t}`)}}class of{constructor(t,n){O(this,"kind","array_to_array");ot(t.keepbits>=0,"keepbits must be zero or positive")}static fromConfig(t,n){return new of(t,n)}encode(t){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(t){return t}}const qm=sE();function sE(){const e=new Uint32Array([305419896]);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)[0]!==18}function Zm(e){return"BYTES_PER_ELEMENT"in e?e.BYTES_PER_ELEMENT:4}var ho,tr,fo,mo,Bi;const Nf=class Nf{constructor(t,n){O(this,"kind","array_to_bytes");Je(this,ho);Je(this,tr);Je(this,fo);Je(this,mo);Je(this,Bi);Ye(this,Bi,t==null?void 0:t.endian),Ye(this,tr,gv(n.data_type)),Ye(this,mo,n.shape),Ye(this,ho,Qr(n.shape,"C"));const r=new(me(this,tr))(0);Ye(this,fo,r.BYTES_PER_ELEMENT)}static fromConfig(t,n){return new Nf(t,n)}encode(t){let n=new Uint8Array(t.data.buffer);return qm&&me(this,Bi)==="big"&&Qm(n,Zm(me(this,tr))),n}decode(t){return qm&&me(this,Bi)==="big"&&Qm(t,Zm(me(this,tr))),{data:new(me(this,tr))(t.buffer,t.byteOffset,t.byteLength/me(this,fo)),shape:me(this,mo),stride:me(this,ho)}}};ho=new WeakMap,tr=new WeakMap,fo=new WeakMap,mo=new WeakMap,Bi=new WeakMap;let Tl=Nf;class af{constructor(){O(this,"kind","bytes_to_bytes")}static fromConfig(){return new af}encode(t){throw new Error("Not implemented")}decode(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength-4)}}class lf{constructor(){O(this,"kind","bytes_to_bytes")}static fromConfig(t){return new lf}encode(t){throw new Error("Gzip encoding is not enabled by default. Please register a custom codec with `numcodecs/gzip`.")}async decode(t){const n=await xv(t,{format:"gzip"});return new Uint8Array(n)}}function oE(e,t){return ot(!Number.isNaN(t),"JsonCodec allow_nan is false but NaN was encountered during encoding."),ot(t!==Number.POSITIVE_INFINITY,"JsonCodec allow_nan is false but Infinity was encountered during encoding."),ot(t!==Number.NEGATIVE_INFINITY,"JsonCodec allow_nan is false but -Infinity was encountered during encoding."),t}function aE(e,t){return t instanceof Object&&!Array.isArray(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t}var po,go;const kf=class kf{constructor(t={}){O(this,"configuration");O(this,"kind","array_to_bytes");Je(this,po);Je(this,go);this.configuration=t;const{encoding:n="utf-8",skipkeys:r=!1,ensure_ascii:i=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:c=!0}=t;let u=t.separators;u||(l?u=[", ",": "]:u=[",",":"]),Ye(this,po,{encoding:n,skipkeys:r,ensure_ascii:i,check_circular:s,allow_nan:o,indent:l,separators:u,sort_keys:a}),Ye(this,go,{strict:c})}static fromConfig(t){return new kf(t)}encode(t){const{indent:n,encoding:r,ensure_ascii:i,check_circular:s,allow_nan:o,sort_keys:a}=me(this,po);ot(r==="utf-8","JsonCodec does not yet support non-utf-8 encoding.");const l=[];ot(s,"JsonCodec does not yet support skipping the check for circular references during encoding."),o||l.push(oE),a&&l.push(aE);const c=Array.from(t.data);c.push("|O"),c.push(t.shape);let u;l.length&&(u=(h,f)=>{let p=f;for(let g of l)p=g(h,p);return p});let d=JSON.stringify(c,u,n);return i&&(d=d.replace(/[\u007F-\uFFFF]/g,h=>{const f=`0000${h.charCodeAt(0).toString(16)}`;return`\\u${f.substring(f.length-4)}`})),new TextEncoder().encode(d)}decode(t){const{strict:n}=me(this,go);ot(n,"JsonCodec does not yet support non-strict decoding.");const r=No(t),i=r.pop();r.pop(),ot(i,"0D not implemented for JsonCodec.");const s=Qr(i,"C");return{data:r,shape:i,stride:s}}};po=new WeakMap,go=new WeakMap;let Ed=kf;function Jm(e){return e instanceof pv||e instanceof sf||e instanceof oo?new Proxy(e,{get(n,r){return n.get(Number(r))},set(n,r,i){return n.set(Number(r),i),!0}}):e}function lE(e,t){let n;return e.data instanceof sf||e.data instanceof oo?n=new e.constructor(e.data.length,e.data.chars):n=new e.constructor(e.data.length),{data:n,shape:e.shape,stride:Qr(e.shape,t)}}function cE(e,t){let n=lE(e,t),r=e.shape.length,i=e.data.length,s=Array(r).fill(0),o=Jm(e.data),a=Jm(n.data);for(let l=0;l<i;l++){let c=0;for(let u=0;u<r;u++)c+=s[u]*n.stride[u];a[c]=o[l],s[0]+=1;for(let u=0;u<r;u++)if(s[u]===e.shape[u]){if(u+1===r)break;s[u]=0,s[u+1]+=1}}return n}function uE(e){let t=e.shape.length;return ot(t===e.stride.length,"Shape and stride must have the same length."),e.stride.map((n,r)=>({stride:n,index:r})).sort((n,r)=>r.stride-n.stride).map(n=>n.index)}function dE(e,t){let n=uE(e);return ot(n.length===t.length,"Orders must match"),n.every((r,i)=>r===t[i])}var Ao,Vi;const Bf=class Bf{constructor(t,n){O(this,"kind","array_to_array");Je(this,Ao);Je(this,Vi);let r=t.order??"C",i=n.shape.length,s=new Array(i),o=new Array(i);if(r==="C")for(let a=0;a<i;++a)s[a]=a,o[a]=a;else if(r==="F")for(let a=0;a<i;++a)s[a]=i-a-1,o[a]=i-a-1;else s=r,s.forEach((a,l)=>{ot(o[a]===void 0,`Invalid permutation: ${JSON.stringify(r)}`),o[a]=l});Ye(this,Ao,s),Ye(this,Vi,o)}static fromConfig(t,n){return new Bf(t,n)}encode(t){return dE(t,me(this,Vi))?t:cE(t,me(this,Vi))}decode(t){return{data:t.data,shape:t.shape,stride:Qr(t.shape,me(this,Ao))}}};Ao=new WeakMap,Vi=new WeakMap;let Md=Bf;var vo,xo;const Vf=class Vf{constructor(t){O(this,"kind","array_to_bytes");Je(this,vo);Je(this,xo);Ye(this,vo,t),Ye(this,xo,Qr(t,"C"))}static fromConfig(t,n){return new Vf(n.shape)}encode(t){throw new Error("Method not implemented.")}decode(t){let n=new TextDecoder,r=new DataView(t.buffer),i=Array(r.getUint32(0,!0)),s=4;for(let o=0;o<i.length;o++){let a=r.getUint32(s,!0);s+=4,i[o]=n.decode(t.buffer.slice(s,s+a)),s+=a}return{data:i,shape:me(this,vo),stride:me(this,xo)}}};vo=new WeakMap,xo=new WeakMap;let Dd=Vf;class cf{constructor(){O(this,"kind","bytes_to_bytes")}static fromConfig(t){return new cf}encode(t){throw new Error("Zlib encoding is not enabled by default. Please register a codec with `numcodecs/zlib`.")}async decode(t){const n=await xv(t,{format:"deflate"});return new Uint8Array(n)}}function hE(){return new Map().set("blosc",()=>su(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default)).set("lz4",()=>su(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([2,1]),import.meta.url).then(e=>e.default)).set("zstd",()=>su(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([3,1]),import.meta.url).then(e=>e.default)).set("gzip",()=>lf).set("zlib",()=>cf).set("transpose",()=>Md).set("bytes",()=>Tl).set("crc32c",()=>af).set("vlen-utf8",()=>Dd).set("json2",()=>Ed).set("bitround",()=>of)}const fE=hE();function Td(e){let t;return{async encode(n){t||(t=await $m(e));for(const i of t.array_to_array)n=await i.encode(n);let r=await t.array_to_bytes.encode(n);for(const i of t.bytes_to_bytes)r=await i.encode(r);return r},async decode(n){t||(t=await $m(e));for(let i=t.bytes_to_bytes.length-1;i>=0;i--)n=await t.bytes_to_bytes[i].decode(n);let r=await t.array_to_bytes.decode(n);for(let i=t.array_to_array.length-1;i>=0;i--)r=await t.array_to_array[i].decode(r);return r}}}async function $m(e){let t=e.codecs.map(async s=>{var a;let o=await((a=fE.get(s.name))==null?void 0:a());return ot(o,`Unknown codec: ${s.name}`),{Codec:o,meta:s}}),n=[],r,i=[];for await(let{Codec:s,meta:o}of t){let a=s.fromConfig(o.configuration,e);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":r=a;break;default:i.push(a)}}return r||(ot(mE(e),`Cannot encode ${e.data_type} to bytes without a codec`),r=Tl.fromConfig({endian:"little"},e)),{array_to_array:n,array_to_bytes:r,bytes_to_bytes:i}}function mE(e){return e.data_type!=="v2:object"}class ko extends Error{constructor(t,n={}){super(`Node not found: ${t}`,n),this.name="NodeNotFoundError"}}class uf extends Error{constructor(t){super(`Missing key: ${t}`),this.name="KeyError"}}const e1=18446744073709551615n;function pE(e,t,n,r){ot(e.store.getRange,"Store does not support range requests");let i=e.store.getRange.bind(e.store),s=t.map((l,c)=>l/r.chunk_shape[c]),o=Td({data_type:"uint64",shape:[...s,2],codecs:r.index_codecs}),a={};return async l=>{let c=l.map((A,x)=>Math.floor(A/s[x])),u=e.resolve(n(c)).path,d;if(u in a)d=a[u];else{let A=4,x=16*s.reduce((b,y)=>b*y,1),w=await i(u,{suffixLength:x+A});d=a[u]=w?await o.decode(w):null}if(d===null)return;let{data:h,shape:f,stride:p}=d,g=l.map((A,x)=>A%f[x]).reduce((A,x,w)=>A+x*p[w],0),v=h[g],m=h[g+1];if(!(v===e1&&m===e1))return i(u,{offset:Number(v),length:Number(m)})}}class ii{constructor(t,n="/"){O(this,"store");O(this,"path");this.store=t,this.path=n}resolve(t){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new ii(this.store,decodeURIComponent(new URL(t,n).pathname))}}function gE(e){return new ii(e??new Map)}var wo;class df extends ii{constructor(n,r,i){super(n,r);O(this,"kind","group");Je(this,wo);Ye(this,wo,i)}get attrs(){return me(this,wo).attributes}}wo=new WeakMap;function t1(e){var n;const t=e.find(r=>r.name==="transpose");return((n=t==null?void 0:t.configuration)==null?void 0:n.order)??"C"}const ws=Symbol("zarrita.context");function AE(e){return e[ws]}function vE(e,t){let{configuration:n}=t.codecs.find(iE)??{},r={encode_chunk_key:$S(t.chunk_key_encoding),TypedArray:gv(t.data_type),fill_value:t.fill_value};if(n){let s=t1(n.codecs);return{...r,kind:"sharded",chunk_shape:n.chunk_shape,codec:Td({data_type:t.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o){return Qr(o,s)},get_chunk_bytes:pE(e,t.chunk_grid.configuration.chunk_shape,r.encode_chunk_key,n)}}let i=t1(t.codecs);return{...r,kind:"regular",chunk_shape:t.chunk_grid.configuration.chunk_shape,codec:Td({data_type:t.data_type,shape:t.chunk_grid.configuration.chunk_shape,codecs:t.codecs}),get_strides(s){return Qr(s,i)},async get_chunk_bytes(s,o){let a=r.encode_chunk_key(s),l=e.resolve(a).path;return e.store.get(l,o)}}}var O1,z1,Or,j1;let Il=(j1=class extends(z1=ii,O1=ws,z1){constructor(n,r,i){super(n,r);O(this,"kind","array");Je(this,Or);O(this,O1);Ye(this,Or,{...i,fill_value:Av(i)}),this[ws]=vE(this,i)}get attrs(){return me(this,Or).attributes}get shape(){return me(this,Or).shape}get chunks(){return this[ws].chunk_shape}get dtype(){return me(this,Or).data_type}async getChunk(n,r){let i=this[ws],s=await i.get_chunk_bytes(n,r);if(!s){let o=i.chunk_shape.reduce((l,c)=>l*c,1),a=new i.TypedArray(o);return a.fill(i.fill_value),{data:a,shape:i.chunk_shape,stride:i.get_strides(i.chunk_shape)}}return i.codec.decode(s)}is(n){return rE(this.dtype,n)}},Or=new WeakMap,j1);function*xE(e,t,n=1){t===void 0&&(t=e,e=0);for(let r=e;r<t;r+=n)yield r}function*wE(...e){if(e.length===0)return;const t=e.map(r=>r[Symbol.iterator]()),n=t.map(r=>r.next());if(n.some(r=>r.done))throw new Error("Input contains an empty iterator.");for(let r=0;;){if(n[r].done){if(t[r]=e[r][Symbol.iterator](),n[r]=t[r].next(),++r>=t.length)return}else yield n.map(({value:i})=>i),r=0;n[r]=t[r].next()}}function yE({start:e,stop:t,step:n},r){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const i=n<0,[s,o]=i?[-1,r-1]:[0,r];return e===null?e=i?o:s:e<0?(e+=r,e<s&&(e=s)):e>o&&(e=o),t===null?t=i?s:o:t<0?(t+=r,t<s&&(t=s)):t>o&&(t=o),[e,t,n]}function Os(e,t,n=null){return t===void 0&&(t=e,e=null),{start:e,stop:t,step:n}}function bE(){const e=[];return{add:t=>e.push(t()),onIdle:()=>Promise.all(e)}}class hf extends Error{constructor(t){super(t),this.name="IndexError"}}function CE(e,t){throw new hf(`too many indicies for array; expected ${t.length}, got ${e.length}`)}function SE(e){throw new hf(`index out of bounds for dimension with length ${e}`)}function EE(){throw new hf("only slices with step >= 1 are supported")}function ME(e,t){e.length>t.length&&CE(e,t)}function DE(e,t){return e=Math.trunc(e),e<0&&(e=t+e),(e>=t||e<0)&&SE(t),e}class TE{constructor({dim_sel:t,dim_len:n,dim_chunk_len:r}){O(this,"dim_sel");O(this,"dim_len");O(this,"dim_chunk_len");O(this,"nitems");t=DE(t,n),this.dim_sel=t,this.dim_len=n,this.dim_chunk_len=r,this.nitems=1}*[Symbol.iterator](){const t=Math.floor(this.dim_sel/this.dim_chunk_len),n=t*this.dim_chunk_len,r=this.dim_sel-n;yield{dim_chunk_ix:t,dim_chunk_sel:r}}}class n1{constructor({dim_sel:t,dim_len:n,dim_chunk_len:r}){O(this,"start");O(this,"stop");O(this,"step");O(this,"dim_len");O(this,"dim_chunk_len");O(this,"nitems");O(this,"nchunks");const[i,s,o]=yE(t,n);this.start=i,this.stop=s,this.step=o,this.step<1&&EE(),this.dim_len=n,this.dim_chunk_len=r,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const t=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const r of xE(t,n)){const i=r*this.dim_chunk_len,s=Math.min(this.dim_len,(r+1)*this.dim_chunk_len),o=s-i;let a=0,l=0;if(this.start<i){const f=(i-this.start)%this.step;f&&(l+=this.step-f),a=Math.ceil((i-this.start)/this.step)}else l=this.start-i;const c=this.stop>s?o:this.stop-i,u=[l,c,this.step],d=Math.ceil((c-l)/this.step),h=[a,a+d,1];yield{dim_chunk_ix:r,dim_chunk_sel:u,dim_out_sel:h}}}}function IE(e,t){let n=[];return e===null?n=t.map(r=>Os(null)):Array.isArray(e)&&(n=e.map(r=>r??Os(null))),ME(n,t),n}class FE{constructor({selection:t,shape:n,chunk_shape:r}){O(this,"dim_indexers");O(this,"shape");this.dim_indexers=IE(t,n).map((i,s)=>new(typeof i=="number"?TE:n1)({dim_sel:i,dim_len:n[s],dim_chunk_len:r[s]})),this.shape=this.dim_indexers.filter(i=>i instanceof n1).map(i=>i.nitems)}*[Symbol.iterator](){for(const t of wE(...this.dim_indexers)){const n=t.map(i=>i.dim_chunk_ix),r=t.map(i=>"dim_out_sel"in i?{from:i.dim_chunk_sel,to:i.dim_out_sel}:{from:i.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:r}}}}function RE(e,t){return"get"in e?e.get(t):e[t]}async function PE(e,t,n,r){var l;let i=AE(e),s=new FE({selection:t,shape:e.shape,chunk_shape:e.chunks}),o=r.prepare(new i.TypedArray(s.shape.reduce((c,u)=>c*u,1)),s.shape,i.get_strides(s.shape)),a=((l=n.create_queue)==null?void 0:l.call(n))??bE();for(const{chunk_coords:c,mapping:u}of s)a.add(async()=>{let{data:d,shape:h,stride:f}=await e.getChunk(c,n.opts),p=r.prepare(d,h,f);r.set_from_chunk(o,p,u)});return await a.onIdle(),s.shape.length===0?RE(o.data,0):o}function ff(e,t=0,n){let r=n??e.length-t;return{length:r,subarray(i,s=r){return ff(e,t+i,s-i)},set(i,s=0){for(let o=0;o<i.length;o++)e[t+s+o]=i.get(o)},get(i){return e[t+i]}}}function ou(e){return globalThis.Array.isArray(e.data)?{data:ff(e.data),stride:e.stride,bytes_per_element:1}:{data:new Uint8Array(e.data.buffer,e.data.byteOffset,e.data.byteLength),stride:e.stride,bytes_per_element:e.data.BYTES_PER_ELEMENT}}function NE(e){return"chars"in e?e.constructor.bind(null,e.chars):e.constructor}function kE(e,t){if(globalThis.Array.isArray(e.data))return ff([t]);let n=NE(e.data),r=new n([t]);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}const BE={prepare(e,t,n){return{data:e,shape:t,stride:n}},set_scalar(e,t,n){let r=ou(e);Id(r,t,kE(e,n),r.bytes_per_element)},set_from_chunk(e,t,n){let r=ou(e);Va(r,ou(t),r.bytes_per_element,n)}};async function r1(e,t=null,n={}){return PE(e,t,n,BE)}function wv(e,t,n){return n<0&&t<e?Math.floor((e-t-1)/-n)+1:e<t?Math.floor((t-e-1)/n)+1:0}function Id(e,t,n,r){if(t.length===0){e.data.set(n,0);return}const[i,...s]=t,[o,...a]=e.stride;if(typeof i=="number"){const h=e.data.subarray(o*i*r);Id({data:h,stride:a},s,n,r);return}const[l,c,u]=i,d=wv(l,c,u);if(s.length===0){for(let h=0;h<d;h++)e.data.set(n,o*(l+u*h)*r);return}for(let h=0;h<d;h++){const f=e.data.subarray(o*(l+u*h)*r);Id({data:f,stride:a},s,n,r)}}function Va(e,t,n,r){const[i,...s]=r,[o,...a]=e.stride,[l,...c]=t.stride;if(i.from===null){if(s.length===0){e.data.set(t.data.subarray(0,n),i.to*n);return}Va({data:e.data.subarray(o*i.to*n),stride:a},t,n,s);return}if(i.to===null){if(s.length===0){let m=i.from*n;e.data.set(t.data.subarray(m,m+n),0);return}Va(e,{data:t.data.subarray(l*i.from*n),stride:c},n,s);return}const[u,d,h]=i.to,[f,p,g]=i.from,v=wv(u,d,h);if(s.length===0){if(h===1&&g===1&&o===1&&l===1){let m=f*n,A=v*n;e.data.set(t.data.subarray(m,m+A),u*n);return}for(let m=0;m<v;m++){let A=l*(f+g*m)*n;e.data.set(t.data.subarray(A,A+n),o*(u+h*m)*n)}return}for(let m=0;m<v;m++)Va({data:e.data.subarray(o*(u+m*h)*n),stride:a},{data:t.data.subarray(l*(f+m*g)*n),stride:c},n,s)}let oc=VE();function VE(){let e=new WeakMap;function t(n){let r=e.get(n)??{v2:0,v3:0};return e.set(n,r),r}return{increment(n,r){t(n)[r]+=1},version_max(n){let r=t(n);return r.v3>r.v2?"v3":"v2"}}}async function UE(e){let t=await e.store.get(e.resolve(".zattrs").path);return t?No(t):{}}async function LE(e,t={}){let n="store"in e?e:new ii(e),r={};return(t.attrs??!0)&&(r=await UE(n)),t.kind==="array"?i1(n,r):t.kind==="group"?s1(n,r):i1(n,r).catch(i=>(vv(i,ko),s1(n,r)))}async function i1(e,t){let{path:n}=e.resolve(".zarray"),r=await e.store.get(n);if(!r)throw new ko("v2 array",{cause:new uf(n)});return oc.increment(e.store,"v2"),new Il(e.store,e.path,tE(No(r),t))}async function s1(e,t){let{path:n}=e.resolve(".zgroup"),r=await e.store.get(n);if(!r)throw new ko("v2 group",{cause:new uf(n)});return oc.increment(e.store,"v2"),new df(e.store,e.path,nE(No(r),t))}async function OE(e){let{store:t,path:n}=e.resolve("zarr.json"),r=await e.store.get(n);if(!r)throw new ko("v3 array or group",{cause:new uf(n)});let i=No(r);return i.node_type==="array"&&(i.fill_value=Av(i)),i.node_type==="array"?new Il(t,e.path,i):new df(t,e.path,i)}async function zE(e,t={}){let n="store"in e?e:new ii(e),r=await OE(n);if(oc.increment(n.store,"v3"),t.kind===void 0||t.kind==="array"&&r instanceof Il||t.kind==="group"&&r instanceof df)return r;let i=r instanceof Il?"array":"group";throw new Error(`Expected node of kind ${t.kind}, found ${i}.`)}async function sr(e,t={}){let n="store"in e?e.store:e,r=oc.version_max(n),i=r==="v2"?sr.v2:sr.v3,s=r==="v2"?sr.v3:sr.v2;return i(e,t).catch(o=>(vv(o,ko),s(e,t)))}sr.v2=LE;sr.v3=zE;var yv=Object.defineProperty,bv=e=>{throw TypeError(e)},jE=(e,t,n)=>t in e?yv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rt=(e,t)=>{for(var n in t)yv(e,n,{get:t[n],enumerable:!0})},R=(e,t,n)=>jE(e,typeof t!="symbol"?t+"":t,n),Cv=(e,t,n)=>t.has(e)||bv("Cannot "+n),oe=(e,t,n)=>(Cv(e,t,"read from private field"),n?n.call(e):t.get(e)),li=(e,t,n)=>t.has(e)?bv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Zn=(e,t,n,r)=>(Cv(e,t,"write to private field"),t.set(e,n),n),GE={version:"0.67.0"},we={TEXTURE0_BACK_VOL:33984,TEXTURE1_COLORMAPS:33985,TEXTURE2_OVERLAY_VOL:33986,TEXTURE3_FONT:33987,TEXTURE5_MATCAP:33989,TEXTURE6_GRADIENT:33990,TEXTURE7_DRAW:33991,TEXTURE8_PAQD:33992,TEXTURE9_ORIENT:33993,TEXTURE11_GC_BACK:33995,TEXTURE12_GC_STRENGTH0:33996,TEXTURE13_GC_STRENGTH1:33997,TEXTURE14_GC_LABEL0:33998,TEXTURE15_GC_LABEL1:33999},YE=new Float32Array([-1,-1,-1,.28,.28,.28,-1,-1,-1,.28,.28,.28,-1,1,-1,.28,.28,.28,1,-1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,-1,-1,1,.8,.8,.8,-1,-1,1,.8,.8,.8,1,-1,1,.8,.8,.8,-1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,-1,1,-1,0,0,.74,-1,1,-1,0,0,.74,-1,1,1,0,0,.74,1,1,-1,0,0,.74,1,1,1,0,0,.74,1,1,1,0,0,.74,-1,-1,-1,.42,0,.42,-1,-1,-1,.42,0,.42,1,-1,-1,.42,0,.42,-1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,-1,-1,-1,.64,0,0,-1,-1,-1,.64,0,0,-1,-1,1,.64,0,0,-1,1,-1,.64,0,0,-1,1,1,.64,0,0,-1,1,1,.64,0,0,1,-1,-1,0,.5,0,1,-1,-1,0,.5,0,1,1,-1,0,.5,0,1,-1,1,0,.5,0,1,1,1,0,.5,0,1,1,1,0,.5,0,-.45,1,-.8,0,0,0,-.45,1,-.8,0,0,0,-.45,1,.8,0,0,0,-.25,1,-.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.6,0,0,0,-.25,1,.6,0,0,0,-.25,1,.8,0,0,0,.45,1,.6,0,0,0,.25,1,.8,0,0,0,.25,1,.8,0,0,0,.25,1,.1,0,0,0,.25,1,.1,0,0,0,.25,1,.6,0,0,0,.45,1,.1,0,0,0,.45,1,.6,0,0,0,.45,1,.6,0,0,0,-.25,1,-.1,0,0,0,-.25,1,-.1,0,0,0,-.25,1,.1,0,0,0,.25,1,-.1,0,0,0,.45,1,.1,0,0,0,.45,1,.1,0,0,0,.45,-1,-.8,0,0,0,.45,-1,-.8,0,0,0,.05,-1,.8,0,0,0,.25,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,-.25,-1,-.8,0,0,0,-.25,-1,-.8,0,0,0,.05,-1,.8,0,0,0,-.45,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,.13,-1,-.3,0,0,0,.13,-1,-.3,0,0,0,.07,-1,-.1,0,0,0,-.33,-1,-.3,0,0,0,-.27,-1,-.1,0,0,0,-.27,-1,-.1,0,0,0,-.45,.6,1,0,0,0,-.45,.6,1,0,0,0,-.45,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.4,1,0,0,0,-.25,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.8,1,0,0,0,-.25,.6,1,0,0,0,.25,.8,1,0,0,0,.45,.6,1,0,0,0,.45,.6,1,0,0,0,.25,.8,1,0,0,0,.25,.8,1,0,0,0,.25,-.1,1,0,0,0,.45,.6,1,0,0,0,.45,.1,1,0,0,0,.45,.1,1,0,0,0,-.25,.1,1,0,0,0,-.25,.1,1,0,0,0,-.45,-.1,1,0,0,0,.25,.1,1,0,0,0,.25,-.1,1,0,0,0,.25,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.6,1,0,0,0,-.25,-.1,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.8,1,0,0,0,.45,-.6,1,0,0,0,.25,-.8,1,0,0,0,.25,-.8,1,0,0,0,.25,-.4,1,0,0,0,.25,-.4,1,0,0,0,.25,-.6,1,0,0,0,.45,-.4,1,0,0,0,.45,-.6,1,0,0,0,.45,-.6,1,0,0,0,-.1,-.8,-1,0,0,0,-.1,-.8,-1,0,0,0,-.1,.8,-1,0,0,0,.1,-.8,-1,0,0,0,.1,.8,-1,0,0,0,.1,.8,-1,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.6,0,0,0,-1,.45,-.8,0,0,0,-1,.45,-.6,0,0,0,-1,.45,-.6,0,0,0,1,.45,-.8,0,0,0,1,.45,-.8,0,0,0,1,.45,.8,0,0,0,1,.25,-.8,0,0,0,1,.25,.8,0,0,0,1,.25,.8,0,0,0,1,.25,.6,0,0,0,1,.25,.6,0,0,0,1,.25,.8,0,0,0,1,-.45,.6,0,0,0,1,-.25,.8,0,0,0,1,-.25,.8,0,0,0,1,-.25,.1,0,0,0,1,-.25,.1,0,0,0,1,-.25,.6,0,0,0,1,-.45,.1,0,0,0,1,-.45,.6,0,0,0,1,-.45,.6,0,0,0,1,.25,-.1,0,0,0,1,.25,-.1,0,0,0,1,.25,.1,0,0,0,1,-.25,-.1,0,0,0,1,-.45,.1,0,0,0,1,-.45,.1,0,0,0,1,-.25,-.8,0,0,0,1,-.25,-.8,0,0,0,1,-.05,-.1,0,0,0,1,-.45,-.8,0,0,0,1,-.25,-.1,0,0,0,1,-.25,-.1,0,0,0]),be=class{constructor(t,n,r,i,s=null,o=null){R(this,"sphereIdx",[]),R(this,"sphereVtx",[]),R(this,"renderShaders",[]),R(this,"isVisible",!0),R(this,"isPickable",!0),R(this,"vertexBuffer"),R(this,"indexCount"),R(this,"indexBuffer"),R(this,"vao"),R(this,"mode"),R(this,"glFlags",0),R(this,"id"),R(this,"colorId"),R(this,"modelMatrix",ge()),R(this,"scale",[1,1,1]),R(this,"position",[0,0,0]),R(this,"rotation",[0,0,0]),R(this,"rotationRadians",0),R(this,"extentsMin",[]),R(this,"extentsMax",[]),R(this,"furthestVertexFromOrigin"),R(this,"originNegate"),R(this,"fieldOfViewDeObliqueMM"),R(this,"mm"),this.vertexBuffer=n,this.indexCount=i,this.indexBuffer=s,this.vao=o,this.mode=r,this.id=t,this.colorId=[(t>>0&255)/255,(t>>8&255)/255,(t>>16&255)/255,(t>>24&255)/255]}};R(be,"BLEND",1);R(be,"CULL_FACE",2);R(be,"CULL_FRONT",4);R(be,"CULL_BACK",8);R(be,"ENABLE_DEPTH_TEST",16);R(be,"generateCrosshairs",function(e,t,n,r,i,s,o=20,a=0){const l=be.generateCrosshairsGeometry(e,n,r,i,s,o,a);return new be(t,l.vertexBuffer,e.TRIANGLES,l.indexCount,l.indexBuffer,l.vao)});R(be,"generateCrosshairsGeometry",function(e,t,n,r,i,s=20,o=0){const a=[],l=[],c=i*o;if(c<=0){let f=q(n[0],t[1],t[2]),p=q(r[0],t[1],t[2]);be.makeCylinder(a,l,f,p,i,s),f=q(t[0],n[1],t[2]),p=q(t[0],r[1],t[2]),be.makeCylinder(a,l,f,p,i,s),f=q(t[0],t[1],n[2]),p=q(t[0],t[1],r[2]),be.makeCylinder(a,l,f,p,i,s)}else{let f=q(n[0],t[1],t[2]),p=q(t[0]-c,t[1],t[2]);be.makeCylinder(a,l,f,p,i,s,!1),f=q(t[0]+c,t[1],t[2]),p=q(r[0],t[1],t[2]),be.makeCylinder(a,l,f,p,i,s,!1),f=q(t[0],n[1],t[2]),p=q(t[0],t[1]-c,t[2]),be.makeCylinder(a,l,f,p,i,s,!1),f=q(t[0],t[1]+c,t[2]),p=q(t[0],r[1],t[2]),be.makeCylinder(a,l,f,p,i,s,!1),f=q(t[0],t[1],n[2]),p=q(t[0],t[1],t[2]-c),be.makeCylinder(a,l,f,p,i,s,!1),f=q(t[0],t[1],t[2]+c),p=q(t[0],t[1],r[2]),be.makeCylinder(a,l,f,p,i,s,!1)}const u=e.createBuffer();if(u===null)throw new Error("could not instantiate vertex buffer");e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW);const d=e.createBuffer();if(d===null)throw new Error("could not instantiate index buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,d),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint32Array(l),e.STATIC_DRAW);const h=e.createVertexArray();return e.bindVertexArray(h),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,d),e.bindBuffer(e.ARRAY_BUFFER,u),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,3,e.FLOAT,!1,0,0),e.bindVertexArray(null),{vertexBuffer:u,indexBuffer:d,indexCount:l.length,vao:h}});R(be,"getFirstPerpVector",function(e){const t=q(0,0,0);return e[0]===0?t[0]=1:e[1]===0?t[1]=1:e[2]===0?t[2]=1:(t[0]=e[2],t[1]=e[2],t[2]=-(e[0]+e[1]),Zt(t,t)),t});R(be,"subdivide",function(e,t){let n=e.length/3,r=t.length/3;const i=r,s=Te(),o=Te();for(let a=0;a<i;a++){const l=t[a*3+0],c=t[a*3+1],u=t[a*3+2],d=q(e[l*3+0],e[l*3+1],e[l*3+2]),h=q(e[c*3+0],e[c*3+1],e[c*3+2]),f=q(e[u*3+0],e[u*3+1],e[u*3+2]);Yr(s,d,h),Zt(o,s),e.push(...o),Yr(s,h,f),Zt(o,s),e.push(...o),Yr(s,d,f),Zt(o,s),e.push(...o);let p=[n,n+1,n+2];t.push(...p),p=[l,n,n+2],t.push(...p),p=[n,c,n+1],t.push(...p),t[a*3+0]=n+2,t[a*3+1]=n+1,t[a*3+2]=u,r=r+3,n=n+3}});R(be,"weldVertices",function(e,t){const n=e.length/3;let r=0;const i=new Int32Array(n);for(let a=0;a<n-1;a++){if(i[a]!==0)continue;i[a]=r;let l=a*3;const c=e[l],u=e[l+1],d=e[l+2];for(let h=a+1;h<n;h++)l+=3,c===e[l]&&u===e[l+1]&&d===e[l+2]&&(i[h]=r);r++}if(r===n)return e;const s=t.length;for(let a=0;a<s;a++)t[a]=i[t[a]];const o=e.slice(0,r*3-1);for(let a=0;a<n-1;a++){const l=a*3,c=i[a]*3;o[c]=e[l],o[c+1]=e[l+1],o[c+2]=e[l+2]}return o});R(be,"makeSphere",function(e,t,n,r=[0,0,0]){let i=[0,0,1,.894,0,.447,.276,.851,.447,-.724,.526,.447,-.724,-.526,.447,.276,-.851,.447,.724,.526,-.447,-.276,.851,-.447,-.894,0,-.447,-.276,-.851,-.447,.724,-.526,-.447,0,0,-1];const s=[0,1,2,0,2,3,0,3,4,0,4,5,0,5,1,7,6,11,8,7,11,9,8,11,10,9,11,6,10,11,6,2,1,7,3,2,8,4,3,9,5,4,10,1,5,6,7,2,7,8,3,8,9,4,9,10,5,10,6,1];be.subdivide(i,s),be.subdivide(i,s),i=be.weldVertices(i,s);for(let c=0;c<i.length;c++)i[c]=i[c]*n;const o=i.length/3;let a=0;for(let c=0;c<o;c++)i[a]=i[a]+r[0],a++,i[a]=i[a]+r[1],a++,i[a]=i[a]+r[2],a++;const l=Math.floor(e.length/3);for(let c=0;c<s.length;c++)s[c]=s[c]+l;t.push(...s),e.push(...i)});R(be,"makeCylinder",function(e,t,n,r,i,s=20,o=!0){s<3&&(s=3);const a=Te();Pe(a,r,n),Zt(a,a);const l=be.getFirstPerpVector(a),c=Te();Na(c,a,l),Zt(c,c);let u=2*s,d=2*s;o&&(d+=2*s,u+=2);const h=Math.floor(e.length/3),f=new Uint32Array(d*3),p=new Float32Array(u*3);function g(b,y){p[b*3+0]=y[0],p[b*3+1]=y[1],p[b*3+2]=y[2]}function v(b,y,C,S){f[b*3+0]=y+h,f[b*3+1]=C+h,f[b*3+2]=S+h}const m=2*s,A=m+1;o&&(g(m,n),g(A,r));const x=Te(),w=Te();for(let b=0;b<s;b++){const y=Math.cos(b/s*2*Math.PI),C=Math.sin(b/s*2*Math.PI);x[0]=i*(y*l[0]+C*c[0]),x[1]=i*(y*l[1]+C*c[1]),x[2]=i*(y*l[2]+C*c[2]),Yr(w,n,x),g(b,w),Yr(w,r,x),g(b+s,w);let S=0;b<s-1&&(S=b+1),v(b*2,b,S,b+s),v(b*2+1,S,S+s,b+s),o&&(v(s*2+b,b,m,S),v(s*2+b+s,A,b+s,S+s))}t.push(...f),e.push(...p)});R(be,"makeColoredCylinder",function(e,t,n,r,i,s,o=[192,0,0,255],a=20,l=!1){let c=e.length/3;be.makeCylinder(e,t,r,i,s,a,l),c=e.length/3-c;const u=[];for(let d=0;d<c*4-1;d+=4)u[d]=o[0],u[d+1]=o[1],u[d+2]=o[2],u[d+3]=o[3];n.push(...u)});R(be,"makeColoredSphere",function(e,t,n,r,i=[0,0,0],s=[0,0,192,255]){let o=e.length/3;be.makeSphere(e,t,r,i),o=e.length/3-o;const a=[];for(let l=0;l<o*4-1;l+=4)a[l]=s[0],a[l+1]=s[1],a[l+2]=s[2],a[l+3]=s[3];n.push(...a)});var qr=be,Sv=class ln{constructor({name:t="niivue",level:n="info"}={}){R(this,"level"),R(this,"name"),this.name=`${t}`,this.level=n}debug(...t){ln.levels[this.level]>ln.levels.debug||console.debug(`${this.name}-debug`,...t)}info(...t){ln.levels[this.level]>ln.levels.info||console.info(`${this.name}-info`,...t)}warn(...t){ln.levels[this.level]>ln.levels.warn||console.warn(`${this.name}-warn`,...t)}error(...t){ln.levels[this.level]>ln.levels.error||console.error(`${this.name}-error`,...t)}fatal(...t){ln.levels[this.level]>ln.levels.fatal||console.error(`${this.name}-fatal`,...t)}setLogLevel(t){this.level=t}setName(t){this.name=t}};R(Sv,"levels",{debug:0,info:1,warn:2,error:3,fatal:4,silent:1/0});var WE=Sv,k=new WE({name:"niivue",level:"info"}),Ua={};Rt(Ua,{$itksnap:()=>HE,$slicer3d:()=>XE,actc:()=>KE,afni_blues_inv:()=>o8,afni_reds_inv:()=>a8,batlow:()=>_E,bcgwhw:()=>qE,bcgwhw_dark:()=>QE,blue:()=>tM,blue2cyan:()=>$E,blue2magenta:()=>JE,blue2red:()=>ZE,bluegrn:()=>eM,bone:()=>nM,bronze:()=>rM,cet_l17:()=>iM,cividis:()=>sM,cool:()=>oM,copper:()=>lM,copper2:()=>aM,ct_airways:()=>cM,ct_artery:()=>uM,ct_bones:()=>dM,ct_brain:()=>fM,ct_brain_gray:()=>hM,ct_cardiac:()=>mM,ct_head:()=>pM,ct_kidneys:()=>gM,ct_liver:()=>AM,ct_muscles:()=>vM,ct_scalp:()=>xM,ct_skull:()=>wM,ct_soft:()=>yM,ct_soft_tissue:()=>bM,ct_surface:()=>CM,ct_vessels:()=>SM,ct_w_contrast:()=>EM,cubehelix:()=>MM,electric_blue:()=>DM,freesurfer:()=>TM,ge_color:()=>IM,gold:()=>FM,gray:()=>RM,green:()=>PM,green2cyan:()=>NM,green2orange:()=>kM,hot:()=>VM,hotiron:()=>BM,hsv:()=>UM,inferno:()=>LM,jet:()=>OM,kry:()=>zM,linspecer:()=>jM,lipari:()=>GM,magma:()=>YM,mako:()=>WM,navia:()=>HM,nih:()=>XM,plasma:()=>KM,random:()=>_M,red:()=>QM,redyell:()=>qM,rocket:()=>ZM,roi_i256:()=>l8,surface:()=>JM,thermal:()=>$M,turbo:()=>e8,violet:()=>t8,viridis:()=>n8,warm:()=>r8,winter:()=>i8,x_rain:()=>s8});var HE={R:[0,255,0,0,255,0,255,255,0,205,210,102,0,0,46,255,106,221,233,165,255,147,218,75,255,60,255,255,218,0,188,255,255,222,127,139,124,255,70,0,238,238,240,245,184,32,255,25,112,34,248,245,255,144,173,65,255,250,128,50,244,255,123,255,173,255,127,255,143,220,253,255,0,0,128,255,250,148,178,255,135,100,240,250,255,107,135,0,139,245,186,255,255,0,210,255,47,72,175,128,176,255,139,240,255,216,119,219,72,255,199,154,189,240,230,0,85,64,153,205,250,95,0,255,224,176,138,30,240,152,160],G:[0,0,255,0,255,255,0,239,0,133,180,205,0,139,139,228,90,160,150,42,250,112,112,0,182,179,235,228,165,128,143,105,218,184,255,69,252,255,130,100,130,232,255,222,134,178,20,25,128,139,248,255,160,238,255,105,99,240,0,205,164,255,104,165,216,192,255,140,188,20,245,250,206,255,0,250,128,0,34,127,206,149,230,235,245,142,206,0,0,245,85,228,222,191,105,248,79,61,238,128,224,240,0,255,215,191,136,112,209,0,21,205,183,248,230,250,107,224,50,92,250,158,128,69,255,196,43,144,128,251,82],B:[0,0,0,255,0,255,255,213,205,63,140,170,128,139,87,225,205,221,122,42,250,219,214,130,193,113,205,196,32,128,143,180,185,135,0,19,0,224,180,0,238,170,240,179,11,170,147,112,144,34,255,250,122,144,47,225,71,230,0,50,96,240,238,0,230,203,212,0,143,60,230,240,209,127,128,205,114,211,34,80,235,237,140,215,238,35,250,139,139,220,211,181,173,255,30,220,79,139,238,0,230,245,0,255,0,216,153,147,204,255,133,50,107,255,250,154,47,208,204,92,210,160,0,0,255,222,226,255,128,152,45],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130]},XE={labels:["background","tissue","bone","skin","connective tissue","blood","organ","mass","muscle","foreign object","waste","teeth","fat","gray matter","white matter","nerve","vein","artery","capillary","ligament","tendon","cartilage","meniscus","lymph node","lymphatic vessel","cerebro-spinal fluid","bile","urine","feces","gas","fluid","edema","bleeding","necrosis","clot","embolism","head","central nervous system","brain","gray matter of brain","telencephalon","cerebral cortex","right frontal lobe","left frontal lobe","right temporal lobe","left temporal lobe","right parietal lobe","left parietal lobe","right occipital lobe","left occipital lobe","right insular lobe","left insular lobe","right limbic lobe","left limbic lobe","right striatum","left striatum","right caudate nucleus","left caudate nucleus","right putamen","left putamen","right pallidum","left pallidum","right amygdaloid complex","left amygdaloid complex","diencephalon","thalamus","right thalamus","left thalamus","pineal gland","midbrain","substantia nigra","right substantia nigra","left substantia nigra","cerebral white matter","right superior longitudinal fasciculus","left superior longitudinal fasciculus","right inferior longitudinal fasciculus","left inferior longitudinal fasciculus","right arcuate fasciculus","left arcuate fasciculus","right uncinate fasciculus","left uncinate fasciculus","right cingulum bundle","left cingulum bundle","projection fibers","right corticospinal tract","left corticospinal tract","right optic radiation","left optic radiation","right medial lemniscus","left medial lemniscus","right superior cerebellar peduncle","left superior cerebellar peduncle","right middle cerebellar peduncle","left middle cerebellar peduncle","right inferior cerebellar peduncle","left inferior cerebellar peduncle","optic chiasm","right optic tract","left optic tract","right fornix","left fornix","commissural fibers","corpus callosum","posterior commissure","cerebellar white matter","CSF space","ventricles of brain","right lateral ventricle","left lateral ventricle","right third ventricle","left third ventricle","cerebral aqueduct","fourth ventricle","subarachnoid space","spinal cord","gray matter of spinal cord","white matter of spinal cord","endocrine system of brain","pituitary gland","adenohypophysis","neurohypophysis","meninges","dura mater","arachnoid","pia mater","muscles of head","salivary glands","lips","nose","tongue","soft palate","right inner ear","left inner ear","right external ear","left external ear","right middle ear","left middle ear","right eyeball","left eyeball","skull","right frontal bone","left frontal bone","right parietal bone","left parietal bone","right temporal bone","left temporal bone","right sphenoid bone","left sphenoid bone","right ethmoid bone","left ethmoid bone","occipital bone","maxilla","right zygomatic bone","right lacrimal bone","vomer bone","right palatine bone","left palatine bone","mandible","neck","muscles of neck","pharynx","larynx","thyroid gland","right parathyroid glands","left parathyroid glands","skeleton of neck","hyoid bone","cervical vertebral column","thorax","trachea","bronchi","right lung","left lung","superior lobe of right lung","superior lobe of left lung","middle lobe of right lung","inferior lobe of right lung","inferior lobe of left lung","pleura","heart","right atrium","left atrium","atrial septum","ventricular septum","right ventricle of heart","left ventricle of heart","mitral valve","tricuspid valve","aortic valve","pulmonary valve","aorta","pericardium","pericardial cavity","esophagus","thymus","mediastinum","skin of thoracic wall","muscles of thoracic wall","skeleton of thorax","thoracic vertebral column","ribs","sternum","right clavicle","left clavicle","abdominal cavity","abdomen","peritoneum","omentum","peritoneal cavity","retroperitoneal space","stomach","duodenum","small bowel","colon","anus","liver","biliary tree","gallbladder","pancreas","spleen","urinary system","right kidney","left kidney","right ureter","left ureter","urinary bladder","urethra","right adrenal gland","left adrenal gland","female internal genitalia","uterus","right fallopian tube","left fallopian tube","right ovary","left ovary","vagina","male internal genitalia","prostate","right seminal vesicle","left seminal vesicle","right deferent duct","left deferent duct","skin of abdominal wall","muscles of abdominal wall","skeleton of abdomen","lumbar vertebral column","female external genitalia","male external genitalia","skeleton of upper limb","muscles of upper limb","right upper limb","left upper limb","right shoulder","left shoulder","right arm"],R:[0,128,241,177,111,216,221,144,192,220,78,255,230,200,250,244,0,216,183,183,152,111,178,68,111,85,0,214,78,218,170,140,188,216,145,150,177,244,250,200,68,128,83,83,162,162,141,141,182,182,188,188,154,154,177,177,30,30,210,210,48,48,98,98,69,166,122,122,253,145,46,0,0,250,127,127,159,159,125,125,106,106,154,154,126,201,201,78,78,174,174,139,139,148,148,186,186,99,156,156,64,64,138,97,126,194,85,88,88,88,88,88,88,88,88,244,200,250,82,57,60,92,255,255,255,255,201,70,188,177,166,182,229,229,174,174,201,201,194,194,241,203,203,229,229,255,255,209,209,248,248,255,196,255,255,255,242,242,222,177,213,184,150,62,62,62,242,250,255,177,182,175,197,197,172,172,202,224,224,255,206,210,203,233,195,181,152,159,166,218,225,224,255,184,211,47,255,173,188,255,226,253,244,205,205,186,177,255,234,204,180,216,255,205,204,255,221,0,139,249,157,203,185,185,247,247,222,124,249,249,244,255,255,227,213,213,193,216,230,245,245,241,241,177,171,217,212,185,185,198,194,177,177,177,177,177],G:[0,174,214,122,184,101,130,238,104,245,63,250,220,200,250,214,151,101,156,214,189,184,212,172,197,188,145,230,63,255,250,224,65,191,60,98,122,214,250,200,131,174,146,146,115,115,93,93,166,166,135,135,150,150,140,140,111,111,157,157,129,129,153,153,110,113,101,101,135,92,101,108,108,250,150,150,116,116,102,102,174,174,146,146,126,160,160,152,152,140,140,126,126,120,120,135,135,106,171,171,123,123,95,113,161,195,188,106,106,106,106,106,106,106,106,214,200,250,174,157,143,162,244,244,244,244,121,163,91,122,84,105,147,147,122,122,112,112,142,142,213,179,179,204,204,243,243,185,185,223,223,230,172,255,250,237,217,217,198,122,124,105,208,162,162,162,206,210,255,122,228,216,165,165,138,138,164,186,186,245,110,115,108,138,100,85,55,63,70,123,130,97,244,122,171,150,244,121,95,239,202,232,217,179,179,124,122,255,234,142,119,132,253,167,168,224,130,145,150,180,108,136,102,102,182,182,154,186,186,186,170,181,190,153,141,141,123,146,158,172,172,172,172,124,85,198,188,135,135,175,98,122,122,122,122,122],B:[0,128,145,101,210,79,101,144,88,20,0,220,70,235,210,49,206,79,220,211,207,210,242,100,131,255,30,130,0,255,250,228,28,216,66,83,101,49,225,215,98,128,164,164,105,105,137,137,110,110,166,166,201,201,190,190,85,85,166,166,126,126,112,112,53,137,38,38,192,109,131,112,112,225,88,88,163,163,154,154,155,155,83,83,55,133,133,141,141,103,103,177,177,72,72,135,135,24,108,108,147,147,74,158,197,164,255,215,215,215,215,215,215,215,215,49,215,225,128,110,83,109,209,209,209,209,77,117,95,101,94,107,118,118,90,90,73,73,0,0,144,77,77,109,109,152,152,85,85,131,131,138,68,167,160,145,123,123,101,101,109,108,243,114,114,114,142,139,207,101,255,244,145,145,115,115,140,162,162,217,84,89,81,112,73,57,13,27,38,97,104,76,209,154,143,103,209,88,76,172,134,158,154,108,108,161,101,220,194,178,153,105,229,142,143,199,101,30,98,111,162,116,83,83,164,164,132,223,150,150,147,158,165,130,113,113,103,127,140,147,147,151,151,92,68,131,102,134,134,125,79,101,101,101,101,101],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},KE={R:[0,0,24,248,255],G:[0,0,177,254,0],B:[0,136,0,0,0],A:[0,32,64,78,128],I:[0,64,128,156,255]},_E={R:[1,10,15,17,21,27,36,49,65,82,99,118,140,161,183,203,222,238,248,253,253,253,252,250],G:[25,42,56,68,79,88,97,105,111,116,122,127,133,138,142,146,150,155,162,170,178,186,195,204],B:[89,92,95,96,98,98,96,91,83,74,64,55,46,43,49,62,79,100,126,151,175,199,223,250],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},QE={R:[0,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[0,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},qE={R:[255,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[255,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[255,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},ZE={R:[0,0,0,0,196,255],G:[0,32,128,128,128,32],B:[0,255,196,0,0,0],A:[0,128,64,64,64,128],I:[0,1,64,128,192,255]},JE={R:[0,255],G:[0,0],B:[255,255],A:[0,128],I:[0,255]},$E={R:[0,0],G:[0,255],B:[255,255],A:[0,128],I:[0,255]},eM={R:[0,0,0,0],G:[0,1,128,255],B:[0,222,127,32],A:[0,0,64,128],I:[0,1,128,255]},tM={R:[0,0,0],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},nM={R:[0,103,255],G:[0,126,255],B:[0,165,255],A:[0,76,128],I:[0,153,255]},rM={R:[0,43,103,199,216,255],G:[0,0,37,155,213,255],B:[0,0,20,97,201,255],A:[0,44,48,54,56,56],I:[0,64,128,196,240,255]},iM={R:[0,9,24,33,40,46,52,57,62,66,70,74,78,81,85,88,91,94,98,101,103,106,109,112,114,117,119,121,124,126,128,130,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,164,166,168,169,171,172,174,175,177,178,180,181,183,184,186,187,189,190,191,193,194,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,222,223,224,224,225,226,226,227,228,228,229,229,230,231,231,232,233,233,234,234,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,244,244,244,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,243,243,243,243,243,243,243,243,243,243,243,243,242,242,242,242,242,242,242,242,241,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,243,243,244,244,245,246,246,247,247,248,249,249,250,250,251,251,252,252,253,253,254,254,254],G:[42,41,41,41,40,40,40,39,39,39,38,38,37,37,36,36,35,35,34,34,33,32,32,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,26,26,26,25,25,25,24,24,24,24,24,25,25,26,27,27,28,28,29,30,30,31,31,32,33,33,34,34,35,36,36,37,38,39,40,42,43,44,45,47,48,49,50,51,53,54,55,56,57,58,59,60,62,63,64,65,66,68,69,71,72,73,75,76,77,79,80,81,83,84,85,87,88,89,90,92,93,94,95,97,98,100,101,102,104,105,107,108,109,111,112,113,115,116,117,119,120,121,122,124,125,126,128,129,130,132,133,134,136,137,138,140,141,142,144,145,146,147,149,150,151,153,154,155,156,158,159,160,161,163,164,165,167,168,169,170,172,173,174,175,176,178,179,180,181,183,184,185,186,187,189,190,191,192,193,194,196,197,198,199,200,201,203,204,205,206,207,208,209,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,228,229,230,231,232,233,234,235,236,237,238,238,239,240,241,241,242,243,244,244,245,246,247,248,248,249,250,251,251,252,253,254,255],B:[167,167,166,166,166,165,165,165,164,164,164,163,163,162,162,162,161,161,161,160,160,160,159,159,158,158,157,157,156,155,155,154,154,153,153,152,151,151,150,150,149,149,148,147,147,146,146,145,144,144,143,143,142,141,141,140,139,139,138,137,137,136,135,135,134,133,133,132,131,131,130,130,129,128,128,127,127,126,125,125,124,124,123,123,122,121,121,120,119,119,118,118,117,116,116,116,115,115,114,114,113,113,113,112,112,111,111,110,110,109,109,109,108,108,107,107,106,106,106,106,106,105,105,105,105,105,105,105,104,104,104,104,104,103,103,103,103,103,102,102,102,103,103,103,103,104,104,104,104,104,105,105,105,105,106,106,106,106,106,107,107,107,107,108,108,109,110,111,111,112,113,113,114,115,115,116,117,117,118,119,120,120,121,122,122,123,124,125,126,128,129,130,131,132,134,135,136,137,138,140,141,142,143,144,146,147,148,149,150,152,153,155,157,158,160,162,163,165,167,168,170,172,173,175,177,178,180,182,183,185,187,188,190,193,196,199,201,204,207,210,212,215,218,221,224,226,229,232,235,238,240,243,246,249,252,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},sM={R:[0,86,166,255],G:[32,92,156,233],B:[76,108,117,69],A:[0,56,80,88],I:[0,64,192,255]},oM={R:[0,0,0],G:[127,196,254],B:[255,255,255],A:[0,64,128],I:[0,128,255]},aM={R:[0,61,122,183,244,255],G:[0,41,81,122,163,255],B:[0,25,51,76,102,255],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},lM={R:[0,61,122,183,244,255],G:[0,41,81,122,163,203],B:[0,25,51,76,102,127],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},cM={min:-643,max:-235,R:[0,0,0],G:[154,154,154],B:[179,179,101],A:[0,32,0],I:[0,163,255]},uM={min:114,max:800,R:[0,255,255,255],G:[0,0,129,255],B:[0,0,0,255],A:[0,64,88,228],I:[0,80,160,255]},dM={min:180,max:600,R:[0,0,113,255],G:[0,0,109,250],B:[0,0,101,245],A:[0,0,100,160],I:[0,1,128,255]},hM={min:-10,max:110,R:[0,127,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},fM={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},mM={min:-80,max:1e3,R:[0,189,150,150,150,150,255],G:[0,169,54,54,54,54,240],B:[0,153,52,52,52,52,242],A:[0,32,64,0,0,64,64],I:[0,1,82,92,234,242,255]},pM={min:-590,max:600,R:[0,241,241,248,248,178,178,232,255,255,255],G:[0,156,156,222,222,36,36,51,255,255,255],B:[0,130,130,169,169,24,24,37,255,255,255],A:[0,8,0,0,0,64,64,0,0,222,222],I:[0,2,3,64,122,142,172,182,252,253,255]},gM={min:114,max:302,R:[0,255,255],G:[0,129,255],B:[0,0,255],A:[0,88,228],I:[0,103,255]},AM={min:-23,max:246,R:[0,44,255,255,255],G:[0,128,90,255,255],B:[0,0,70,0,255],A:[0,0,82,184,228],I:[0,64,131,196,255]},vM={min:-100,max:246,R:[0,128,159,255,255,255,255],G:[0,0,56,90,0,255,255],B:[0,0,41,70,0,0,255],A:[0,63,105,135,167,184,228],I:[0,100,128,155,180,209,255]},xM={min:-590,max:600,R:[0,241,241,248,248,178,232,255,255],G:[0,156,156,222,222,36,51,255,255],B:[0,130,130,169,169,24,37,255,255],A:[0,63,105,135,167,184,228,228,228],I:[0,1,52,127,137,162,172,252,255]},wM={min:140,max:1024,R:[0,2,113,255],G:[0,1,109,250],B:[0,1,101,245],A:[0,1,96,168],I:[0,1,128,255]},yM={min:-923,max:679,R:[0,0,0,0,0,255,255,255],G:[154,154,154,154,0,0,254,255],B:[179,179,179,179,0,0,0,255],A:[0,3,8,0,0,10,15,20],I:[0,30,62,88,170,200,232,255]},bM={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},CM={min:-600,max:100,R:[0,134,255],G:[0,109,250],B:[0,101,245],A:[0,60,148],I:[0,128,255]},SM={min:114,max:246,R:[0,255,255],G:[0,128,255],B:[0,128,255],A:[0,64,96],I:[0,87,255]},EM={min:50,max:1e3,R:[98,210,169,128,255],G:[94,26,77,128,255],B:[45,21,74,128,255],A:[0,25,0,4,168],I:[0,41,87,154,255]},MM={R:[0,13,21,26,27,25,22,21,22,28,39,54,75,98,124,148,171,189,202,210,213,211,206,200,195,193,195,201,211,225,240,255],G:[0,5,11,20,31,44,58,72,86,99,109,116,120,122,122,122,121,121,124,129,137,147,161,175,190,205,218,229,238,245,251,255],B:[0,14,30,46,61,71,77,78,75,68,60,52,48,47,53,65,83,105,131,157,183,205,222,235,241,243,242,240,239,240,245,255],A:[0,4,8,12,17,21,25,29,33,37,41,45,50,54,58,62,66,70,74,78,83,87,91,95,99,103,107,111,116,120,124,128],I:[0,8,16,25,33,41,49,58,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,197,206,214,222,230,239,247,255]},DM={R:[0,10,136,255],G:[0,39,220,255],B:[0,223,253,255],A:[0,48,64,70],I:[0,92,192,255]},TM={R:[0,245,205,120,196,220,230,0,122,236,12,204,42,119,220,103,60,255,165,160,0,245,205,120,196,220,230,0,122,236,13,220,103,255,165,160,0,120,200,255,255,164,164,164,234,0,0,0,0,0],G:[0,245,62,18,58,248,148,118,186,13,48,182,204,159,216,255,60,165,42,32,200,245,62,18,58,248,148,118,186,13,48,216,255,165,42,32,200,190,70,148,148,108,108,108,169,0,0,0,0,0],B:[0,245,78,134,250,164,34,14,220,176,255,142,164,176,20,255,60,0,42,240,200,245,78,134,250,164,34,14,220,176,255,20,255,0,42,240,221,150,255,10,10,226,226,226,30,64,112,160,208,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,24,26,28,30,31,41,42,43,44,46,47,49,50,51,52,53,54,58,60,62,63,72,77,78,79,80,81,82,85,251,252,253,254,255]},IM={R:[0,0,128,255,255],G:[0,128,0,128,255],B:[0,125,255,0,255],A:[0,32,64,96,128],I:[0,63,128,192,255]},FM={R:[0,142,227,255],G:[0,85,170,255],B:[0,14,76,255],A:[0,42,84,128],I:[0,85,170,255]},RM={R:[0,255],G:[0,255],B:[0,255],A:[0,128],I:[0,255]},PM={R:[0,0,0],G:[0,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},NM={R:[0,0,0],G:[72,72,255],B:[0,255,255],A:[0,64,128],I:[0,88,255]},kM={R:[0,255,255],G:[72,88,255],B:[0,0,0],A:[0,64,128],I:[0,88,255]},BM={R:[0,255,255,255],G:[0,0,126,255],B:[0,0,0,255],A:[0,64,96,128],I:[0,128,191,255]},VM={R:[3,255,255,255],G:[0,0,255,255],B:[0,0,0,255],A:[0,48,96,128],I:[0,95,191,255]},UM={R:[255,255,0,0,0,255,255],G:[0,255,255,255,0,0,0],B:[0,0,0,255,255,255,0],A:[0,14,28,43,57,71,85],I:[0,43,85,128,170,213,255]},LM={R:[0,120,237,240],G:[0,28,105,249],B:[4,109,37,33],A:[0,56,80,88],I:[0,64,192,255]},OM={R:[0,0,127,255,127],G:[0,127,255,127,0],B:[127,255,127,0,0],A:[0,32,64,96,128],I:[0,63,128,192,255]},zM={R:[0,255,255],G:[0,0,255],B:[0,0,0],A:[0,64,64],I:[0,86,255]},jM={R:[94,50,90,152,215,238,249,254,252,241,209,158],G:[79,131,186,214,240,244,237,210,157,100,57,1],B:[162,189,167,164,155,169,168,123,86,68,79,66],A:[0,12,23,35,47,58,70,81,93,105,116,128],I:[0,23,46,70,93,116,139,162,185,209,232,255]},GM={R:[3,7,13,25,45,67,84,98,110,124,138,154,173,191,210,225,233,233,231,229,230,235,243,253],G:[19,33,48,63,77,87,92,94,95,96,96,97,99,101,106,118,133,149,163,177,192,208,225,245],B:[38,58,79,99,114,122,122,120,117,113,110,105,101,97,94,96,103,112,122,134,149,169,192,218],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},YM={R:[0,148,183,223,247,252],G:[0,44,55,74,112,253],B:[4,128,121,104,92,191],A:[0,44,53,64,75,107],I:[0,107,128,154,179,255]},WM={R:[11,59,55,222],G:[4,45,165,245],B:[5,91,172,229],A:[0,23,70,107],I:[0,56,167,255]},HM={R:[3,5,6,8,12,19,28,36,42,48,54,61,68,76,86,96,110,129,154,181,205,224,239,252],G:[19,32,44,58,72,86,98,108,116,122,128,134,141,149,157,167,178,191,204,216,225,232,239,244],B:[39,60,82,104,123,137,144,145,142,138,134,130,126,121,116,110,105,104,112,131,155,178,198,217],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},XM={R:[0,85,0,0,0,0,0,0,85,255,255,255,172],G:[0,0,0,0,85,170,255,255,255,255,85,0,0],B:[0,170,85,255,255,170,170,0,85,0,0,0,0],A:[0,5,10,21,26,32,37,42,48,53,64,72,85],I:[0,15,31,63,79,95,111,127,143,159,191,217,255]},KM={R:[13,156,237,240],G:[8,23,121,249],B:[135,158,83,33],A:[0,56,80,88],I:[0,64,192,255]},_M={R:[208,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248],G:[182,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21],B:[191,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},QM={R:[0,128,255],G:[0,0,0],B:[0,0,0],A:[0,64,128],I:[0,128,255]},qM={R:[192,224,255],G:[1,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},ZM={R:[3,112,144,188,236,246,255],G:[5,31,29,22,76,158,250],B:[26,87,91,86,62,117,235],A:[0,30,38,49,67,85,107],I:[0,73,92,118,160,205,255]},JM={R:[1,240,255],G:[1,128,255],B:[1,128,255],A:[0,76,128],I:[0,153,255]},$M={R:[0,5,18,34,53,72,90,107,126,144,161,178,194,209,222,233,242,248,251,251,249,244,241,252],G:[0,4,10,11,9,11,17,23,30,36,43,50,59,70,83,98,117,136,157,177,199,220,240,254],B:[3,24,50,76,96,106,109,110,108,104,97,89,79,67,55,42,26,12,6,22,47,79,121,164],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},e8={R:[48,48,64,70,65,25,132,195,244,254,218,122],G:[18,18,64,107,150,226,255,241,199,158,57,4],B:[59,59,162,227,255,187,81,52,58,47,7,3],A:[0,22,26,30,34,43,52,57,63,67,77,86],I:[0,1,16,32,49,83,118,140,164,181,219,255]},t8={R:[0,128,255],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},n8={R:[68,49,53,253],G:[1,104,183,231],B:[84,142,121,37],A:[0,56,80,88],I:[0,64,192,255]},r8={R:[255,255,255],G:[127,196,254],B:[0,0,0],A:[0,64,128],I:[0,128,255]},i8={R:[0,0,0],G:[0,128,255],B:[255,196,128],A:[0,64,128],I:[0,128,255]},s8={R:[3,64,0,0,255,255,255],G:[0,0,0,255,255,192,3],B:[0,32,48,56,64,96,128],A:[0,8,16,24,32,52,80],I:[0,32,64,96,160,192,255]},o8={min:0,max:0,R:[0,37],G:[242,0],B:[255,255],A:[0,64],I:[0,255]},a8={R:[255,255],G:[255,11],B:[0,0],A:[0,64],I:[0,255]},l8={min:0,max:0,R:[65,10,223,120,216,207,251,93,252,217,21,253,131,165,173,143,144,217,86,89,63,254,172,1,142,107,42,78,221,8,222,71,127,126,167,33,104,2,208,216,0,251,7,105,2,101,248,190,253,62,255,224,166,37,110,138,45,34,6,37,69,201,43,122,199,37,173,194,103,211,75,159,96,4,239,98,110,193,253,166,40,255,48,130,140,243,101,9,177,220,133,32,4,81,48,48,210,109,60,132,1,119,1,159,247,33,212,187,253,144,196,254,168,79,64,196,39,97,73,173,104,216,217,43,101,119,254,5,237,103,203,122,57,87,251,164,19,75,200,2,252,150,66,0,255,157,23,254,55,16,240,161,69,253,207,195,5,60,255,251,200,217,134,123,253,180,27,246,130,136,250,232,4,125,140,22,253,255,13,180,123,61,254,111,10,185,76,192,255,223,186,61,198,5,172,13,83,172,171,6,23,73,134,133,109,61,213,55,57,132,36,209,2,144,1,253,68,155,3,160,2,77,121,70,67,176,223,131,4,162,232,255,150,94,235,191,207,10,246,0,225,4,209,116,57,112,172,253,1,6,92,227,73,62,135,223],G:[162,50,112,245,4,124,176,243,56,125,183,139,182,68,189,4,225,10,20,223,7,46,31,193,225,250,219,41,2,100,83,181,34,150,72,223,168,248,80,253,7,117,214,2,248,10,3,59,179,160,90,244,146,4,207,4,125,255,96,100,1,208,130,51,116,181,236,53,244,5,165,28,181,86,96,42,254,1,134,194,214,92,41,204,137,86,207,3,143,3,100,239,164,94,65,251,131,244,173,57,143,107,217,53,210,0,148,250,45,198,81,40,61,218,252,88,171,0,248,24,248,4,41,100,187,46,208,145,43,168,121,46,175,250,125,107,233,112,207,231,174,215,53,9,43,153,52,124,128,65,210,147,255,147,63,200,148,254,0,179,241,42,239,2,230,8,82,135,87,16,3,87,86,151,254,8,255,86,53,19,7,192,171,201,253,247,197,103,251,126,0,149,54,183,61,126,79,113,10,103,184,75,11,195,222,136,149,131,8,99,240,177,252,255,198,16,7,68,178,66,191,150,73,26,211,109,78,209,240,254,1,166,247,131,2,0,167,127,133,10,43,99,235,3,214,142,176,82,132,38,10,249,255,215,44,81],B:[176,182,248,37,117,35,96,69,32,152,108,20,237,250,2,89,141,216,111,251,211,149,10,44,214,103,31,251,3,32,252,246,97,1,219,167,197,4,36,116,206,118,106,43,205,204,114,69,127,205,87,80,41,251,145,204,253,161,247,1,149,9,43,253,97,72,136,161,171,181,26,255,108,80,218,214,231,255,84,31,109,4,218,3,217,36,68,85,241,39,221,2,240,2,173,42,206,5,110,46,103,27,212,184,2,207,246,45,116,72,110,253,38,105,248,159,243,81,192,93,141,145,24,157,234,131,57,178,62,75,65,176,148,40,253,66,76,240,51,154,17,251,139,253,207,9,114,49,200,254,96,73,138,118,204,102,137,89,145,161,4,112,66,234,147,178,212,205,185,11,203,131,2,250,118,169,1,185,154,53,171,197,61,175,249,96,15,254,95,5,222,75,246,194,2,61,180,25,133,165,15,233,59,35,221,140,109,7,114,255,198,0,115,168,252,23,242,80,75,142,137,255,12,182,68,201,4,111,37,228,83,248,24,192,249,5,54,223,160,122,160,114,145,119,252,31,253,250,10,214,8,47,0,142,222,70],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},c8=class{constructor(){R(this,"gamma",1),R(this,"version",.1),R(this,"cluts",{});const t=Object.keys(Ua).filter(n=>!n.startsWith("$")).sort(new Intl.Collator("en").compare);for(const n of t)this.cluts[n]=Ua[n]}addColormap(e,t){this.cluts[e]=t}colormaps(){return Object.keys(this.cluts)}colorMaps(){return this.colormaps()}colormapFromKey(e){let t=this.cluts[e];return t!==void 0||(t=this.cluts[e.toLowerCase()],t!==void 0)?t:(e.length>0&&k.warn("No color map named "+e),{min:0,max:0,R:[0,255],G:[0,255],B:[0,255],A:[0,255],I:[0,255]})}colormap(e="",t=!1){const n=this.colormapFromKey(e);return this.makeLut(n.R,n.G,n.B,n.A,n.I,t)}makeLabelLut(e,t=255,n=1/0){if(e.R===void 0||e.G===void 0||e.B===void 0)throw new Error(`Invalid colormap table: ${e}`);const r=e.R.length,i=e.I??[...Array(r).keys()];let s=!1;for(let h=0;h<i.length;h++)i[h]>n&&(s=!0,i[h]=n);if(s&&k.warn("Some colormap indices clamped to match label range."),r!==e.G.length||r!==e.B.length||r!==i.length)throw new Error(`colormap does not make sense: ${e} Rs ${e.R.length} Gs ${e.G.length} Bs ${e.B.length} Is ${i.length}`);let o=new Uint8ClampedArray(r).fill(t);o[0]=0,e.A!==void 0&&(o=Uint8ClampedArray.from(e.A));const a=Math.min(...i),l=Math.max(...i),c=l-a+1,u=new Uint8ClampedArray(c*4).fill(0);for(let h=0;h<r;h++){let f=(i[h]-a)*4;u[f++]=e.R[h],u[f++]=e.G[h],u[f++]=e.B[h],u[f++]=o[h]}const d={lut:u,min:a,max:l};if(e.labels){const h=e.labels.length;if(h===c)d.labels=e.labels;else if(h===r){d.labels=Array(c).fill("?");for(let f=0;f<r;f++){const p=i[f];d.labels[p]=e.labels[f]}}}return d}async makeLabelLutFromUrl(e,t=255,n=1/0){const i=await(await fetch(e)).json();return this.makeLabelLut(i,t,n)}makeDrawLut(e){let t=typeof e=="object"?e:Ua[e];t===void 0&&(k.warn("colormap undefined ",e),t=this.colormapFromKey(""));const n=this.makeLabelLut(t,255);if(n.labels===void 0&&(n.labels=[]),n.labels.length<256){const o=n.labels.length;for(let a=o;a<256;a++)n.labels.push(a.toString())}const r=new Uint8ClampedArray(256*4);let i=0;for(let o=0;o<256;o++)r[i++]=255,r[i++]=0,r[i++]=0,r[i++]=255;r[3]=0;const s=Math.min(n.lut.length,256*4);if(s>0)for(let o=0;o<s;o++)r[o]=n.lut[o];return{lut:r,labels:n.labels}}makeLut(e,t,n,r,i,s){const o=e.length,a=[...e],l=[...t],c=[...n];if(!i){i=new Array(o);for(let f=0;f<o;f++)i[f]=f/(o-1)*255}r||(r=new Array(o).fill(64),r[0]=0);let u=Uint8ClampedArray.from(r),d=Uint8ClampedArray.from(i);if(s)for(let f=0;f<o;f++)a[f]=e[o-1-f],l[f]=t[o-1-f],c[f]=n[o-1-f],u[f]=255-r[o-1-f],d[f]=255-i[o-1-f];const h=new Uint8ClampedArray(256*4);if(typeof d>"u"){d=new Uint8ClampedArray(o).fill(0);for(let f=0;f<o;f++)d[f]=Math.round(f*255/(o-1))}typeof u>"u"&&(u=new Uint8ClampedArray(o).fill(64),u[0]=0);for(let f=0;f<o-1;f++){const p=d[f];let g=d[f+1];f===0&&p!==0&&k.warn("colormap issue: indices expected to start with 0 not ",p),f===d.length-2&&g!==255&&(k.warn("padding colormap: indices expected end with 255 not ",g),g=255);const v=g-p;let m=p*4;for(let A=p;A<=g;A++){const x=(A-p)/v;h[m++]=a[f]+x*(a[f+1]-a[f]),h[m++]=l[f]+x*(l[f+1]-l[f]),h[m++]=c[f]+x*(c[f+1]-c[f]),h[m++]=u[f]+x*(u[f+1]-u[f])}}if(this.gamma===1)return h;for(let f=0;f<255*4;f++)f%4!==3&&(h[f]=Math.pow(h[f]/255,1/this.gamma)*255);return h}},Ee=new c8,kr=class{static getClusterBoundaryU8(e,t){const n=new Array(e.length).fill(!1),r=new Array(e.length).fill(!1);for(let o=0;o<e.length;o++)e[o]>0&&(r[o]=!0);const i=t.length/3;let s=0;for(let o=0;o<i;o++){const a=t[s],l=t[s+1],c=t[s+2];s+=3,!(r[a]===r[l]&&r[a]===r[c]&&r[l]===r[c])&&(n[a]=!0,n[l]=!0,n[c]=!0)}return n}static async gzip(e){const t=new CompressionStream("gzip"),n=t.writable.getWriter();n.write(e).catch(console.error);const r=n.close().catch(console.error),i=new Response(t.readable),s=new Uint8Array(await i.arrayBuffer());return await r,s}static createMZ3(e,t,n=!1,r=null,i=null,s=null){const h=t?t.length/3:0,f=e?e.length/3:0;if(!Number.isInteger(h)||h<0)throw new Error("indices length must be a multiple of 3");if(!Number.isInteger(f)||f<0)throw new Error("vertices length must be a multiple of 3");const p=t&&t.length>0,g=e&&e.length>0,v=r instanceof Uint8Array&&r.length===f*4;let m=null,A=0;if(s!=null){const U=typeof s=="string"?s:JSON.stringify(s);m=new TextEncoder().encode(U),A=m.byteLength}let x=!1,w=0;if(i!=null){if(!(i instanceof Float32Array))throw new Error("scalars must be a Float32Array or null/undefined");if(f===0)throw new Error("cannot have scalars without vertices (nvert === 0)");if(i.length>0&&i.length%f===0)x=!0,w=i.length/f;else throw new Error(`scalars.length (${i.length}) must be a positive integer multiple of nvert (${f})`)}let b=0;p&&(b|=1),g&&(b|=2),v&&(b|=4),x&&(b|=8),m&&(b|=64);const y=16,C=p?h*3*4:0,S=g?f*3*4:0,E=v?f*4:0,T=x?w*f*4:0,F=y+A+C+S+E+T,M=new ArrayBuffer(F),B=new DataView(M);let P=0;B.setUint16(P,23117,!0),P+=2,B.setUint16(P,b,!0),P+=2,B.setUint32(P,h,!0),P+=4,B.setUint32(P,f,!0),P+=4,B.setUint32(P,A,!0),P+=4;let z=y;if(A>0&&m&&(new Uint8Array(M,z,m.length).set(m),z+=A),p&&(new Uint32Array(M,z,t.length).set(t),z+=C),g&&(new Float32Array(M,z,e.length).set(e),z+=S),v&&(new Uint8Array(M,z,r.length).set(r),z+=E),x&&(new Float32Array(M,z,i.length).set(i),z+=T),z!==F)throw new Error(`mz3 internal size mismatch: offset ${z} !== totalSize ${F}`);if(n)throw new Error("Call async createMZ3Async() for compression");return M}static async createMZ3Async(e,t,n=!1,r=null,i=null,s=null){const o=this.createMZ3(e,t,n,r,i,s);return n?await this.gzip(new Uint8Array(o)):o}static createOBJ(e,t){let n="";for(let s=0;s<e.length;s+=3)n+=`v ${e[s]} ${e[s+1]} ${e[s+2]}
`;for(let s=0;s<t.length;s+=3)n+=`f ${t[s]+1} ${t[s+1]+1} ${t[s+2]+1}
`;return new TextEncoder().encode(n).buffer}static createSTL(e,t){const n=t.length/3,r=84+n*50,i=new ArrayBuffer(r),s=new DataView(i);for(let a=0;a<80;a++)s.setUint8(a,0);s.setUint32(80,n,!0);let o=84;for(let a=0;a<t.length;a+=3){const l=t[a]*3,c=t[a+1]*3,u=t[a+2]*3;s.setFloat32(o,0,!0),s.setFloat32(o+4,0,!0),s.setFloat32(o+8,0,!0),o+=12,s.setFloat32(o,e[l],!0),s.setFloat32(o+4,e[l+1],!0),s.setFloat32(o+8,e[l+2],!0),o+=12,s.setFloat32(o,e[c],!0),s.setFloat32(o+4,e[c+1],!0),s.setFloat32(o+8,e[c+2],!0),o+=12,s.setFloat32(o,e[u],!0),s.setFloat32(o+4,e[u+1],!0),s.setFloat32(o+8,e[u+2],!0),o+=12,s.setUint16(o,0,!0),o+=2}return i}static downloadArrayBuffer(e,t){const n=new Blob([e],{type:"application/octet-stream"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.style.display="none",i.click(),setTimeout(()=>{document.body.removeChild(i),URL.revokeObjectURL(r)},0)}static async saveMesh(e,t,n=".mz3",r=!1){let i=new ArrayBuffer(0);return/\.obj$/i.test(n)?i=this.createOBJ(e,t):/\.stl$/i.test(n)?i=this.createSTL(e,t):(/\.mz3$/i.test(n)||(n+=".mz3"),i=await this.createMZ3Async(e,t,r)),n.length>4&&this.downloadArrayBuffer(i,n),i}static getClusterBoundary(e,t){const n=new Uint32Array(e.buffer),r=new Array(n.length).fill(!1),i=t.length/3;let s=0;for(let o=0;o<i;o++){const a=t[s],l=t[s+1],c=t[s+2];s+=3,!(n[a]===n[l]&&n[a]===n[c]&&n[l]===n[c])&&(r[a]=!0,r[l]=!0,r[c]=!0)}return r}static getExtents(e){if(!ArrayBuffer.isView(e)&&!Array.isArray(e)||e.length<3)return{mxDx:0,extentsMin:0,extentsMax:0};let t=0;const n=q(e[0],e[1],e[2]),r=q(e[0],e[1],e[2]);for(let o=0;o<e.length;o+=3){const a=q(e[o],e[o+1],e[o+2]);t=Math.max(t,so(a)),Zh(n,n,a),Jh(r,r,a)}const i=[n[0],n[1],n[2]],s=[r[0],r[1],r[2]];return{mxDx:t,extentsMin:i,extentsMax:s}}static generateNormals(e,t){const n=[];let r;const i=e.length;let s,o,a,l,c,u,d,h,f;const p=new Float32Array(i),g=t.length;for(r=0;r<g;r+=3){d=t[r]*3,h=t[r+1]*3,f=t[r+2]*3;const v=[e[d],e[d+1],e[d+2]],m=[e[h],e[h+1],e[h+2]],A=[e[f],e[f+1],e[f+2]];s=m[0]-v[0],o=m[1]-v[1],a=m[2]-v[2],l=A[0]-v[0],c=A[1]-v[1],u=A[2]-v[2],n[0]=c*a-u*o,n[1]=u*s-l*a,n[2]=l*o-c*s,p[d]+=n[0],p[d+1]+=n[1],p[d+2]+=n[2],p[h]+=n[0],p[h+1]+=n[1],p[h+2]+=n[2],p[f]+=n[0],p[f+1]+=n[1],p[f+2]+=n[2]}for(r=0;r<i;r+=3){n[0]=-1*p[r],n[1]=-1*p[r+1],n[2]=-1*p[r+2];let v=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];v>0&&(v=1/Math.sqrt(v),n[0]*=v,n[1]*=v,n[2]*=v),p[r]=n[0],p[r+1]=n[1],p[r+2]=n[2]}return p}},ce,Pt,La,Fd,ys,Ev=class{constructor(e){li(this,ce),li(this,Pt,0),li(this,La,[]),li(this,Fd,[]),li(this,ys),Zn(this,ce,new DataView(e)),this.read()}async extract(e){const t=new Uint8Array(oe(this,ce).buffer.slice(e.startsAt,e.startsAt+e.compressedSize));if(e.compressionMethod===0)return t;if(e.compressionMethod===8){const n=new DecompressionStream("deflate-raw"),r=n.writable.getWriter();r.write(t).catch(console.error);const i=r.close().catch(console.error),s=new Response(n.readable),o=new Uint8Array(await s.arrayBuffer());return await i,o}throw new Error(`Unsupported compression method: ${e.compressionMethod}`)}read(){for(;!oe(this,ys)&&oe(this,Pt)<oe(this,ce).byteLength;){const e=oe(this,ce).getUint32(oe(this,Pt),!0);if(e===67324752){const t=this.readLocalFile(oe(this,Pt));t.extract=this.extract.bind(this,t),oe(this,La).push(t);const n=(t.generalPurpose&8)!==0;if(t.startsAt=oe(this,Pt)+30+t.fileNameLength+t.extraLength,t.compressedSize===0&&n){let r=t.startsAt;for(;r+20<=oe(this,ce).byteLength;){if(oe(this,ce).getUint32(r,!0)===134695760&&oe(this,ce).getUint16(r+16,!0)===19280){r+=4;break}r++}t.crc=oe(this,ce).getUint32(r,!0),t.compressedSize=oe(this,ce).getUint32(r+4,!0),t.uncompressedSize=oe(this,ce).getUint32(r+8,!0),Zn(this,Pt,r+12)}else Zn(this,Pt,t.startsAt+t.compressedSize)}else if(e===33639248){const t=this.readCentralDirectory(oe(this,Pt));oe(this,Fd).push(t),Zn(this,Pt,oe(this,Pt)+(46+t.fileNameLength+t.extraLength+t.fileCommentLength))}else if(e===101010256){Zn(this,ys,this.readEndCentralDirectory(oe(this,Pt)));break}else if(e===101075792){Zn(this,ys,this.readEndCentralDirectory64(oe(this,Pt)));break}else{console.error(`Unexpected ZIP signature 0x${e.toString(16).padStart(8,"0")} at index ${oe(this,Pt)}`);break}}}readLocalFile(e){let t=oe(this,ce).getUint32(e+18,!0),n=oe(this,ce).getUint32(e+22,!0);const r=oe(this,ce).getUint16(e+26,!0),i=oe(this,ce).getUint16(e+28,!0),s=e+30+r;if(this.readString(s,i),t===4294967295&&n===4294967295){let o=s,a=!1;for(;o<s+i-4;){const l=oe(this,ce).getUint16(o,!0),c=oe(this,ce).getUint16(o+2,!0);if(o+=4,l===1)if(c>=16){n=Number(oe(this,ce).getBigUint64(o,!0)),o+=8,t=Number(oe(this,ce).getBigUint64(o,!0)),a=!0;break}else throw new Error(`ZIP64 extra field found but is too small (expected at least 16 bytes, got ${c}).`);o+=c}if(!a)throw new Error("ZIP64 format missing extra field with signature 0x0001.")}return{signature:this.readString(e,4),version:oe(this,ce).getUint16(e+4,!0),generalPurpose:oe(this,ce).getUint16(e+6,!0),compressionMethod:oe(this,ce).getUint16(e+8,!0),lastModifiedTime:oe(this,ce).getUint16(e+10,!0),lastModifiedDate:oe(this,ce).getUint16(e+12,!0),crc:oe(this,ce).getUint32(e+14,!0),compressedSize:t,uncompressedSize:n,fileNameLength:r,extraLength:i,fileName:this.readString(e+30,r),extra:this.readString(e+30+r,i)}}readCentralDirectory(e){return{versionCreated:oe(this,ce).getUint16(e+4,!0),versionNeeded:oe(this,ce).getUint16(e+6,!0),fileNameLength:oe(this,ce).getUint16(e+28,!0),extraLength:oe(this,ce).getUint16(e+30,!0),fileCommentLength:oe(this,ce).getUint16(e+32,!0),diskNumber:oe(this,ce).getUint16(e+34,!0),internalAttributes:oe(this,ce).getUint16(e+36,!0),externalAttributes:oe(this,ce).getUint32(e+38,!0),offset:oe(this,ce).getUint32(e+42,!0),comments:this.readString(e+46,oe(this,ce).getUint16(e+32,!0))}}readEndCentralDirectory(e){const t=oe(this,ce).getUint16(e+20,!0);return{numberOfDisks:oe(this,ce).getUint16(e+4,!0),centralDirectoryStartDisk:oe(this,ce).getUint16(e+6,!0),numberCentralDirectoryRecordsOnThisDisk:oe(this,ce).getUint16(e+8,!0),numberCentralDirectoryRecords:oe(this,ce).getUint16(e+10,!0),centralDirectorySize:oe(this,ce).getUint32(e+12,!0),centralDirectoryOffset:oe(this,ce).getUint32(e+16,!0),commentLength:t,comment:this.readString(e+22,t)}}readEndCentralDirectory64(e){const t=Number(oe(this,ce).getBigUint64(e+0,!0));return{numberOfDisks:oe(this,ce).getUint32(e+16,!0),centralDirectoryStartDisk:oe(this,ce).getUint32(e+20,!0),numberCentralDirectoryRecordsOnThisDisk:Number(oe(this,ce).getBigUint64(e+24,!0)),numberCentralDirectoryRecords:Number(oe(this,ce).getBigUint64(e+32,!0)),centralDirectorySize:Number(oe(this,ce).getBigUint64(e+40,!0)),centralDirectoryOffset:Number(oe(this,ce).getBigUint64(e+48,!0)),commentLength:t,comment:""}}readString(e,t){return Array.from({length:t},(n,r)=>String.fromCharCode(oe(this,ce).getUint8(e+r))).join("")}get entries(){return oe(this,La)}};ce=new WeakMap;Pt=new WeakMap;La=new WeakMap;Fd=new WeakMap;ys=new WeakMap;var ue=class ci{static arrayBufferToBase64(t){const n=new Uint8Array(t);return ci.uint8tob64(n)}static async decompress(t){const n=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",r=new DecompressionStream(n),i=r.writable.getWriter();i.write(t).catch(console.error);const s=i.close().catch(console.error),o=new Response(r.readable),a=new Uint8Array(await o.arrayBuffer());return await s,a}static async decompressToBuffer(t){const n=await ci.decompress(t);return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}static async readMatV4(t,n=!1){let r=t.byteLength;if(r<40)throw new Error("File too small to be MAT v4: bytes = "+t.byteLength);let i=new DataView(t),s=i.getUint16(0,!0),o=t;if(s===35615||s===8075){const p=await this.decompress(new Uint8Array(t));i=new DataView(p.buffer),s=i.getUint16(0,!0),o=p.buffer,r=o.byteLength}const a=new TextDecoder("utf-8"),l=new Uint8Array(o);let c=0;const u={};function d(p){return Math.floor(p/10)%10}function h(p,g,v){const m=new Uint8Array(l.subarray(g,v));return p===1?new Float32Array(m.buffer):p===2?new Int32Array(m.buffer):p===3?new Int16Array(m.buffer):p===4?new Uint16Array(m.buffer):p===5?new Uint8Array(m.buffer):new Float64Array(m.buffer)}function f(){const p=i.getUint32(c,!0),g=i.getUint32(c+4,!0),v=i.getUint32(c+8,!0),m=i.getUint32(c+12,!0),A=i.getUint32(c+16,!0);if(c+=20,m!==0)throw new Error("Matlab V4 reader does not support imaginary numbers");const x=g*v;if(x<1)throw new Error("mrows * ncols must be greater than one");const w=new Uint8Array(l.subarray(c,c+A));let b=a.decode(w).trim().replaceAll("\0","");n&&(b=b.replaceAll(".","_"));const y=d(p);let C=8;if(y>=1&&y<=2)C=4;else if(y>=3&&y<=4)C=2;else if(y===5)C=1;else if(y!==0)throw new Error("impossible Matlab v4 datatype");if(c+=A,p>50)throw new Error("Does not appear to be little-endian V4 Matlab file");const S=c+x*C;u[b]=h(y,c,S),c=S}for(;c+20<r;)f();return u}static b64toUint8(t){const n=atob(t),r=n.length,i=new Uint8Array(r);for(let s=0;s<r;s++)i[s]=n.charCodeAt(s);return i}static uint8tob64(t){let n="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=t.byteLength,s=i%3,o=i-s;let a,l,c,u,d;for(let h=0;h<o;h=h+3)d=t[h]<<16|t[h+1]<<8|t[h+2],a=(d&16515072)>>18,l=(d&258048)>>12,c=(d&4032)>>6,u=d&63,n+=r[a]+r[l]+r[c]+r[u];return s===1?(d=t[o],a=(d&252)>>2,l=(d&3)<<4,n+=r[a]+r[l]+"=="):s===2&&(d=t[o]<<8|t[o+1],a=(d&64512)>>10,l=(d&1008)>>4,c=(d&15)<<2,n+=r[a]+r[l]+r[c]+"="),n}static download(t,n,r){const i=document.createElement("a"),s=Array.isArray(t)?t:[t],o=new Blob(s,{type:r});i.href=URL.createObjectURL(o),i.download=n,i.click()}static readFileAsync(t){return new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=r,i.readAsArrayBuffer(t)})}static blobToBase64(t){return new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result),r.readAsDataURL(t)})}static async decompressBase64String(t){const n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return ci.decompressArrayBuffer(i)}static async compressToBase64String(t){const n=await ci.compressStringToArrayBuffer(t);return ci.uint8tob64(new Uint8Array(n))}static strToU8(t,n){if(n){const l=new Uint8Array(t.length);for(let c=0;c<t.length;++c)l[c]=t.charCodeAt(c);return l}const r=t.length,i=(l,c,u)=>((u==null||u>l.length)&&(u=l.length),new Uint8Array(l.subarray(c,u)));let s=new Uint8Array(t.length+(t.length>>1)),o=0;const a=l=>{s[o++]=l};for(let l=0;l<r;++l){if(o+5>s.length){const u=new Uint8Array(o+8+(r-l<<1));u.set(s),s=u}let c=t.charCodeAt(l);c<128||n?a(c):c<2048?(a(192|c>>6),a(128|c&63)):(c>55295&&c<57344,c=65536+(c&1047552)|t.charCodeAt(++l)&1023,a(240|c>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|c&63))}return i(s,0,o)}static async compress(t,n="gzip"){const r=new CompressionStream(n),i=r.writable.getWriter();i.write(t).catch(console.error);const s=i.close().catch(console.error),a=await new Response(r.readable).arrayBuffer();return await s,a}static async compressStringToArrayBuffer(t){const n=this.strToU8(t);return await this.compress(n)}static isArrayBufferCompressed(t){if(t&&t.byteLength){const n=new Uint8Array(t);return(n[0]<<8|n[1])===8075}else return!1}static strFromU8(t,n){if(n){let r="";for(let i=0;i<t.length;i+=16384)r+=String.fromCharCode.apply(null,t.subarray(i,i+16384));return r}else{const r=(a,l,c)=>((l==null||l<0)&&(l=0),(c==null||c>a.length)&&(c=a.length),new Uint8Array(a.subarray(l,c))),i=a=>{for(let l="",c=0;;){let u=a[c++];const d=(u>127)+(u>223)+(u>239);if(c+d>a.length)return{s:l,r:r(a,c-1)};d?d===3?(u=((u&15)<<18|(a[c++]&63)<<12|(a[c++]&63)<<6|a[c++]&63)-65536,l+=String.fromCharCode(55296|u>>10,56320|u&1023)):d&1?l+=String.fromCharCode((u&31)<<6|a[c++]&63):l+=String.fromCharCode((u&15)<<12|(a[c++]&63)<<6|a[c++]&63):l+=String.fromCharCode(u)}},{s,r:o}=i(t);if(o.length)throw new Error("Unexpected trailing bytes in UTF-8 decoding");return s}}static async decompressArrayBuffer(t){const n=await this.decompress(new Uint8Array(t));return this.strFromU8(n)}static arraysAreEqual(t,n){return AS(t,n)}static range(t,n,r){return Array.from({length:(n-t)/r+1},(i,s)=>t+s*r)}static sph2cartDeg(t,n){const r=-n*(Math.PI/180),i=(t-90)%360*(Math.PI/180),s=[Math.cos(r)*Math.cos(i),Math.cos(r)*Math.sin(i),Math.sin(r)],o=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);return o<=0||(s[0]/=o,s[1]/=o,s[2]/=o),s}static vox2mm(t,n){const r=Qe(n);Ot(r,r);const i=Le(t[0],t[1],t[2],1);return At(i,i,r),q(i[0],i[1],i[2])}},ms=k,Oe=class $e{static readTRACT(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be niml.tract: bytes = "+n);const r=new DataView(t),i=new Uint8Array(t);let s=0;function o(){for(;s<n&&i[s]!==60;)s++;const g=s;for(;s<n&&i[s]!==62;)s++;return s++,s-g<1?"":new TextDecoder().decode(t.slice(g,s-1)).trim()}let a=o();function l(g){const v=a.indexOf(g);if(v<0)return 0;const m=a.indexOf('"',v)+1,A=a.indexOf('"',m),x=a.slice(m,A);return parseInt(x)}const c=l("N_tracts=");(!a.startsWith("<network")||c<1)&&k.warn("This is not a valid niml.tract file "+a);let u=0;const d=[];d.push(u);const h=[],f=[];for(let g=0;g<c;g++){a=o();const v=l("ni_dimen="),m=l("Bundle_Tag="),A=a.includes("binary.lsbfirst");for(let x=0;x<v;x++){s+=4;const w=r.getUint32(s,A)/3;s+=4;for(let b=0;b<w;b++)h.push(r.getFloat32(s,A)),s+=4,h.push(-r.getFloat32(s,A)),s+=4,h.push(r.getFloat32(s,A)),s+=4;u+=w,d.push(u),f.push(m)}a=o()}const p=[];return p.push({id:"tract",vals:Float32Array.from(f)}),{pts:new Float32Array(h),offsetPt0:new Uint32Array(d),dps:p}}static async readTT(t){let n=new Uint32Array(0),r=new Float32Array(0);const i=await ue.readMatV4(t);if(!("trans_to_mni"in i))throw new Error("TT format file must have 'trans_to_mni'");if(!("voxel_size"in i))throw new Error("TT format file must have 'voxel_size'");if(!("track"in i))throw new Error("TT format file must have 'track'");let s=ge();const o=i.trans_to_mni;s=en(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]),Ot(s,s);function a(l){const c=new DataView(l.buffer),u=[];let d=0,h=0;for(;h<l.length;){u.push(h);const g=c.getUint32(h,!0);h=h+g+13,d+=g}n=new Uint32Array(u.length+1),r=new Float32Array(d);let f=0;for(let g=0;g<u.length;g++){n[g]=f/3;let v=u[g];const m=c.getUint32(v,!0)/3;let A=c.getInt32(v+4,!0),x=c.getInt32(v+8,!0),w=c.getInt32(v+12,!0);v+=16,r[f++]=A,r[f++]=x,r[f++]=w;for(let b=2;b<=m;b++)A=A+c.getInt8(v++),x=x+c.getInt8(v++),w=w+c.getInt8(v++),r[f++]=A,r[f++]=x,r[f++]=w}for(let g=0;g<f;g++)r[g]=r[g]/32;let p=0;for(let g=0;g<f/3;g++){const v=Le(r[p],r[p+1],r[p+2],1);At(v,v,s),r[p++]=v[0],r[p++]=v[1],r[p++]=v[2]}n[u.length]=f/3}return a(i.track),{pts:r,offsetPt0:n}}static assembleDpgFromMap(t,n){if(!Array.isArray(n)||n.length===0)throw new Error('assembleDpgFromMap: "groups" is empty or missing; cannot assemble dpg.');for(let l=0;l<n.length;l++){const c=String(n[l].id);if(!t[c])throw new Error(`assembleDpgFromMap: missing dpgMap entry for group "${c}".`);if(!Array.isArray(t[c]))throw new Error(`assembleDpgFromMap: dpgMap["${c}"] is not an array.`)}const r=String(n[0].id),i=t[r],s=[],o=new Set;for(const l of i){if(!l||typeof l.id!="string")throw new Error(`assembleDpgFromMap: invalid entry in group "${r}".`);if(o.has(l.id))throw new Error(`assembleDpgFromMap: duplicate tag "${l.id}" in group "${r}".`);o.add(l.id),s.push(l.id)}if(o.size===0)throw new Error(`assembleDpgFromMap: no tags found in group "${r}".`);for(let l=1;l<n.length;l++){const c=String(n[l].id),u=t[c],d=new Map;for(const h of u){if(!h||typeof h.id!="string")throw new Error(`assembleDpgFromMap: invalid entry in group "${c}".`);d.set(h.id,(d.get(h.id)||0)+1)}for(const[h,f]of d.entries())if(f>1)throw new Error(`assembleDpgFromMap: multiple entries for tag "${h}" in group "${c}".`);if(d.size!==o.size)throw new Error(`assembleDpgFromMap: tag coverage mismatch for group "${c}". Expected ${o.size} tags but found ${d.size}.`);for(const h of o)if(!d.has(h))throw new Error(`assembleDpgFromMap: group "${c}" missing tag "${h}".`)}const a=[];for(const l of s){const c=[];let u=0;for(let f=0;f<n.length;f++){const p=String(n[f].id),v=t[p].filter(A=>A.id===l);if(v.length===0)throw new Error(`assembleDpgFromMap: missing tag "${l}" for group "${p}".`);if(v.length>1)throw new Error(`assembleDpgFromMap: multiple entries for tag "${l}" in group "${p}".`);const m=v[0];if(m.vals instanceof Float32Array)c.push(m.vals),u+=m.vals.length;else try{const A=Float32Array.from(m.vals);c.push(A),u+=A.length}catch{throw new Error(`assembleDpgFromMap: invalid vals for tag "${l}" in group "${p}".`)}}const d=new Float32Array(u);let h=0;for(const f of c)d.set(f,h),h+=f.length;a.push({id:l,vals:d})}return a}static async readTRX(t){function n(g){const v=(g&31744)>>10,m=g&1023;return(g>>15?-1:1)*(v?v===31?m?NaN:1/0:Math.pow(2,v-15)*(1+m/1024):6103515625e-14*(m/1024))}let r=0,i=0,s=new Float32Array([]);const o=[],a={},l=[],c=[],u=[];let d=[],h=!1;const f=new Ev(t);for(let g=0;g<f.entries.length;g++){const v=f.entries[g];if(v.uncompressedSize===0)continue;const m=v.fileName.split("/"),A=m.slice(-1)[0];if(A.startsWith("."))continue;const x=m.slice(-3)[0],w=m.slice(-2)[0],b=A.split(".")[0],y=await v.extract();if(A.includes("header.json")){const E=new TextDecoder().decode(y);d=JSON.parse(E);continue}let C=0,S=[];if(A.endsWith(".uint64")||A.endsWith(".int64")){C=y.length/8,S=new Uint32Array(C);const E=new Uint32Array(y.buffer);let T=0;for(let F=0;F<C;F++)S[F]=E[T],E[T+1]!==0&&(h=!0),T+=2}else if(A.endsWith(".uint32"))S=new Uint32Array(y.buffer);else if(A.endsWith(".uint16"))S=new Uint16Array(y.buffer);else if(A.endsWith(".uint8"))S=new Uint8Array(y.buffer);else if(A.endsWith(".int32"))S=new Int32Array(y.buffer);else if(A.endsWith(".int16"))S=new Int16Array(y.buffer);else if(A.endsWith(".int8"))S=new Int8Array(y.buffer);else if(A.endsWith(".float64"))S=new Float64Array(y.buffer);else if(A.endsWith(".float32"))S=new Float32Array(y.buffer);else if(A.endsWith(".float16")){C=y.length/2,S=new Float32Array(C);const E=new Uint16Array(y.buffer),T=new Float32Array(65536);for(let F=0;F<65536;F++)T[F]=n(F);for(let F=0;F<C;F++)S[F]=T[E[F]]}else continue;if(C=S.length,w.includes("groups")){l.push({id:b,vals:Float32Array.from(S.slice())});continue}if(x.includes("dpg")){const E=String(w);a[E]||(a[E]=[]),a[E].push({id:b,vals:Float32Array.from(S.slice())});continue}if(w.includes("dpv")){u.push({id:b,vals:Float32Array.from(S.slice())});continue}if(w.includes("dps")){c.push({id:b,vals:Float32Array.from(S.slice())});continue}if(A.startsWith("offsets.")){r=C;for(let E=0;E<C;E++)o[E]=S[E]}A.startsWith("positions.3.")&&(i=C,s=new Float32Array(S))}if(r===0||i===0)throw new Error("Failure reading TRX format (no offsets or points).");if(h)throw new Error("Too many vertices: JavaScript does not support 64 bit integers");let p=[];return l.length>0&&a&&Object.keys(a).length>0&&(p=this.assembleDpgFromMap(a,l)),o[r]=i/3,{pts:s,offsetPt0:new Uint32Array(o),dpg:p,dps:c,dpv:u,groups:l,header:d}}static readTXT(t,n=0){const i=new TextDecoder("utf-8").decode(t).split(/\r?\n|\r/).filter(o=>o.trim().length>0);n<=0&&(n=i.length);const s=new Float32Array(n);for(let o=0;o<n&&o<i.length;o++){const a=parseFloat(i[o].trim());s[o]=Number.isFinite(a)?a:0}return s}static readTSF(t,n=0){const r=new Float32Array(n),i=t.byteLength;if(i<20)throw new Error("File too small to be TSF: bytes = "+i);const s=new Uint8Array(t);let o=0;function a(){for(;o<i&&s[o]===10;)o++;const h=o;for(;o<i&&s[o]!==10;)o++;return o++,o-h<1?"":new TextDecoder().decode(t.slice(h,o-1))}let l=a();if(!l.includes("mrtrix track scalars"))throw new Error("Not a valid TSF file");let c=-1;for(;o<i&&!l.includes("END");)if(l=a(),l.toLowerCase().startsWith("file:")&&(c=parseInt(l.split(" ").pop())),l.toLowerCase().startsWith("datatype:")&&!l.endsWith("Float32LE"))throw new Error("Only supports TSF files with Float32LE");if(c<20)throw new Error("Not a valid TSF file (missing file offset)");o=c;const u=new DataView(t);let d=0;for(;o+4<=i&&d<n;){const h=u.getFloat32(o,!0);if(o+=4,isFinite(h))r[d++]=h;else if(!isNaN(h))break}return r}static readTCK(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be TCK: bytes = "+n);const r=new Uint8Array(t);let i=0;function s(){for(;i<n&&r[i]===10;)i++;const p=i;for(;i<n&&r[i]!==10;)i++;return i++,i-p<1?"":new TextDecoder().decode(t.slice(p,i-1))}let o=s();if(!o.includes("mrtrix tracks"))throw new Error("Not a valid TCK file");let a=-1;for(;i<n&&!o.includes("END");)o=s(),o.toLowerCase().startsWith("file:")&&(a=parseInt(o.split(" ").pop()));if(a<20)throw new Error("Not a valid TCK file (missing file offset)");i=a;const l=new DataView(t);let c=0,u=new Uint32Array(n/(4*4)),d=0,h=0,f=new Float32Array(n/4);for(u[0]=0;i+12<n;){const p=l.getFloat32(i,!0);i+=4;const g=l.getFloat32(i,!0);i+=4;const v=l.getFloat32(i,!0);if(i+=4,isFinite(p))f[h++]=p,f[h++]=g,f[h++]=v,c++;else if(u[d++]=c,!isNaN(p))break}return f=f.slice(0,h),u=u.slice(0,d),{pts:f,offsetPt0:u}}static async readTRK(t){let n=new DataView(t),r=n.getUint32(0,!0);if(r!==1128354388){let F;if(r===4247762216)throw new Error("zstd TRK decompression is not supported");F=await ue.decompress(new Uint8Array(t)),t=F.buffer,n=new DataView(t),r=n.getUint32(0,!0)}const i=n.getUint32(992,!0),s=n.getUint32(996,!0);if(i>2||s!==1e3||r!==1128354388)throw new Error("Not a valid TRK file");const o=n.getInt16(36,!0),a=[];for(let F=0;F<o;F++){const M=new Uint8Array(t.slice(38+F*20,58+F*20)),B=new TextDecoder().decode(M).split("\0").shift();a.push({id:B.trim(),vals:[]})}const l=n.getFloat32(12,!0),c=n.getFloat32(16,!0),u=n.getFloat32(20,!0),d=en(1/l,0,0,-.5,0,1/c,0,-.5,0,0,1/u,-.5,0,0,0,1),h=n.getInt16(238,!0),f=[];for(let F=0;F<h;F++){const M=new Uint8Array(t.slice(240+F*20,260+F*20)),B=new TextDecoder().decode(M).split("\0").shift();f.push({id:B.trim(),vals:[]})}const p=ge();for(let F=0;F<16;F++)p[F]=n.getFloat32(440+F*4,!0);p[15]===0&&(k.warn("TRK vox_to_ras not set"),$A(p));const g=ge();tv(g,d,p);let v=null,m=null;v=new Int32Array(t.slice(s)),m=new Float32Array(v.buffer);const A=v.length;if(A<1)throw new Error("Empty TRK file.");let x=0,w=0,b=new Uint32Array(v.length/4),y=0,C=new Float32Array(v.length),S=0;for(;x<A;){const F=v[x];x=x+1,b[y++]=w;for(let M=0;M<F;M++){const B=m[x+0],P=m[x+1],z=m[x+2];if(x+=3,C[S++]=B*g[0]+P*g[1]+z*g[2]+g[3],C[S++]=B*g[4]+P*g[5]+z*g[6]+g[7],C[S++]=B*g[8]+P*g[9]+z*g[10]+g[11],o>0)for(let U=0;U<o;U++)a[U].vals.push(m[x]),x++;w++}if(h>0)for(let M=0;M<h;M++)f[M].vals.push(m[x]),x++}const E=[];for(let F=0;F<f.length;F++)E.push({id:f[F].id,vals:Float32Array.from(f[F].vals)});const T=[];for(let F=0;F<a.length;F++)T.push({id:a[F].id,vals:Float32Array.from(a[F].vals)});return b[y++]=w,C=C.slice(0,S),b=b.slice(0,y),{pts:C,offsetPt0:b,dps:E,dpv:T}}static readTxtVTK(t){const i=new TextDecoder("utf-8").decode(t).split(`
`);if(i.length<7||!i[0].startsWith("# vtk DataFile"))throw new Error("Invalid VTK image");if(!i[2].startsWith("ASCII"))throw new Error("Not ASCII VTK mesh");let o=3;for(;i[o].length<1;)o++;if(!i[o].includes("POLYDATA"))throw new Error("Not ASCII VTK polydata");for(o++;i[o].length<1;)o++;if(!i[o].startsWith("POINTS"))throw new Error("Not VTK POINTS");let a=i[o].trim().split(/\s+/);const l=parseInt(a[1]),c=l*3,u=new Float32Array(l*3);let d=0;for(;d<l*3;){o++;const g=i[o].trim().trim().split(/\s+/);for(let v=0;v<g.length&&!(d>=c);v++)u[d]=parseFloat(g[v]),d++}const h=[];for(o++;i[o].length<1;)o++;if(i[o].startsWith("METADATA")){for(;i[o].length>1;)o++;o++}if(a=i[o].trim().split(/\s+/),o++,a[0].includes("LINES")){const p=parseInt(a[1]);if(p<1)throw new Error("Corrupted VTK ASCII");let g=i[o].trim();const v=[];let m=[];if(g.startsWith("OFFSETS")){o++;let A=0;for(;A<p;){g=i[o].trim(),o++;const x=g.trim().split(/\s+/);for(let w=0;w<x.length&&(v[A]=parseInt(x[w]),A++,!(A>=p));w++);}m=Array.from(u)}else{let A=function(){g=i[o].trim();const y=g.trim().split(/\s+/);w=[];for(let C=0;C<y.length;C++)w.push(parseInt(y[C]));b=0,o++},x=0;v[0]=0;let w=[],b=0;A();for(let y=0;y<p;y++){b>=w.length&&A();const C=w[b++];x+=C,v[y+1]=x;for(let S=0;S<C;S++){b>=w.length&&A();const E=w[b++]*3;m.push(u[E+0]),m.push(u[E+1]),m.push(u[E+2])}}}return{pts:Float32Array.from(m),offsetPt0:Uint32Array.from(v)}}else if(a[0].includes("TRIANGLE_STRIPS")){const p=parseInt(a[1]);for(let g=0;g<p;g++){const v=i[o].trim();o++;const m=v.trim().split(/\s+/),A=parseInt(m[0])-2;let x=1;for(let w=0;w<A;w++)w%2?(h.push(parseInt(m[x+2])),h.push(parseInt(m[x+1])),h.push(parseInt(m[x]))):(h.push(parseInt(m[x])),h.push(parseInt(m[x+1])),h.push(parseInt(m[x+2]))),x+=1}}else if(a[0].includes("POLYGONS")){const p=parseInt(a[1]);for(let g=0;g<p;g++){const v=i[o].trim();o++;const m=v.trim().split(/\s+/),A=parseInt(m[0])-2,x=parseInt(m[1]);let w=parseInt(m[2]);for(let b=0;b<A;b++){const y=parseInt(m[3+b]);h.push(x),h.push(w),h.push(y),w=y}}}else throw new Error("Unsupported ASCII VTK datatype "+a[0]);const f=new Uint32Array(h);return{positions:u,indices:f}}static async readLayer(t="",n,r,i=.5,s="warm",o="winter",a=!1,l=null,c=null,u=0){const d={...fD,colormapInvert:!1,colormapType:0,isTransparentBelowCalMin:!0,isAdditiveBlend:!1,colorbarVisible:!0,colormapLabel:null},h=/(?:\.([^.]+))?$/;let f=h.exec(t)[1];f=f.toUpperCase(),f==="GZ"&&(f=h.exec(t.slice(0,-3))[1],f=f.toUpperCase());const p=r.vertexCount/3;if(r.offsetPt0){const m=t.split("/");let A="Unknown";if(m.length>1&&m.pop()&&(A=A.split(".").slice(0,-1).join(".")),f==="TXT"){const C=r.offsetPt0.length-1,S=$e.readTXT(n,C);if(S.length!==C)throw new Error(`TXT file has ${S.length} items, expected one per streamline (${C}).`);r.dps||(r.dps=[]);const E=S.reduce((F,M)=>Math.min(F,M)),T=S.reduce((F,M)=>Math.max(F,M));return r.dps.push({id:A,vals:Float32Array.from(S.slice()),global_min:E,global_max:T,cal_min:E,cal_max:T}),d}if(f==="NII"){const C=await $e.readNII(n,r.pts,""),S=C.reduce((T,F)=>Math.min(T,F)),E=C.reduce((T,F)=>Math.max(T,F));return r.dpv.push({id:A,vals:Float32Array.from(C.slice()),global_min:S,global_max:E,cal_min:S,cal_max:E}),d}if(f!=="TSF")throw new Error("readLayer for streamlines only supports TSF and TXT files.");const x=r.pts.length/3,w=$e.readTSF(n,x);r.dpv||(r.dpv=[]);const b=w.reduce((C,S)=>Math.min(C,S)),y=w.reduce((C,S)=>Math.max(C,S));return r.dpv.push({id:A,vals:Float32Array.from(w.slice()),global_min:b,global_max:y,cal_min:b,cal_max:y}),d}if(p<3){k.error("n_vert < 3 in layer");return}if(f==="MZ3"){const m=await $e.readMZ3(n,p);d.values=m.scalars,"colormapLabel"in m&&(d.colormapLabel=m.colormapLabel)}else if(f==="ANNOT"){const m=$e.readANNOT(n,p,!0);m instanceof Uint32Array?d.values=m:(d.values=m.scalars,d.colormapLabel=m.colormapLabel)}else if(f==="CRV"||f==="CURV"||f==="THICKNESS"||f==="AREA")d.values=$e.readCURV(n,p),d.isTransparentBelowCalMin=!1;else if(f==="GII"){const m=await $e.readGII(n,p);d.values=m.scalars,d.colormapLabel=m.colormapLabel}else if(f==="MGH"||f==="MGZ"){const m=await $e.readMGH(n,p,!0);"scalars"in m?(d.values=m.scalars,d.colormapLabel=m.colormapLabel):d.values=m}else if(f==="NII")d.values=await $e.readNII(n,r.pts,r.anatomicalStructurePrimary);else if(f==="SMP")d.values=await $e.readSMP(n,p);else if(f==="STC")d.values=$e.readSTC(n,p);else if($e.isCurv(n))d.values=$e.readCURV(n,p),d.isTransparentBelowCalMin=!1;else return k.warn("Unknown layer overlay format "+t),d;if(!d.values){k.error("no values in layer");return}d.nFrame4D=d.values.length/p,d.frame4D=0,d.outlineBorder=u;let g=d.values[0],v=d.values[0];for(let m=0;m<d.values.length;m++)g=Math.min(g,d.values[m]),v=Math.max(v,d.values[m]);return d.global_min=g,d.global_max=v,d.cal_min=l||0,l||(d.cal_min=g),d.cal_max=c||0,c||(d.cal_max=v),d.cal_minNeg=NaN,d.cal_maxNeg=NaN,d.opacity=i,d.colormap=s,d.colormapNegative=o,d.useNegativeCmap=a,d}static async readSMP(t,n){const r=t.byteLength;let i=new DataView(t),s=i.getUint16(0,!0);if(s>5){const d=await ue.decompress(new Uint8Array(t));i=new DataView(d.buffer),s=i.getUint16(0,!0),t=d.buffer}s>5&&k.error("Unsupported or invalid BrainVoyager SMP version "+s);const o=i.getUint32(2,!0);o!==n&&k.error("SMP file has "+o+" vertices, background mesh has "+n);const a=i.getUint16(6,!0),l=new Float32Array(o*a);let c=9;function u(){const d=c;for(;c<r&&i.getUint8(c)!==0;)c++;return c++,new TextDecoder().decode(t.slice(d,c-1))}u();for(let d=0;d<a;d++){const h={};h.mapType=i.getUint32(c,!0),c+=4,s>=3&&h.mapType===3&&(h.nLags=i.getUint32(c,!0),c+=4,h.mnLag=i.getUint32(c,!0),c+=4,h.mxLag=i.getUint32(c,!0),c+=4,h.ccOverlay=i.getUint32(c,!0),c+=4),h.clusterSize=i.getUint32(c,!0),c+=4,h.clusterCheck=i.getUint8(c),c+=1,h.critThresh=i.getFloat32(c,!0),c+=4,h.maxThresh=i.getFloat32(c,!0),c+=4,s>=4&&(h.includeValuesGreaterThreshMax=i.getUint32(c,!0),c+=4),h.df1=i.getUint32(c,!0),c+=4,h.df2=i.getUint32(c,!0),c+=4,s>=5?(h.posNegFlag=i.getUint32(c,!0),c+=4):h.posNegFlag=3,h.cortexBonferroni=i.getUint32(c,!0),c+=4,h.posMinRGB=[0,0,0],h.posMaxRGB=[0,0,0],h.negMinRGB=[0,0,0],h.negMaxRGB=[0,0,0],s>=2&&(h.posMinRGB[0]=i.getUint8(c),c++,h.posMinRGB[1]=i.getUint8(c),c++,h.posMinRGB[2]=i.getUint8(c),c++,h.posMaxRGB[0]=i.getUint8(c),c++,h.posMaxRGB[1]=i.getUint8(c),c++,h.posMaxRGB[2]=i.getUint8(c),c++,s>=4&&(h.negMinRGB[0]=i.getUint8(c),c++,h.negMinRGB[1]=i.getUint8(c),c++,h.negMinRGB[2]=i.getUint8(c),c++,h.negMaxRGB[0]=i.getUint8(c),c++,h.negMaxRGB[1]=i.getUint8(c),c++,h.negMaxRGB[2]=i.getUint8(c),c++),h.enableSMPColor=i.getUint8(c),c++,s>=4&&(h.lut=u()),h.colorAlpha=i.getFloat32(c,!0),c+=4),h.name=u();const f=new Float32Array(t,c,o);l.set(f,d*o),c+=o*4}return l}static readSTC(t,n){const r=new DataView(t),i=r.getInt32(8,!1);if(i!==n)throw new Error("Overlay has "+i+" vertices, expected "+n);let s=12+i*4;const o=r.getUint32(s,!1);s+=4;const a=new Float32Array(o*i);for(let l=0;l<o*i;l++)a[l]=r.getFloat32(s,!1),s+=4;return a}static isCurv(t){const n=new DataView(t),r=n.getUint8(0),i=n.getUint8(1),s=n.getUint8(2);return r!==255||i!==255||s!==255?(ms.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),!1):!0}static readCURV(t,n){const r=new DataView(t),i=r.getUint8(0),s=r.getUint8(1),o=r.getUint8(2),a=r.getUint32(3,!1),l=r.getUint32(11,!1);if((i!==255||s!==255||o!==255)&&ms.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),n!==a)throw new Error("CURV file has different number of vertices ( "+a+")than mesh ("+n+")");if(t.byteLength<15+4*a*l)throw new Error("CURV file smaller than specified");const c=new Float32Array(l*a);let u=15;for(let p=0;p<l*a;p++)c[p]=r.getFloat32(u,!1),u+=4;let d=c[0],h=c[0];for(let p=0;p<c.length;p++)d=Math.min(d,c[p]),h=Math.max(h,c[p]);const f=1/(h-d);for(let p=0;p<c.length;p++)c[p]=1-(c[p]-d)*f;return c}static readANNOT(t,n,r=!1){const i=new DataView(t),s=i.getUint32(0,!1),o=this.decimateLayerVertices(s,n);if(n!==o)throw new Error("ANNOT file has different number of vertices than mesh");if(t.byteLength<4+8*s)throw new Error("ANNOT file smaller than specified");let a=0;const l=new Uint32Array(s);for(let w=0;w<s;w++){const b=i.getUint32(a+=4,!1);l[b]=i.getUint32(a+=4,!1)}if(!r)return l;let c=0;try{c=i.getInt32(a+=4,!1)}catch{return l}if(c!==1||i.getInt32(a+=4,!1)>0)return l;const h=i.getInt32(a+=4,!1),f=i.getInt32(a+=4,!1);a+=f;const p=i.getInt32(a+=4,!1);if(p<1)return l;const g={R:Array(h).fill(0),G:Array(h).fill(0),B:Array(h).fill(0),A:Array(h).fill(0),I:Array(h).fill(0),labels:Array(h).fill("")};for(let w=0;w<p;w++){const b=i.getInt32(a+=4,!1),y=i.getInt32(a+=4,!1);a+=4;let C="";for(let M=0;M<y;M++){const B=i.getUint8(a++);if(B===0)break;C+=String.fromCharCode(B)}a-=4;const S=i.getInt32(a+=4,!1),E=i.getInt32(a+=4,!1),T=i.getInt32(a+=4,!1),F=i.getInt32(a+=4,!1);if(b<0||b>=h){k.warn("annot entry out of range");continue}g.R[b]=S,g.G[b]=E,g.B[b]=T,g.A[b]=F,g.I[b]=(F<<24)+(T<<16)+(E<<8)+S,g.labels[b]=C}let v=!0;for(let w=0;w<h;w++)g.A[w]>0&&(v=!1);if(v)for(let w=0;w<h;w++)g.A[w]=255;const m=new Float32Array(s);m.fill(-1);let A=0;for(let w=0;w<n;w++){const b=l[w];for(let y=0;y<h;y++)if(g.I[y]===b){m[w]=y;break}m[w]<0&&(A++,m[w]=0)}A>0&&k.error(`annot vertex colors do not match ${A} of ${s} vertices.`);for(let w=0;w<h;w++)g.I[w]=w;const x=Ee.makeLabelLut(g);return{scalars:m,colormapLabel:x}}static readNV(t){const n=t.byteLength,r=new Uint8Array(t);let i=0;function s(){for(;i<n&&r[i]===10;)i++;const h=i;for(;i<n&&r[i]!==10;)i++;return i++,i-h<1?"":new TextDecoder().decode(t.slice(h,i-1))}let o=0,a=0,l=0,c=0,u,d;for(;i<n;){const h=s();if(h.startsWith("#"))continue;const f=h.trim().split(/\s+/);if(o<1){o=parseInt(f[0]),u=new Float32Array(o*3);continue}if(l<o*3){u[l]=parseFloat(f[0]),u[l+1]=parseFloat(f[1]),u[l+2]=parseFloat(f[2]),l+=3;continue}if(a<1){a=parseInt(f[0]),d=new Uint32Array(a*3);continue}if(c>=a*3)break;d[c+2]=parseInt(f[0])-1,d[c+1]=parseInt(f[1])-1,d[c+0]=parseInt(f[2])-1,c+=3}return{positions:u,indices:d}}static readASC(t){const n=t.byteLength,r=new Uint8Array(t);let i=0;function s(){for(;i<n&&r[i]===10;)i++;const f=i;for(;i<n&&r[i]!==10;)i++;return i++,i-f<1?"":new TextDecoder().decode(t.slice(f,i-1))}let o=s();o.startsWith("#!ascii")||k.warn("Invalid ASC mesh"),o=s();let a=o.trim().split(/\s+/);const l=parseInt(a[0]),c=parseInt(a[1]),u=new Float32Array(l*3);let d=0;for(let f=0;f<l;f++)o=s(),a=o.trim().split(/\s+/),u[d]=parseFloat(a[0]),u[d+1]=parseFloat(a[1]),u[d+2]=parseFloat(a[2]),d+=3;const h=new Uint32Array(c*3);d=0;for(let f=0;f<c;f++)o=s(),a=o.trim().split(/\s+/),h[d]=parseInt(a[0]),h[d+1]=parseInt(a[1]),h[d+2]=parseInt(a[2]),d+=3;return{positions:u,indices:h}}static readVTK(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const r=new Uint8Array(t);let i=0;function s(g=!0){if(g)for(;i<n&&r[i]===10;)i++;const v=i;for(;i<n&&r[i]!==10;)i++;return i++,i-v<1?"":new TextDecoder().decode(t.slice(v,i-1))}let o=s();if(!o.startsWith("# vtk DataFile"))throw new Error("Invalid VTK mesh");if(o=s(!1),o=s(),o.startsWith("ASCII"))return $e.readTxtVTK(t);if(!o.startsWith("BINARY"))throw new Error("Invalid VTK image, expected ASCII or BINARY "+o);if(o=s(),!o.includes("POLYDATA"))throw new Error("Only able to read VTK POLYDATA "+o);o=s(),(!o.includes("POINTS")||!o.includes("double")&&!o.includes("float"))&&k.warn("Only able to read VTK float or double POINTS"+o);const a=o.includes("double");let l=o.trim().split(/\s+/);const u=parseInt(l[1])*3,d=new Float32Array(u),h=new DataView(t);if(a)for(let g=0;g<u;g++)d[g]=h.getFloat64(i,!1),i+=8;else for(let g=0;g<u;g++)d[g]=h.getFloat32(i,!1),i+=4;o=s(),l=o.trim().split(/\s+/);const f=[];if(l[0].includes("LINES")){const g=parseInt(l[1]),v=i;if(o=s(),o.startsWith("OFFSETS")){let w=!1;o.includes("int64")&&(w=!0);const b=new Uint32Array(g);if(w){let C=!1;for(let S=0;S<g;S++){let E=h.getInt32(i,!1);E!==0&&(C=!0),i+=4,E=h.getInt32(i,!1),i+=4,b[S]=E}C&&k.warn("int32 overflow: JavaScript does not support int64")}else for(let C=0;C<g;C++){const S=h.getInt32(i,!1);i+=4,b[C]=S}return{pts:d,offsetPt0:b}}i=v;let m=0;const A=[],x=[];A.push(m);for(let w=0;w<g;w++){const b=h.getInt32(i,!1);i+=4,m+=b,A.push(m);for(let y=0;y<b;y++){const C=h.getInt32(i,!1)*3;i+=4,x.push(d[C+0]),x.push(d[C+1]),x.push(d[C+2])}}return{pts:Float32Array.from(x),offsetPt0:Uint32Array.from(A)}}else if(l[0].includes("TRIANGLE_STRIPS")){const g=parseInt(l[1]);for(let v=0;v<g;v++){const m=h.getInt32(i,!1)-2;i+=4;for(let A=0;A<m;A++)A%2?(f.push(h.getInt32(i+8,!1)),f.push(h.getInt32(i+4,!1)),f.push(h.getInt32(i,!1))):(f.push(h.getInt32(i,!1)),f.push(h.getInt32(i+4,!1)),f.push(h.getInt32(i+8,!1))),i+=4;i+=8}}else if(l[0].includes("POLYGONS")){const g=parseInt(l[1]),v=i,m=s();if(m.startsWith("OFFSETS")){let A=m.includes("int64");const x=new Uint32Array(g);let w=!1;for(let S=0;S<g;S++)A&&(h.getInt32(i,!1)!==0&&(w=!0),i+=4),x[S]=h.getInt32(i,!1),i+=4;if(!Number.isSafeInteger(g)||g>=2147483648||w)throw new Error("values exceed 2GB limit");const b=s();if(!b.startsWith("CONNECTIVITY"))throw new Error("Expected CONNECTIVITY after OFFSETS");A=b.includes("int64");const y=x[g-1],C=new Uint32Array(y);for(let S=0;S<y;S++)A&&(i+=4),C[S]=h.getInt32(i,!1),i+=4;for(let S=0;S<g;S++){const E=S===0?0:x[S-1],T=x[S];for(let F=1;F<T-E-1;F++)f.push(C[E]),f.push(C[E+F]),f.push(C[E+F+1])}}else{i=v;for(let A=0;A<g;A++){const x=h.getInt32(i,!1)-2;if(A===0&&x>65535)throw new Error("Invalid VTK binary polygons using little-endian data (MRtrix)");i+=4;const w=h.getInt32(i,!1);i+=4;let b=h.getInt32(i,!1);i+=4;for(let y=0;y<x;y++){const C=h.getInt32(i,!1);i+=4,f.push(w,b,C),b=C}}}}else throw new Error("Unsupported binary VTK datatype "+l[0]);const p=new Uint32Array(f);return{positions:d,indices:p}}static readWRL(t){const n=new TextDecoder("utf-8").decode(t),r=/coord\s+Coordinate\s*\{\s*point\s*\[([\s\S]*?)\]/,i=/coordIndex\s*\[([\s\S]*?)\]/,s=/color\s+Color\s*\{\s*color\s*\[([\s\S]*?)\]/,o=r.exec(n),a=i.exec(n),l=s.exec(n);if(!o||!a)throw new Error("Invalid WRL file: Could not find vertices or indices.");const c=new Float32Array(o[1].trim().split(/[\s,]+/).map(Number));let u=null;if(l){u=new Float32Array(l[1].trim().split(/[\s,]+/).map(Number));const h=c.length/3;u.length!==h*3&&(console.warn(`Unexpected color count: expected ${h*3}, got ${u.length}`),u=null)}const d=new Uint32Array(a[1].trim().split(/[\s,]+/).map(Number).filter(h=>h!==-1));return{positions:c,indices:d,colors:u}}static readDFS(t){const n=new DataView(t),r=n.getUint32(0,!0),i=n.getUint16(4,!0);(r!==1599292996||i!==17740)&&k.warn("Not a little-endian brainsuite DFS mesh");const s=n.getUint32(12,!0),o=n.getUint32(24,!0),a=n.getUint32(28,!0),l=n.getUint32(48,!0);let c=s;const u=new Uint32Array(t,c,o*3);c+=o*3*4;const d=new Float32Array(t,c,a*3);for(let f=0;f<a*3;f+=3){const p=d[f];d[f]=d[f+1],d[f+1]=p}let h;return l>=0&&(h=new Float32Array(t,l,a*3)),{positions:d,indices:u,colors:h}}static async readMZ3(t,n=0){if(t.byteLength<20)throw new Error("File too small to be mz3: bytes = "+t.byteLength);let r=new DataView(t),i=t,s=r.getUint16(0,!0);if(s===35615||s===8075){const E=await ue.decompress(new Uint8Array(t));r=new DataView(E.buffer),s=r.getUint16(0,!0),i=E.buffer}const o=r.getUint16(2,!0),a=r.getUint32(4,!0);let l=r.getUint32(8,!0);const c=r.getUint32(12,!0);if(ms.debug("MZ3 magic %d attr %d face %d vert %d skip %d",s,o,a,l,c),s!==23117)throw new Error("Invalid MZ3 file");const u=(o&1)!==0,d=(o&2)!==0,h=(o&4)!==0;let f=(o&8)!==0;const p=(o&16)!==0,g=(o&32)!==0,v=(o&64)!==0;if(ms.debug(`isFace=${u} isVert=${d} isRGBA=${h} isSCALAR=${f} isDOUBLE=${p} isAOMAP=${g} isLOOKUP=${v}`),o>127)throw new Error("Unsupported future version of MZ3 file");let m=4;p&&(m=8);let A=0;if(n>0&&!u&&a<1&&!h&&(f=!0),f){const E=n||l,T=16+c+(u?a*12:0)+(d?E*12:0)+(h?E*4:0),F=Math.floor((i.byteLength-T)/m);l!==n&&F%n===0&&(l=n),A=Math.floor(F/l),A<1&&(k.warn("Corrupt MZ3: file reports NSCALAR but not enough bytes"),f=!1)}if(l<3&&n<3)throw new Error("Not a mesh MZ3 file (maybe scalar)");n>0&&n!==l&&k.warn("Layer has "+l+"vertices, but background mesh has "+n);let x=16+c;const w=new DataView(i);let b=null;if(u){b=new Uint32Array(a*3);for(let E=0;E<a*3;E++)b[E]=w.getUint32(x,!0),x+=4}let y=null;if(d){y=new Float32Array(l*3);for(let E=0;E<l*3;E++)y[E]=w.getFloat32(x,!0),x+=4}let C=null;if(h){C=new Float32Array(l*3);for(let E=0;E<l;E++){for(let T=0;T<3;T++)C[E*3+T]=w.getUint8(x++)/255;x++}}let S=new Float32Array;if(f&&A>0)if(p){const E=new Float64Array(A*l);for(let T=0;T<A*l;T++)E[T]=w.getFloat64(x,!0),x+=8;S=Float32Array.from(E)}else{S=new Float32Array(A*l);for(let E=0;E<A*l;E++)S[E]=w.getFloat32(x,!0),x+=4}if(n>0&&v&&f){const E=new TextDecoder("utf-8"),T=new Uint8Array(i,16,c),F=E.decode(T),M=JSON.parse(F),B=Ee.makeLabelLut(M);return{scalars:S,colormapLabel:B}}if(n>0&&h&&f){let E=S[0];for(let M=0;M<l;M++)E=Math.max(E,S[M]);const T={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let M=0;M<=E;M++)for(let B=0;B<l;B++)if(M===S[B]){const P=B*3;T.I.push(M),T.R.push(C[P]*255),T.G.push(C[P+1]*255),T.B.push(C[P+2]*255),T.A.push(255),T.labels.push(`${M}`);break}const F=Ee.makeLabelLut(T);return{scalars:S,colormapLabel:F}}return n>0?{scalars:S}:{positions:y,indices:b,scalars:S,colors:C}}static readPLY(t){const n=t.byteLength,r=new Uint8Array(t);let i=0;function s(){for(;i<n&&r[i]===10;)i++;const U=i;for(;i<n&&r[i]!==10;)i++;return i++,i-U<1?"":new TextDecoder().decode(t.slice(U,i-1))}let o=s();if(!o.startsWith("ply"))throw new Error("Not a valid PLY file");o=s();const a=o.includes("ascii");function l(U){if(U==="char"||U==="uchar"||U==="int8"||U==="uint8")return 1;if(U==="short"||U==="ushort"||U==="int16"||U==="uint16")return 2;if(U==="int"||U==="uint"||U==="int32"||U==="uint32"||U==="float"||U==="float32")return 4;if(U==="double")return 8;throw new Error("Unknown data type: "+U)}const c=o.includes("binary_little_endian");let u=0,d=!1,h=0,f=0,p=0,g=0,v=0,m=0,A=0;const x=[];let w=0,b=-1,y=-1,C=-1,S=!1;for(;i<n&&!o.startsWith("end_header");){if(o=s(),o.startsWith("comment"))continue;let U=o.split(/\s/);if(o.startsWith("element vertex"))for(u=parseInt(U[U.length-1]),o=s(),U=o.split(/\s/),w=0,x.length=0;o.startsWith("property");){const G=U[1],L=U[2];x.push(L),L==="red"?(b=w,S=!0):L==="green"?(y=w,S=!0):L==="blue"&&(C=w,S=!0),L==="x"&&G.startsWith("double")?d=!0:L==="x"&&!G.startsWith("float")&&k.error("Error: expect ply xyz to be float or double: "+o);const Y=l(G);h+=Y,w+=Y,o=s(),U=o.split(/\s/)}if(o.startsWith("element face"))for(A=parseInt(U[U.length-1]),o=s(),U=o.split(/\s/);o.startsWith("property");){if(U[1]==="list")p=l(U[2]),g=l(U[3]),f+=p+3*g;else{const G=l(U[1]);f+=G,g===0&&(v+=G,m++)}o=s(),U=o.split(/\s/)}}if(a){A<1&&k.error(`Malformed ply format: faces ${A} `);const U=new Float32Array(u*3);let G;const L=x.indexOf("x"),Y=x.indexOf("y"),j=x.indexOf("z"),$=x.indexOf("red"),X=x.indexOf("green"),H=x.indexOf("blue");$!==-1&&X!==-1&&H!==-1&&(G=new Float32Array(u*3),S=!0);let K=0;for(let De=0;De<u;De++){o=s();const fe=o.split(/\s/),Ce=L>=0?parseFloat(fe[L]):parseFloat(fe[0]),Se=Y>=0?parseFloat(fe[Y]):parseFloat(fe[1]),tt=j>=0?parseFloat(fe[j]):parseFloat(fe[2]);if(U[K]=Ce,U[K+1]=Se,U[K+2]=tt,S&&G){const xt=$>=0?parseInt(fe[$]):0,Sr=X>=0?parseInt(fe[X]):0,Vo=H>=0?parseInt(fe[H]):0,Er=De*3;G[Er]=xt/255,G[Er+1]=Sr/255,G[Er+2]=Vo/255}K+=3}let te=new Uint32Array(A*3),ae=0;for(let De=0;De<A;De++){o=s();const fe=o.split(/\s/),Ce=parseInt(fe[m])-2;if(Ce<1)break;if(ae+Ce*3>te.length){const xt=new Uint32Array(te.length+te.length);xt.set(te),te=xt.slice()}const Se=parseInt(fe[m+1]);let tt=parseInt(fe[m+2]);for(let xt=0;xt<Ce;xt++){const Sr=parseInt(fe[m+3+xt]);te[ae+0]=Se,te[ae+1]=tt,te[ae+2]=Sr,tt=Sr,ae+=3}}te.length!==ae&&(te=te.slice(0,ae));const le={positions:U,indices:te};return S&&(le.colors=typeof G<"u"?G:void 0),le}(h<12||p<1||g<1||A<1)&&k.warn(`Malformed ply format: stride ${h} count ${p} iBytes ${g} iStrideBytes ${f} iPadBytes ${v} faces ${A}`);const E=new DataView(t);let T,F;if(S&&(F=new Float32Array(u*3)),i%4===0&&h===12&&c)T=new Float32Array(t,i,u*3),i+=u*h;else{T=new Float32Array(u*3);let U=0;for(let G=0;G<u;G++){if(d?(T[U]=E.getFloat64(i,c),T[U+1]=E.getFloat64(i+8,c),T[U+2]=E.getFloat64(i+16,c)):(T[U]=E.getFloat32(i,c),T[U+1]=E.getFloat32(i+4,c),T[U+2]=E.getFloat32(i+8,c)),S&&F){const L=i,Y=b>=0?E.getUint8(L+b):0,j=y>=0?E.getUint8(L+y):0,$=C>=0?E.getUint8(L+C):0,X=G*3;F[X]=Y/255,F[X+1]=j/255,F[X+2]=$/255}U+=3,i+=h}}const M=new Uint32Array(A*3);let B=!0,P=0;if(p===1&&g===4&&f===13)for(let U=0;U<A;U++){const G=E.getUint8(i);i+=p,G!==3&&(B=!1),M[P]=E.getUint32(i,c),i+=4,M[P+1]=E.getUint32(i,c),i+=4,M[P+2]=E.getUint32(i,c),i+=4,P+=3}else{let U=i;for(let G=0;G<A;G++){i=U+v;let L=0;p===1?L=E.getUint8(i):p===2?L=E.getUint16(i,c):p===4&&(L=E.getUint32(i,c)),i+=p,L!==3&&(B=!1);for(let Y=0;Y<3;Y++)g===1?M[P]=E.getUint8(i):g===2?M[P]=E.getUint16(i,c):g===4&&(M[P]=E.getUint32(i,c)),P++,i+=g;U+=f}}B||k.warn("Only able to read PLY meshes limited to triangles.");const z={positions:T,indices:M};return S&&typeof F<"u"&&(z.colors=F),z}static readICO(t){const i=new TextDecoder("utf-8").decode(t).split(`
`);let s=i[0].trim().split(/\s+/);s.length>1&&k.warn("This is not a valid FreeSurfer ICO/TRI mesh.");const o=parseInt(s[0]),a=new Float32Array(o*3);let l=1;for(let d=0;d<o;d++){const h=i[l].trim().split(/\s+/);l++;let f=parseInt(h[0])-1;const p=parseFloat(h[1]),g=parseFloat(h[2]),v=parseFloat(h[3]);if(f<0||f>=o){k.error("ICO vertices corrupted");break}f*=3,a[f]=p,a[f+1]=g,a[f+2]=v}s=i[l].trim().split(/\s+/),l++;const c=parseInt(s[0]),u=new Uint32Array(c*3);for(let d=0;d<c;d++){const h=i[l].trim().split(/\s+/);l++;let f=parseInt(h[0])-1;const p=parseInt(h[1])-1,g=parseInt(h[2])-1,v=parseInt(h[3])-1;if(f<0||f>=c){k.error("ICO indices corrupted");break}f*=3,u[f]=p,u[f+1]=g,u[f+2]=v}for(let d=0;d<u.length;d+=3){const h=u[d];u[d]=u[d+1],u[d+1]=h}return{positions:a,indices:u}}static readGEO(t,n=!1){const s=new TextDecoder("utf-8").decode(t).split(`
`),o=s[0].trim().split(/\s+/),a=parseInt(o[0]);let l=parseInt(o[1]),c=parseInt(o[2]);const u=parseInt(o[3]);(a>1||u!==c*3)&&k.warn("Multi-part BYU/GEO header or not a triangular mesh.");const d=[];l*=3;let h=0,f=2;for(;h<l;){const A=s[f].trim().split(/\s+/);f++;for(let x=0;x<A.length&&(d.push(parseFloat(A[x])),h++,!(h>=l));x++);}const p=[];c*=3;let g=0;for(;g<c;){const A=s[f].trim().split(/\s+/);f++;for(let x=0;x<A.length&&(p.push(Math.abs(parseInt(A[x]))-1),g++,!(g>=c));x++);}if(n)for(let A=0;A<p.length;A+=3){const x=p[A];p[A]=p[A+1],p[A+1]=x}const v=new Float32Array(d),m=new Uint32Array(p);return{positions:v,indices:m}}static readOFF(t){const i=new TextDecoder("utf-8").decode(t).split(`
`),s=[],o=[];let a=0;i[a].includes("OFF")?a++:k.warn("File does not start with OFF");let l=i[a].trim().split(/\s+/);const c=parseInt(l[0]),u=parseInt(l[1]);a++;for(let f=0;f<c;f++)l=i[a].trim().split(/\s+/),s.push(parseFloat(l[0])),s.push(parseFloat(l[1])),s.push(parseFloat(l[2])),a++;for(let f=0;f<u;f++)l=i[a].trim().split(/\s+/),parseInt(l[0])!==3&&k.warn("Only able to read OFF files with triangular meshes"),o.push(parseInt(l[1])),o.push(parseInt(l[2])),o.push(parseInt(l[3])),a++;const d=new Float32Array(s),h=new Uint32Array(o);return{positions:d,indices:h}}static readOBJMNI(t){const i=new TextDecoder("utf-8").decode(t).trim().split(/\s*,\s*|\s+/);(i.length<1||i[0]!=="P")&&k.warn("This is not a valid MNI OBJ mesh.");let s=6;const o=parseInt(i[s++]),a=o*3,l=new Float32Array(a);for(let p=0;p<a;p++)l[p]=parseFloat(i[s++]);s+=a;const c=parseInt(i[s++]),u=parseInt(i[s++]);(c<1||u<0||u>2)&&k.warn("This is not a valid MNI OBJ mesh.");let d=1;u===1?d=c:u===1&&(d=o),s+=d*4,s+=c;const h=c*3,f=new Uint32Array(h);for(let p=0;p<h;p++)f[p]=parseInt(i[s++]);return{positions:l,indices:f}}static async readOBJ(t){const n=new Uint8Array(t,0,2);n[0]===31&&n[1]===139&&(t=await ue.decompressToBuffer(new Uint8Array(t)));const i=new TextDecoder("utf-8").decode(t);if(i[0]==="P")return this.readOBJMNI(t);const s=i.split(`
`),o=s.length,a=[],l=[];for(let f=0;f<o;f++){const p=s[f];if(p[0]==="v"&&p[1]===" "){const g=p.trim().split(/\s+/);a.push(parseFloat(g[1])),a.push(parseFloat(g[2])),a.push(parseFloat(g[3]))}if(p[0]==="f"){const g=p.trim().split(/\s+/),v=g.length-3;if(v<1)break;let m=g[1].split("/");const A=parseInt(m[0])-1;m=g[2].split("/");let x=parseInt(m[0])-1;for(let w=0;w<v;w++){m=g[3+w].split("/");const b=parseInt(m[0])-1;l.push(A),l.push(x),l.push(b),x=b}}}const c=new Float32Array(a),u=new Uint32Array(l);let d=u[0],h=u[0];for(let f=1;f<u.length;f++)u[f]<d&&(d=u[f]),u[f]>h&&(h=u[f]);if(h-d+1>c.length/3)throw new Error("Not a valid OBJ file");for(let f=0;f<u.length;f++)u[f]-=d;return{positions:c,indices:u}}static readFreeSurfer(t){const n=new Uint8Array(t);if(n[0]===35&&n[1]===33&&n[2]===97)return $e.readASC(t);const r=new DataView(t),i=r.getUint32(0,!1),s=r.getUint32(4,!1);(i!==4294966883||s!==1919246708)&&ms.debug("Unable to recognize file type: does not appear to be FreeSurfer format.");let o=0;for(;r.getUint8(o)!==10;)o++;o+=2;let a=r.getUint32(o,!1);o+=4;let l=r.getUint32(o,!1);o+=4,a*=3;const c=new Float32Array(a);for(let f=0;f<a;f++)c[f]=r.getFloat32(o,!1),o+=4;l*=3;const u=new Uint32Array(l);for(let f=0;f<l;f++)u[f]=r.getUint32(o,!1),o+=4;const d=r.getUint32(o,!1);o+=4;let h=d===20;if(!h){const f=r.getUint32(o,!1);o+=4;const p=r.getUint32(o,!1);o+=4,h=d===2&&f===0&&p===20}if(!h)k.warn("Unknown FreeSurfer Mesh extension code.");else{const p=new TextDecoder().decode(t.slice(o)).trim().split(`
`);for(let g=0;g<p.length;g++){if(!p[g].startsWith("cras"))continue;const m=p[g].split("=")[1].trim().split(" ").map(Number),A=Math.floor(c.length/3);let x=0;for(let w=0;w<A;w++)c[x]+=m[0],x++,c[x]+=m[1],x++,c[x]+=m[2],x++}}return{positions:c,indices:u}}static async readSRF(t){const n=new Uint8Array(t);if(n[0]===35&&n[1]===33&&n[2]===97)return $e.readASC(t);n[0]===31&&n[1]===139&&(t=(await ue.decompress(new Uint8Array(t))).buffer);const r=new DataView(t),i=r.getFloat32(0,!0),s=r.getUint32(8,!0),o=r.getUint32(12,!0),a=r.getFloat32(16,!0),l=r.getFloat32(20,!0),c=r.getFloat32(24,!0),u=new Float32Array(s*3);let d=28,h=1;for(let y=0;y<s;y++)u[h]=-r.getFloat32(d,!0)+a,h+=3,d+=4;h=2;for(let y=0;y<s;y++)u[h]=-r.getFloat32(d,!0)+l,h+=3,d+=4;h=0;for(let y=0;y<s;y++)u[h]=-r.getFloat32(d,!0)+c,h+=3,d+=4;d=28+4*6*s;const f=r.getFloat32(d,!0),p=r.getFloat32(d+4,!0),g=r.getFloat32(d+8,!0),v=r.getFloat32(d+16,!0),m=r.getFloat32(d+20,!0),A=r.getFloat32(d+24,!0);d+=8*4;const x=new Float32Array(s*3),w=new Uint32Array(t,d,s);h=0;for(let y=0;y<s;y++){const C=w[y];C>1056964608&&(x[h+0]=(C>>16&255)/255,x[h+1]=(C>>8&255)/255,x[h+2]=(C&255)/255),C===0&&(x[h+0]=f,x[h+1]=p,x[h+2]=g),C===1&&(x[h+0]=v,x[h+1]=m,x[h+2]=A),h+=3}d+=s*4;for(let y=0;y<s;y++){const C=r.getUint32(d,!0);d+=4+4*C}const b=new Uint32Array(o*3);for(let y=0;y<o*3;y++)b[y]=r.getInt32(d,!0),d+=4;return i!==4&&k.warn("Not valid SRF"),{positions:u,indices:b,colors:x}}static readTxtSTL(t){const i=new TextDecoder("utf-8").decode(t).split(`
`);if(!i[0].startsWith("solid"))throw new Error("Not a valid STL file");const s=[];for(let c=1;c<i.length;c++){if(!i[c].includes("vertex"))continue;const u=i[c].trim().split(/\s+/);for(let d=1;d<u.length;d++)s.push(parseFloat(u[d]))}const o=Math.floor(s.length/3);if(o*3!==s.length)throw new Error("Unable to parse ASCII STL file.");const a=new Float32Array(s),l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=c;return{positions:a,indices:l}}static readSTL(t){if(t.byteLength<134)throw new Error("File too small to be STL: bytes = "+t.byteLength);const n=new DataView(t);if(n.getUint32(0,!0)===1768714099)return $e.readTxtSTL(t);const i=n.getUint32(80,!0),s=3*i;if(t.byteLength<84+i*50)throw new Error("STL file too small to store triangles = "+i);const o=new Uint32Array(s),a=new Float32Array(s*3);let l=96,c=0;for(let u=0;u<i;u++){for(let d=0;d<9;d++)a[c]=n.getFloat32(l,!0),c+=1,l+=4;l+=14}for(let u=0;u<s;u++)o[u]=u;return{positions:a,indices:o}}static decimateLayerVertices(t,n){if(t%n===0)return t;const r=12,i=Math.round(Math.log((t-2)/(r-2))/Math.log(4)),s=Math.round(Math.log((n-2)/(r-2))/Math.log(4)),o=Math.pow(4,i)*(r-2)+2,a=Math.pow(4,s)*(r-2)+2;return o!==t||a!==n?t:n}static async readNII2(t,n=0,r=""){let i=new Float32Array;const s=t.byteLength;let o=!0;const a=new DataView(t);let l=a.getUint16(0,o);if(l===469893120&&(o=!1,l=a.getUint16(0,o)),l!==540)throw new Error("Not a valid NIfTI-2 dataset");const c=Number(a.getBigInt64(168,o)),u=a.getFloat64(176,o),d=a.getFloat64(184,o);(u!==1||d!==0)&&k.warn("ignoring scale slope and intercept");const h=a.getUint32(504,o),f=a.getUint16(12,o);if(f!==2&&f!==4&&f!==8&&f!==16)throw new Error("Unsupported NIfTI datatype "+f);let p=1;const g=[1,1,1,1,1,1,1,1];for(let v=1;v<8;v++)g[v]=Math.max(Number(a.getBigInt64(16+v*8,o)),1),p*=g[v];if(h>=3e3&&h<=3099&&c>580){let v=function(){for(;E<s&&S[E]===10;)E++;const U=E;for(;E<s&&S[E]!==10;)E++;return E++,E-U<1?"":new TextDecoder().decode(t.slice(U,E-1)).trim()},m=function(){let U=v();if(!U.startsWith("<")||U.endsWith(">"))return U;for(;E<s&&!U.endsWith(">");)U+=v();return U},A=function(U,G=!1){const L=T.indexOf(U);if(L<0)return 1;const Y=T.indexOf('"',L)+1,j=T.indexOf('"',Y),$=T.slice(Y,j);return G?$:parseInt($)},x=0,w=0,b=0,y="",C=new Uint32Array;const S=new Uint8Array(t);let E=552,T;const F=g[5],M=new Float32Array(n*F);for(;E<s&&(T=m(),!T.includes("</CIFTI>"));)if(T.includes("<BrainModel")){const U=A("SurfaceNumberOfVertices="),G=A("BrainStructure=",!0).toUpperCase();if(U%n!==0)continue;let L=!1;if(r.includes("CORTEX")&&G.includes("CORTEX")&&(L=!0),!L||(L=!1,r.includes("LEFT")&&G.includes("LEFT")&&(L=!0),r.includes("RIGHT")&&G.includes("RIGHT")&&(L=!0),!L))continue;if(b=U,x=A("IndexOffset="),w=A("IndexCount="),y=G,T.includes("<VertexIndices>")||(T=m()),!T.startsWith("<VertexIndices>")||!T.endsWith("</VertexIndices>"))return k.warn("Unable to find CIfTI <VertexIndices>"),M;T=T.slice(15,-16);const Y=T.trim().split(/\s+/);Y.length<w&&k.error("Error parsing VertexIndices"),C=new Uint32Array(w);for(let j=0;j<w;j++)C[j]=parseInt(Y[j])}if(b===0||C.length===0)return k.warn("Unable to find CIfTI structure that matches the mesh."),M;if(f!==16)return k.warn("Only able to read float32 CIfTI (only known datatype)."),M;const B=new Float32Array(w*F),P=c+F*x*4;for(let U=0;U<w*F;U++)B[U]=a.getFloat32(P+U*4,o);let z=0;for(let U=0;U<w;U++)for(let G=0;G<F;G++)M[C[U]+G*n]=B[z],z++;return k.debug("CIfTI diagnostics",b,y,x,w,x,r),M}if(p=this.decimateLayerVertices(p,n),p%n!==0)throw new Error("Vertices in layer ("+p+") is not a multiple of number of vertices ("+n+")");if(o)f===16?i=new Float32Array(t,c,p):f===8?i=new Int32Array(t,c,p):f===4&&(i=new Int16Array(t,c,p));else if(f===16){i=new Float32Array(p);for(let v=0;v<p;v++)i[v]=a.getFloat32(c+v*4,o)}else if(f===8){i=new Int32Array(p);for(let v=0;v<p;v++)i[v]=a.getInt32(c+v*4,o)}else if(f===4){i=new Int16Array(p);for(let v=0;v<p;v++)i[v]=a.getInt16(c+v*2,o)}return f===2&&(i=new Uint8Array(t,c,p)),i}static async readNII(t,n,r=""){const i=n.length/3;let s=new Float32Array,o=!0,a=new DataView(t),l=a.getUint16(0,o);if(l===540||l===469893120)return $e.readNII2(t,i,r);if(l===23553&&(o=!1,l=a.getUint16(0,o)),l!==348){const y=await ue.decompress(new Uint8Array(t));if(a=new DataView(y.buffer),t=y.buffer,l=a.getUint16(0,o),l===540||l===469893120)return $e.readNII2(t,i,r);l===23553&&(o=!1,l=a.getUint16(0,o))}l!==348&&k.error("Not a valid NIfTI image.");const c=a.getFloat32(108,o),u=a.getFloat32(112,o),d=a.getFloat32(116,o),h=a.getUint16(252,o),f=a.getUint16(254,o),p=a.getUint16(70,o);if(p!==2&&p!==4&&p!==8&&p!==16)throw new Error("Unsupported NIfTI datatype "+p);const g=ge();for(let y=0;y<12;y++)g[y]=a.getFloat32(280+y*4,o);let v=1;const m=new Array(8);for(let y=0;y<8;y++)m[y]=a.getUint16(40+y*2,o),!(y<1)&&(v*=m[y]||1);let A=!1,x=this.decimateLayerVertices(v,i);if(x%i!==0)if(m[0]>=3&&m[1]>1&&m[2]>1&&m[3]>1)A=!0,x=m[1]*m[2]*m[3];else throw new Error("Voxels in layer ("+v+") is not a multiple of number of vertices ("+i+")");if(v=x,o)p===16?s=new Float32Array(t,c,v):p===8?s=new Int32Array(t,c,v):p===4&&(s=new Int16Array(t,c,v));else if(p===16){s=new Float32Array(v);for(let y=0;y<v;y++)s[y]=a.getFloat32(c+y*4,o)}else if(p===8){s=new Int32Array(v);for(let y=0;y<v;y++)s[y]=a.getInt32(c+y*4,o)}else if(p===4){s=new Int16Array(v);for(let y=0;y<v;y++)s[y]=a.getInt16(c+y*2,o)}if(p===2&&(s=new Uint8Array(t,c,v)),Number.isFinite(u)&&Number.isFinite(d)&&u!==0&&(u!==1||d!==0)){const y=new Float32Array(v);for(let C=0;C<v;C++)y[C]=s[C]*u+d;s=y}let w=s[0],b=w;for(let y=0;y<v;y++)isNaN(s[y])&&(s[y]=0),w=Math.min(w,s[y]),b=Math.max(b,s[y]);if(k.debug(`Layer Range ${w}..${b} slope ${u} inter ${d}`),A){let y=function(G,L){const Y=[0,0,0];return Y[0]=L[0]*G[0]+L[1]*G[1]+L[2]*G[2]+L[3],Y[1]=L[4]*G[0]+L[5]*G[1]+L[6]*G[2]+L[7],Y[2]=L[8]*G[0]+L[9]*G[1]+L[10]*G[2]+L[11],Y};const C=new Float32Array(i);k.warn("Sampling voxel intensities at mesh vertices (assumes precise alignment)."),(h>f||f<=0)&&k.warn(`Requires valid sform (sform_code = ${f})`);const S=ge();zt(S,g);const E=m[1],T=m[2],F=m[3],M=E*T;let B=0,P=0,z=0;for(;P<i;){const G=[n[B],n[B+1],n[B+2]],L=y(G,S);B+=3,P+=1;const Y=Math.floor(L[0]),j=Math.floor(L[1]),$=Math.floor(L[2]),X=Math.ceil(L[0]),H=Math.ceil(L[1]),K=Math.ceil(L[2]);if(Y<0||X>=E||j<0||H>=T||$<0||K>=F)continue;const te=Y+j*E+$*M,ae=new Float32Array(8);ae[0]=s[te],ae[1]=s[te+1],ae[2]=s[te+E],ae[3]=s[te+E+1],ae[4]=s[te+M],ae[5]=s[te+M+1],ae[6]=s[te+M+E],ae[7]=s[te+M+E+1];let le=ae[0],De=le;for(let fe=1;fe<8;fe++)le=Math.max(le,ae[fe]),De=Math.min(De,ae[fe]);Math.abs(De)>le&&(le=De),C[P-1]=le,z++}const U=z/i;U<.1&&k.warn(`${z} of ${i} vertices in range (${(U*100).toFixed(1)}%)`),s=C}return s}static async readMGH(t,n=0,r=!1){let i=new DataView(t),s=t;if(i.getUint8(0)===31&&i.getUint8(1)===139){const C=await ue.decompress(new Uint8Array(t));s=new ArrayBuffer(C.byteLength),new Uint8Array(s).set(new Uint8Array(C)),i=new DataView(C.buffer)}const o=i.getInt32(0,!1),a=Math.max(1,i.getInt32(4,!1)),l=Math.max(1,i.getInt32(8,!1)),c=Math.max(1,i.getInt32(12,!1)),u=Math.max(1,i.getInt32(16,!1)),d=i.getInt32(20,!1);let h=284;const f=!1;(o!==1||d<0||d>4)&&k.warn("Not a valid MGH file");let p=a*l*c*u,g=[];if(p=this.decimateLayerVertices(p,n),p%n!==0)return k.warn("Vertices in layer ("+p+") is not a multiple of number of vertices ("+n+")"),g;if(d===3){g=new Float32Array(p);for(let C=0;C<p;C++)g[C]=i.getFloat32(h+C*4,f)}else if(d===1){g=new Int32Array(p);for(let C=0;C<p;C++)g[C]=i.getInt32(h+C*4,f)}else if(d===4){g=new Int16Array(p);for(let C=0;C<p;C++)g[C]=i.getInt16(h+C*2,f)}else d===0&&(g=new Uint8Array(t,h,p));if(!r)return g;let v=4;d===4&&(v=2),d===0&&(v=1),h+=v*p,h+=4*4;const m=1,A=2,x=20,w=30,b=s.byteLength;let y;for(;h<b-8;){const C=i.getInt32(h+=4,f);let S=0;switch(C){case w:S=i.getInt32(h+=4,f)-1;break;case x:case A:S=0;break;case m:S=0;{let E=i.getInt32(h+=4,f);if(E>0)return k.warn("unsupported CTABreadFromBinaryV1"),g;if(E=-E,E!==2)return k.warn("CTABreadFromBinary: unknown version"),g;const T=i.getInt32(h+=4,f);if(T<0)return k.warn("CTABreadFromBinaryV2: nentries was ",T),g;const F=i.getInt32(h+=4,f);h+=F;const M=i.getInt32(h+=4,f);if(M<0)return g;const B={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let P=0;P<M;P++){const z=i.getInt32(h+=4,f),U=i.getInt32(h+=4,f);let G=h+4,L="";for(let H=0;H<U;H++){const K=i.getUint8(G++);if(K===0)break;L+=String.fromCharCode(K)}h+=U;const Y=i.getInt32(h+=4,f),j=i.getInt32(h+=4,f),$=i.getInt32(h+=4,f),X=255-i.getInt32(h+=4,f);B.I.push(z),B.R.push(Y),B.G.push(j),B.B.push($),B.A.push(X),B.labels.push(L)}y=Ee.makeLabelLut(B)}break;default:S=i.getInt32(h+=8,f)}h+=S}return{scalars:g,colormapLabel:y}}static readX3D(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be X3D: bytes = "+n);const r=new Uint8Array(t);let i=0;function s(){for(;i<n&&r[i]!==60;)i++;const x=i;for(;i<n&&r[i]!==62;)i++;const w=i;return new TextDecoder().decode(t.slice(x,w+1)).trim()}let o=s();function a(x){const w=o.indexOf(x+"=");if(w<0)return"";const b=o[w+x.length+1],y=o.indexOf(b,w)+1,C=o.indexOf(b,y);return o.slice(y,C)}function l(x){const w=o.indexOf(x+"=");if(w<0)return 1;const b=o[w+x.length+1],y=o.indexOf(b,w)+1,C=o.indexOf(b,y);let S=o.slice(y,C).trim();S=S.replace(/,\s*$/,"");const E=S.trim().split(/\s*,\s*|\s+/);if(E.length<2)return parseFloat(S);let T=new Array(E.length),F=0;for(let M=0;M<E.length;M++){const B=parseFloat(E[M]);isFinite(B)&&(T[F]=B,F++)}return T=T.slice(0,F),T}o.includes("xml version")||k.warn("Not a X3D image");let c=[],u=[],d=[],h=[],f=[0,0,0,0],p=[0,0,0,0],g=[255,255,255,255],v=[255,255,255,255];const m={};function A(){if(!o.endsWith("/>"))if(o.startsWith("<Appearance>"))for(;i<n&&!o.endsWith("</Appearance>");)o+=s();else for(;i<n&&!o.endsWith("/>");)o+=s();const x=a("USE");if(x.length>1){x in m?g=m[x]:k.warn("Unable to find DEF for "+x);return}const w=l("diffuseColor");if(w.length<3)return;g[0]=Math.round(w[0]*255),g[1]=Math.round(w[1]*255),g[2]=Math.round(w[2]*255);const b=a("DEF");b.length<1||(m[b]=g)}for(;i<n;)if(o=s(),g=v.slice(),o.startsWith("<Transform")&&(f=l("translation"),p=l("rotation")),o.startsWith("<Appearance")&&(A(),v=g.slice()),o.startsWith("<Shape")){let x=1,w=1,b=[],y=[];for(;i<n&&(o=s(),o.startsWith("<Appearance")&&A(),!o.startsWith("</Shape"));){if(o.startsWith("<Sphere")&&(x=l("radius"),w=-1),o.startsWith("<Cylinder")&&(x=l("radius"),w=l("height")),o.startsWith("<IndexedFaceSet")&&(w=-2,b=l("coordIndex")),o.startsWith("<IndexedTriangleSet")&&(w=-7,b=l("index")),o.startsWith("<IndexedTriangleStripSet")&&(w=-3,b=l("index")),o.startsWith("<Coordinate")){y=l("point");const C=y.length%3;C!==0&&(y=y.slice(0,-C))}o.startsWith("<Color")&&(h=l("color")),o.startsWith("<Box")&&(w=-4,k.warn("Unsupported x3d shape: Box")),o.startsWith("<Cone")&&(w=-5,k.warn("Unsupported x3d shape: Cone")),o.startsWith("<ElevationGrid")&&(w=-6,k.warn("Unsupported x3d shape: ElevationGrid"))}if(!(w<-3&&w!==-7))if(w<-1){if(b.length<1||y.length<3||y.length===void 0){k.warn("Indexed mesh must specify indices and points");break}const C=Math.floor(c.length/3);let S=2;if(w===-7)u=[...u,...b];else if(w===-2){let F=0;for(;S<b.length;)b[S]>=0?(u.push(b[F]+C),u.push(b[S-1]+C),u.push(b[S-0]+C),S+=1):(S+=3,F=S-2)}else for(;S<b.length;)b[S]>=0?(u.push(b[S-2]+C),u.push(b[S-1]+C),u.push(b[S-0]+C),S+=1):S+=3;c=[...c,...y];const E=Math.floor(y.length/3),T=Array(E).fill(g).flat();if(h.length===E*3){let F=0,M=0;for(let B=0;B<E;B++){for(let P=0;P<3;P++)T[M]=Math.round(h[F]*255),F++,M++;M++}}d=[...d,...T]}else if(w<0)qr.makeColoredSphere(c,u,d,x,f,g);else{const C=ge();nS(C,p[3],[p[0],p[1],p[2]]);const S=Le(0,-w*.5,0,1),E=Le(0,+w*.5,0,1);At(S,S,C),At(E,E,C),Gm(S,S,f),Gm(E,E,f);const T=q(S[0],S[1],S[2]),F=q(E[0],E[1],E[2]);qr.makeColoredCylinder(c,u,d,T,F,x,g)}}return{positions:Float32Array.from(c),indices:Uint32Array.from(u),rgba255:Uint8Array.from(d)}}static async readGII(t,n=0){let r=t.byteLength;if(r<20)throw new Error("File too small to be GII: bytes = "+r);let i=new TextDecoder("ascii").decode(t);if(i[0].charCodeAt(0)===31){const M=await ue.decompress(new Uint8Array(t));t=M.buffer,i=new TextDecoder("ascii").decode(M.buffer)}let s=0;function o(){let M=!0,B=s;for(;M;){for(;s<r&&i[s]!=="<";)s++;for(B=s;s<r&&i[s]!==">";)s++;if(M=i[s-1]==="/",B+1<r&&i[B+1]==="/"&&(s+=1,M=!0),s>=r)break}const P=new TextDecoder().decode(t.slice(B+1,s)).trim(),z=P.split(" ")[0].trim(),U=s;let G=s,L=s;if(i[B+1]!=="?"&&i[B+1]!=="!"){const Y="</"+z+">";G=i.indexOf(Y,U),L=G+Y.length-1}return{name:P,startPos:B,contentStartPos:U,contentEndPos:G,endPos:L}}let a=o();if(!a.name.startsWith("?xml"))throw new Error("readGII: Invalid XML file");for(;!a.name.startsWith("GIFTI")&&a.endPos<r;)a=o();if(!a.name.startsWith("GIFTI")||a.contentStartPos===a.contentEndPos)throw new Error("readGII: XML file does not include GIFTI tag");r=a.contentEndPos;let l=new Float32Array,c=new Uint32Array,u=new Float32Array,d="",h=!1,f=!1,p=!1,g=!1,v=[1,1,1];const m=[0,0,0];let A=0,x=!1,w=!1,b=0,y=!1;a.endPos=a.contentStartPos;let C="";function S(M,B=!1){const P=C.indexOf(M);if(P<0)return 1;const z=C.indexOf('"',P)+1,U=C.indexOf('"',z),G=C.slice(z,U);return B?parseFloat(G):parseInt(G)}function E(M){const B=C.indexOf(M);if(B<0)return"";const P=B+M.length,z=C.indexOf("]",P);return C.slice(P,z)}const T={R:[],G:[],B:[],A:[],I:[],labels:[]};for(;a.endPos<r&&a.name.length>1;){if(a=o(),a.name.startsWith("Label Key")&&(C=a.name,T.I.push(S("Key=")),T.R.push(Math.round(255*S("Red=",!0))),T.G.push(Math.round(255*S("Green=",!0))),T.B.push(Math.round(255*S("Blue=",!0))),T.A.push(Math.round(255*S("Alpha",!0))),C=new TextDecoder().decode(t.slice(a.contentStartPos+1,a.contentEndPos)).trim(),T.labels.push(E("<![CDATA["))),a.name.trim()==="Data"){if(p)continue;C=new TextDecoder().decode(t.slice(a.contentStartPos+1,a.contentEndPos)).trim();let M;if(w){const B=v[0]*v[1]*v[2],P=C.split(/\s+/);if(B!==P.length)throw new Error("Unable to parse ASCII GIfTI");if(A===2&&(A=8),A===32&&(A=16),A===8){M=new Int32Array(B);for(let z=0;z<B;z++)M[z]=parseInt(P[z])}if(A===16){M=new Float32Array(B);for(let z=0;z<B;z++)M[z]=parseFloat(P[z])}}else if(typeof Buffer>"u"){let B=function(P){const z=atob(P),U=z.length,G=new Uint8Array(U);for(let L=0;L<U;L++)G[L]=z.charCodeAt(L);return G};if(x){const P=B(C.slice());M=await ue.decompress(new Uint8Array(P))}else M=B(C.slice())}else if(x){const B=Buffer.from(C.slice(),"base64");M=await ue.decompress(new Uint8Array(B))}else M=Buffer.from(C.slice(),"base64");if(f){if(A!==16&&k.warn("expect positions as FLOAT32"),l=new Float32Array(M.buffer),g){const B=l.slice(),P=B.length/3;let z=0;for(let U=0;U<P;U++)for(let G=0;G<3;G++)l[z]=B[G*P+U],z++}}else if(h){if(A!==8&&k.warn("expect indices as INT32"),c=new Uint32Array(M.buffer),g){const B=c.slice(),P=B.length/3;let z=0;for(let U=0;U<P;U++)for(let G=0;G<3;G++)c[z]=B[G*P+U],z++}}else{let B=function(z,U){const G=z.length,L=new Float32Array(G+U.length);return L.set(z),L.set(U,G),L};b=v[0]*v[1]*v[2],n!==0&&b%n!==0&&k.warn("Number of vertices in scalar overlay ("+b+") does not match mesh ("+n+")");let P;if(A===2){const z=new Uint8Array(M.buffer);P=Float32Array.from(z)}else if(A===8){const z=new Int32Array(M.buffer);P=Float32Array.from(z)}else if(A===16)P=new Float32Array(M.buffer);else if(A===32){const z=new Float64Array(M.buffer);P=Float32Array.from(z)}else throw new Error(`Invalid dataType: ${A}`);u=B(u,P)}continue}if(a.name.trim()==="DataSpace"&&(C=new TextDecoder().decode(t.slice(a.contentStartPos+1,a.contentEndPos)).trim(),C.includes("NIFTI_XFORM_SCANNER_ANAT")&&(y=!0)),a.name.trim()==="MD"&&(C=new TextDecoder().decode(t.slice(a.contentStartPos+1,a.contentEndPos)).trim(),C.includes("AnatomicalStructurePrimary")&&C.includes("CDATA[")&&(d=E("<Value><![CDATA[").toUpperCase()),C.includes("VolGeom")&&C.includes("CDATA["))){let M=-1;if(C.includes("VolGeomC_R")&&(M=0),C.includes("VolGeomC_A")&&(M=1),C.includes("VolGeomC_S")&&(M=2),M<0)continue;m[M]=parseFloat(E("<Value><![CDATA["))}a.name.startsWith("DataArray")&&(C=a.name,v=[1,1,1],x=C.includes('Encoding="GZipBase64Binary"'),w=C.includes('Encoding="ASCII"'),h=C.includes('Intent="NIFTI_INTENT_TRIANGLE"'),f=C.includes('Intent="NIFTI_INTENT_POINTSET"'),p=C.includes('Intent="NIFTI_INTENT_VECTOR"'),g=C.includes('ArrayIndexingOrder="ColumnMajorOrder"'),C.includes('DataType="NIFTI_TYPE_UINT8"')&&(A=2),C.includes('DataType="NIFTI_TYPE_INT32"')&&(A=8),C.includes('DataType="NIFTI_TYPE_FLOAT32"')&&(A=16),C.includes('DataType="NIFTI_TYPE_FLOAT64"')&&(A=32),v[0]=S("Dim0="),v[1]=S("Dim1="),v[2]=S("Dim2="))}let F;if(T.I.length>1&&(T.A.some(B=>B>0)||T.A.fill(255),F=Ee.makeLabelLut(T)),n>0)return{scalars:u,colormapLabel:F,anatomicalStructurePrimary:d};if(l.length>2&&!y&&(m[0]!==0||m[1]!==0||m[2]!==0)){b=Math.floor(l.length/3);let M=0;for(let B=0;B<b;B++)l[M]+=m[0],M++,l[M]+=m[1],M++,l[M]+=m[2],M++}return{positions:l,indices:c,scalars:u,colormapLabel:F,anatomicalStructurePrimary:d}}},mf=class{constructor(e,t,n,r,i){R(this,"text"),R(this,"style"),R(this,"points"),R(this,"anchor"),R(this,"onClick"),this.text=e,this.style=t,this.points=n,this.anchor=r||0,this.onClick=i}},Rd=()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256},Mv=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.NII=1]="NII",e[e.DCM=2]="DCM",e[e.DCM_MANIFEST=3]="DCM_MANIFEST",e[e.MIH=4]="MIH",e[e.MIF=5]="MIF",e[e.NHDR=6]="NHDR",e[e.NRRD=7]="NRRD",e[e.MHD=8]="MHD",e[e.MHA=9]="MHA",e[e.MGH=10]="MGH",e[e.MGZ=11]="MGZ",e[e.V=12]="V",e[e.V16=13]="V16",e[e.VMR=14]="VMR",e[e.HEAD=15]="HEAD",e[e.DCM_FOLDER=16]="DCM_FOLDER",e[e.SRC=17]="SRC",e[e.FIB=18]="FIB",e[e.BMP=19]="BMP",e[e.ZARR=20]="ZARR",e[e.NPY=21]="NPY",e[e.NPZ=22]="NPZ",e[e.HDR=23]="HDR",e))(Mv||{}),de=Object.freeze({...Mv,parse:e=>{let t=0;switch(e.toUpperCase()){case"":case"DCM":t=2;break;case"TXT":t=3;break;case"FZ":case"GQI":case"QSDR":case"FIB":t=18;break;case"HDR":case"NII":t=1;break;case"MIH":t=4;break;case"MIF":t=5;break;case"NHDR":t=6;break;case"NRRD":t=7;break;case"MHD":t=8;break;case"MHA":t=9;break;case"MGH":t=10;break;case"MGZ":t=11;break;case"NPY":t=21;break;case"NPZ":t=22;break;case"SRC":t=17;break;case"V":t=12;break;case"V16":t=13;break;case"VMR":t=14;break;case"HEAD":t=15;break;case"PNG":case"BMP":case"GIF":case"JPG":case"JPEG":t=19;break;case"ZARR":t=20;break}return t}}),Oa=(e,t="",n="",r="gray",i=1,s=NaN,o=NaN,a=!0,l=.02,c=!1,u=!1,d="",h=0,f=de.UNKNOWN,p=NaN,g=NaN,v=!0,m=!1,A=null)=>({url:e,urlImageData:t,name:n,colormap:r,colorMap:r,opacity:i,cal_min:s,cal_max:o,trustCalMinMax:a,percentileFrac:l,ignoreZeroVoxels:c,useQFormNotSForm:u,colormapNegative:d,imageType:f,cal_minNeg:p,cal_maxNeg:g,colorbarVisible:v,frame4D:h,alphaThreshold:m,colormapLabel:A});function o1(e,t=80){e=e.replace(/[`$]/g,"");const n=[],r=Math.min(t,e.length);for(let i=0;i<r;i++){const s=e.charCodeAt(i);n.push(s&255)}return n}function Fl(e,t=!1,n=!1){let s=!0;n&&(s=e.littleEndian);const o=new Uint8Array(348),a=new DataView(o.buffer);a.setInt32(0,348,s),a.setUint8(38,114),a.setUint8(39,e.dim_info);for(let c=0;c<8;c++)a.setUint16(40+2*c,e.dims[c],s);a.setFloat32(56,e.intent_p1,s),a.setFloat32(60,e.intent_p2,s),a.setFloat32(64,e.intent_p3,s),a.setInt16(68,e.intent_code,s),t?(a.setInt16(70,2,s),a.setInt16(72,8,s)):(a.setInt16(70,e.datatypeCode,s),a.setInt16(72,e.numBitsPerVoxel,s)),a.setInt16(74,e.slice_start,s);for(let c=0;c<8;c++)a.setFloat32(76+4*c,e.pixDims[c],s);t?(a.setFloat32(108,352,s),a.setFloat32(112,1,s),a.setFloat32(116,0,s)):(a.setFloat32(108,e.vox_offset,s),a.setFloat32(112,e.scl_slope,s),a.setFloat32(116,e.scl_inter,s)),a.setInt16(120,e.slice_end,s),a.setUint8(122,e.slice_code),e.xyzt_units===0?a.setUint8(123,10):a.setUint8(123,e.xyzt_units),t?(a.setFloat32(124,0,s),a.setFloat32(128,0,s)):(a.setFloat32(124,e.cal_max,s),a.setFloat32(128,e.cal_min,s)),a.setFloat32(132,e.slice_duration,s),a.setFloat32(136,e.toffset,s),o.set(o1(e.description),148),o.set(o1(e.aux_file),228),a.setInt16(252,e.qform_code,s),e.sform_code<1||e.sform_code<1?a.setInt16(254,1,s):a.setInt16(254,e.sform_code,s),a.setFloat32(256,e.quatern_b,s),a.setFloat32(260,e.quatern_c,s),a.setFloat32(264,e.quatern_d,s),a.setFloat32(268,e.qoffset_x,s),a.setFloat32(272,e.qoffset_y,s),a.setFloat32(276,e.qoffset_z,s);const l=e.affine.flat();for(let c=0;c<12;c++)a.setFloat32(280+4*c,l[c],s);return a.setInt32(344,3222382,!0),o}function u8(e,t=!0){const n=Math.round(e.length/3),r=q(0,0,0),i=Te(),s=Te();let o=0,a=1;t&&(a=2);for(let d=0;d<a;d++){o=0;for(let f=0;f<n;f++){const p=q(e[f*3],e[f*3+1],e[f*3+2]);f===0&&(Om(i,p),Om(s,p)),Zh(i,i,p),Jh(s,s,p),Pe(p,p,r);const g=so(p);o=Math.max(o,g)}if(d+1>=a)break;let h=!0;for(let f=0;f<3;++f)i[f]>r[f]&&(h=!1),s[f]<r[f]&&(h=!1);if(h)break;cS(r,i,s,.5),k.debug("origin moved inside volume: ",r)}const l=[i[0],i[1],i[2]],c=[s[0],s[1],s[2]];return{min:l,max:c,furthestVertexFromOrigin:o,origin:r}}function Dv(e){const t=[!1,!1,!1,!1],n=[!1,!1,!1,!1];for(let r=0;r<4;r++)for(let i=0;i<4;i++)if(isNaN(e[r][i]))return!1;for(let r=0;r<3;r++)for(let i=0;i<3;i++)e[r][i]!==0&&(t[r]=!0,n[i]=!0);for(let r=0;r<3;r++)if(!t[r]||!n[r])return!1;return!0}async function pf(e){const t=e.getReader(),{done:n,value:r}=await t.read();if(n)return t.releaseLock(),new ReadableStream({start(o){o.close()}});if(!r||r.length<2)return t.releaseLock(),new ReadableStream({start(o){r&&o.enqueue(r),o.close()}});const i=r[0]===31&&r[1]===139,s=new ReadableStream({async start(o){try{for(o.enqueue(r);;){const{done:a,value:l}=await t.read();if(a){o.close(),t.releaseLock();break}o.enqueue(l)}}catch(a){o.error(a),t.releaseLock()}}});return i?s.pipeThrough(new DecompressionStream("gzip")):s}function Tv(e=[256,256,256],t=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],r=2){const i=new he;i.littleEndian=!0,i.dims=[3,1,1,1,0,0,0,0],i.dims[0]=Math.max(3,e.length);for(let o=0;o<e.length;o++)i.dims[o+1]=e[o];i.pixDims=[1,1,1,1,1,0,0,0];for(let o=0;o<e.length;o++)i.pixDims[o+1]=t[o];if(n.length===16){let o=0;for(let a=0;a<4;a++)for(let l=0;l<4;l++)i.affine[a][l]=n[o],o++}let s=8;return r===256||r===2?s=8:r===512||r===4?s=16:r===16||r===768||r===8||r===2304?s=32:r===64?s=64:k.warn("Unsupported NIfTI datatypeCode for header creation: "+r),i.datatypeCode=r,i.numBitsPerVoxel=s,i.scl_inter=0,i.scl_slope=1,i.sform_code=2,i.magic="n+1",i.vox_offset=352,i}function d8(e=[256,256,256],t=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],r=2,i=new Uint8Array){const s=Tv(e,t,n,r),o=Fl(s,!1);s.vox_offset=Math.max(352,o.length);const a=Fl(s,!1);if(i.length<1)return a;const l=Math.max(0,s.vox_offset-a.length),c=new Uint8Array(l),u=new Uint8Array(i.buffer,i.byteOffset,i.byteLength),d=s.vox_offset+u.length,h=new Uint8Array(d);return h.set(a,0),h.set(c,a.length),h.set(u,s.vox_offset),h}function Iv(e,t=null){if(!e.hdr)throw new Error("NVImage header is not defined for toUint8Array");if(!e.img&&t===null)throw new Error("NVImage image data is not defined for toUint8Array");const n=t!==null,r=JSON.parse(JSON.stringify(e.hdr)),i=e.extensions&&e.extensions.length>0,s=new Uint8Array(4);s[0]=i?1:0;let o=new Uint8Array(0);if(i){const v=[];let m=0;for(const x of e.extensions){const w=new Uint8Array(x.edata),b=new Uint8Array(8+w.length),y=new DataView(b.buffer);y.setInt32(0,x.esize,!0),y.setInt32(4,x.ecode,!0),b.set(w,8),v.push(b),m+=b.length}o=new Uint8Array(m);let A=0;for(const x of v)o.set(x,A),A+=x.length}const a=348;r.vox_offset=Math.max(352,a+s.length+o.length),n&&(r.datatypeCode=2,r.numBitsPerVoxel=8,r.scl_slope=1,r.scl_inter=0);const l=Fl(r,n);let c;if(n){const v=t,m=e.permRAS;if(m&&(m[0]!==1||m[1]!==2||m[2]!==3)){k.debug("Reorienting drawing bytes back to native space for saving...");const A=e.hdr.dims,x=A[1]*A[2]*A[3],w=e.dimsRAS?e.dimsRAS[1]*e.dimsRAS[2]*e.dimsRAS[3]:x;if(v.length!==w)console.warn(`Drawing length (${v.length}) does not match expected RAS voxel count (${w}). Cannot reorient drawing reliably.`),c=v;else if(!e.img2RASstep||!e.img2RASstart||!e.dimsRAS)console.warn("Missing RAS transformation info (img2RASstep, img2RASstart, dimsRAS). Cannot reorient drawing reliably."),c=v;else{const b=e.img2RASstep,y=e.img2RASstart,C=e.dimsRAS,S=new Uint8Array(x);S.fill(0);const E=v;let T=0;for(let F=0;F<C[3];F++){const M=y[2]+F*b[2];for(let B=0;B<C[2];B++){const P=y[1]+B*b[1];for(let z=0;z<C[1];z++){const G=y[0]+z*b[0]+P+M;G>=0&&G<x?S[G]=E[T]:T<E.length&&console.warn(`Calculated native index ${G} is out of bounds [0..${x-1}] during drawing reorientation.`),T++}}}c=S}}else c=v}else{if(!e.img)throw new Error("NVImage image data is null when trying to save non-drawing.");c=new Uint8Array(e.img.buffer,e.img.byteOffset,e.img.byteLength)}const u=l.length+s.length+o.length,d=Math.max(0,r.vox_offset-u),h=new Uint8Array(d),f=r.vox_offset+c.length,p=new Uint8Array(f);let g=0;return p.set(l,g),g+=l.length,p.set(s,g),g+=s.length,p.set(o,g),g+=o.length,p.set(h,g),g+=h.length,p.set(c,r.vox_offset),p}async function Fv(e,t,n=null){const r=Iv(e,n);if(t.toLowerCase().endsWith(".gz"))try{const s=await ue.compress(r,"gzip");return new Uint8Array(s)}catch(s){return k.error("Compression failed:",s),k.warn("Returning uncompressed data due to compression error."),r}else return r}async function h8(e,t="",n=null){const r=await Fv(e,t,n);if(!t)return k.debug("saveToDisk: empty file name, returning data as Uint8Array rather than triggering download"),r;try{const i=new Blob([r.buffer],{type:"application/octet-stream"}),s=URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),100)}catch(i){k.error("Failed to trigger download:",i)}return r}function Rv(e,t,n,r,i=0,s=!1){if(!e.hdr)throw new Error("getValue: NVImage header is not defined.");if(!s&&!e.img)throw new Error("getValue: NVImage image data is not defined.");if(s&&!e.imaginary)return k.warn("getValue: Attempted to read imaginary data, but none exists."),[0];const o=e.hdr.dims[1],a=e.hdr.dims[2],l=e.hdr.dims[3],c=e.permRAS.slice();if(c[0]!==1||c[1]!==2||c[2]!==3){const A=Le(t,n,r,1);At(A,A,e.toRASvox),t=A[0],n=A[1],r=A[2]}t=Math.max(0,Math.min(Math.round(t),o-1)),n=Math.max(0,Math.min(Math.round(n),a-1)),r=Math.max(0,Math.min(Math.round(r),l-1)),i=Math.max(0,i);let u=t+n*o+r*o*a;if(e.hdr.datatypeCode===2304)return e.img?(u*=4,u+3>=e.img.length?(k.warn(`getValue: Calculated index ${u} out of bounds for RGBA data.`),[0]):[e.img[u],e.img[u+1],e.img[u+2],e.img[u+3]]):[0];if(e.hdr.datatypeCode===128)return e.img?(u*=3,u+2>=e.img.length?(k.warn(`getValue: Calculated index ${u} out of bounds for RGB data.`),[0]):[e.img[u],e.img[u+1],e.img[u+2]]):[0];const d=o*a*l,h=i*d,f=u+h,p=s?e.imaginary:e.img;if(f<0||f>=p.length)return[0];const g=p[f],v=isNaN(e.hdr.scl_slope)||e.hdr.scl_slope===0?1:e.hdr.scl_slope,m=isNaN(e.hdr.scl_inter)?0:e.hdr.scl_inter;return[v*g+m]}function f8(e,t,n,r,i=0,s=!1){const o=Rv(e,t,n,r,i,s);return o.length<3?o[0]:o[0]*.2126+o[1]*.7152+o[2]*.0722}function m8(e,t=[-1,0,0],n=[0,0,0],r="same"){const i=[new Uint8Array,[0,0,0]];if(!e.hdr||!e.img||!e.dimsRAS||!e.img2RASstep||!e.img2RASstart)return k.error("getVolumeData: Missing required NVImage properties (hdr, img, dimsRAS, img2RASstep/start)."),i;if(t=t.slice(0,3),n=n.slice(0,3),Math.min(...t)<0||Math.min(...n)<0)return k.warn("getVolumeData: Invalid start or end coordinates provided."),i;const s=e.dimsRAS.slice(1,4);for(let v=0;v<3;v++)if(t[v]=Math.max(0,Math.min(Math.round(t[v]),s[v]-1)),n[v]=Math.max(0,Math.min(Math.round(n[v]),s[v]-1)),n[v]<t[v]){const m=n[v];n[v]=t[v],t[v]=m}const o=[n[0]-t[0]+1,n[1]-t[1]+1,n[2]-t[2]+1],a=o[0]*o[1]*o[2];if(a<=0)return k.warn("getVolumeData: Calculated slab size is zero or negative."),i;let l=e.img.constructor;r==="uint8"?l=Uint8Array:r==="int16"?l=Int16Array:r==="uint16"?l=Uint16Array:r==="float32"||r==="scaled"||r==="normalized"||r==="windowed"?l=Float32Array:r==="float64"?l=Float64Array:r!=="same"&&k.warn(`getVolumeData: Unsupported dataType '${r}'. Using 'same'.`);let c;try{c=new l(a)}catch(v){return k.error(`getVolumeData: Failed to create output array for dataType '${r}'.`,v),i}const u=e.img2RASstep,d=e.img2RASstart,h=e.img;let f=0;for(let v=t[2];v<=n[2];v++){const m=d[2]+v*u[2];for(let A=t[1];A<=n[1];A++){const x=d[1]+A*u[1];for(let w=t[0];w<=n[0];w++){const y=d[0]+w*u[0]+x+m;let C=0;y>=0&&y<h.length&&(C=h[y]),c[f++]=C}}}const p=isNaN(e.hdr.scl_slope)||e.hdr.scl_slope===0?1:e.hdr.scl_slope,g=isNaN(e.hdr.scl_inter)?0:e.hdr.scl_inter;if(r==="scaled"||r==="normalized"||r==="windowed"){c instanceof Float32Array||(k.warn(`getVolumeData: Converting output to Float32 for scaling type '${r}'.`),c=Float32Array.from(c));for(let v=0;v<c.length;v++)c[v]=c[v]*p+g}if(r==="normalized"||r==="windowed"){let v=e.cal_min,m=e.cal_max;r==="normalized"&&(v=e.global_min,m=e.global_max);const A=m-v,x=A===0?0:1/A;for(let w=0;w<c.length;w++)c[w]=(c[w]-v)*x,c[w]=Math.max(0,Math.min(c[w],1))}return[c,o]}function p8(e,t=[-1,0,0],n=[0,0,0],r=new Uint8Array){if(!e.hdr||!e.img||!e.dimsRAS||!e.img2RASstep||!e.img2RASstart){k.error("setVolumeData: Missing required NVImage properties (hdr, img, dimsRAS, img2RASstep/start).");return}if(r.length<1){k.warn("setVolumeData: Input slabData is empty.");return}if(t=t.slice(0,3),n=n.slice(0,3),Math.min(...t)<0||Math.min(...n)<0){k.warn("setVolumeData: Invalid start or end coordinates provided.");return}const i=e.dimsRAS.slice(1,4);for(let d=0;d<3;d++)if(t[d]=Math.max(0,Math.min(Math.round(t[d]),i[d]-1)),n[d]=Math.max(0,Math.min(Math.round(n[d]),i[d]-1)),n[d]<t[d]){const h=n[d];n[d]=t[d],t[d]=h}const s=[n[0]-t[0]+1,n[1]-t[1]+1,n[2]-t[2]+1],o=s[0]*s[1]*s[2];if(o<=0){k.warn("setVolumeData: Calculated slab size is zero or negative.");return}if(r.length<o){k.error(`setVolumeData: Input slabData length (${r.length}) is less than the calculated slab size (${o}).`);return}const a=e.img2RASstep,l=e.img2RASstart,c=e.img;let u=0;for(let d=t[2];d<=n[2];d++){const h=l[2]+d*a[2];for(let f=t[1];f<=n[1];f++){const p=l[1]+f*a[1];for(let g=t[0];g<=n[0];g++){const m=l[0]+g*a[0]+p+h;m>=0&&m<c.length&&(c[m]=r[u]),u++}}}}var Pd={};Rt(Pd,{readHEAD:()=>v8});function la(e,t){const n=Qe(t);Ot(n,n);const r=Le(e[0],e[1],e[2],1);return At(r,r,n),q(r[0],r[1],r[2])}function g8(e){if(!e.hdr)throw new Error("hdr not defined");const t=e.hdr.affine,n=en(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],t[3][0],t[3][1],t[3][2],t[3][3]),r=la([0,0,0],n),i=la([1,0,0],n);Pe(i,i,r);const s=la([0,1,0],n);Pe(s,s,r);const o=la([0,0,1],n);Pe(o,o,r),e.hdr.pixDims[1]=gr(i),e.hdr.pixDims[2]=gr(s),e.hdr.pixDims[3]=gr(o)}function A8(e,t,n,r){const i=e.hdr;if(i===null)throw new Error("HDR is not set");i.sform_code=2;const s="xxyyzzg";let o=-1,a=-1,l=-1;const c=["x","y","z"];c[0]=s[r[0]],c[1]=s[r[1]],c[2]=s[r[2]];const u=t.slice(0,3),d=n.slice(0,3);for(let h=0;h<3;h++)c[h]==="x"?o=h:c[h]==="y"?a=h:l=h;o<0||a<0||l<0||o===a||o===l||a===l||(i.pixDims[1]=Math.abs(u[0]),i.pixDims[2]=Math.abs(u[1]),i.pixDims[3]=Math.abs(u[2]),i.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],i.affine[0][o]=-u[o],i.affine[1][a]=-u[a],i.affine[2][l]=u[l],i.affine[0][3]=-d[o],i.affine[1][3]=-d[a],i.affine[2][3]=d[l])}async function v8(e,t,n){e.hdr=new he;const r=e.hdr;r.dims[0]=3,r.pixDims=[1,1,1,1,1,0,0,0];let i=[0,0,0],s=[0,0,0],o=[1,1,1];const l=new TextDecoder().decode(t).split(/\r?\n/),c=(t.byteLength+8)%16,u=t.byteLength+(16-c);k.debug(t.byteLength,"len",u);const d=new ArrayBuffer(u);new Uint8Array(d).set(new Uint8Array(t));const h=new fv(u+8,42,d,!0);r.addExtension(h),r.extensionCode=42,r.extensionFlag[0]=1,r.extensionSize=u+8;const f=l.length;let p=0,g=!1;for(;p<f;){let m=l[p];if(p++,!m.startsWith("type"))continue;const A=m.includes("integer-attribute"),x=m.includes("float-attribute");if(m=l[p],p++,!m.startsWith("name"))continue;let w=m.split("= ");const b=w[1];m=l[p],p++,w=m.split("= ");let y=parseInt(w[1]);if(!(y<1)){if(m=l[p],p++,w=m.trim().split(/\s+/),x||A){for(;w.length<y;){m=l[p],p++;const C=m.trim().split(/\s+/);w.push(...C)}for(let C=0;C<y;C++)w[C]=parseFloat(w[C])}switch(b){case"BYTEORDER_STRING":w[0].includes("LSB_FIRST")?r.littleEndian=!0:w[0].includes("MSB_FIRST")&&(r.littleEndian=!1);break;case"BRICK_TYPES":{r.dims[4]=y;const C=parseInt(w[0]);C===0?(r.numBitsPerVoxel=8,r.datatypeCode=2):C===1?(r.numBitsPerVoxel=16,r.datatypeCode=4):C===3?(r.numBitsPerVoxel=32,r.datatypeCode=16):k.warn("Unknown BRICK_TYPES ",C)}break;case"IJK_TO_DICOM_REAL":if(y<12)break;g=!0,r.sform_code=2,r.affine=[[-w[0],-w[1],-w[2],-w[3]],[-w[4],-w[5],-w[6],-w[7]],[w[8],w[9],w[10],w[11]],[0,0,0,1]];break;case"DATASET_DIMENSIONS":y=Math.max(y,3);for(let C=0;C<y;C++)r.dims[C+1]=w[C];break;case"ORIENT_SPECIFIC":i=w;break;case"ORIGIN":s=w;break;case"DELTA":o=w;break;case"TAXIS_FLOATS":r.pixDims[4]=w[0];break;default:k.warn("Unknown:",b)}}}g?g8(e):A8(e,o,s,i);const v=r.numBitsPerVoxel/8*r.dims[1]*r.dims[2]*r.dims[3]*r.dims[4];if(!n)throw new Error("pairedImgData not set");return n.byteLength<v?await ue.decompressToBuffer(new Uint8Array(n)):n.slice(0)}var bs={};Rt(bs,{readV16:()=>x8,readVMR:()=>w8});function x8(e,t){e.hdr=new he;const n=e.hdr;n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const r=new DataView(t);return n.dims[1]=r.getUint16(0,!0),n.dims[2]=r.getUint16(2,!0),n.dims[3]=r.getUint16(4,!0),2*n.dims[1]*n.dims[2]*n.dims[3]+6!==t.byteLength&&k.warn("This does not look like a valid BrainVoyager V16 file"),n.numBitsPerVoxel=16,n.datatypeCode=512,k.warn("Warning: V16 files have no spatial transforms"),n.affine=[[0,0,-n.pixDims[1],(n.dims[1]-2)*.5*n.pixDims[1]],[-n.pixDims[2],0,0,(n.dims[2]-2)*.5*n.pixDims[2]],[0,-n.pixDims[3],0,(n.dims[3]-2)*.5*n.pixDims[3]],[0,0,0,1]],n.littleEndian=!0,t.slice(6)}function w8(e,t){e.hdr=new he;const n=e.hdr;n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const r=new DataView(t),i=r.getUint16(0,!0);i!==4&&k.warn("Not a valid version 4 VMR image"),n.dims[1]=r.getUint16(2,!0),n.dims[2]=r.getUint16(4,!0),n.dims[3]=r.getUint16(6,!0);const s=n.dims[1]*n.dims[2]*n.dims[3];if(i>=4){let o=8+s;const a=r.getUint32(o+88,!0);if(o=o+92,a>0){const l=t.byteLength;for(let c=0;c<a;c++){for(;o<l&&r.getUint8(o)!==0;)o++;for(o++,o+=4;o<l&&r.getUint8(o)!==0;)o++;o++;const u=r.getUint32(o,!0);o+=4;for(let d=0;d<u;d++)o+=4}}n.pixDims[1]=r.getFloat32(o+2,!0),n.pixDims[2]=r.getFloat32(o+6,!0),n.pixDims[3]=r.getFloat32(o+10,!0)}return k.warn("Warning: VMR spatial transform not implemented"),n.affine=[[0,0,-n.pixDims[1],(n.dims[1]-2)*.5*n.pixDims[1]],[-n.pixDims[2],0,0,(n.dims[2]-2)*.5*n.pixDims[2]],[0,-n.pixDims[3],0,(n.dims[3]-2)*.5*n.pixDims[3]],[0,0,0,1]],k.debug(n),n.numBitsPerVoxel=8,n.datatypeCode=2,t.slice(8,8+s)}var Cs={};Rt(Cs,{readFIB:()=>y8,readSRC:()=>b8});async function y8(e,t){e.hdr=new he;const n=e.hdr;n.littleEndian=!1,n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const r=await ue.readMatV4(t,!0);if(!("dimension"in r)||!("dti_fa"in r))throw new Error("Not a valid DSIstudio FIB file");const i="index0"in r&&"index1"in r&&"index2"in r&&"odf_vertices"in r;n.numBitsPerVoxel=32,n.datatypeCode=16,n.dims[1]=r.dimension[0],n.dims[2]=r.dimension[1],n.dims[3]=r.dimension[2],n.dims[4]=1,n.pixDims[1]=r.voxel_size[0],n.pixDims[2]=r.voxel_size[1],n.pixDims[3]=r.voxel_size[2],n.sform_code=1;const s=(n.dims[1]-1)*.5*n.pixDims[1],o=(n.dims[2]-1)*.5*n.pixDims[2],a=(n.dims[3]-1)*.5*n.pixDims[3];n.affine=[[n.pixDims[1],0,0,-s],[0,-n.pixDims[2],0,o],[0,0,n.pixDims[2],-a],[0,0,0,1]],n.littleEndian=!0;const l=n.dims[1]*n.dims[2]*n.dims[3],c=l*Math.ceil(n.numBitsPerVoxel/8),u=c*n.dims[4],d=new Uint8Array(new ArrayBuffer(l*4*3));if(i){const g=n.dims[1]*n.dims[2]*n.dims[3],v=new Float32Array(g),m=new Float32Array(g),A=new Float32Array(g),x=r.index0,w=r.odf_vertices;for(let b=0;b<g;b++){const y=x[b]*3;v[b]=w[y+0],m[b]=w[y+1],A[b]=-w[y+2]}d.set(new Uint8Array(v.buffer,v.byteOffset,v.byteLength),0*c),d.set(new Uint8Array(m.buffer,m.byteOffset,m.byteLength),1*c),d.set(new Uint8Array(A.buffer,A.byteOffset,A.byteLength),2*c)}"report"in r&&(n.description=new TextDecoder().decode(r.report.subarray(0,Math.min(79,r.report.byteLength))));const h=new Uint8Array(new ArrayBuffer(u)),f=Float32Array.from(r.dti_fa);if("mask"in r){let g=1;"dti_fa_slope"in r&&(g=r.dti_fa_slope[0]);let v=1;"dti_fa_inter"in r&&(v=r.dti_fa_inter[0]);const m=n.dims[1]*n.dims[2]*n.dims[3],A=r.mask,x=new Float32Array(m);let w=0;for(let b=0;b<m;b++)A[b]!==0&&(x[b]=f[w]*g+v,w++);return[x.buffer,new Float32Array(d.buffer)]}const p=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);return h.set(p,0),[h.buffer,new Float32Array(d.buffer)]}async function b8(e,t){e.hdr=new he;const n=e.hdr;n.littleEndian=!1,n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const r=await ue.readMatV4(t);if(!("dimension"in r)||!("image0"in r))throw new Error("Not a valid DSIstudio SRC file");let i=0,s=0;for(const[f,p]of Object.entries(r))if(f.startsWith("image")){if(i===0?s=p.length:s!==p.length&&(s=-1),p.constructor!==Uint16Array)throw new Error("DSIstudio SRC files always use Uint16 datatype");i++}if(s<1||i<1)throw new Error("SRC file not valid DSI Studio data. The image(s) should have the same length");n.numBitsPerVoxel=16,n.datatypeCode=512,n.dims[1]=r.dimension[0],n.dims[2]=r.dimension[1],n.dims[3]=r.dimension[2],n.dims[4]=i,n.dims[4]>1&&(n.dims[0]=4),n.pixDims[1]=r.voxel_size[0],n.pixDims[2]=r.voxel_size[1],n.pixDims[3]=r.voxel_size[2],n.sform_code=1;const o=(n.dims[1]-1)*.5*n.pixDims[1],a=(n.dims[2]-1)*.5*n.pixDims[2],l=(n.dims[3]-1)*.5*n.pixDims[3];n.affine=[[n.pixDims[1],0,0,-o],[0,-n.pixDims[2],0,a],[0,0,n.pixDims[2],-l],[0,0,0,1]],n.littleEndian=!0;const c=n.dims[1]*n.dims[2]*n.dims[3]*(n.numBitsPerVoxel/8),u=c*n.dims[4],d=new Uint8Array(new ArrayBuffer(u));let h=0;for(let f=0;f<i;f++){const p=r[`image${f}`],g=new Uint8Array(p.buffer,p.byteOffset,p.byteLength);d.set(g,h),h+=c}return"report"in r&&(n.description=new TextDecoder().decode(r.report.subarray(0,Math.min(79,r.report.byteLength)))),d.buffer}var Nd={};Rt(Nd,{readECAT:()=>C8});function C8(e,t){e.hdr=new he;const n=e.hdr;n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const r=new DataView(t),i=r.getInt32(0,!1),s=r.getInt16(50,!1);if(i!==1296127058||s<1||s>14)throw new Error("Not a valid ECAT file");let o=512,a=0;const l=[];let c=new Float32Array;for(;;){const u=r.getInt32(o,!1),d=r.getInt32(o+12,!1);if(u+d!==31)break;let h=o+20,f=0,p=0;for(;f<31&&(p=r.getInt32(h,!1),h+=16,p!==0);){f++;let g=p*512;const v=g-512,m=r.getUint16(v,!1);n.dims[1]=r.getUint16(v+4,!1),n.dims[2]=r.getUint16(v+6,!1),n.dims[3]=r.getUint16(v+8,!1);const A=r.getFloat32(v+26,!1);n.pixDims[1]=r.getFloat32(v+34,!1)*10,n.pixDims[2]=r.getFloat32(v+38,!1)*10,n.pixDims[3]=r.getFloat32(v+42,!1)*10,n.pixDims[4]=r.getUint32(v+46,!1)/1e3,l.push(n.pixDims[4]);const x=n.dims[1]*n.dims[2]*n.dims[3],w=new Float32Array(x);if(m===1)for(let y=0;y<x;y++)w[y]=r.getUint8(g)*A,g++;else if(m===6)for(let y=0;y<x;y++)w[y]=r.getUint16(g,!1)*A,g+=2;else if(m===7)for(let y=0;y<x;y++)w[y]=r.getUint32(g,!1)*A,g+=4;else k.warn("Unknown ECAT data type "+m);const b=c.slice(0);c=new Float32Array(b.length+w.length),c.set(b),c.set(w,b.length),a++}if(p===0)break;o+=512}if(n.dims[4]=a,n.pixDims[4]=l[0],a>1){n.dims[0]=4;let u=!1;for(let d=0;d<a;d++)l[d]!==l[0]&&(u=!0);u&&k.warn("Frame durations vary")}return n.sform_code=1,n.affine=[[-n.pixDims[1],0,0,(n.dims[1]-2)*.5*n.pixDims[1]],[0,-n.pixDims[2],0,(n.dims[2]-2)*.5*n.pixDims[2]],[0,0,-n.pixDims[3],(n.dims[3]-2)*.5*n.pixDims[3]],[0,0,0,1]],n.numBitsPerVoxel=32,n.datatypeCode=16,c.buffer}var za={};Rt(za,{imageDataFromArrayBuffer:()=>Pv,readBMP:()=>S8});async function Pv(e){return new Promise((t,n)=>{const r=new Blob([e]),i=URL.createObjectURL(r),s=new Image;s.crossOrigin="Anonymous",s.src=i,s.onload=()=>{URL.revokeObjectURL(i);const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const a=o.getContext("2d");if(!a){n(new Error("Failed to get 2D context"));return}a.drawImage(s,0,0),t(a.getImageData(0,0,s.width,s.height))},s.onerror=o=>{URL.revokeObjectURL(i),n(o)}})}async function S8(e,t){const n=await Pv(t),{width:r,height:i,data:s}=n;e.hdr=new he;const o=e.hdr;o.dims=[3,r,i,1,0,0,0,0],o.pixDims=[1,1,1,1,1,0,0,0],o.affine=[[o.pixDims[1],0,0,-(o.dims[1]-2)*.5*o.pixDims[1]],[0,-o.pixDims[2],0,(o.dims[2]-2)*.5*o.pixDims[2]],[0,0,-o.pixDims[3],(o.dims[3]-2)*.5*o.pixDims[3]],[0,0,0,1]],o.numBitsPerVoxel=8,o.datatypeCode=2304;let a=!0;for(let l=0;l<s.length;l+=4)if(s[l]!==s[l+1]||s[l]!==s[l+2]){a=!1;break}if(a){o.datatypeCode=2;const l=new Uint8Array(r*i);for(let c=0,u=0;c<s.length;c+=4,u++)l[u]=s[c];return l.buffer}return s.buffer}var kd={};Rt(kd,{readMHA:()=>E8});async function E8(e,t,n){const r=t.byteLength;if(r<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const i=new Uint8Array(t);let s=0;function o(g){return g===10||g===13}function a(){for(;s<r&&o(i[s]);)s++;const g=s;for(;s<r&&!o(i[s]);)s++;return s-g<2?"":new TextDecoder().decode(t.slice(g,s))}let l=a();e.hdr=new he;const c=e.hdr;c.pixDims=[1,1,1,1,1,0,0,0],c.dims=[1,1,1,1,1,1,1,1],c.littleEndian=!0;let u=!1,d=!1;const h=ir(NaN,0,0,0,1,0,0,0,1),f=q(0,0,0);for(;l!=="";){let g=l.split(" ");if(g.length>2&&(g=g.slice(2)),l.startsWith("BinaryDataByteOrderMSB")&&g[0].includes("False")&&(c.littleEndian=!0),l.startsWith("BinaryDataByteOrderMSB")&&g[0].includes("True")&&(c.littleEndian=!1),l.startsWith("CompressedData")&&g[0].includes("True")&&(u=!0),l.startsWith("TransformMatrix"))for(let v=0;v<9;v++)h[v]=parseFloat(g[v]);if(l.startsWith("Offset"))for(let v=0;v<Math.min(g.length,3);v++)f[v]=parseFloat(g[v]);if(l.startsWith("ElementSpacing"))for(let v=0;v<g.length;v++)c.pixDims[v+1]=parseFloat(g[v]);if(l.startsWith("DimSize")){c.dims[0]=g.length;for(let v=0;v<g.length;v++)c.dims[v+1]=parseInt(g[v])}if(l.startsWith("ElementType"))switch(g[0]){case"MET_UCHAR":c.numBitsPerVoxel=8,c.datatypeCode=2;break;case"MET_CHAR":c.numBitsPerVoxel=8,c.datatypeCode=256;break;case"MET_SHORT":c.numBitsPerVoxel=16,c.datatypeCode=4;break;case"MET_USHORT":c.numBitsPerVoxel=16,c.datatypeCode=512;break;case"MET_INT":c.numBitsPerVoxel=32,c.datatypeCode=8;break;case"MET_UINT":c.numBitsPerVoxel=32,c.datatypeCode=768;break;case"MET_FLOAT":c.numBitsPerVoxel=32,c.datatypeCode=16;break;case"MET_DOUBLE":c.numBitsPerVoxel=64,c.datatypeCode=64;break;default:throw new Error("Unsupported MHA data type: "+g[0])}if(l.startsWith("ObjectType")&&!g[0].includes("Image")&&k.warn("Only able to read ObjectType = Image, not "+l),l.startsWith("ElementDataFile")){g[0]!=="LOCAL"&&(d=!0);break}l=a()}const p=ir(c.pixDims[1],0,0,0,c.pixDims[2],0,0,0,c.pixDims[3]);for(JA(h,h,p),c.affine=[[-h[0],-h[3],-h[6],-f[0]],[-h[1],-h[4],-h[7],-f[1]],[h[2],h[5],h[8],f[2]],[0,0,0,1]];i[s]===10;)s++;return c.vox_offset=s,d&&n?u?await ue.decompressToBuffer(new Uint8Array(n.slice(0))):n.slice(0):u?await ue.decompressToBuffer(new Uint8Array(t.slice(c.vox_offset))):t.slice(c.vox_offset)}var Nv={};Rt(Nv,{isFreeSurferLabelImage:()=>Bv,optimizeFreeSurferLabels:()=>kv,readMgh:()=>M8});function a1(e,t,n,r=1){const i=t+n;let s=t;const o=[];for(;s+12<=i;){const a=e.getInt32(s,!1),l=e.getInt32(s+8,!1);if(s+=12,l<=0||s+l>i)break;if(a!==r){s+=l;continue}let c=l,u=s;if(r===1){if(s+4>i)break;c=e.getInt32(s,!1),u+=4}if(c>1&&u+c<=i){const d=new Uint8Array(e.buffer,u,c),h=new TextDecoder("utf-8").decode(d.slice(0,-1));o.push(h)}s+=l}return o.join(`

`)}function kv(e,t){if(e.intent_code=1002,e.datatypeCode!==16&&e.datatypeCode!==8)return t;let n=new Float32Array(t);if(e.datatypeCode===8&&(n=new Int32Array(t)),Rd()){const o=new Uint32Array(t);for(let a=0;a<o.length;a++){const l=o[a];o[a]=(l&255)<<24|(l&65280)<<8|(l&16711680)>>>8|(l&4278190080)>>>24}}e.littleEndian=Rd();let r=!0,i=1/0,s=-1/0;for(let o=0;o<n.length;o++){const a=n[o];Number.isFinite(a)&&(Number.isInteger(a)||(r=!1),a<i&&(i=a),a>s&&(s=a))}if(!r||i<0||s>2147483647)return k.warn(`FreeSurfer Labels must be integers in INT32 range. range ${i}..${s}`),t;if(s>32767){e.datatypeCode=8;const o=new Int32Array(n.length);for(let a=0;a<n.length;a++)o[a]=Math.trunc(n[a]);return o.buffer}else if(s>255){e.datatypeCode=4,e.numBitsPerVoxel=16;const o=new Int16Array(n.length);for(let a=0;a<n.length;a++)o[a]=Math.trunc(n[a]);return o.buffer}else{e.datatypeCode=2,e.numBitsPerVoxel=8;const o=new Uint8Array(n.length);for(let a=0;a<n.length;a++)o[a]=Math.trunc(n[a]);return o.buffer}}function Bv(e,t,n){const r=e.byteLength-t.vox_offset;if(r<n)return k.error(`MGH image data size mismatch: expected ${n}, found ${r}`),!1;if(r===n)return!1;const i=t.vox_offset+n+20,s=e.byteLength-i;return s<=12?!1:a1(new DataView(e),i,s).toLowerCase().endsWith("lut.txt")?!0:a1(new DataView(e),i,s,3).includes("mri_label2vol")}async function M8(e,t,n=""){e.hdr||(k.debug("readMgh called before nvImage.hdr was initialized. Creating default."),e.hdr=new he);const r=e.hdr;r.littleEndian=!1;let i=t,s=new DataView(i);if(i.byteLength>=2&&s.getUint8(0)===31&&s.getUint8(1)===139)try{i=await ue.decompressToBuffer(new Uint8Array(t)),s=new DataView(i)}catch(Y){return k.error("Failed to decompress MGZ file.",Y),null}if(i.byteLength<284)return k.error("File too small to be a valid MGH/MGZ header."),null;const o=s.getInt32(0,!1),a=s.getInt32(4,!1),l=s.getInt32(8,!1),c=s.getInt32(12,!1),u=s.getInt32(16,!1),d=s.getInt32(20,!1),h=s.getFloat32(30,!1),f=s.getFloat32(34,!1),p=s.getFloat32(38,!1),g=s.getFloat32(42,!1),v=s.getFloat32(46,!1),m=s.getFloat32(50,!1),A=s.getFloat32(54,!1),x=s.getFloat32(58,!1),w=s.getFloat32(62,!1),b=s.getFloat32(66,!1),y=s.getFloat32(70,!1),C=s.getFloat32(74,!1),S=s.getFloat32(78,!1),E=s.getFloat32(82,!1),T=s.getFloat32(86,!1);if(o!==1&&o!==257&&k.warn(`Unexpected MGH version: ${o}.`),a<=0||l<=0||c<=0)return k.error(`Invalid MGH dimensions: ${a}x${l}x${c}`),null;switch(d){case 0:r.numBitsPerVoxel=8,r.datatypeCode=2;break;case 4:r.numBitsPerVoxel=16,r.datatypeCode=4;break;case 1:r.numBitsPerVoxel=32,r.datatypeCode=8;break;case 3:r.numBitsPerVoxel=32,r.datatypeCode=16;break;default:return k.error(`Unsupported MGH data type: ${d}`),null}r.dims[1]=a,r.dims[2]=l,r.dims[3]=c,r.dims[4]=Math.max(1,u),r.dims[0]=r.dims[4]>1?4:3,r.pixDims[0]=1,r.pixDims[1]=Math.abs(h),r.pixDims[2]=Math.abs(f),r.pixDims[3]=Math.abs(p),r.pixDims[4]=0,r.sform_code=1,r.qform_code=0,r.sform_code=1;const F=en(g*r.pixDims[1],A*r.pixDims[2],b*r.pixDims[3],0,v*r.pixDims[1],x*r.pixDims[2],y*r.pixDims[3],0,m*r.pixDims[1],w*r.pixDims[2],C*r.pixDims[3],0,0,0,0,1),M=[r.dims[1]/2,r.dims[2]/2,r.dims[3]/2,1],B=[0,0,0,0];for(let Y=0;Y<3;Y++){B[Y]=0;for(let j=0;j<3;j++)B[Y]=B[Y]+F[j+Y*4]*M[j]}r.affine=[[F[0],F[1],F[2],S-B[0]],[F[4],F[5],F[6],E-B[1]],[F[8],F[9],F[10],T-B[2]],[0,0,0,1]],r.vox_offset=284,r.magic="n+1";const P=r.numBitsPerVoxel/8,U=a*l*c*r.dims[4]*P,G=i.slice(r.vox_offset,r.vox_offset+U);let L=o===257;return L||(L=["aparc.DKTatlas+aseg.deep.mg","aparc+aseg.mg","aparc.DKTatlas+aseg.mg","aparc.a2005s+aseg.mg","aparc.a2009s+aseg.mg","apas+head.mg","apas+head.samseg.mg","aseg.auto.mg","aseg.auto_noCCseg.mg","aseg.mg","aseg.presurf.hypos.mg","aseg.presurf.mg","brainstemSsLabels.v13.FSvoxelSpace.mg","brainstemSsLabels.v13.mg","ctrl_pts.mg","filled.auto.mg","filled.mg","gtmseg.mg","hypothalamic_subunits_seg.v1.mg","lh.hippoAmygLabels-T1.v22.CA.FSvoxelSpace.mg","lh.hippoAmygLabels-T1.v22.CA.mg","lh.hippoAmygLabels-T1.v22.FS60.FSvoxelSpace.mg","lh.hippoAmygLabels-T1.v22.FS60.mg","lh.hippoAmygLabels-T1.v22.FSvoxelSpace.mg","lh.hippoAmygLabels-T1.v22.HBT.FSvoxelSpace.mg","lh.hippoAmygLabels-T1.v22.HBT.mg","lh.hippoAmygLabels-T1.v22.mg","lh.ribbon.mg","mca-dura.mg","rh.hippoAmygLabels-T1.v22.CA.FSvoxelSpace.mg","rh.hippoAmygLabels-T1.v22.CA.mg","rh.hippoAmygLabels-T1.v22.FS60.FSvoxelSpace.mg","rh.hippoAmygLabels-T1.v22.FS60.mg","rh.hippoAmygLabels-T1.v22.FSvoxelSpace.mg","rh.hippoAmygLabels-T1.v22.HBT.FSvoxelSpace.mg","rh.hippoAmygLabels-T1.v22.HBT.mg","rh.hippoAmygLabels-T1.v22.mg","rh.ribbon.mg","ribbon.mg","synthseg.mg","synthseg.rca.mg","vsinus.mg","subcort.mask.1mm.mg","subcort.mask.mg","surface.defects.mg","ThalamicNuclei.v13.T1.FSvoxelSpace.mg","ThalamicNuclei.v13.T1.mg","wm.asegedit.mg","wmparc.mg"].some(j=>n.includes(j))),L||(L=Bv(i,r,U)),L?kv(r,G):G}var Bd={};Rt(Bd,{readMIF:()=>D8});async function D8(e,t,n){e.hdr=new he;const r=e.hdr;r.pixDims=[1,1,1,1,1,0,0,0],r.dims=[1,1,1,1,1,1,1,1];let i=t.byteLength;if(i<20)throw new Error("File too small to be MIF: bytes = "+i);let s=new Uint8Array(t);s[0]===31&&s[1]===139&&(k.debug("MIF with GZ decompression"),t=await ue.decompressToBuffer(new Uint8Array(t)),i=t.byteLength,s=new Uint8Array(t));let o=0;function a(){for(;o<i&&s[o]===10;)o++;const M=o;for(;o<i&&s[o]!==10;)o++;return o++,o-M<1?"":new TextDecoder().decode(t.slice(M,o-1))}let l=a();if(!l.startsWith("mrtrix image"))throw new Error("Not a valid MIF file");const c=[];let u=!1,d=0,h=0,f=!1;for(l=a();o<i&&!l.startsWith("END");){let M=l.split(":");if(l=a(),M.length<2)break;const B=M[0];M=M[1].split(",");for(let P=0;P<M.length;P++)M[P]=M[P].trim();switch(B){case"dim":r.dims[0]=M.length;for(let P=0;P<M.length;P++)r.dims[P+1]=parseInt(M[P]);break;case"vox":for(let P=0;P<M.length;P++)r.pixDims[P+1]=parseFloat(M[P]),isNaN(r.pixDims[P+1])&&(r.pixDims[P+1]=0);break;case"layout":for(let P=0;P<M.length;P++)c.push(parseInt(M[P]));break;case"datatype":{const P=M[0];P.startsWith("Bit")?(u=!0,r.datatypeCode=2):P.startsWith("Int8")?r.datatypeCode=256:P.startsWith("UInt8")?r.datatypeCode=2:P.startsWith("Int16")?r.datatypeCode=4:P.startsWith("UInt16")?r.datatypeCode=512:P.startsWith("Int32")?r.datatypeCode=8:P.startsWith("UInt32")?r.datatypeCode=768:P.startsWith("Float32")?r.datatypeCode=16:P.startsWith("Float64")?r.datatypeCode=64:k.warn("Unsupported datatype "+P),P.includes("8")?r.numBitsPerVoxel=8:P.includes("16")?r.numBitsPerVoxel=16:P.includes("32")?r.numBitsPerVoxel=32:P.includes("64")&&(r.numBitsPerVoxel=64),r.littleEndian=!0,P.endsWith("LE")&&(r.littleEndian=!0),P.endsWith("BE")&&(r.littleEndian=!1)}break;case"transform":if(d>2||M.length!==4)break;r.affine[d][0]=parseFloat(M[0]),r.affine[d][1]=parseFloat(M[1]),r.affine[d][2]=parseFloat(M[2]),r.affine[d][3]=parseFloat(M[3]),d++;break;case"comments":r.description=M[0].substring(0,Math.min(79,M[0].length));break;case"RepetitionTime":h=parseFloat(M[0]);break;case"file":f=!M[0].startsWith(". "),f||(M=M[0].split(" "),r.vox_offset=parseInt(M[1]));break}}const p=r.dims[0];p>5&&k.warn("reader only designed for a maximum of 5 dimensions (XYZTD)");let g=1;for(let M=0;M<p;M++)g*=Math.max(r.dims[M+1],1);for(let M=0;M<3;M++)for(let B=0;B<3;B++)r.affine[M][B]*=r.pixDims[B+1];k.debug("mif affine:"+r.affine[0]),h>0&&(r.pixDims[4]=h),f&&!n&&k.warn("MIH header provided without paired image data");let v;if(n&&f)v=n.slice(0);else if(u){r.numBitsPerVoxel=8;const M=new Uint8Array(g),B=t.slice(r.vox_offset,r.vox_offset+Math.ceil(g/8)),P=new Uint8Array(B);let z=0;for(let U=0;U<g;U++){const G=U%8;M[U]=P[z]>>7-G&1,G===7&&z++}v=M.buffer}else v=t.slice(r.vox_offset,r.vox_offset+g*(r.numBitsPerVoxel/8));c.length!==r.dims[0]&&k.warn("dims does not match layout");let m=1;const A=[1,1,1,1,1],x=[!1,!1,!1,!1,!1];for(let M=0;M<c.length;M++)for(let B=0;B<c.length;B++)Math.abs(c[B])===M&&(A[B]=m,(c[B]<0||Object.is(c[B],-0))&&(x[B]=!0),m*=r.dims[B+1]);let w=ue.range(0,r.dims[1]-1,1);x[0]&&(w=ue.range(r.dims[1]-1,0,-1));for(let M=0;M<r.dims[1];M++)w[M]*=A[0];let b=ue.range(0,r.dims[2]-1,1);x[1]&&(b=ue.range(r.dims[2]-1,0,-1));for(let M=0;M<r.dims[2];M++)b[M]*=A[1];let y=ue.range(0,r.dims[3]-1,1);x[2]&&(y=ue.range(r.dims[3]-1,0,-1));for(let M=0;M<r.dims[3];M++)y[M]*=A[2];let C=ue.range(0,r.dims[4]-1,1);x[3]&&(C=ue.range(r.dims[4]-1,0,-1));for(let M=0;M<r.dims[4];M++)C[M]*=A[3];let S=ue.range(0,r.dims[5]-1,1);x[4]&&(S=ue.range(r.dims[5]-1,0,-1));for(let M=0;M<r.dims[5];M++)S[M]*=A[4];let E=0,T,F;switch(r.datatypeCode){case 256:T=new Int8Array(v),F=new Int8Array(g);break;case 2:T=new Uint8Array(v),F=new Uint8Array(g);break;case 4:T=new Int16Array(v),F=new Int16Array(g);break;case 512:T=new Uint16Array(v),F=new Uint16Array(g);break;case 8:T=new Int32Array(v),F=new Int32Array(g);break;case 768:T=new Uint32Array(v),F=new Uint32Array(g);break;case 16:T=new Float32Array(v),F=new Float32Array(g);break;case 64:T=new Float64Array(v),F=new Float64Array(g);break;default:throw new Error("unknown datatypeCode")}for(let M=0;M<r.dims[5];M++)for(let B=0;B<r.dims[4];B++)for(let P=0;P<r.dims[3];P++)for(let z=0;z<r.dims[2];z++)for(let U=0;U<r.dims[1];U++)F[E]=T[w[U]+b[z]+y[P]+C[B]+S[M]],E++;return F.buffer}var Vv={};Rt(Vv,{readNifti:()=>T8});async function T8(e,t,n){let r=t,i=null;try{if(rf(r)&&(k.debug(`Decompressing NIfTI file: ${e.name}`),r=await HS(r),k.debug(`Decompression complete for: ${e.name}`)),!r||r.byteLength===0)throw new Error("Buffer became invalid after decompression attempt.");if(e.hdr=await Po(r,n!=null),KS(e.hdr)&&(e.extensions=e.hdr.extensions),e.hdr===null)throw new Error(`Failed to read NIfTI header: ${e.name}`);if(e.hdr.cal_min===0&&e.hdr.cal_max===255&&e.hdr.datatypeCode!==2&&(k.debug(`Resetting suspicious cal_min/max (0/255) for non-uint8 NIfTI: ${e.name}`),e.hdr.cal_min=0,e.hdr.cal_max=0),i=n?Hm(e.hdr,n):Hm(e.hdr,r),i===null)throw new Error(`nifti-reader-js readImage returned null for ${e.name}`);return i}catch(s){return k.error(`Error processing NIfTI file ${e.name}:`,s),e.hdr=null,null}}var Uv={};Rt(Uv,{readNrrd:()=>I8});async function I8(e,t,n=null){e.hdr||(k.warn("readNrrd called before nvImage.hdr was initialized. Creating default."),e.hdr=new he);const r=e.hdr;r.pixDims=[1,1,1,1,1,0,0,0],r.dims=[0,0,0,0,0,0,0,0];const i=t.byteLength;let s=null;const o=new Uint8Array(t);for(let y=1;y<i;y++)if(o[y-1]===10&&o[y]===10){const C=t.slice(0,y-1);s=new TextDecoder().decode(C),r.vox_offset=y+1;break}if(s===null)return k.error("readNrrd: could not extract txt"),null;const a=s.split(`
`);if(!a[0].startsWith("NRRD"))return k.error("Invalid NRRD image (magic signature missing)"),null;const l=a.length;let c=!1,u=!1,d=!1;const h=ir(NaN,0,0,0,1,0,0,0,1),f=q(0,0,0);let p=yd();for(let y=1;y<l;y++){let C=a[y];if((C.length===0||C[0]==="#")&&(C.startsWith("#")||C.trim().length===0))continue;C=C.toLowerCase();const S=C.split(":");if(S.length<2)continue;const E=S[0].trim();let T=S[1].trim();switch(T=T.replaceAll(")"," "),T=T.replaceAll("("," "),T=T.trim(),E){case"data file":d=!0;break;case"encoding":if(T.includes("raw"))c=!1;else if(T.includes("gz"))c=!0;else return k.error(`Unsupported NRRD encoding : ${T}`),null;break;case"type":switch(T){case"uchar":case"unsigned char":case"uint8":case"uint8_t":r.numBitsPerVoxel=8,r.datatypeCode=2;break;case"signed char":case"int8":case"int8_t":r.numBitsPerVoxel=8,r.datatypeCode=256;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":r.numBitsPerVoxel=16,r.datatypeCode=4;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":r.numBitsPerVoxel=16,r.datatypeCode=512;break;case"int":case"signed int":case"int32":case"int32_t":r.numBitsPerVoxel=32,r.datatypeCode=8;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":r.numBitsPerVoxel=32,r.datatypeCode=768;break;case"float":r.numBitsPerVoxel=32,r.datatypeCode=16;break;case"double":r.numBitsPerVoxel=64,r.datatypeCode=64;break;default:return k.error("Unsupported NRRD data type: "+T),null}break;case"spacings":{const F=T.split(/[ ,]+/);for(let M=0;M<F.length;M++)r.pixDims[M+1]=parseFloat(F[M])}break;case"sizes":{const F=T.split(/[ ,]+/);r.dims[0]=F.length;for(let M=0;M<F.length;M++)r.dims[M+1]=parseInt(F[M])}break;case"endian":T.includes("little")?r.littleEndian=!0:T.includes("big")&&(r.littleEndian=!1);break;case"space directions":{const F=T.split(/[ ,]+/);if(F.length===9)for(let M=0;M<9;M++)h[M]=parseFloat(F[M])}break;case"space origin":{const F=T.split(/[ ,]+/);F.length===3&&(f[0]=parseFloat(F[0]),f[1]=parseFloat(F[1]),f[2]=parseFloat(F[2]))}break;case"space units":T.includes("microns")&&(u=!0);break;case"space":T.includes("right-anterior-superior")||T.includes("ras")?p=ir(1,0,0,0,1,0,0,0,1):T.includes("left-anterior-superior")||T.includes("las")?p=ir(-1,0,0,0,1,0,0,0,1):T.includes("left-posterior-superior")||T.includes("lps")?p=ir(-1,0,0,0,-1,0,0,0,1):k.warn("Unsupported NRRD space value:",T);break;default:k.warn("Unknown:",E);break}}if(!isNaN(h[0])){r.sform_code=2,u&&(iS(h,h,.001),f[0]*=.001,f[1]*=.001,f[2]*=.001),p[0]<0&&(f[0]=-f[0]),p[4]<0&&(f[1]=-f[1]),p[8]<0&&(f[2]=-f[2]),JA(h,p,h);const y=en(h[0],h[3],h[6],f[0],h[1],h[4],h[7],f[1],h[2],h[5],h[8],f[2],0,0,0,1);if(!e.vox2mm)return null;const C=e.vox2mm([0,0,0],y),S=e.vox2mm([1,0,0],y);Pe(S,S,C);const E=e.vox2mm([0,1,0],y);Pe(E,E,C);const T=e.vox2mm([0,0,1],y);Pe(T,T,C),r.pixDims[0]=1,r.pixDims[1]=gr(S),r.pixDims[2]=gr(E),r.pixDims[3]=gr(T),r.affine=[[y[0],y[1],y[2],y[3]],[y[4],y[5],y[6],y[7]],[y[8],y[9],y[10],y[11]],[0,0,0,1]]}let g=null;const v=d?n:t,m=d?0:r.vox_offset;if(d&&!v)return k.warn("Missing data: NRRD header describes detached data file but only one URL provided"),null;if(!v||m>=v.byteLength)return k.error(`NRRD data offset (${m}) invalid for buffer length (${(v==null?void 0:v.byteLength)??0})`),null;let A=v.slice(m);if(c)try{k.debug("Decompressing NRRD data..."),A=await ue.decompressToBuffer(new Uint8Array(A)),k.debug("Decompression complete.")}catch(y){return k.error("Failed to decompress NRRD data.",y),null}const x=r.numBitsPerVoxel/8,b=r.dims.slice(1,r.dims[0]+1).reduce((y,C)=>y*Math.max(1,C),1)*x;return A.byteLength<b?(k.error(`NRRD image data size mismatch: expected ${b}, found ${A.byteLength}`),null):(A.byteLength>b&&(k.warn(`NRRD has extra ${A.byteLength-b} bytes after expected image data. Truncating.`),A=A.slice(0,b)),g=A,r.datatypeCode?r.numBitsPerVoxel?g:(k.error("NRRD parsing failed to set numBitsPerVoxel."),null):(k.error("NRRD parsing failed to set datatypeCode."),null))}var Ss={};Rt(Ss,{readNPY:()=>Lv,readNPZ:()=>R8});function l1(e){return{"|b1":1,"<i1":1,"<u1":1,"<i2":2,"<u2":2,"<i4":4,"<u4":4,"<f4":4,"<f8":8}[e]??1}function F8(e){return{"|b1":2,"<i1":256,"<u1":2,"<i2":4,"<u2":512,"<i4":8,"<u4":768,"<f4":16,"<f8":64}[e]??16}async function Lv(e,t){const n=new DataView(t),r=[n.getUint8(0),n.getUint8(1),n.getUint8(2),n.getUint8(3),n.getUint8(4),n.getUint8(5)],i=[147,78,85,77,80,89];if(!r.every((A,x)=>A===i[x]))throw new Error("Not a valid NPY file: Magic number mismatch");const s=n.getUint16(8,!0),o=new TextDecoder("utf-8").decode(t.slice(10,10+s)),a=o.match(/'shape': \((.*?)\)/);if(!a)throw new Error("Invalid NPY header: Shape not found");const l=a[1].split(",").map(A=>A.trim()).filter(A=>A!=="").map(Number),c=o.match(/'descr': '([^']+)'/);if(!c)throw new Error("Invalid NPY header: Data type not found");const u=c[1],d=l.reduce((A,x)=>A*x,1),h=10+s,f=t.slice(h,h+d*l1(u)),p=l.length>0?l[l.length-1]:1,g=l.length>1?l[l.length-2]:1,v=l.length>2?l[l.length-3]:1;e.hdr=new he;const m=e.hdr;return m.dims=[3,p,g,v,0,0,0,0],m.pixDims=[1,1,1,1,1,0,0,0],m.affine=[[m.pixDims[1],0,0,-(m.dims[1]-2)*.5*m.pixDims[1]],[0,-m.pixDims[2],0,(m.dims[2]-2)*.5*m.pixDims[2]],[0,0,-m.pixDims[3],(m.dims[3]-2)*.5*m.pixDims[3]],[0,0,0,1]],m.numBitsPerVoxel=l1(u)*8,m.datatypeCode=F8(u),f}async function R8(e,t){const n=new Ev(t);for(let r=0;r<n.entries.length;r++){const i=n.entries[r];if(i.fileName.toLowerCase().endsWith(".npy")){const s=await i.extract();return await Lv(e,s.buffer)}}}var Vd={};Rt(Vd,{readZARR:()=>N8});function P8(e,t,n,r){const i=t*n,s=new Uint8Array(i*r*3),o=new Array(r);for(let c=0;c<r;c++)o[c]=i*3*c;let a=0,l=0;for(let c=0;c<i;c++){for(let u=0;u<r;u++)s[o[u]+l]=e[a++],s[o[u]+l+1]=e[a++],s[o[u]+l+2]=e[a++];l+=3}return s}async function N8(e,t,n){let{width:r,height:i,depth:s=1,data:o}=n??{},a=r*i*s*3,l=a===o.length;if(l||(a=r*i*s,s===3&&(l=!0,s=1)),a!==o.length)throw new Error(`Expected RGB ${r}${i}${s}3 =  ${a}, but ZARR length ${o.length}`);e.hdr=new he;const c=e.hdr;if(c.dims=[3,r,i,s,1,1,1,1],c.pixDims=[1,1,1,1,0,0,0,0],c.affine=[[c.pixDims[1],0,0,-(c.dims[1]-2)*.5*c.pixDims[1]],[0,-c.pixDims[2],0,(c.dims[2]-2)*.5*c.pixDims[2]],[0,0,-c.pixDims[3],(c.dims[3]-2)*.5*c.pixDims[3]],[0,0,0,1]],!l){if(c.numBitsPerVoxel=8,c.datatypeCode=2,o instanceof Uint8Array){const f=new ArrayBuffer(o.length);return new Uint8Array(f).set(o),f}return o}c.numBitsPerVoxel=24,c.datatypeCode=128;const u=P8(o,c.dims[1],c.dims[2],c.dims[3]),d=new ArrayBuffer(u.length);return new Uint8Array(d).set(u),d}function kn(e,t,n){const r=Qe(n);Ot(r,r);const i=Le(t[0],t[1],t[2],1);return At(i,i,r),q(i[0],i[1],i[2])}function Ov(e,t,n=!1){if(!e.matRAS)throw new Error("matRAS undefined");const r=Qe(e.matRAS),i=Qe(r);Ot(i,r),zt(i,i);const s=Le(t[0],t[1],t[2],1);At(s,s,i);const o=q(s[0],s[1],s[2]);return n?o:new Float32Array([Math.round(o[0]),Math.round(o[1]),Math.round(o[2])])}function k8(e,t){return q((t[0]+.5)/e.dimsRAS[1],(t[1]+.5)/e.dimsRAS[2],(t[2]+.5)/e.dimsRAS[3])}function B8(e,t){return q(Math.round(t[0]*e.dims[1]-.5),Math.round(t[1]*e.dims[2]-.5),Math.round(t[2]*e.dims[3]-.5))}function V8(e,t,n=!1){const r=Le(t[0],t[1],t[2],1);return n?At(r,r,e.frac2mm):At(r,r,e.frac2mmOrtho),r}function U8(e,t,n=!1){const r=Le(t[0],t[1],t[2],1),i=e.dimsRAS,s=q(0,0,0);if(typeof i>"u")return s;if(!n){const a=Qe(e.frac2mmOrtho);return zt(a,a),At(r,r,a),s[0]=r[0],s[1]=r[1],s[2]=r[2],s}if(i[1]<1||i[2]<1||i[3]<1)return s;const o=Qe(e.matRAS);return zt(o,o),Ot(o,o),At(r,r,o),s[0]=(r[0]+.5)/i[1],s[1]=(r[1]+.5)/i[2],s[2]=(r[2]+.5)/i[3],s}function Ud(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((n,r)=>n===t[r])}function zv(e){const t=Qe(e);Ot(t,e);const n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),r=Math.max(Math.max(Math.abs(t[0]),Math.abs(t[1])),Math.abs(t[2]))/n,i=Math.sqrt(t[4]*t[4]+t[5]*t[5]+t[6]*t[6]),s=Math.max(Math.max(Math.abs(t[4]),Math.abs(t[5])),Math.abs(t[6]))/i,o=Math.sqrt(t[8]*t[8]+t[9]*t[9]+t[10]*t[10]),a=Math.max(Math.max(Math.abs(t[8]),Math.abs(t[9])),Math.abs(t[10]))/o,l=Math.min(Math.min(r,s),a);let c=Math.abs(Math.acos(l)*180/3.141592653);return c>.01?k.warn("Warning voxels not aligned with world space: "+c+` degrees from plumb.
`):c=0,c}function Ld(e){if(!e.matRAS)throw new Error("matRAS not defined");if(e.pixDimsRAS===void 0)throw new Error("pixDimsRAS not defined");if(!e.dimsRAS)throw new Error("dimsRAS not defined");e.oblique_angle=zv(e.matRAS);const t=kn(e,[0,0,0],e.matRAS),n=kn(e,[1/e.pixDimsRAS[1],0,0],e.matRAS),r=kn(e,[0,1/e.pixDimsRAS[2],0],e.matRAS),i=kn(e,[0,0,1/e.pixDimsRAS[3]],e.matRAS);Pe(n,n,t),Pe(r,r,t),Pe(i,i,t);const s=en(n[0],n[1],n[2],0,r[0],r[1],r[2],0,i[0],i[1],i[2],0,0,0,0,1);e.obliqueRAS=Qe(s);const o=Math.abs(90-tu(n,r)*(180/Math.PI)),a=Math.abs(90-tu(n,i)*(180/Math.PI)),l=Math.abs(90-tu(r,i)*(180/Math.PI));e.maxShearDeg=Math.max(Math.max(o,a),l),e.maxShearDeg>.1&&k.warn("Warning: voxels are rhomboidal, maximum shear is %f degrees.",e.maxShearDeg);const c=Le(e.dimsRAS[1],e.dimsRAS[2],e.dimsRAS[3],1),u=Qe(e.matRAS);Ot(u,u);const d=Le(-.5,-.5,-.5,0);Pi(u,u,q(d[0],d[1],d[2])),u[0]*=c[0],u[1]*=c[0],u[2]*=c[0],u[4]*=c[1],u[5]*=c[1],u[6]*=c[1],u[8]*=c[2],u[9]*=c[2],u[10]*=c[2],e.frac2mm=Qe(u);const h=e.pixDimsRAS[1],f=e.pixDimsRAS[2],p=e.pixDimsRAS[3],g=Qe(u);g[0]=h*c[0],g[1]=0,g[2]=0,g[4]=0,g[5]=f*c[1],g[6]=0,g[8]=0,g[9]=0,g[10]=p*c[2];const v=Ov(e,[0,0,0],!0);g[12]=(-v[0]-.5)*h,g[13]=(-v[1]-.5)*f,g[14]=(-v[2]-.5)*p,e.frac2mmOrtho=Qe(g),e.extentsMinOrtho=[g[12],g[13],g[14]],e.extentsMaxOrtho=[g[0]+g[12],g[5]+g[13],g[10]+g[14]],e.mm2ortho=ge(),zt(e.mm2ortho,s)}function L8(e){if(!e.hdr)throw new Error("hdr not set");const t=e.hdr.affine,n=e.hdr,r=ir(Math.abs(t[0][0]),Math.abs(t[0][1]),Math.abs(t[0][2]),Math.abs(t[1][0]),Math.abs(t[1][1]),Math.abs(t[1][2]),Math.abs(t[2][0]),Math.abs(t[2][1]),Math.abs(t[2][2])),i=[1,1,1];r[3]>r[0]&&(i[0]=2),r[6]>r[0]&&r[6]>r[3]&&(i[0]=3),i[1]=1,i[0]===1?r[4]>r[7]?i[1]=2:i[1]=3:i[0]===2?r[1]>r[7]?i[1]=1:i[1]=3:r[1]>r[4]?i[1]=1:i[1]=2,i[2]=6-i[1]-i[0];let s=[1,2,3];s[i[0]-1]=1,s[i[1]-1]=2,s[i[2]-1]=3;let o=en(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],0,0,0,1);e.mm000=kn(e,[-.5,-.5,-.5],o),e.mm100=kn(e,[n.dims[1]-.5,-.5,-.5],o),e.mm010=kn(e,[-.5,n.dims[2]-.5,-.5],o),e.mm001=kn(e,[-.5,-.5,n.dims[3]-.5],o);const a=ge();tS(a,o);for(let v=0;v<3;v++)for(let m=0;m<3;m++)a[v*4+m]=o[v*4+s[m]-1];const l=[0,0,0];a[0]<0&&(l[0]=1),a[5]<0&&(l[1]=1),a[10]<0&&(l[2]=1),e.dimsRAS=[n.dims[0],n.dims[s[0]],n.dims[s[1]],n.dims[s[2]]],e.pixDimsRAS=[n.pixDims[0],n.pixDims[s[0]],n.pixDims[s[1]],n.pixDims[s[2]]],e.permRAS=s.slice();for(let v=0;v<3;v++)l[v]===1&&(e.permRAS[v]=-e.permRAS[v]);if(Ud(s,[1,2,3])&&Ud(l,[0,0,0])){e.toRAS=ge(),e.matRAS=Qe(o),Ld(e),e.img2RASstep=[1,e.dimsRAS[1],e.dimsRAS[1]*e.dimsRAS[2]],e.img2RASstart=[0,0,0];return}$A(o),o[0+0*4]=1-l[0]*2,o[1+1*4]=1-l[1]*2,o[2+2*4]=1-l[2]*2,o[3+0*4]=(n.dims[s[0]]-1)*l[0],o[3+1*4]=(n.dims[s[1]]-1)*l[1],o[3+2*4]=(n.dims[s[2]]-1)*l[2];const c=ge();zt(c,o),Gr(c,c,a),e.matRAS=Qe(c),o=en(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),o[s[0]-1+0*4]=-l[0]*2+1,o[s[1]-1+1*4]=-l[1]*2+1,o[s[2]-1+2*4]=-l[2]*2+1,o[3+0*4]=l[0],o[3+1*4]=l[1],o[3+2*4]=l[2],e.toRAS=Qe(o),o[3]=0,o[7]=0,o[11]=0,o[12]=0,(e.permRAS[0]===-1||e.permRAS[1]===-1||e.permRAS[2]===-1)&&(o[12]=n.dims[1]-1),o[13]=0,(e.permRAS[0]===-2||e.permRAS[1]===-2||e.permRAS[2]===-2)&&(o[13]=n.dims[2]-1),o[14]=0,(e.permRAS[0]===-3||e.permRAS[1]===-3||e.permRAS[2]===-3)&&(o[14]=n.dims[3]-1),e.toRASvox=Qe(o),k.debug(e.hdr.dims),k.debug(e.dimsRAS);const u=e.hdr;s=e.permRAS;const d=[Math.abs(s[0]),Math.abs(s[1]),Math.abs(s[2])],h=[u.dims[d[0]],u.dims[d[1]],u.dims[d[2]]],f=[1,u.dims[1],u.dims[1]*u.dims[2]],p=[f[d[0]-1],f[d[1]-1],f[d[2]-1]],g=[0,0,0];for(let v=0;v<3;v++)s[v]<0&&(g[v]=p[v]*(h[v]-1),p[v]=-p[v]);e.img2RASstep=p,e.img2RASstart=g,Ld(e)}async function O8(e,t=1){if(!e.permRAS)throw new Error("permRAS undefined");if(!e.hdr)throw new Error("hdr undefined");const n=Fl({...e.hdr,vox_offset:352},!1),r=await Po(n.buffer,!0);t===1?(r.dims[0]=3,r.dims[4]=1):t>1&&(r.dims[0]=4,r.dims[4]=t);const i=e.permRAS.slice();if(i[0]===1&&i[1]===2&&i[2]===3)return r;r.qform_code=0;for(let o=1;o<4;o++)r.dims[o]=e.dimsRAS[o];for(let o=0;o<e.pixDimsRAS.length;o++)r.pixDims[o]=e.pixDimsRAS[o];let s=0;for(let o=0;o<4;o++)for(let a=0;a<4;a++)r.affine[o][a]=e.matRAS[s],s++;return r}function z8(e,t=0){if(!e.permRAS)throw new Error("permRAS undefined");if(!e.img)throw new Error("img undefined");if(!e.hdr)throw new Error("hdr undefined");const n=e.permRAS.slice();if(n[0]===1&&n[1]===2&&n[2]===3)return e.img;const r=e.hdr,i=r.dims[1]*r.dims[2]*r.dims[3];let s=t*i;(s+i>e.img.length||s<0)&&(s=0,k.warn(`img2RAS nVolume (${t}) out of bounds (${t}+1)${i} > ${e.img.length}`));const o=e.img.slice(0,i),a=[Math.abs(n[0]),Math.abs(n[1]),Math.abs(n[2])],l=[r.dims[a[0]],r.dims[a[1]],r.dims[a[2]]],c=[1,r.dims[1],r.dims[1]*r.dims[2]],u=[c[a[0]-1],c[a[1]-1],c[a[2]-1]],d=[0,0,0];for(let f=0;f<3;f++)n[f]<0&&(d[f]=u[f]*(l[f]-1),u[f]=-u[f]);let h=0;for(let f=0;f<l[2];f++){const p=d[2]+f*u[2];for(let g=0;g<l[1];g++){const v=d[1]+g*u[1];for(let m=0;m<l[0];m++){const A=d[0]+m*u[0];o[h]=e.img[A+v+p+s],h++}}}return o}function jv(e,t){t.length!==e.nVox3D*3&&k.warn("float32V1asRGBA() expects "+e.nVox3D*3+"voxels, got ",+t.length);const n=t.slice();e.hdr.datatypeCode=2304,e.nFrame4D=1;for(let l=4;l<7;l++)e.hdr.dims[l]=1;e.hdr.dims[0]=3;const r=new Uint8Array(e.nVox3D*4);let i=1;for(let l=0;l<e.nVox3D*3;l++)isNaN(n[l])||(i=Math.max(i,Math.abs(n[l])));const s=255/i,o=e.nVox3D*2;let a=0;for(let l=0;l<e.nVox3D;l++){const c=n[l],u=n[l+e.nVox3D],d=n[l+o];r[a]=Math.abs(c*s),r[a+1]=Math.abs(u*s),r[a+2]=Math.abs(d*s);const h=+(c>0)*1,f=+(u>0)*2,p=+(d>0)*4;let g=248+h+f+p;Math.abs(c)+Math.abs(u)+Math.abs(d)<.1&&(g=0),r[a+3]=g,a+=4}return r}function j8(e,t=!1,n=!1,r=!1){let i=e.v1;if(!i&&e.nFrame4D===3&&e.img.constructor===Float32Array&&(i=e.img.slice()),!i)return k.warn("Image does not have V1 data"),!1;if(t)for(let s=0;s<e.nVox3D;s++)i[s]=-i[s];if(n)for(let s=e.nVox3D;s<2*e.nVox3D;s++)i[s]=-i[s];if(r)for(let s=2*e.nVox3D;s<3*e.nVox3D;s++)i[s]=-i[s];return e.img=jv(e,i),!0}function Es(e,t){if(!e.hdr)throw new Error("hdr undefined");return e.hdr.scl_slope===0&&(e.hdr.scl_slope=1),t*e.hdr.scl_slope+e.hdr.scl_inter}function G8(e,t){if(!e.hdr)throw new Error("hdr undefined");return e.hdr.scl_slope===0&&(e.hdr.scl_slope=1),(t-e.hdr.scl_inter)/e.hdr.scl_slope}function gf(e,t=Number.POSITIVE_INFINITY,n=!0){if(!e.hdr)throw new Error("hdr undefined");if(!e.img)throw new Error("img undefined");let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=0,o=0,a=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];const l=Math.floor(e.img.length/a);t>=l&&(t=e.frame4D),t=Math.min(t,l-1);const c=t*a;let u=[];if(n){const B=[Math.floor(.25*e.hdr.dims[1]),Math.floor(.25*e.hdr.dims[2]),Math.floor(.25*e.hdr.dims[3])],P=[e.hdr.dims[1]-2*B[0],e.hdr.dims[2]-2*B[1],e.hdr.dims[3]-2*B[2]],z=[P[0]+B[0],P[1]+B[1],P[2]+B[2]];a=P[0]*P[1]*P[2],u=new e.img.constructor(a);let U=-1,G=0;for(let L=0;L<e.hdr.dims[3];L++)for(let Y=0;Y<e.hdr.dims[2];Y++)for(let j=0;j<e.hdr.dims[1];j++)U++,!(j<B[0]||Y<B[1]||L<B[2])&&(j>=z[0]||Y>=z[1]||L>=z[2]||(u[G]=e.img[U+c],G++))}else{u=new e.img.constructor(a);for(let M=0;M<a;M++)u[M]=e.img[M+c]}const d=u.constructor!==Float64Array&&u.constructor!==Float32Array&&e.ignoreZeroVoxels;if(d)for(let M=0;M<a;M++)r=Math.min(u[M],r),i=Math.max(u[M],i),u[M]===0&&s++;else for(let M=0;M<a;M++){if(isNaN(u[M])){o++;continue}u[M]===0&&(s++,e.ignoreZeroVoxels)||(r=Math.min(u[M],r),i=Math.max(u[M],i))}e.ignoreZeroVoxels&&r===i&&s>0&&(r=0);const h=Es(e,r),f=Es(e,i),p=Ee.colormapFromKey(e._colormap);let g=0,v=0;if(p.min!==void 0&&(g=p.min),p.max!==void 0&&(v=p.max),g===v&&e.trustCalMinMax&&isFinite(e.hdr.cal_min)&&isFinite(e.hdr.cal_max)&&e.hdr.cal_max>e.hdr.cal_min)return e.cal_min=e.hdr.cal_min,e.cal_max=e.hdr.cal_max,e.robust_min=e.cal_min,e.robust_max=e.cal_max,e.global_min=h,e.global_max=f,[e.hdr.cal_min,e.hdr.cal_max,e.hdr.cal_min,e.hdr.cal_max];if(g!==v)return e.cal_min=g,e.cal_max=v,e.robust_min=e.cal_min,e.robust_max=e.cal_max,[g,v,g,v];const m=100*s/(a-0);let A=!1;m>60&&!e.ignoreZeroVoxels&&(k.warn(`${Math.round(m)}% of voxels are zero: ignoring zeros for cal_max`),A=!0,e.ignoreZeroVoxels=!0),e.ignoreZeroVoxels||(s=0),s+=o;const x=Math.round((a-0-s)*e.percentileFrac);if(x<1||r===i)return n?gf(e,t,!1):(k.debug("no variability in image intensity?"),e.cal_min=h,e.cal_max=f,e.robust_min=e.cal_min,e.robust_max=e.cal_max,e.global_min=h,e.global_max=f,[h,f,h,f]);const w=1001,b=(w-1)/(i-r),y=new Array(w);for(let M=0;M<w;M++)y[M]=0;if(d)for(let M=0;M<a;M++)y[Math.round((u[M]-r)*b)]++;else if(e.ignoreZeroVoxels)for(let M=0;M<a;M++)u[M]!==0&&(isNaN(u[M])||y[Math.round((u[M]-r)*b)]++);else for(let M=0;M<a;M++)isNaN(u[M])||y[Math.round((u[M]-r)*b)]++;let C=0,S=0;for(;C<x;)C+=y[S],S++;S--,C=0;let E=w;for(;C<x;)E--,C+=y[E];if(S===E){let M=-1;for(;M!==0;)S>0&&(S--,y[S]>0&&(M=0)),M!==0&&E<w-1&&(E++,y[E]>0&&(M=0)),S===0&&E===w-1&&(M=0)}let T=Es(e,S/b+r),F=Es(e,E/b+r);return e.hdr.cal_min<e.hdr.cal_max&&e.hdr.cal_min>=h&&e.hdr.cal_max<=f&&(T=e.hdr.cal_min,F=e.hdr.cal_max),A&&(T=Math.min(T,0)),e.cal_min=T,e.cal_max=F,e.hdr.intent_code===1002&&(e.cal_min=h,e.cal_max=f),e.robust_min=e.cal_min,e.robust_max=e.cal_max,e.global_min=h,e.global_max=f,[T,F,h,f]}function au(e,t){e._colormap=t,gf(e),e.onColormapChange&&e.onColormapChange(e)}function Y8(e,t){e.colormapLabel=Ee.makeLabelLut(t)}async function W8(e,t){e.colormapLabel=await Ee.makeLabelLutFromUrl(t)}function c1(e){return e._colormap}function H8(e){return e._opacity}function X8(e,t){e._opacity=t,e.onOpacityChange&&e.onOpacityChange(e)}async function K8(e,t={}){if(e==="")throw Error("url must not be empty");let r=/^(?:[a-z+]+:)?\/\//i.test(e)?e:new URL(e,window.location.href);/(?:.([^.]+))?$/.exec(r.pathname)||(r=new URL("niivue-manifest.txt",e));let o=await fetch(r,{headers:t});if(!o.ok)throw Error(o.statusText);const l=(await o.text()).split(`
`),u=/(.*\/).*/.exec(r)[0],d=[];for(const h of l){const f=new URL(h,u);if(o=await fetch(f,{headers:t}),!o.ok)throw Error(o.statusText);const p=await o.arrayBuffer();d.push({name:h,data:p})}return d}async function ja(e,t){const n=e.getReader(),r=new VS,i=[];let s=0,o=!1,a,l;const c=new Promise((d,h)=>{a=d,l=h});function u(){const d=new Uint8Array(s);let h=0;for(const f of i)d.set(f,h),h+=f.length;a(d)}return r.ondata=d=>{i.push(d),s+=d.length,s>=t&&(o=!0,n.cancel().catch(()=>{}),u())},(async()=>{try{for(;!o;){const{done:d,value:h}=await n.read();if(d){o=!0,r.push(new Uint8Array,!0);return}r.push(h,!1)}}catch(d){l(d)}})().catch(()=>{}),c}function _8(e){const n=new URL(e).searchParams.get("response-content-disposition");if(n){const r=n.match(/filename\*?=(?:UTF-8'')?"?([^";]+)"?/);if(r)return decodeURIComponent(r[1])}return e.split("/").pop().split("?")[0]}async function Gv(e="",t={},n=NaN){if(isNaN(n))return null;const r=await fetch(e,{headers:t,cache:"force-cache"});let i=352,s=await ja(r.body,i);const o=new DataView(s.buffer,s.byteOffset,s.byteLength),a=o.getUint16(0,!0),l=a===348;if(!l&&!(a===23553)||(s.length>111&&(i=o.getFloat32(108,l)),i>s.length&&(s=await ja(r.body,i)),!(s[0]===92&&s[1]===1||s[1]===92&&s[0]===1)))return null;const d=await Po(s.buffer);if(!d)throw new Error("Could not read NIfTI header");const h=d.numBitsPerVoxel/8,f=[1,2,3].reduce((x,w)=>x*(d.dims[w]>1?d.dims[w]:1),1),p=[4,5,6].reduce((x,w)=>x*(d.dims[w]>1?d.dims[w]:1),1),g=Math.max(Math.min(n,p),1),v=d.vox_offset+g*f*h;if(g===p)return null;const m=await fetch(e,{headers:t,cache:"force-cache"});return(await ja(m.body,v)).buffer.slice(0,v)}async function Q8(e="",t={},n=NaN){if(isNaN(n))return null;const i=(await fetch(e,{headers:t,cache:"force-cache"})).body.getReader(),{value:s,done:o}=await i.read();let a=s;if(o||!a||a.length<2)throw new Error("Not enough data to determine compression");const l=new DataView(a.buffer,a.byteOffset,a.byteLength),c=l.getUint16(0,!0);if(c===35615)return await i.cancel(),Gv(e,t,n);const d=c===348;if(!d&&!(c===23553))return await i.cancel(),null;let f=352;for(a.length>111&&(f=l.getFloat32(108,d));a.length<f;){let C=function(T,F){const M=new Uint8Array(T.length+F.length);return M.set(T,0),M.set(F,T.length),M};const{value:S,done:E}=await i.read();if(E||!S)break;a=C(a,S)}const p=await Po(a.buffer);if(!p)throw new Error("Could not read NIfTI header");const g=p.numBitsPerVoxel/8,v=[1,2,3].reduce((C,S)=>C*(p.dims[S]>1?p.dims[S]:1),1),m=[4,5,6].reduce((C,S)=>C*(p.dims[S]>1?p.dims[S]:1),1),A=Math.max(Math.min(n,m),1),x=p.vox_offset+A*v*g,w=new Uint8Array(x),b=Math.min(a.length,x);w.set(a.subarray(0,b),0);let y=b;for(;y<x;){const{value:C,done:S}=await i.read();if(S||!C)return await i.cancel(),null;const E=Math.min(C.length,x-y);w.set(C.subarray(0,E),y),y+=E}return await i.cancel(),w.buffer}async function q8(e,t=NaN){let n=e.stream();if(!isNaN(t)){let u=0;const d=new TransformStream({transform(h,f){if(u>=t){f.terminate();return}const p=t-u;h.length>p?(f.enqueue(h.slice(0,p)),f.terminate()):f.enqueue(h),u+=h.length}});n=n.pipeThrough(d)}const r=await pf(n),i=[],s=r.getReader();for(;;){const{done:u,value:d}=await s.read();if(u)break;i.push(d)}const o=i.reduce((u,d)=>u+d.length,0),a=new ArrayBuffer(o),l=new Uint8Array(a);let c=0;for(const u of i)l.set(u,c),c+=u.length;return a}function Z8(e){const t=window.atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function lu(e){const t=e.match(/\.([^.]+)(?:\.gz|\.bz2|\.xz)?$/);return t?t[1]:""}function J8(e){if(!e.hdr)throw new Error("hdr undefined");const t=e.id,n=e.hdr.datatypeCode,r=e.hdr.dims,i=r[1],s=r[2],o=r[3],a=Math.max(1,r[4]),l=e.hdr.pixDims,c=l[1],u=l[2],d=l[3],h=l[4],f=Math.floor(e.hdr.numBitsPerVoxel/8);return{id:t,datatypeCode:n,nx:i,ny:s,nz:o,nt:a,dx:c,dy:u,dz:d,dt:h,bpv:f}}function $8(e){return Oa("","",e.name,e._colormap,e.opacity,e.hdr.cal_min,e.hdr.cal_max,e.trustCalMinMax,e.percentileFrac,e.ignoreZeroVoxels,e.useQFormNotSForm,e.colormapNegative,e.frame4D,e.imageType,e.colormapType)}function eD(e,t){e.hdr.cal_min=t.cal_min,e.hdr.cal_max=t.cal_max,Object.assign(e,t)}function tD(e,t){if(!(t.datatypeCode===128||t.datatypeCode===2304||t.littleEndian===Rd()||t.numBitsPerVoxel<=8)){if(t.numBitsPerVoxel===16){const n=new Uint16Array(e);for(let r=0;r<n.length;r++){const i=n[r];n[r]=((i&255)<<8|i>>8&255)<<16>>16}}else if(t.numBitsPerVoxel===32){const n=new Uint32Array(e);for(let r=0;r<n.length;r++){const i=n[r];n[r]=(i&255)<<24|(i&65280)<<8|i>>8&65280|i>>24&255}}else if(t.numBitsPerVoxel===64){const n=t.numBitsPerVoxel/8,r=new Uint8Array(e);for(let i=0;i<r.length;i+=n){let s=n-1;for(let o=0;o<s;o++){const a=r[i+o];r[i+o]=r[i+s],r[i+s]=a,s--}}}}}function nD(e,t){switch(t.datatypeCode){case 2:return{img:new Uint8Array(e)};case 4:return{img:new Int16Array(e)};case 16:return{img:new Float32Array(e)};case 64:return{img:new Float64Array(e)};case 128:return{img:new Uint8Array(e)};case 512:return{img:new Uint16Array(e)};case 2304:return{img:new Uint8Array(e)};case 256:{const n=new Int8Array(e),r=n.length,i=new Int16Array(r);for(let s=0;s<r;s++)i[s]=n[s];return{img:i,updatedDatatypeCode:4,updatedNumBitsPerVoxel:16}}case 1:{const n=t.dims[1]*t.dims[2]*Math.max(1,t.dims[3])*Math.max(1,t.dims[4]),r=new Uint8Array(e),i=new Uint8Array(n),s=new Uint8Array(8);for(let a=0;a<8;a++)s[a]=Math.pow(2,a);let o=-1;for(let a=0;a<n;a++){const l=a%8;l===0&&o++,r[o]&s[l]&&(i[a]=1)}return{img:i,updatedDatatypeCode:2,updatedNumBitsPerVoxel:8}}case 768:{const n=new Uint32Array(e),r=n.length,i=new Float64Array(r);for(let s=0;s<r-1;s++)i[s]=n[s];return{img:i,updatedDatatypeCode:64}}case 8:{const n=new Int32Array(e),r=n.length,i=new Float64Array(r);for(let s=0;s<r-1;s++)i[s]=n[s];return{img:i,updatedDatatypeCode:64}}case 1024:{const n=new BigInt64Array(e),r=n.length,i=new Float64Array(r);for(let s=0;s<r-1;s++)i[s]=Number(n[s]);return{img:i,updatedDatatypeCode:64}}case 32:{const n=new Float32Array(e),r=Math.floor(n.length/2),i=new Float32Array(r),s=new Float32Array(r);let o=0;for(let a=0;a<r-1;a++)s[a]=n[o],i[a]=n[o+1],o+=2;return{img:s,imaginary:i,updatedDatatypeCode:16}}default:throw new Error("datatype "+t.datatypeCode+" not supported")}}function rD(e){(e.pixDims[1]===0||e.pixDims[2]===0||e.pixDims[3]===0)&&k.error("pixDims not plausible",e)}function iD(e){(isNaN(e.scl_slope)||e.scl_slope===0)&&(e.scl_slope=1),isNaN(e.scl_inter)&&(e.scl_inter=0)}function sD(e,t){const n=Dv(e.affine);if(!t&&n&&e.qform_code<=e.sform_code)return;k.debug("spatial transform based on QForm");const r=e.quatern_b,i=e.quatern_c,s=e.quatern_d,o=Math.sqrt(1-(Math.pow(r,2)+Math.pow(i,2)+Math.pow(s,2))),a=e.pixDims[0]===0?1:e.pixDims[0],l=[[o*o+r*r-i*i-s*s,2*r*i-2*o*s,2*r*s+2*o*i],[2*r*i+2*o*s,o*o+i*i-r*r-s*s,2*i*s-2*o*r],[2*r*s-2*o*i,2*i*s+2*o*r,o*o+s*s-i*i-r*r]],c=e.affine;for(let u=0;u<3;u+=1)for(let d=0;d<3;d+=1)c[u][d]=l[u][d]*e.pixDims[d+1],d===2&&(c[u][d]*=a);c[0][3]=e.qoffset_x,c[1][3]=e.qoffset_y,c[2][3]=e.qoffset_z,e.affine=c}function oD(e){if(Dv(e.affine))return;k.debug("Defective NIfTI: spatial transform does not make sense");let t=e.pixDims[1],n=e.pixDims[2],r=e.pixDims[3];(isNaN(t)||t===0)&&(t=1),(isNaN(n)||n===0)&&(n=1),(isNaN(r)||r===0)&&(r=1),e.pixDims[1]=t,e.pixDims[2]=n,e.pixDims[3]=r;const i=[[t,0,0,0],[0,n,0,0],[0,0,r,0],[0,0,0,1]];e.affine=i}function aD(e,t){rD(e),iD(e),sD(e,t),oD(e)}async function lD(e){const t=new URL(e).searchParams,n=t.get("z"),r=t.get("y"),i=t.get("x"),s=n?Os(parseInt(n),parseInt(n)+1):null,o=r?Os(parseInt(r),parseInt(r)+1):null,a=i?Os(parseInt(i),parseInt(i)+1):null,l=e.split("?")[0],c=new qS(l),u=gE(c);let d;try{d=await sr(u.resolve(e),{kind:"array"})}catch{d=await sr(u,{kind:"array"})}let h;if(d.shape.length===4){const w=d.shape[2],b=d.shape[1],y=d.shape[0];s&&s[0]>=w&&(s[0]=w-1),o&&o[0]>=b&&(o[0]=b-1),a&&a[0]>=y&&(a[0]=y-1),h=await r1(d,[a,o,s,null])}else h=await r1(d,[a,o,s]);const f=h.data,[p,g,v,m]=h.shape;return{dataBuffer:f,zarrData:{data:f,width:g,height:p,depth:v,channels:m}}}async function cD(e,t={}){const n=await fetch(e,{headers:t});if(!n.ok)throw Error(n.statusText);if(!n.body)throw new Error("No readable stream available");const r=await pf(n.body),i=[],s=r.getReader();for(;;){const{done:u,value:d}=await s.read();if(u)break;i.push(d)}const o=i.reduce((u,d)=>u+d.length,0),a=new ArrayBuffer(o),l=new Uint8Array(a);let c=0;for(const u of i)l.set(u,c),c+=u.length;return a}function uD(e,t,n){return n!==""?n:t.toUpperCase()==="HEAD"?e.substring(0,e.lastIndexOf("HEAD"))+"BRIK":t.toUpperCase()==="HDR"?e.substring(0,e.lastIndexOf("HDR"))+"IMG":null}async function dD(e,t={}){try{let n=await fetch(e,{headers:t});if(n.status===404&&(e.includes("BRIK")||e.includes("IMG"))&&(n=await fetch(`${e}.gz`,{headers:t})),!n.ok||!n.body)return null;const r=await pf(n.body),i=[],s=r.getReader();for(;;){const{done:u,value:d}=await s.read();if(u)break;i.push(d)}const o=i.reduce((u,d)=>u+d.length,0),a=new ArrayBuffer(o),l=new Uint8Array(a);let c=0;for(const u of i)l.set(u,c),c+=u.length;return a}catch(n){return console.error("Error loading paired image data:",n),null}}var mt=class Ga{constructor(t=null,n="",r="gray",i=1,s=null,o=NaN,a=NaN,l=!0,c=.02,u=!1,d=!1,h="",f=0,p=de.UNKNOWN,g=NaN,v=NaN,m=!0,A=null,x=0){R(this,"name"),R(this,"id"),R(this,"url"),R(this,"headers"),R(this,"_colormap"),R(this,"_opacity"),R(this,"percentileFrac"),R(this,"ignoreZeroVoxels"),R(this,"trustCalMinMax"),R(this,"colormapNegative"),R(this,"colormapLabel"),R(this,"colormapInvert"),R(this,"nFrame4D"),R(this,"frame4D"),R(this,"nTotalFrame4D"),R(this,"cal_minNeg"),R(this,"cal_maxNeg"),R(this,"colorbarVisible",!0),R(this,"modulationImage",null),R(this,"modulateAlpha",0),R(this,"series",[]),R(this,"nVox3D"),R(this,"oblique_angle"),R(this,"maxShearDeg"),R(this,"useQFormNotSForm"),R(this,"colormapType"),R(this,"pixDims"),R(this,"matRAS"),R(this,"pixDimsRAS"),R(this,"obliqueRAS"),R(this,"dimsRAS"),R(this,"permRAS"),R(this,"img2RASstep"),R(this,"img2RASstart"),R(this,"toRAS"),R(this,"toRASvox"),R(this,"frac2mm"),R(this,"frac2mmOrtho"),R(this,"extentsMinOrtho"),R(this,"extentsMaxOrtho"),R(this,"mm2ortho"),R(this,"hdr",null),R(this,"extensions"),R(this,"imageType"),R(this,"img"),R(this,"imaginary"),R(this,"v1"),R(this,"fileObject"),R(this,"dims"),R(this,"onColormapChange",()=>{}),R(this,"onOpacityChange",()=>{}),R(this,"mm000"),R(this,"mm100"),R(this,"mm010"),R(this,"mm001"),R(this,"cal_min"),R(this,"cal_max"),R(this,"robust_min"),R(this,"robust_max"),R(this,"global_min"),R(this,"global_max"),R(this,"urlImgData"),R(this,"isManifest"),R(this,"limitFrames4D"),this.init(t,n,r,i,s,o,a,l,c,u,d,h,f,p,g,v,m,A,x)}init(t=null,n="",r="",i=1,s=null,o=NaN,a=NaN,l=!0,c=.02,u=!1,d=!1,h="",f=0,p=de.UNKNOWN,g=NaN,v=NaN,m=!0,A=null,x=0,w=null){const b=r==="";if(b&&(r="gray"),this.name=n,this.imageType=p,this.id=bd(),this._colormap=r,this._opacity=i>1?1:i,this.percentileFrac=c,this.ignoreZeroVoxels=u,this.trustCalMinMax=l,this.colormapNegative=h,this.colormapLabel=A,this.frame4D=f,this.cal_minNeg=g,this.cal_maxNeg=v,this.colorbarVisible=m,this.colormapType=x,this.useQFormNotSForm=d,!t)return;if(b&&this.hdr&&this.hdr.intent_code===1002&&(r="random",this._colormap=r),this.hdr&&typeof this.hdr.magic=="number"&&(this.hdr.magic="n+1"),this.nFrame4D=1,this.hdr)for(let E=4;E<7;E++)this.hdr.dims[E]>1&&(this.nFrame4D*=this.hdr.dims[E]);if(this.frame4D=Math.min(this.frame4D,this.nFrame4D-1),this.nTotalFrame4D=this.nFrame4D,!this.hdr||!w)return;this.hdr.dims[1]===0&&this.hdr.dims[2]===0&&this.hdr.dims[3]===0&&k.warn("Invalid volume: First three dimensions are all zero"),this.hdr.dims[1]=Math.max(this.hdr.dims[1],1),this.hdr.dims[2]=Math.max(this.hdr.dims[2],1),this.hdr.dims[3]=Math.max(this.hdr.dims[3],1),this.nVox3D=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const y=this.nVox3D*(this.hdr.numBitsPerVoxel/8),C=w.byteLength/y;C!==this.nFrame4D&&(C>0&&C*y===w.byteLength?k.debug("Loading the first "+C+" of "+this.nFrame4D+" volumes"):k.warn("This header does not match voxel data",this.hdr,w.byteLength),this.nFrame4D=C),(this.hdr.intent_code===1007||this.hdr.intent_code===2003)&&this.nFrame4D===3&&this.hdr.datatypeCode===16&&(w=this.float32V1asRGBA(new Float32Array(w)).buffer),aD(this.hdr,d),tD(w,this.hdr);const S=nD(w,this.hdr);this.img=S.img,S.imaginary&&(this.imaginary=S.imaginary),S.updatedDatatypeCode!==void 0&&(this.hdr.datatypeCode=S.updatedDatatypeCode),S.updatedNumBitsPerVoxel!==void 0&&(this.hdr.numBitsPerVoxel=S.updatedNumBitsPerVoxel),this.calculateRAS(),isNaN(o)||(this.hdr.cal_min=o),isNaN(a)||(this.hdr.cal_max=a),this.calMinMax()}static async new(t=null,n="",r="",i=1,s=null,o=NaN,a=NaN,l=!0,c=.02,u=!1,d=!1,h="",f=0,p=de.UNKNOWN,g=NaN,v=NaN,m=!0,A=null,x=0,w){const b=new Ga,y=/(?:\.([^.]+))?$/;let C=y.exec(n)[1]||"";C=C.toUpperCase(),C==="GZ"&&(C=y.exec(n.slice(0,-3))[1],C=C.toUpperCase());let S=null;if(p===de.UNKNOWN&&(p=de.parse(C)),t instanceof ArrayBuffer&&t.byteLength>=2&&p===de.DCM){const E=new Uint8Array(t);(E[0]===92&&E[1]===1||E[1]===92&&E[0]===1)&&(p=de.NII)}switch(b.imageType=p,p){case de.DCM_FOLDER:case de.DCM_MANIFEST:case de.DCM:return;case de.FIB:[S,b.v1]=await Cs.readFIB(b,t);break;case de.MIH:case de.MIF:S=await Bd.readMIF(b,t,s);break;case de.NHDR:case de.NRRD:if(S=await Uv.readNrrd(b,t),S===null)throw new Error(`Failed to parse NHDR/NRRD file ${n}`);break;case de.MHD:case de.MHA:S=await kd.readMHA(b,t,s);break;case de.MGH:case de.MGZ:if(S=await Nv.readMgh(b,t,n),S===null)throw new Error(`Failed to parse MGH/MGZ file ${n}`);break;case de.SRC:S=await Cs.readSRC(b,t);break;case de.V:S=Nd.readECAT(b,t);break;case de.V16:S=bs.readV16(b,t);break;case de.VMR:S=bs.readVMR(b,t);break;case de.HEAD:S=await Pd.readHEAD(b,t,s);break;case de.BMP:S=await za.readBMP(b,t);break;case de.NPY:S=await Ss.readNPY(b,t);break;case de.NPZ:S=await Ss.readNPZ(b,t);break;case de.ZARR:S=await Vd.readZARR(b,t,w);break;case de.NII:if(S=await Vv.readNifti(b,t,s),S===null)throw new Error(`Failed to parse NIfTI file ${n}.`);break;default:throw new Error("Image type not supported")}return b.init(t,n,r,i,s,o,a,l,c,u,d,h,f,p,g,v,m,A,x,S),b}computeObliqueAngle(t){return zv(t)}float32V1asRGBA(t){return jv(this,t)}loadImgV1(t=!1,n=!1,r=!1){return j8(this,t,n,r)}calculateOblique(){Ld(this)}readECAT(t){return Nd.readECAT(this,t)}readV16(t){return bs.readV16(this,t)}async readNPY(t){return Ss.readNPY(this,t)}async readNPZ(t){return Ss.readNPZ(this,t)}async imageDataFromArrayBuffer(t){return za.imageDataFromArrayBuffer(t)}async readBMP(t){return za.readBMP(this,t)}async readZARR(t,n){return Vd.readZARR(this,t,n)}readVMR(t){return bs.readVMR(this,t)}async readFIB(t){return Cs.readFIB(this,t)}async readSRC(t){return Cs.readSRC(this,t)}async readHEAD(t,n){return Pd.readHEAD(this,t,n)}async readMHA(t,n){return kd.readMHA(this,t,n)}async readMIF(t,n){return Bd.readMIF(this,t,n)}calculateRAS(){L8(this)}async hdr2RAS(t=1){return O8(this,t)}img2RAS(t=0){return z8(this,t)}vox2mm(t,n){return kn(this,t,n)}mm2vox(t,n=!1){return Ov(this,t,n)}arrayEquals(t,n){return Ud(t,n)}setColormap(t){au(this,t)}setColormapLabel(t){Y8(this,t)}async setColormapLabelFromUrl(t){return W8(this,t)}get colormap(){return c1(this)}get colorMap(){return c1(this)}set colormap(t){au(this,t)}set colorMap(t){au(this,t)}get opacity(){return H8(this)}set opacity(t){X8(this,t)}calMinMax(t=Number.POSITIVE_INFINITY,n=!0){return gf(this,t,n)}intensityRaw2Scaled(t){return Es(this,t)}intensityScaled2Raw(t){return G8(this,t)}async saveToUint8Array(t,n=null){return Fv(this,t,n)}async saveToDisk(t="",n=null){return h8(this,t,n)}static async fetchDicomData(t,n={}){return K8(t,n)}static async readFirstDecompressedBytes(t,n){return ja(t,n)}static extractFilenameFromUrl(t){return _8(t)}static async loadInitialVolumesGz(t="",n={},r=NaN){return Gv(t,n,r)}static async loadInitialVolumes(t="",n={},r=NaN){return Q8(t,n,r)}static async loadFromUrl({url:t="",urlImgData:n="",headers:r={},name:i="",colormap:s="",opacity:o=1,cal_min:a=NaN,cal_max:l=NaN,trustCalMinMax:c=!0,percentileFrac:u=.02,ignoreZeroVoxels:d=!1,useQFormNotSForm:h=!1,colormapNegative:f="",frame4D:p=0,isManifest:g=!1,limitFrames4D:v=NaN,imageType:m=de.UNKNOWN,colorbarVisible:A=!0,buffer:x=new ArrayBuffer(0)}={}){if(t==="")throw Error("url must not be empty");let w=null,b=null,y=null;if(t instanceof Uint8Array&&(t=t.slice().buffer),x.byteLength>0&&(t=x),t instanceof ArrayBuffer)if(b=t,i!=="")t=i;else{const F=new Uint8Array(b);t=F[0]===31&&F[1]===139?"array.nii.gz":"array.nii"}let C="";if(i===""?C=lu(t):C=lu(i),m===de.UNKNOWN&&(m=de.parse(C)),m===de.UNKNOWN&&typeof t=="string"){const F=await fetch(t,{});if(F.redirected){const M=this.extractFilenameFromUrl(F.url);M&&M.length>0&&i===""&&(i=M,C=lu(i),m=de.parse(C))}}if(m===de.ZARR){const F=await lD(t);b=F.dataBuffer,y=F.zarrData}const S=m===de.DCM||de.NII;!b&&S&&(b=await this.loadInitialVolumes(t,r,v)),b||(g?(b=await Ga.fetchDicomData(t,r),m=de.DCM_MANIFEST):b=await cD(t,r));const E=uD(t,C.toUpperCase(),n);let T=null;if(E&&(T=await dD(E,r)),!b)throw new Error("Unable to load buffer properly from volume");if(!i){let F;try{F=new URL(t).pathname.split("/")}catch{F=t.split("/")}i=F.slice(-1)[0],i.indexOf("?")>-1&&(i=i.slice(0,i.indexOf("?")))}return w=await this.new(b,i,s,o,T,a,l,c,u,d,h,f,p,m,NaN,NaN,!0,null,0,y),w.url=t,w.colorbarVisible=A,w}static async readFileAsync(t,n=NaN){return q8(t,n)}static async loadFromFile({file:t,name:n="",colormap:r="",opacity:i=1,urlImgData:s=null,cal_min:o=NaN,cal_max:a=NaN,trustCalMinMax:l=!0,percentileFrac:c=.02,ignoreZeroVoxels:u=!1,useQFormNotSForm:d=!1,colormapNegative:h="",frame4D:f=0,limitFrames4D:p=NaN,imageType:g=de.UNKNOWN}){let v=null,m=[];try{if(Array.isArray(t))m=await Promise.all(t.map(x=>this.readFileAsync(x)));else{if(isNaN(p))m=await this.readFileAsync(t);else{const x=await this.readFileAsync(t,512),w=new Uint8Array(x);if(!(w[0]===92&&w[1]===1||w[1]===92&&w[0]===1))m=await this.readFileAsync(t);else{const y=await Po(x);if(!y)throw new Error("could not read nifti header");const C=y.numBitsPerVoxel/8,S=[1,2,3].reduce((M,B)=>M*(y.dims[B]>1?y.dims[B]:1),1),E=[4,5,6].reduce((M,B)=>M*(y.dims[B]>1?y.dims[B]:1),1),T=Math.max(Math.min(p,E),1),F=y.vox_offset+T*S*C;m=await this.readFileAsync(t,F)}}n=t.name}let A=null;s&&(A=await this.readFileAsync(s)),v=await this.new(m,n,r,i,A,o,a,l,c,u,d,h,f,g,NaN,NaN,!0,null,0,null),v.fileObject=t}catch(A){throw k.error(A),new Error("could not build NVImage")}if(v===null)throw new Error("could not build NVImage");return v}static createNiftiArray(t=[256,256,256],n=[1,1,1],r=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],i=2,s=new Uint8Array){return d8(t,n,r,i,s)}static createNiftiHeader(t=[256,256,256],n=[1,1,1],r=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],i=2){return Tv(t,n,r,i)}getVolumeData(t=[-1,0,0],n=[0,0,0],r="same"){return m8(this,t,n,r)}setVolumeData(t=[-1,0,0],n=[0,0,0],r=new Uint8Array){p8(this,t,n,r)}static async loadFromBase64({base64:t,name:n="",colormap:r="",opacity:i=1,cal_min:s=NaN,cal_max:o=NaN,trustCalMinMax:a=!0,percentileFrac:l=.02,ignoreZeroVoxels:c=!1,useQFormNotSForm:u=!1,colormapNegative:d="",frame4D:h=0,imageType:f=de.UNKNOWN,cal_minNeg:p=NaN,cal_maxNeg:g=NaN,colorbarVisible:v=!0,colormapLabel:m=null}){let A=null;try{const x=Z8(t);A=await this.new(x,n,r,i,null,s,o,a,l,c,u,d,h,f,p,g,v,m,0,null)}catch(x){k.debug(x)}if(A===null)throw new Error("could not load NVImage");return A}clone(){const t=new Ga;return t.id=bd(),t.hdr=Object.assign({},this.hdr),t.img=this.img.slice(),t.calculateRAS(),t.calMinMax(),t}zeroImage(){this.img.fill(0)}getImageMetadata(){return J8(this)}static zerosLike(t,n="same"){const r=t.clone();return r.zeroImage(),n==="uint8"&&(r.img=Uint8Array.from(r.img),r.hdr.datatypeCode=2,r.hdr.numBitsPerVoxel=8),n==="float32"&&(r.img=Float32Array.from(r.img),r.hdr.datatypeCode=16,r.hdr.numBitsPerVoxel=32),r}getValue(t,n,r,i=0,s=!1){return f8(this,t,n,r,i,s)}getValues(t,n,r,i=0,s=!1){return Rv(this,t,n,r,i,s)}applyOptionsUpdate(t){eD(this,t)}getImageOptions(){return $8(this)}toUint8Array(t=null){return Iv(this,t)}convertVox2Frac(t){return k8(this,t)}convertFrac2Vox(t){return B8(this,t)}convertFrac2MM(t,n=!1){return V8(this,t,n)}convertMM2Frac(t,n=!1){return U8(this,t,n)}},Pr=(e=>(e[e.NEVER=0]="NEVER",e[e.ALWAYS=1]="ALWAYS",e[e.AUTO=2]="AUTO",e))(Pr||{}),ao=(e=>(e[e.none=0]="none",e[e.contrast=1]="contrast",e[e.measurement=2]="measurement",e[e.pan=3]="pan",e[e.slicer3D=4]="slicer3D",e[e.callbackOnly=5]="callbackOnly",e[e.roiSelection=6]="roiSelection",e[e.angle=7]="angle",e[e.crosshair=8]="crosshair",e[e.windowing=9]="windowing",e))(ao||{}),dn={textHeight:-1,fontSizeScaling:.4,fontMinPx:13,colorbarHeight:.05,colorbarWidth:-1,showColorbarBorder:!0,crosshairWidth:1,crosshairWidthUnit:"voxels",crosshairGap:0,rulerWidth:4,show3Dcrosshair:!1,backColor:[0,0,0,1],crosshairColor:[1,0,0,1],fontColor:[.5,.5,.5,1],selectionBoxColor:[1,1,1,.5],clipPlaneColor:[.7,0,.7,.5],isClipPlanesCutaway:!1,paqdUniforms:[.3,.5,.5,1],rulerColor:[1,0,0,.8],colorbarMargin:.05,trustCalMinMax:!0,clipPlaneHotKey:"KeyC",cycleClipPlaneHotKey:"KeyP",viewModeHotKey:"KeyV",doubleTouchTimeout:500,longTouchTimeout:1e3,keyDebounceTime:50,isNearestInterpolation:!1,isResizeCanvas:!0,atlasOutline:0,atlasActiveIndex:0,isRuler:!1,isColorbar:!1,isOrientCube:!1,tileMargin:0,multiplanarPadPixels:0,multiplanarForceRender:!1,multiplanarEqualSize:!1,multiplanarShowRender:2,isRadiologicalConvention:!1,meshThicknessOn2D:1/0,dragMode:1,dragModePrimary:8,mouseEventConfig:void 0,touchEventConfig:void 0,yoke3Dto2DZoom:!1,isDepthPickMesh:!1,isCornerOrientationText:!1,isOrientationTextVisible:!0,showAllOrientationMarkers:!1,heroImageFraction:0,heroSliceType:4,sagittalNoseLeft:!1,isSliceMM:!1,isV1SliceShader:!1,forceDevicePixelRatio:0,logLevel:"info",loadingText:"loading ...",isForceMouseClickToVoxelCenters:!1,dragAndDropEnabled:!0,drawingEnabled:!1,penValue:1,penType:0,floodFillNeighbors:6,isFilledPen:!1,thumbnail:"",maxDrawUndoBitmaps:8,sliceType:3,meshXRay:0,isAntiAlias:null,limitFrames4D:NaN,isAdditiveBlend:!1,showLegend:!0,legendBackgroundColor:[.3,.3,.3,.5],legendTextColor:[1,1,1,1],multiplanarLayout:0,renderOverlayBlend:1,sliceMosaicString:"",centerMosaic:!1,penSize:1,interactive:!0,clickToSegment:!1,clickToSegmentRadius:3,clickToSegmentBright:!0,clickToSegmentAutoIntensity:!1,clickToSegmentIntensityMax:NaN,clickToSegmentIntensityMin:NaN,clickToSegmentPercent:0,clickToSegmentMaxDistanceMM:Number.POSITIVE_INFINITY,clickToSegmentIs2D:!1,selectionBoxLineThickness:4,selectionBoxIsOutline:!1,scrollRequiresFocus:!1,showMeasureUnits:!0,measureTextJustify:"center",measureTextColor:[1,0,0,1],measureLineColor:[1,0,0,1],measureTextHeight:.06,isAlphaClipDark:!1,gradientOrder:1,gradientOpacity:0,renderSilhouette:0,gradientAmount:0,invertScrollDirection:!1,is2DSliceShader:!1,bounds:null,showBoundsBorder:!1,boundsBorderColor:[1,1,1,1]},Ya={gamma:1,azimuth:110,elevation:10,crosshairPos:q(.5,.5,.5),clipPlanes:[[0,0,0,0]],clipPlaneDepthAziElevs:[[2,0,0]],volScaleMultiplier:1,pan2Dxyzmm:Le(0,0,0,1)};function hD(e,t){const n={};for(const r in e){const i=e[r],s=t[r],o=Array.isArray(i)&&Array.isArray(s);(o&&i.some((a,l)=>a!==s[l])||!o&&i!==s)&&(n[r]=i)}return n}var Wa=class Nr{constructor(){R(this,"data",{title:"Untitled document",imageOptionsArray:[],meshOptionsArray:[],opts:{...dn},previewImageDataURL:"",labels:[],encodedImageBlobs:[],encodedDrawingBlob:""}),R(this,"scene"),R(this,"volumes",[]),R(this,"meshDataObjects"),R(this,"meshes",[]),R(this,"drawBitmap",null),R(this,"imageOptionsMap",new Map),R(this,"meshOptionsMap",new Map),R(this,"completedMeasurements",[]),R(this,"completedAngles",[]),R(this,"_optsProxy",null),R(this,"_optsChangeCallback",null),this.scene={onAzimuthElevationChange:()=>{},onZoom3DChange:()=>{},sceneData:{...Ya,pan2Dxyzmm:Le(0,0,0,1),crosshairPos:q(.5,.5,.5)},get renderAzimuth(){return this.sceneData.azimuth},set renderAzimuth(t){this.sceneData.azimuth=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get renderElevation(){return this.sceneData.elevation},set renderElevation(t){this.sceneData.elevation=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get volScaleMultiplier(){return this.sceneData.volScaleMultiplier},set volScaleMultiplier(t){this.sceneData.volScaleMultiplier=t,this.onZoom3DChange(t)},get crosshairPos(){return this.sceneData.crosshairPos},set crosshairPos(t){this.sceneData.crosshairPos=t},get clipPlane(){return this.sceneData.clipPlanes[0]??[]},set clipPlane(t){this.sceneData.clipPlanes[0]=t},get clipPlanes(){return this.sceneData.clipPlanes},set clipPlanes(t){this.sceneData.clipPlanes=t},get clipPlaneDepthAziElevs(){return this.sceneData.clipPlaneDepthAziElevs},set clipPlaneDepthAziElevs(t){this.sceneData.clipPlaneDepthAziElevs=t},get pan2Dxyzmm(){return this.sceneData.pan2Dxyzmm},set pan2Dxyzmm(t){this.sceneData.pan2Dxyzmm=t},get gamma(){return this.sceneData.gamma},set gamma(t){this.sceneData.gamma=t}}}get title(){return this.data.title}get previewImageDataURL(){return this.data.previewImageDataURL}set previewImageDataURL(t){this.data.previewImageDataURL=t}set title(t){this.data.title=t}get imageOptionsArray(){return this.data.imageOptionsArray}get encodedImageBlobs(){return this.data.encodedImageBlobs}get encodedDrawingBlob(){return this.data.encodedDrawingBlob}get opts(){return this._optsProxy||this._createOptsProxy(),this._optsProxy}set opts(t){this.data.opts={...t},this._optsProxy=null}get labels(){return this.data.labels}set labels(t){this.data.labels=t}get customData(){return this.data.customData}set customData(t){this.data.customData=t}hasImage(t){return this.volumes.find(n=>n.id===t.id)!==void 0}hasImageFromUrl(t){return this.data.imageOptionsArray.find(n=>n.url===t)!==void 0}addImageOptions(t,n){if(!this.hasImage(t)&&!n.name)if(n.url){const i=/^(?:[a-z+]+:)?\/\//i.test(n.url)?new URL(n.url):new URL(n.url,window.location.href);n.name=i.pathname.split("/").pop(),n.name.toLowerCase().endsWith(".gz")&&(n.name=n.name.slice(0,-3)),n.name.toLowerCase().endsWith(".nii")||(n.name+=".nii")}else n.name="untitled.nii";n.imageType=de.NII,this.data.imageOptionsArray.push(n),this.imageOptionsMap.set(t.id,this.data.imageOptionsArray.length-1)}removeImage(t){if(this.imageOptionsMap.has(t.id)){const n=this.imageOptionsMap.get(t.id);this.data.imageOptionsArray.length>n&&this.data.imageOptionsArray.splice(n,1),this.imageOptionsMap.delete(t.id)}this.volumes=this.volumes.filter(n=>n.id!==t.id)}async fetchLinkedData(){var t;if(this.data.encodedImageBlobs=[],!!((t=this.imageOptionsArray)!=null&&t.length)){for(const n of this.imageOptionsArray)if(n.url)try{const r=await fetch(n.url);if(!r.ok){console.warn("Failed to fetch image:",n.url);continue}const i=await r.arrayBuffer(),s=new Uint8Array(i),o=ue.uint8tob64(s);this.data.encodedImageBlobs.push(o),console.info("fetch linked data fetched from ",n.url)}catch(r){console.warn(`Failed to fetch/encode image from ${n.url}:`,r)}}}getImageOptions(t){return this.imageOptionsMap.has(t.id)?this.data.imageOptionsArray[this.imageOptionsMap.get(t.id)]:null}json(t=!0,n=!0){const r={encodedImageBlobs:[],previewImageDataURL:this.data.previewImageDataURL,imageOptionsMap:new Map},i=[];r.sceneData={...this.scene.sceneData},delete r.sceneData.clipPlane,delete r.sceneData.clipPlaneDepthAziElev,delete r.sceneData.clipThick,delete r.sceneData.clipVolumeLow,delete r.sceneData.clipVolumeHigh,r.opts=hD(this.opts,dn),this.opts.meshThicknessOn2D===1/0&&(r.opts.meshThicknessOn2D="infinity"),this.opts.meshThicknessOn2D===1/0&&(r.opts.meshThicknessOn2D="infinity"),r.labels=[...this.data.labels];for(const o of r.labels)delete o.onClick;if(r.customData=this.customData,r.completedMeasurements=[...this.completedMeasurements],r.completedAngles=[...this.completedAngles],this.volumes.length)for(let o=0;o<this.volumes.length;o++){const a=this.volumes[o];let l=this.getImageOptions(a);if(l===null?(k.warn("no options found for image, using options from the volume directly"),l={name:(a==null?void 0:a.name)??"",colormap:(a==null?void 0:a._colormap)??"gray",opacity:(a==null?void 0:a._opacity)??1,pairedImgData:null,cal_min:(a==null?void 0:a.cal_min)??NaN,cal_max:(a==null?void 0:a.cal_max)??NaN,trustCalMinMax:(a==null?void 0:a.trustCalMinMax)??!0,percentileFrac:(a==null?void 0:a.percentileFrac)??.02,ignoreZeroVoxels:(a==null?void 0:a.ignoreZeroVoxels)??!1,useQFormNotSForm:(a==null?void 0:a.useQFormNotSForm)??!1,colormapNegative:(a==null?void 0:a.colormapNegative)??"",colormapLabel:(a==null?void 0:a.colormapLabel)??null,imageType:(a==null?void 0:a.imageType)??de.NII,frame4D:(a==null?void 0:a.frame4D)??0,limitFrames4D:(a==null?void 0:a.limitFrames4D)??NaN,url:(a==null?void 0:a.url)??"",urlImageData:(a==null?void 0:a.urlImgData)??"",alphaThreshold:!1,cal_minNeg:(a==null?void 0:a.cal_minNeg)??NaN,cal_maxNeg:(a==null?void 0:a.cal_maxNeg)??NaN,colorbarVisible:(a==null?void 0:a.colorbarVisible)??!0}):"imageType"in l||(l.imageType=de.NII),l.colormap=a.colormap,l.colormapLabel=a.colormapLabel,l.opacity=a.opacity,l.cal_max=a.cal_max??NaN,l.cal_min=a.cal_min??NaN,i.push(l),t){const c=ue.uint8tob64(a.toUint8Array());r.encodedImageBlobs.push(c)}r.imageOptionsMap.set(a.id,o)}r.imageOptionsArray=[...i];const s=[];r.connectomes=[];for(const o of this.meshes){if(o.type==="connectome"){r.connectomes.push(JSON.stringify(o.json()));continue}const a={pts:o.pts,tris:o.tris,name:o.name,rgba255:Uint8Array.from(o.rgba255),opacity:o.opacity,connectome:o.connectome,groups:o.groups,dpg:o.dpg,dps:o.dps,dpv:o.dpv,meshShaderIndex:o.meshShaderIndex,layers:o.layers.map(l=>({...l})),hasConnectome:o.hasConnectome,edgeColormap:o.edgeColormap,edgeColormapNegative:o.edgeColormapNegative,edgeMax:o.edgeMax,edgeMin:o.edgeMin,edges:o.edges&&Array.isArray(o.edges)?[...o.edges]:[],extentsMax:o.extentsMax,extentsMin:o.extentsMin,furthestVertexFromOrigin:o.furthestVertexFromOrigin,nodeColormap:o.nodeColormap,nodeColormapNegative:o.nodeColormapNegative,nodeMaxColor:o.nodeMaxColor,nodeMinColor:o.nodeMinColor,nodeScale:o.nodeScale,legendLineThickness:o.legendLineThickness,offsetPt0:o.offsetPt0,nodes:o.nodes};o.offsetPt0&&o.offsetPt0.length>0&&(a.offsetPt0=o.offsetPt0,a.fiberGroupColormap=o.fiberGroupColormap,a.fiberColor=o.fiberColor,a.fiberDither=o.fiberDither,a.fiberRadius=o.fiberRadius,a.colormap=o.colormap),s.push(a)}return r.meshesString=JSON.stringify(CS(s)),n&&this.drawBitmap&&(r.encodedDrawingBlob=ue.uint8tob64(this.drawBitmap)),r}async download(t,n,r={embedImages:!0}){const i=this.json(r.embedImages),s=JSON.stringify(i),o=n?"application/gzip":"application/json",a=n?await ue.compressStringToArrayBuffer(s):s;ue.download(a,t,o)}static deserializeMeshDataObjects(t){if(!t.data.meshesString||t.data.meshesString==="[]"){t.meshDataObjects=[];return}if(t.data.meshesString){t.meshDataObjects=xS(JSON.parse(t.data.meshesString));for(const n of t.meshDataObjects)for(const r of n.layers)"colorMap"in r&&(r.colormap=r.colorMap,delete r.colorMap),"colorMapNegative"in r&&(r.colormapNegative=r.colorMapNegative,delete r.colorMapNegative)}}static async loadFromUrl(t){const r=await(await fetch(t)).arrayBuffer();let i;if(ue.isArrayBufferCompressed(r)){const s=await ue.decompressArrayBuffer(r);i=JSON.parse(s)}else{const s=new TextDecoder;i=JSON.parse(s.decode(r))}return Nr.loadFromJSON(i)}static async loadFromFile(t){const n=await ue.readFileAsync(t);let r;ue.isArrayBufferCompressed(n)?r=await ue.decompressArrayBuffer(n):r=new TextDecoder().decode(n);const i=JSON.parse(r);return Nr.loadFromJSON(i)}static loadFromJSON(t){const n=new Nr;Object.assign(n.data,{...t,imageOptionsArray:t.imageOptionsArray??[],encodedImageBlobs:t.encodedImageBlobs??[],labels:t.labels??[],meshOptionsArray:t.meshOptionsArray??[],connectomes:t.connectomes??[],encodedDrawingBlob:t.encodedDrawingBlob??"",previewImageDataURL:t.previewImageDataURL??"",customData:t.customData??"",title:t.title??"untitled"}),n.data.opts={...dn,...t.opts||{}},n.data.opts.meshThicknessOn2D==="infinity"&&(n.data.opts.meshThicknessOn2D=1/0),n.scene.sceneData={...Ya,...t.sceneData||{}};const r=t.sceneData||{};return r.clipPlane&&!r.clipPlanes&&(n.scene.sceneData.clipPlanes=[r.clipPlane]),r.clipPlaneDepthAziElev&&!r.clipPlaneDepthAziElevs&&(n.scene.sceneData.clipPlaneDepthAziElevs=[r.clipPlaneDepthAziElev]),t.completedMeasurements&&(n.completedMeasurements=t.completedMeasurements.map(i=>({...i,startMM:fn(i.startMM),endMM:fn(i.endMM)}))),t.completedAngles&&(n.completedAngles=t.completedAngles.map(i=>({...i,firstLineMM:{start:fn(i.firstLineMM.start),end:fn(i.firstLineMM.end)},secondLineMM:{start:fn(i.secondLineMM.start),end:fn(i.secondLineMM.end)}}))),n.data.meshesString&&Nr.deserializeMeshDataObjects(n),n}static oldloadFromJSON(t){const n=new Nr;return n.data=t,n.data.opts.meshThicknessOn2D==="infinity"&&(n.data.opts.meshThicknessOn2D=1/0),n.scene.sceneData={...Ya,...t.sceneData},Nr.deserializeMeshDataObjects(n),n}setOptsChangeCallback(t){this._optsChangeCallback=t,this._optsProxy=null}removeOptsChangeCallback(){this._optsChangeCallback=null,this._optsProxy=null}_createOptsProxy(){const t=this.data.opts;this._optsProxy=new Proxy(t,{set:(n,r,i)=>{const s=n[r];return s!==i&&(n[r]=i,this._optsChangeCallback&&typeof r=="string"&&r in dn&&this._optsChangeCallback(r,i,s)),!0},get:(n,r)=>n[r]})}},fD={colormap:"gray",opacity:0,nFrame4D:0,frame4D:0,outlineBorder:0,cal_min:0,cal_max:0,cal_minNeg:0,cal_maxNeg:0,colormapType:0,values:new Array,useNegativeCmap:!1,showLegend:!0},ui=class vn{constructor(t,n,r="",i=new Uint8Array([255,255,255,255]),s=1,o=!0,a,l=null,c=null,u=null,d=null,h=null,f=!0,p=""){R(this,"id"),R(this,"name"),R(this,"anatomicalStructurePrimary"),R(this,"colorbarVisible"),R(this,"furthestVertexFromOrigin"),R(this,"extentsMin"),R(this,"extentsMax"),R(this,"opacity"),R(this,"visible"),R(this,"meshShaderIndex",0),R(this,"offsetPt0",null),R(this,"colormapInvert",!1),R(this,"fiberGroupColormap",null),R(this,"indexBuffer"),R(this,"vertexBuffer"),R(this,"vao"),R(this,"vaoFiber"),R(this,"pts"),R(this,"tris"),R(this,"layers"),R(this,"type","mesh"),R(this,"data_type"),R(this,"rgba255"),R(this,"fiberLength"),R(this,"fiberLengths"),R(this,"fiberDensity"),R(this,"fiberDither",.1),R(this,"fiberColor","Global"),R(this,"fiberDecimationStride",1),R(this,"fiberSides",5),R(this,"fiberRadius",0),R(this,"fiberOcclusion",0),R(this,"f32PerVertex",5),R(this,"dpsThreshold",NaN),R(this,"fiberMask"),R(this,"colormap"),R(this,"dpg"),R(this,"dps"),R(this,"dpv"),R(this,"groups"),R(this,"hasConnectome",!1),R(this,"connectome"),R(this,"indexCount"),R(this,"vertexCount",1),R(this,"nodeScale",4),R(this,"edgeScale",1),R(this,"legendLineThickness",0),R(this,"showLegend",!0),R(this,"nodeColormap","warm"),R(this,"edgeColormap","warm"),R(this,"nodeColormapNegative"),R(this,"edgeColormapNegative"),R(this,"nodeMinColor"),R(this,"nodeMaxColor"),R(this,"edgeMin"),R(this,"edgeMax"),R(this,"nodes"),R(this,"edges"),R(this,"points"),this.anatomicalStructurePrimary=p,this.name=r,this.colorbarVisible=f,this.id=bd();const g=kr.getExtents(t);if(this.furthestVertexFromOrigin=g.mxDx,this.extentsMin=g.extentsMin,this.extentsMax=g.extentsMax,this.opacity=s>1?1:s,this.visible=o,this.meshShaderIndex=0,this.indexBuffer=a.createBuffer(),this.vertexBuffer=a.createBuffer(),this.vao=a.createVertexArray(),a.bindVertexArray(this.vao),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.enableVertexAttribArray(0),a.enableVertexAttribArray(1),this.f32PerVertex!==7?(a.vertexAttribPointer(0,3,a.FLOAT,!1,20,0),a.vertexAttribPointer(1,4,a.BYTE,!0,20,12),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,4,a.UNSIGNED_BYTE,!0,20,16)):(a.vertexAttribPointer(0,3,a.FLOAT,!1,28,0),a.vertexAttribPointer(1,3,a.FLOAT,!1,28,12),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,4,a.UNSIGNED_BYTE,!0,28,24)),a.bindVertexArray(null),this.vaoFiber=a.createVertexArray(),this.offsetPt0=null,this.hasConnectome=!1,this.colormapInvert=!1,this.fiberGroupColormap=null,this.pts=t,this.layers=[],this.type="mesh",this.tris=n,i[3]<1){this.rgba255=i,this.fiberLength=2,this.fiberDither=.1,this.fiberColor="Global",this.fiberDecimationStride=1,this.fiberMask=[],this.colormap=l,this.dpg=c,this.dps=u,this.dpv=d,this.groups=h,c&&this.initValuesArray(c),u&&this.initValuesArray(u),d&&this.initValuesArray(d),h&&this.initValuesArray(h),this.offsetPt0=new Uint32Array(n),this.tris=new Uint32Array(0),this.updateFibers(a),a.bindVertexArray(this.vaoFiber),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,3,a.FLOAT,!1,16,0),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,4,a.UNSIGNED_BYTE,!0,16,12),a.bindVertexArray(null);return}if(l){this.connectome=l,this.hasConnectome=!0;const m=Object.keys(l);for(let A=0,x=m.length;A<x;A++)this[m[A]]=l[m[A]]}this.rgba255=i,this.updateMesh(a)}initValuesArray(t){for(let n=0;n<t.length;n++){const r=t[n].vals.reduce((s,o)=>Math.min(s,o)),i=t[n].vals.reduce((s,o)=>Math.max(s,o));t[n].global_min=r,t[n].global_max=i,t[n].cal_min=r,t[n].cal_max=i}return t}linesToCylinders(t,n,r){function i(E){return q(E[0],E[1],E[2])}const s=Math.pow(2,32)-1,o=r.length;let a=0,l=0;for(let E=0;E<o;E++){if(r[E]===s){l++;continue}a++}const c=this.fiberSides,u=c*a,d=this.f32PerVertex;if(d!==5)throw Error("fiberSides > 1 requires f32PerVertex == 5");const h=new Float32Array(u*d),f=new Uint8Array(h.buffer);let p=0,g=Un(),v=Un(),m=Un();const A=Te();let x=Te(),w=0;const b=this.fiberRadius;for(let E=0;E<o;E++){const T=r[E]===s;if(T&&w<1)continue;let F=r[E]*4;if(w++,w<=1){g=Le(n[F+0],n[F+1],n[F+2],n[F+3]),v=Nn(g),E+1<o&&r[E+1]!==s&&(F=r[E+1]*4,m=Le(n[F+0],n[F+1],n[F+2],n[F+3]),Pe(A,i(g),i(m)),Zt(A,A),x=qr.getFirstPerpVector(A));continue}T?m=Nn(v):m=Le(n[F+0],n[F+1],n[F+2],n[F+3]),Pe(A,i(g),i(m)),Zt(A,A);const M=Te();Na(M,x,A);const B=Te();Na(B,A,M),x=fn(x);const P=Te();Na(P,A,B),Zt(P,P);const z=Te();for(let U=0;U<c;U++){const G=Math.cos(U/c*2*Math.PI),L=Math.sin(U/c*2*Math.PI);z[0]=b*(G*B[0]+L*P[0]),z[1]=b*(G*B[1]+L*P[1]),z[2]=b*(G*B[2]+L*P[2]),Yr(z,i(v),z);const Y=p*d;h[Y+0]=z[0],h[Y+1]=z[1],h[Y+2]=z[2];const j=Te();Pe(j,z,i(v)),Zt(j,j);const $=(Y+3)*4;f[$+0]=j[0]*127,f[$+1]=j[1]*127,f[$+2]=j[2]*127,h[Y+4]=v[3],p++}g=Nn(v),v=Nn(m),T&&(w=0)}const y=(a-l)*c*2*3,C=new Uint32Array(y);let S=0;p=0;for(let E=1;E<o;E++){if(r[E]===s){p+=c;continue}if(r[E-1]===s)continue;let T=p,F=p+c;const M=F,B=F+c;for(let P=0;P<c;P++)C[S++]=T,C[S++]=F++,F===B&&(F=B-c),C[S++]=F,C[S++]=T++,T===M&&(T=M-c),C[S++]=F,C[S++]=T;p+=c}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(C),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,f,t.STATIC_DRAW),this.indexCount=y}createFiberDensityMap(){if(this.fiberDensity)return;const t=this.pts,n=t.length/3;let r=0;for(let A=0;A<3;A++){const x=this.extentsMax[A]-this.extentsMin[A];r=Math.max(r,x)}if(this.fiberDensity=new Float32Array(n),r===0)return;const i=64,o=r/(i-1)/2,a=(i-1)/r;let l=new Float32Array(i*i*i);const c=[this.extentsMin[0]-o,this.extentsMin[1]-o,this.extentsMin[2]-o],u=[0,0,0],d=-1,h=i*i;let f=0;for(let A=0;A<n;A++){u[0]=Math.round((t[f++]-c[0])*a),u[1]=Math.round((t[f++]-c[1])*a),u[2]=Math.round((t[f++]-c[2])*a);const x=u[0]+u[1]*i+u[2]*h;x!==d&&l[x]++}function p(A,x){let w=A.slice(),b=-1;const y=x-1;for(let S=0;S<x;S++)for(let E=0;E<x;E++)for(let T=0;T<x;T++)b++,!(T<1||T>=y)&&(A[b]=w[b-1]+w[b]+w[b]+w[b+1]);b=-1,w=A.slice();for(let S=0;S<x;S++)for(let E=0;E<x;E++)for(let T=0;T<x;T++)b++,!(E<1||E>=y)&&(A[b]=w[b-x]+w[b]+w[b]+w[b+x]);const C=x*x;b=-1,w=A.slice();for(let S=0;S<x;S++)for(let E=0;E<x;E++)for(let T=0;T<x;T++)b++,!(S<1||S>=y)&&(A[b]=w[b-C]+w[b]+w[b]+w[C]);return A}l=p(l,i),l=p(l,i);let g=0,v=1/0;const m=i*i*i;for(let A=0;A<m;A++)l[A]<=0||(g=Math.max(g,l[A]),v=Math.min(v,l[A]));if(!(g<=1||g<=v)){f=0;for(let A=0;A<m;A++)l[A]=Math.max(0,l[A]-v);g-=v;for(let A=0;A<n;A++){u[0]=Math.round((t[f++]-c[0])*a),u[1]=Math.round((t[f++]-c[1])*a),u[2]=Math.round((t[f++]-c[2])*a);const x=u[0]+u[1]*i+u[2]*h;this.fiberDensity[A]=l[x]/g}}}updateFibers(t){if(!this.offsetPt0||!this.fiberLength)return;const n=this.pts,r=this.offsetPt0,i=r.length-1,s=n.length/3;if(!this.fiberLengths){this.fiberLengths=new Uint32Array(i);for(let y=0;y<i;y++){const C=r[y]*3,S=(r[y+1]-1)*3;let E=0;for(let T=C;T<S;T+=3){const F=q(n[T+0]-n[T+3],n[T+1]-n[T+4],n[T+2]-n[T+5]);E+=so(F)}this.fiberLengths[y]=E}}const o=new Float32Array(s*4),a=new Uint32Array(o.buffer);let l=0,c=0;for(let y=0;y<s;y++)o[c+0]=n[l+0],o[c+1]=n[l+1],o[c+2]=n[l+2],l+=3,c+=4;const u=this.fiberDither,d=u*.5;function h(y,C,S){const T=255*(u*Math.random()-d);return y=Math.max(Math.min(y+T,255),0),C=Math.max(Math.min(C+T,255),0),S=Math.max(Math.min(S+T,255),0),y+(C<<8)+(S<<16)}function f(y,C,S,E,T,F,M){const B=q(Math.abs(y-E),Math.abs(C-T),Math.abs(S-F));Zt(B,B);const P=M-d;for(let z=0;z<3;z++)B[z]=255*Math.max(Math.min(Math.abs(B[z])+P,1),0);return B[0]+(B[1]<<8)+(B[2]<<16)}const p=this.fiberColor.toLowerCase();let g=null,v=null;if(p.startsWith("dps")&&this.dps&&this.dps.length>0){const y=parseInt(p.substring(3));y<this.dps.length&&this.dps[y].vals.length===i&&(g=this.dps[y].vals)}if(p.startsWith("dpv")&&this.dpv&&this.dpv.length>0){const y=parseInt(p.substring(3));y<this.dpv.length&&this.dpv[y].vals.length===s&&(v=this.dpv[y])}const m=new Int16Array(i);if(this.groups&&this.fiberGroupColormap!==null||p.startsWith("dpg")&&this.dpg.length>0){const y=new Uint8ClampedArray(this.groups.length*4),C=new Array(this.groups.length).fill(!1);if(this.fiberGroupColormap){const S=this.fiberGroupColormap;S.A===void 0&&(S.A=Array.from(new Uint8ClampedArray(S.I.length).fill(255)));for(let E=0;E<S.I.length;E++){let T=S.I[E];T<0||T>=this.groups.length||S.A[E]<1||(C[T]=!0,T*=4,y[T]=S.R[E],y[T+1]=S.G[E],y[T+2]=S.B[E],y[T+3]=255)}}else if(p.startsWith("dpg")&&this.dpg.length>0){const S=parseInt(p.substring(3)),E=S<this.dpg.length?this.dpg[S]:this.dpg[0],T=Ee.colormap(this.colormap,this.colormapInvert),F=E.cal_min,M=E.cal_max,B=this.groups.length;for(let P=0;P<B;P++){const z=E.vals[P];if(z<F)continue;let U=Math.round(255*Math.min(Math.max((z-F)/(M-F),0),1));C[P]=!0;const G=P*4;U*=4,y[G]=T[U+0],y[G+1]=T[U+1],y[G+2]=T[U+2],y[G+3]=255}}m.fill(-1);for(let S=0;S<this.groups.length;S++){if(!C[S])continue;const E=this.groups[S];for(let T=0;T<E.vals.length;T++)m[E.vals[T]]=S}for(let S=0;S<i;S++){if(m[S]<0)continue;const E=m[S]%256*4,T=h(y[E],y[E+1],y[E+2]),F=r[S],M=r[S+1]-1,B=F*4+3,P=M*4+3;for(let z=B;z<=P;z+=4)a[z]=T}}else if(v){const y=Ee.colormap(this.colormap,this.colormapInvert),C=v.cal_min,S=v.cal_max;let E=3;for(let T=0;T<s;T++){let F=Math.min(Math.max((v.vals[T]-C)/(S-C),0),1);F=Math.round(Math.max(Math.min(255,F*255)))*4;const M=y[F]+(y[F+1]<<8)+(y[F+2]<<16);a[E]=M,E+=4}}else if(g){const y=Ee.colormap(this.colormap,this.colormapInvert);let C=g[0],S=g[0];for(let E=0;E<i;E++)C=Math.min(C,g[E]),S=Math.max(S,g[E]);S===C&&(C-=1);for(let E=0;E<i;E++){let T=(g[E]-C)/(S-C);T=Math.round(Math.max(Math.min(255,T*255)))*4;const F=y[T]+(y[T+1]<<8)+(y[T+2]<<16),M=r[E],B=r[E+1]-1,P=M*4+3,z=B*4+3;for(let U=P;U<=z;U+=4)a[U]=F}}else if(p.includes("fixed"))if(u===0){const y=this.rgba255[0]+(this.rgba255[1]<<8)+(this.rgba255[2]<<16);let C=3;for(let S=0;S<s;S++)a[C]=y,C+=4}else for(let y=0;y<i;y++){const C=h(this.rgba255[0],this.rgba255[1],this.rgba255[2]),S=r[y],E=r[y+1]-1,T=S*4+3,F=E*4+3;for(let M=T;M<=F;M+=4)a[M]=C}else if(p.includes("local"))for(let y=0;y<i;y++){const C=r[y],S=r[y+1]-1;let E=C*3;const T=S*3,F=u*Math.random();let M=f(n[E],n[E+1],n[E+2],n[E+4],n[E+5],n[E+6],F),B=C*4+3;for(;E<T;)a[B]=M,B+=4,E+=3,M=f(n[E-3],n[E-2],n[E-1],n[E+3],n[E+4],n[E+5],F);a[B]=a[B-4]}else for(let y=0;y<i;y++){const C=r[y],S=r[y+1]-1,E=C*3,T=S*3,F=f(n[E],n[E+1],n[E+2],n[T],n[T+1],n[T+2],u*Math.random()),M=C*4+3,B=S*4+3;for(let P=M;P<=B;P+=4)a[P]=F}if(this.fiberOcclusion>0){let y=function(C,S){const E=S*(C&255),T=S*(C>>8&255),F=S*(C>>16&255);return E+(T<<8)+(F<<16)};this.createFiberDensityMap();for(let C=0;C<i;C++){const S=r[C],E=r[C+1]-1,T=S*4+3,F=E*4+3;let M=S;const B=Math.min(this.fiberOcclusion,.99);for(let P=T;P<=F;P+=4){let z=this.fiberDensity[M++];if(z<=0)continue;z=z/((1/B-2)*(1-z)+1);const U=1-Math.min(z,.9);let G=a[P];G=y(G,U),a[P]=G}}}if(Number.isFinite(this.dpsThreshold)&&this.dps&&(g||this.dps[0].vals.length===i&&(g=this.dps[0].vals),g))for(let y=0;y<i;y++)g[y]<this.dpsThreshold&&(m[y]=-1);const A=this.fiberLength,x=Math.pow(2,32)-1,w=[];let b=-1;for(let y=0;y<i;y++)if(!(m[y]<0)&&!(this.fiberLengths[y]<A)&&(b++,b%this.fiberDecimationStride===0)){for(let C=r[y];C<r[y+1];C++)w.push(C);w.push(x)}this.fiberSides>2&&this.fiberRadius>0?this.linesToCylinders(t,o,w):(this.indexCount=w.length,t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Uint32Array.from(a),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(w),t.STATIC_DRAW))}indexNearestXYZmm(t,n,r){const i=this.pts,s=this.pts.length/3;let o=0,a=1/0,l=0;for(let c=0;c<s;c++){const u=Math.pow(i[o]-t,2)+Math.pow(i[o+1]-n,2)+Math.pow(i[o+2]-r,2);u<a&&(a=u,l=c),o+=3}return a=Math.sqrt(a),[l,a]}unloadMesh(t){if(t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindVertexArray(null),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteVertexArray(this.vao),t.deleteVertexArray(this.vaoFiber),this.offsetPt0=null,this.tris=null,this.pts=null,this.layers&&this.layers.length>0)for(let n=0;n<this.layers.length;n++)this.layers[n].values=null;if(this.dpg&&this.dpg.length>0)for(let n=0;n<this.dpg.length;n++)this.dpg[n].vals=null;if(this.dps&&this.dps.length>0)for(let n=0;n<this.dps.length;n++)this.dps[n].vals=null}scalars2RGBA(t,n,r,i=!1){const s=r.length;if(4*s<t.length)return k.error(`colormap2RGBA incorrectly specified ${s}*4 != ${t.length}`),t;const o=Math.round(n.opacity*255);let a=n.cal_min,l=n.cal_max,c=Ee.colormap(n.colormap,this.colormapInvert),u=1;if(i){if(!n.useNegativeCmap)return t;u=-1,c=Ee.colormap(n.colormapNegative,n.colormapInvert),a=n.cal_min,l=n.cal_max,isFinite(n.cal_minNeg)&&isFinite(n.cal_minNeg)&&(a=-n.cal_minNeg,l=-n.cal_maxNeg)}let d=a;n.isTransparentBelowCalMin||(d=Number.NEGATIVE_INFINITY);const h=n.colormapType===2;n.colormapType!==0&&(a=Math.min(a,0));const f=255/(l-a);for(let p=0;p<s;p++){let g=r[p]*u;if(isNaN(g))continue;let v=o;if(g<d)if(g>0&&h)v=Math.round(n.opacity*255*Math.pow(g/d,2));else continue;if(g=(g-a)*f,g<0&&n.isTransparentBelowCalMin)continue;g=Math.min(255,Math.max(0,Math.round(g)))*4;const m=p*4;t[m+0]=c[g+0],t[m+1]=c[g+1],t[m+2]=c[g+2],t[m+3]=v}return t}blendColormap(t,n,r,i,s,o,a=!1){const l=this.pts.length/3,c=Math.min(r.opacity,1);function u(x,w,b){return x*(1-b)+w*b}function d(x,w){return Math.min(x+w,255)}const h=a?-1:1,f=Math.min(Math.max(r.frame4D,0),r.nFrame4D-1),p=l*f;let g=i;r.isTransparentBelowCalMin||(g=Number.NEGATIVE_INFINITY),r.colormapType!==0&&(i=Math.min(i,0));const v=255/(s-i);let m=new Array(l).fill(!1);if(r.outlineBorder!==0){const x=new Uint8Array(l).fill(0);for(let w=0;w<l;w++)h*r.values[w+p]>=g&&(x[w]=1);m=kr.getClusterBoundaryU8(x,this.tris);for(let w=0;w<l;w++)h*r.values[w+p]<g&&(m[w]=!1)}const A=new Float32Array(256).fill(c);if(g>i&&r.colormapType===2){let x=Math.round((g-i)*v);x=Math.max(x,1);for(let w=1;w<x;w++)A[w]=c*Math.pow(w/x,2);A[0]=0,g=i+Number.EPSILON}for(let x=0;x<l;x++){const w=h*r.values[x+p];if(w<g)continue;let b=Math.round((w-i)*v);if(b<0&&r.isTransparentBelowCalMin)continue;b=Math.max(0,b),b=Math.min(255,b);let y=A[b];b*=4;let C=x*28+24;if(this.f32PerVertex!==7&&(C=x*20+16),r.isAdditiveBlend){const S=x*4;n[S+0]=d(n[S+0],o[b+0]),n[S+1]=d(n[S+1],o[b+1]),n[S+2]=d(n[S+2],o[b+2]),n[S+3]=d(n[S+3],255)}else{if(m[x]&&(y=r.outlineBorder,r.outlineBorder<0)){t[C+0]=0,t[C+1]=0,t[C+2]=0;continue}t[C+0]=u(t[C+0],o[b+0],y),t[C+1]=u(t[C+1],o[b+1],y),t[C+2]=u(t[C+2],o[b+2],y)}}}updateMesh(t){if(this.offsetPt0){this.updateFibers(t);return}if(this.hasConnectome)return;if(!this.pts||!this.tris||!this.rgba255){k.warn("underspecified mesh");return}function n(c,u,d){return c*(1-d)+u*d}const r=this.generatePosNormClr(this.pts,this.tris,this.rgba255),i=this.pts.length/3,s=new Uint8Array(r.buffer);let o=0;const a=new Uint8Array(i*4);let l=this.tris;if(this.layers&&this.layers.length>0)for(let c=0;c<this.layers.length;c++){const u=this.layers[c],d=u.opacity;if(d<=0||u.cal_min>u.cal_max)continue;if(u.outlineBorder===void 0&&(u.outlineBorder=0),u.isAdditiveBlend===void 0&&(u.isAdditiveBlend=!1),u.colormapLabel&&u.colormapLabel.R&&!u.colormapLabel.lut&&(u.colormapLabel=Ee.makeLabelLut(u.colormapLabel,255,u.global_max)),u.colormapLabel&&u.colormapLabel.lut){const f=u.colormapLabel;let p=0;u.colormapLabel.min&&(p=u.colormapLabel.min);let g=f.lut;const v=Math.floor(g.length/4);if(u.atlasValues&&v>0&&v===u.atlasValues.length&&u.colormap){const y=u.atlasValues;let C=!1,S=!0;for(let E=0;E<v;E++)isNaN(y[E])?C=!0:S=!1;if(S){k.debug("invisible mesh: all atlasValues are NaN.");return}if(C){k.debug("some vertices have NaN atlasValues (mesh will be decimated).");const E=new Array(i).fill(!1);for(let P=0;P<i;P++){const z=Math.round(u.values[P])-p;isNaN(y[z])&&(E[P]=!0)}const T=new Array(l.length).fill(!1);for(let P=0;P<l.length;P++)E[l[P]]&&(T[P]=!0);const F=this.tris;let M=0;for(let P=0;P<F.length;P+=3)!T[P]&&!T[P+1]&&!T[P+2]&&M++;M===0&&k.debug("invisible mesh: all triangles of a vertex with a NaN atlasValue."),l=new Uint32Array(M*3);let B=0;for(let P=0;P<F.length;P+=3)!T[P]&&!T[P+1]&&!T[P+2]&&(l[B++]=F[P],l[B++]=F[P+1],l[B++]=F[P+2])}g.fill(0),g=this.scalars2RGBA(g,u,y),u.useNegativeCmap&&(g=this.scalars2RGBA(g,u,y,!0))}else u.atlasValues&&k.warn(`Expected ${v} atlasValues but got ${u.atlasValues.length} for mesh layer`);if(u.showLegend&&v===u.colormapLabel.labels.length){u.labels=[];for(let y=0;y<v;y++){const C=Array.from(g.slice(y*4,y*4+4)).map(M=>M/255),S=u.colormapLabel.labels[y],E=[0,0,0];let T=0;for(let M=0;M<i;M++)if(u.values[M]===y){const B=M*3;E[0]+=this.pts[B],E[1]+=this.pts[B+1],E[2]+=this.pts[B+2],T++}if(T>0&&(E[0]/=T,E[1]/=T,E[2]/=T),C[3]===0||!S||S.startsWith("_"))continue;C[3]=1;const F=new mf(S,{textColor:C,bulletScale:1,bulletColor:C,lineWidth:0,lineColor:C,textScale:1,textAlignment:"left",lineTerminator:"none"},E);u.labels.push(F),k.debug("label for mesh layer:",F)}}else delete u.labels;const m=Math.min(Math.max(u.frame4D,0),u.nFrame4D-1),A=i*m,x=new Uint8Array(i*4);let w=0;for(let y=0;y<i;y++){const C=u.values[y+A]-p,S=4*Math.min(Math.max(C,0),v-1);x[w+0]=g[S+0],x[w+1]=g[S+1],x[w+2]=g[S+2],x[w+3]=Math.round(g[S+3]/255*u.opacity*255),w+=4}let b=new Array(i).fill(!1);u.outlineBorder!==0&&(b=kr.getClusterBoundary(x,this.tris)),w=0;for(let y=0;y<i;y++){let C=y*28+24;this.f32PerVertex!==7&&(C=y*20+16);let S=x[w+3]/255;if(b[y]&&(S=u.outlineBorder,u.outlineBorder<0)){s[C+0]=0,s[C+1]=0,s[C+2]=0,w+=4;continue}s[C+0]=n(s[C+0],x[w+0],S),s[C+1]=n(s[C+1],x[w+1],S),s[C+2]=n(s[C+2],x[w+2],S),w+=4}continue}if(u.values instanceof Uint8Array){const f=new Uint8Array(u.values.buffer);let p=new Array(i).fill(!0);u.outlineBorder!==0&&(p=kr.getClusterBoundary(f,this.tris));let g=0;for(let v=0;v<u.values.length;v++){let m=v*28+24;this.f32PerVertex!==7&&(m=v*20+16);let A=d;if(p[v]&&(A=u.outlineBorder,u.outlineBorder<0)){s[m+0]=0,s[m+1]=0,s[m+2]=0,g+=4;continue}s[m+0]=n(s[m+0],f[g+0],A),s[m+1]=n(s[m+1],f[g+1],A),s[m+2]=n(s[m+2],f[g+2],A),g+=4}continue}u.useNegativeCmap&&(u.cal_min=Math.max(Number.EPSILON,u.cal_min),u.cal_max=Math.max(u.cal_min+1e-6,u.cal_max)),u.isTransparentBelowCalMin===void 0&&(u.isTransparentBelowCalMin=!0);const h=Ee.colormap(u.colormap,u.colormapInvert);if(u.isAdditiveBlend&&o++,this.blendColormap(s,a,u,u.cal_min,u.cal_max,h),u.useNegativeCmap){const f=Ee.colormap(u.colormapNegative,u.colormapInvert);let p=u.cal_min,g=u.cal_max;isFinite(u.cal_minNeg)&&isFinite(u.cal_minNeg)&&(p=-u.cal_minNeg,g=-u.cal_maxNeg),this.blendColormap(s,a,u,p,g,f,!0)}}if(o>0)for(let c=0;c<i;c++){let u=function(p,g){return Math.min(p*g*.00392156862745098,255)},d=c*28+24;this.f32PerVertex!==7&&(d=c*20+16);const h=c*4,f=Math.min(o,a[h+3]/255);f<=0||(s[d+0]=u(s[d+0],a[h+0]),s[d+1]=u(s[d+1],a[h+1]),s[d+2]=u(s[d+2],a[h+2]),s[d+0]=n(s[d+0],a[h+0],f),s[d+1]=n(s[d+1],a[h+1],f),s[d+2]=n(s[d+2],a[h+2],f))}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(l),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),this.indexCount=l.length,this.vertexCount=this.pts.length}reverseFaces(t){if(this.offsetPt0||this.hasConnectome)return;const n=this.tris||[];for(let r=0;r<n.length;r+=3){const i=n[r];n[r]=n[r+1],n[r+1]=i}this.updateMesh(t)}hierarchicalOrder(){const r=this.tris.length/3,i=Math.log(r/20)/Math.log(4);if(r!==Math.pow(4,i)*20)return NaN;if(this.pts.length/3!==Math.pow(4,i)*10+2)return NaN;for(let o=0;o<15;o+=3)if(this.tris[o]!==0)return NaN;for(let o=15;o<24;o+=3)if(this.tris[o]!==3)return NaN;for(let o=24;o<30;o+=3)if(this.tris[o]!==4)return NaN;return i}decimateFaces(t,n){let r=this.tris;const i=12,s=20;for(let o=t-1;o>=n;o--){const a=Math.pow(4,o+1)*(i-2)+2,l=Math.pow(4,o)*(i-2)+2,c=r.length/3,u=Math.pow(4,o)*s;k.info(`order ${o+1} -> ${o} vertices ${a} -> ${l} faces ${c} -> ${u}`);const d=Array.from({length:a},(f,p)=>p+1);for(let f=0;f<c;f++){const p=r[3*f],g=r[3*f+1],v=r[3*f+2];d[p-1]=Math.min(d[p-1],g,v)}const h=new Uint32Array(u*3);for(let f=0;f<u;f++)h[3*f]=d[r[3*f]-1],h[3*f+1]=d[r[3*f+1]-1],h[3*f+2]=d[r[3*f+2]-1];r=h}this.tris=new Uint32Array(r)}decimateHierarchicalMesh(t,n=4){const r=this.hierarchicalOrder();if(isNaN(r))return k.warn("Unable to decimate mesh: it does not have a hierarchical structure"),!1;if(n>=r)return k.warn(`Unable to decimate mesh: input order (${r}) must be larger than downsampled order (${n})`),!1;const i=this.pts.length/3,o=Math.pow(4,n)*(12-2)+2;if(this.pts=new Float32Array(this.pts.slice(0,o*3)),this.decimateFaces(r,n),this.layers&&this.layers.length>0)for(let a=0;a<this.layers.length;a++){const l=this.layers[a];l.values instanceof Float32Array||l.values.length!==i?l.values=new Float32Array(l.values.slice(0,o)):k.warn("decimation logic needs to be updated")}return this.updateMesh(t),!0}async setLayerProperty(t,n,r,i){const s=this.layers[t];if(!s||!(n in s)){k.warn("mesh does not have property ",n," for layer ",s);return}if(n==="colormapLabel")if(typeof r=="object")s[n]=Ee.makeLabelLut(r,255,s.global_max);else if(typeof r=="string"){const o=await Ee.makeLabelLutFromUrl(r);s[n]=o,this.updateMesh(i);return}else k.error("colormapLabel requires a string or object");else s[n]=r;this.updateMesh(i)}setProperty(t,n,r){if(!(t in this)){console.warn("Mesh does not have property:",t,this);return}this[t]=n,this.updateMesh(r)}generatePosNormClr(t,n,r){(t.length<3||r.length<4)&&(k.error("Catastrophic failure generatePosNormClr()"),k.debug("this",this),k.debug("pts",t),k.debug("rgba",r));const i=kr.generateNormals(t,n),s=t.length/3,o=s===r.length/4,a=this.f32PerVertex,l=new Float32Array(s*a),c=new Uint8Array(l.buffer);let u=0,d=0,h=0,f=(a-1)*4;for(let p=0;p<s;p++)l[h+0]=t[u+0],l[h+1]=t[u+1],l[h+2]=t[u+2],a!==7?(c[f-4]=i[u+0]*127,c[f-3]=i[u+1]*127,c[f-2]=i[u+2]*127):(l[h+3]=i[u+0],l[h+4]=i[u+1],l[h+5]=i[u+2]),c[f]=r[d+0],c[f+1]=r[d+1],c[f+2]=r[d+2],c[f+3]=r[d+3],o&&(d+=4),u+=3,h+=a,f+=a*4;return l}static async readMesh(t,n,r,i=1,s=new Uint8Array([255,255,255,255]),o=!0){let a=new Uint32Array([]),l=new Float32Array([]),c="",u;const d=/(?:\.([^.]+))?$/;let h=d.exec(n)[1];if(h=h.toUpperCase(),h==="GZ"&&(h=d.exec(n.slice(0,-3))[1],h=h.toUpperCase()),h==="JCON"&&k.error("you should never see this message: load using nvconnectome not nvmesh"),h==="JSON"&&k.error("you should never see this message: load using nvconnectome not nvmesh"),s[3]=Math.max(1,s[3]),h==="TCK"||h==="TRK"||h==="TT"||h==="TRX"||h==="TRACT"){if(h==="TCK"?u=Oe.readTCK(t):h==="TRACT"?u=Oe.readTRACT(t):h==="TT"?u=await Oe.readTT(t):h==="TRX"?u=await Oe.readTRX(t):u=await Oe.readTRK(t),typeof u>"u"){const v=new Float32Array([0,0,0,0,0,0]),m=new Uint32Array([0]);u={pts:v,offsetPt0:m},k.error("Creating empty tracts")}return s[3]=0,new vn(u.pts,u.offsetPt0,n,s,i,o,r,"inferno",u.dpg||null,u.dps||null,u.dpv||null,u.groups)}if(h==="GII")u=await Oe.readGII(t);else if(h==="MZ3")u=await Oe.readMZ3(t),"positions"in u||k.warn("MZ3 does not have positions (statistical overlay?)");else if(h==="ASC")u=Oe.readASC(t);else if(h==="DFS")u=Oe.readDFS(t);else if(h==="BYU"||h==="G")u=Oe.readGEO(t);else if(h==="GEO")u=Oe.readGEO(t,!0);else if(h==="ICO"||h==="TRI")u=Oe.readICO(t);else if(h==="OFF")u=Oe.readOFF(t);else if(h==="NV")u=Oe.readNV(t);else if(h==="OBJ")u=await Oe.readOBJ(t);else if(h==="PLY")u=Oe.readPLY(t);else if(h==="WRL")u=Oe.readWRL(t);else if(h==="X3D")u=Oe.readX3D(t);else if(h==="FIB"||h==="VTK"){if(u=Oe.readVTK(t),"offsetPt0"in u)return s[3]=0,new vn(u.pts,u.offsetPt0,n,s,i,o,r,"inferno")}else h==="SRF"?u=await Oe.readSRF(t):h==="STL"?u=Oe.readSTL(t):u=Oe.readFreeSurfer(t);if(u.anatomicalStructurePrimary&&(c=u.anatomicalStructurePrimary),u instanceof Float32Array)throw new Error("fatal: unknown mesh type loaded");if(!("positions"in u))throw new Error("positions not loaded");if(!u.indices)throw new Error("indices not loaded");if(l=u.positions,a=u.indices,"rgba255"in u&&u.rgba255.length>0&&(s=u.rgba255),"colors"in u&&u.colors&&u.colors.length===l.length){const v=l.length/3;s=new Uint8Array(v*4);let m=0,A=0;for(let x=0;x<v;x++)s[A++]=u.colors[m]*255,s[A++]=u.colors[m+1]*255,s[A++]=u.colors[m+2]*255,s[A++]=255,m+=3}const f=l.length/3;if(a.length/3<1||f<3)throw new Error("Mesh should have at least one triangle and three vertices");s[3]=Math.max(1,s[3]);const g=new vn(l,a,n,s,i,o,r,null,null,null,null,null,!0,c);if("scalars"in u&&u.scalars.length>0){const v=await Oe.readLayer(n,t,g,i,"gray");typeof v>"u"?k.warn("readLayer() failed to convert scalars"):(g.layers.push(v),g.updateMesh(r))}return g}static async loadLayer(t,n){let r=new Uint8Array().buffer;function i(p){const g=window.atob(p),v=g.length,m=new Uint8Array(v);for(let A=0;A<v;A++)m[A]=g.charCodeAt(A);return m.buffer}if(t.base64!==void 0)r=i(t.base64);else{if(!t.url)throw new Error("layer: missing url");const p=await fetch(t.url,{headers:t.headers});if(!p.ok)throw Error(p.statusText);r=await p.arrayBuffer()}let s,o=[];if(t.name&&t.name!=="")s=t.name;else{if(!t.url)throw new Error("layer: missing url");try{o=new URL(t.url).pathname.split("/")}catch{o=t.url.split("/")}finally{s=o.slice(-1)[0]}}s.indexOf("?")>-1&&(s=s.slice(0,s.indexOf("?")));let a=.5;"opacity"in t&&(a=t.opacity);let l="warm";"colormap"in t&&(l=t.colormap);let c="winter";"colormapNegative"in t&&(c=t.colormapNegative);let u=!1;"useNegativeCmap"in t&&(u=t.useNegativeCmap);let d=null;"cal_min"in t&&(d=t.cal_min);let h=null;"cal_max"in t&&(h=t.cal_max);const f=await Oe.readLayer(s,r,n,a,l,c,u,d,h);f&&n.layers.push(f)}static async loadFromUrl({url:t="",headers:n={},gl:r,name:i="",opacity:s=1,rgba255:o=[255,255,255,255],visible:a=!0,layers:l=[],buffer:c=new ArrayBuffer(0),meshShaderIndex:u=0}={}){let d=t.split("/");if(i===""){try{d=new URL(t).pathname.split("/")}catch{d=t.split("/")}i=d.slice(-1)[0],i.indexOf("?")>-1&&(i=i.slice(0,i.indexOf("?")))}if(t==="")throw Error("url must not be empty");if(!r)throw Error("gl context is null");let h;if(c.byteLength>0)h=c;else{const p=await fetch(t,{headers:n});if(!p.ok)throw Error(p.statusText);h=await p.arrayBuffer()}const f=await this.readMesh(h,i,r,s,new Uint8Array(o),a);if(u!==void 0&&(f.meshShaderIndex=u),!l||l.length<1)return f;for(let p=0;p<l.length;p++)await vn.loadLayer(l[p],f);return f.updateMesh(r),f}static async readFileAsync(t){return new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=r,i.readAsArrayBuffer(t)})}static async loadFromFile({file:t,gl:n,name:r="",opacity:i=1,rgba255:s=[255,255,255,255],visible:o=!0,layers:a=[]}={}){if(!t)throw new Error("file must be set");if(!n)throw new Error("rendering context must be set");const l=await vn.readFileAsync(t),c=await vn.readMesh(l,r,n,i,new Uint8Array(s),o);if(!a||a.length<1)return c;for(let u=0;u<a.length;u++)await vn.loadLayer(a[u],c);return c.updateMesh(n),c}async loadFromBase64({base64:t,gl:n,name:r="",opacity:i=1,rgba255:s=[255,255,255,255],visible:o=!0,layers:a=[]}={}){if(!t)throw new Error("base64 must bet set");if(!n)throw new Error("rendering context must be set");function l(d){const h=window.atob(d),f=h.length,p=new Uint8Array(f);for(let g=0;g<f;g++)p[g]=h.charCodeAt(g);return p.buffer}const c=l(t),u=await vn.readMesh(c,r,n,i,new Uint8Array(s),o);if(!a||a.length<1)return u;for(let d=0;d<a.length;d++)await vn.loadLayer(a[d],u);return u.updateMesh(n),u}},mD="data:image/jpeg;base64,/9j/4QrFRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAdAAAAcgEyAAIAAAAUAAAAj4dpAAQAAAABAAAApAAAANAACvyAAAAnEAAK/IAAACcQQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKQAyMDE4OjA3OjEzIDE3OjU0OjI3AAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACAKADAAQAAAABAAACAAAAAAAAAAAGAQMAAwAAAAEABgAAARoABQAAAAEAAAEeARsABQAAAAEAAAEmASgAAwAAAAEAAgAAAgEABAAAAAEAAAEuAgIABAAAAAEAAAmPAAAAAAAAAEgAAAABAAAASAAAAAH/2P/tAAxBZG9iZV9DTQAB/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAoACgAwEiAAIRAQMRAf/dAAQACv/EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A0FEqSiVItYFNCcpAJKXa1EDFZ6f0zKzn7aG+0fSedGj4ldFV0npfTKhbln1rO27gn+RV+d/bQKXncbpuXlGKKnPHiBp/nn2f9JalX1WeG78q5lLe/f7/AObb/wBJHyOu3v8AZjNFFY0B0Lo/6hqz7LH2u3WuNjvFxn8qCWy/p3QaGn9K/IsHZgEf523b/wBNVXVY8+ysNHgdf4BKU6IVTA0VHljfuCg7Dx3c1t+Qj8iPCeEUOfZ0yo/QJb+IVW3AvZwN48ufuW1CYslFDzxaQYOh8FGFt34ldg9w17Hus3IxH1aj3N8e4SQ1wnBTJJKZAqUocqQKSn//0NFRIUkoUi1GQtPovRbeov8AVfNeK0w5/dxHLa//ACaH0fpbup5DtxLcKg/p7OJPPosd/wBX+5/22rXVeui4fY+n/osKsbAWabwNPb+7T/58QJSA6eV1nEwWfZOnNadmhcPoA/8Aox6xbcm2+w2WuL3HuVTa5FaUF1JgVMKDUQJKXAUgEwUgipcBOAkFIIoWhKFKEkUMC1DfUCjwmISQ42XhRL6x8WqjC6J7JWXnYkTawf1h/FJTRThMnhJT/9HSUXNtttqxaBN+Q4MZ5T+cVKQBJMAak+SrYfVPsmRdmtE5GwsxgeGl3tNn9itPK0Ox1rOpwcZvQenu/R1CMu0cucfc6uf5f07/APtlY7HSqbXlxJcS5xMlx5JPLirNZTbXgNqtWGKtWrDCklO1EahNKI1FSQKQUQpBFDIKQUQpBFC6SJVU+1wawST2R7enZNTN7m6DmNYRQ1EykRCZJDAhBsZIRyoOCSnEyaPSs0+i7hC2rUyqg9p8eQqQYgVP/9Kzn2+nj7RzYY+Q1csg2SVa6tb+mDOzGj7z7lntOqUjqmIblRVyoqjSVbqKAXN1hR2FVayjsKcpstKK0quwozSkhMFMITSpgpwQUgThQBUgUUOt0XYX2En3gCB5d1rLlq7HMcHNJaRwRorB6jlFu02GEDG+qGXUm1NyniuI0kDifzlUSLp5TSnKUouTyolJCKwSFRe2HEK+9U7xDpQKn//To579+VZ/WI+72oO0tUnfpMsjxefxKs5VBrA0Uc5eqmWEfTaOoq3W5UWGCrVbuE4ILdY5HY5U2OVhjk5DbY5Ga5VWORWuRQ2WuUwUBrlMOTghOCnlCDk4cihLKfchbk+5JCSU0qEpSipnKYlRlIlJDFxVXJ+iT4Kw4qtkH2H4IKf/1M6qBnie1sH/ADl0PWsMNY17RpAC53LBq6hcB2eSPmd4XYXubmdPa4al7Nw+PKp8yTHJA9LILd5UCeOcetAh5Fw2uhFY9Ty6YO4d9VXaYKnhKwwSjRbtblYY5UWPVhj1IFjcY5Ga5VGPRmuTghtNciByrNciNcihsBycOQQ5SDk5CXcn3IW5PuSQllKUPcn3JKZykXKEpi5FCnOVa93tKK5yrWulwb4kIKf/1afW6/TzW2drWA/Nvsd/31afR88nFFTj/N6BC63R6uH6oHuoO7+yfa//AL6srByDW+J0d+VRczj4h+LNy2UwNjydjIY1wc0djp8DqFmWsLXK2cng/I/BBtcHKKFhmnUkLXQjseqp0Km16nBYCG8x6O16osejsenhYW416I16qteitenBDZDlIOQA9SDkUJw5PuQQ5S3IqS7k+5C3J9ySEm5MXIe9Rc9JS73oDTuu8mgn79E1lkBRxz7C88vOnwGgSQ//1tAhrgWuEtcCHDxB0K5fJodiZL6Ha7D7T4tP0Hf5q6WVQ6vifaKRbWJtpB0HLmcub/WZ9NifONhETRcxlxI15UxZ2VNro/gVMPVbhbAk2C6UwOqGCSpApwCCWwxyOx6ptcisenhYW416K16qNeitenha2g9ED1VD1MORQ2g5SDlXD1IPRUm3Jb0LeoufCSEpehvsQnWqvdkAAklJSSx5scK2nV3fwH5xVgEAADQDQBV8WtwabXj3v4Hg3sP7SMkgl//XtSlJ5HZMmUqxyOqYHpE5FQ/QuM2NH5jj+d/xT/8AwNUGyDqum8jqDoQdRCyc3phqm3HBdVy6saln9X96v/qEycOoXxl0LTBUwhN01GoUwUyl9swptKGHBSBCSkzXojbFXCkHJwQ22vRA9Uw9TFiKG4Hpw9VBan9VFDa9RQstVZ18KvdlAaJWhsWZAHdTw6HXuF9o/RDVjT+cf3v6jUPDwH3EXZIIr5bWdC7+t+6xaoH+wJUgrQlCmAnhFD//0LCSSZTLFKTdDIUVIIKauV0uq8myoim08/uO/rNH0f6zVl3Y9uO7bew1k8O5af6r10ITkBzS1wDmnlpEg/IppC4F5vb3TgLXt6VjOk1E0Hwbq3/Md/5JVX9Ly2/R2Wj+Sdp/zX/+STeFdxNQJ0R2Nks+lTYP7JI/6O5QLXDlrh8WkfwSpVqS3JBrzw0n4AqTcXJd9Gp/+aR/1UIqtiXqDrSrbOl5L/p7WDzMn7mqzV0rHZrZNp89B/mhGitsOVXXkZDttTS7xPYf1nLRxOm1UkPti20aj90HyH539pXtrWgNaAGjgDQJkQEEsgpBQCmEUMgnUZTykp//2f/tErpQaG90b3Nob3AgMy4wADhCSU0EJQAAAAAAEAAAAAAAAAAAAAAAAAAAAAA4QklNBDoAAAAAAO8AAAAQAAAAAQAAAAAAC3ByaW50T3V0cHV0AAAABQAAAABQc3RTYm9vbAEAAAAASW50ZWVudW0AAAAASW50ZQAAAABJbWcgAAAAD3ByaW50U2l4dGVlbkJpdGJvb2wAAAAAC3ByaW50ZXJOYW1lVEVYVAAAAAEAAAAAAA9wcmludFByb29mU2V0dXBPYmpjAAAAEQBBAGoAdQBzAHQAZQAgAGQAZQAgAHAAcgB1AGUAYgBhAAAAAAAKcHJvb2ZTZXR1cAAAAAEAAAAAQmx0bmVudW0AAAAMYnVpbHRpblByb29mAAAACXByb29mQ01ZSwA4QklNBDsAAAAAAi0AAAAQAAAAAQAAAAAAEnByaW50T3V0cHV0T3B0aW9ucwAAABcAAAAAQ3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQFIAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAAAAAABBjcm9wV2hlblByaW50aW5nYm9vbAAAAAAOY3JvcFJlY3RCb3R0b21sb25nAAAAAAAAAAxjcm9wUmVjdExlZnRsb25nAAAAAAAAAA1jcm9wUmVjdFJpZ2h0bG9uZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAAAAAEAAQBIAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAAeOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAAOEJJTQQCAAAAAAACAAA4QklNBDAAAAAAAAEBADhCSU0ELQAAAAAABgABAAAAMjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAACAAAAAgAAAAAEAG0AYwA2ADEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAIAAAAAAFJnaHRsb25nAAACAAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAA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bnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDctMTJUMjA6MDc6NDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0OGNjMGI3YS1iYTJkLWZmNDAtYmNkNC1jNGQzMzIyZjBiNzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzFjM2NhNS1hYTg4LWI5NGMtOGE4MS05YmU4MjA3ZGZiODciPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6YThjMGNhZTYtODNjYy1hYzQ4LWI2YzAtN2FiODNlOWJkMGM3PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWMxYzNjYTUtYWE4OC1iOTRjLThhODEtOWJlODIwN2RmYjg3IiBzdEV2dDp3aGVuPSIyMDE4LTA3LTEyVDIwOjA3OjQ3KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmI3MzZlZC0zOTRhLTM2NDgtYThiOC02Mzk1MmY0NDcxMjIiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTY6MTM6NTgrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RFdnQ6d2hlbj0iMjAxOC0wNy0xM1QxNzo1NDoyNyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTc6NTQ6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg3NjM1NDk5LWZiMTItYWU0MC04NWEzLThkMWFiN2NkZGVhOSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmFjMWMzY2E1LWFhODgtYjk0Yy04YTgxLTliZTgyMDdkZmI4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARY3BydAAAAVAAAAAzZGVzYwAAAYQAAABsd3RwdAAAAfAAAAAUYmtwdAAAAgQAAAAUclhZWgAAAhgAAAAUZ1hZWgAAAiwAAAAUYlhZWgAAAkAAAAAUZG1uZAAAAlQAAABwZG1kZAAAAsQAAACIdnVlZAAAA0wAAACGdmlldwAAA9QAAAAkbHVtaQAAA/gAAAAUbWVhcwAABAwAAAAkdGVjaAAABDAAAAAMclRSQwAABDwAAAgMZ1RSQwAABDwAAAgMYlRSQwAABDwAAAgMdGV4dAAAAABDb3B5cmlnaHQgKGMpIDE5OTggSGV3bGV0dC1Q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",u1="data:image/png;base64,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",d1={atlas:{type:"msdf",distanceRange:2,size:59.65625,width:512,height:256,yOrigin:"bottom"},metrics:{emSize:1,lineHeight:1.171875,ascender:.927734375,descender:-.244140625,underlineY:-.09765625,underlineThickness:.048828125},glyphs:[{unicode:32,advance:.24755859375},{unicode:33,advance:.25732421875,planeBounds:{left:.056159633438645884,bottom:-.02437761405677056,right:.20702396031135412,top:.7299440203067705},atlasBounds:{left:488.5,bottom:145.5,right:497.5,top:190.5}},{unicode:34,advance:.31982421875,planeBounds:{left:.049409125974004715,bottom:.48691155587022,right:.2840869677759953,top:.77187750662978},atlasBounds:{left:486.5,bottom:213.5,right:500.5,top:230.5}},{unicode:35,advance:.61572265625,planeBounds:{left:.037219103997511785,bottom:-.02169206718177056,right:.6239137085024882,top:.7326295671817705},atlasBounds:{left:66.5,bottom:51.5,right:101.5,top:96.5}},{unicode:36,advance:.5615234375,planeBounds:{left:.02956531458715296,bottom:-.12381369908983761,right:.5324464041628472,top:.8484230740898377},atlasBounds:{left:109.5,bottom:197.5,right:139.5,top:255.5}},{unicode:37,advance:.732421875,planeBounds:{left:.026481776289942378,bottom:-.030073418674698794,right:.7137525987100576,top:.7410109186746989},atlasBounds:{left:88.5,bottom:144.5,right:129.5,top:190.5}},{unicode:38,advance:.62158203125,planeBounds:{left:.03225572125458355,bottom:-.030073418674698794,right:.6357130287454166,top:.7410109186746989},atlasBounds:{left:130.5,bottom:144.5,right:166.5,top:190.5}},{unicode:39,advance:.17431640625,planeBounds:{left:.028244602049502358,bottom:.49895501673814824,right:.14558352295049765,top:.7671582645118518},atlasBounds:{left:498.5,bottom:62.5,right:505.5,top:78.5}},{unicode:40,advance:.341796875,planeBounds:{left:.042983329377291775,bottom:-.250029542422407,right:.34471198312270823,top:.8227834486724072},atlasBounds:{left:.5,bottom:191.5,right:18.5,top:255.5}},{unicode:41,advance:.34765625,planeBounds:{left:-.003159248747708225,bottom:-.250029542422407,right:.29856940499770823,top:.8227834486724072},atlasBounds:{left:19.5,bottom:191.5,right:37.5,top:255.5}},{unicode:42,advance:.4306640625,planeBounds:{left:-.011208599684062338,bottom:.27785390031593765,right:.44138438093406235,top:.7304468809340623},atlasBounds:{left:449.5,bottom:23.5,right:476.5,top:50.5}},{unicode:43,advance:.56689453125,planeBounds:{left:.01353503347629649,bottom:.053493525733368255,right:.5499415290237036,top:.6066627242666317},atlasBounds:{left:361.5,bottom:17.5,right:393.5,top:50.5}},{unicode:44,advance:.1962890625,planeBounds:{left:-.009919475797210583,bottom:-.15981695975478,right:.1744702570472106,top:.12514899100478},atlasBounds:{left:498.5,bottom:79.5,right:509.5,top:96.5}},{unicode:45,advance:.27587890625,planeBounds:{left:-.00527594412977999,bottom:.24333249267450235,right:.27969000662978,top:.36067141357549765},atlasBounds:{left:52.5,bottom:7.5,right:69.5,top:14.5}},{unicode:46,advance:.26318359375,planeBounds:{left:.051032680313645884,bottom:-.027092319686354116,right:.20189700718635412,top:.12377200718635412},atlasBounds:{left:501.5,bottom:221.5,right:510.5,top:230.5}},{unicode:47,advance:.412109375,planeBounds:{left:-.013733006073205867,bottom:-.08573505127848349,right:.4053345685732059,top:.7356373950284835},atlasBounds:{left:252.5,bottom:206.5,right:277.5,top:255.5}},{unicode:48,advance:.5615234375,planeBounds:{left:.037458384830081196,bottom:-.030073418674698794,right:.5235767714199189,top:.7410109186746989},atlasBounds:{left:167.5,bottom:144.5,right:196.5,top:190.5}},{unicode:49,advance:.5615234375,planeBounds:{left:.06023674350936354,bottom:-.01998308280677056,right:.37872810024063647,top:.7343385515567705},atlasBounds:{left:488.5,bottom:97.5,right:507.5,top:142.5}},{unicode:50,advance:.5615234375,planeBounds:{left:.025334353719224725,bottom:-.01680925468177056,right:.5449781462807752,top:.7375123796817705},atlasBounds:{left:278.5,bottom:51.5,right:309.5,top:96.5}},{unicode:51,advance:.5615234375,planeBounds:{left:.028181041080081196,bottom:-.030073418674698794,right:.5142994276699189,top:.7410109186746989},atlasBounds:{left:197.5,bottom:144.5,right:226.5,top:190.5}},{unicode:52,advance:.5615234375,planeBounds:{left:.005886103858368255,bottom:-.02169206718177056,right:.5590553023916317,top:.7326295671817705},atlasBounds:{left:310.5,bottom:51.5,right:343.5,top:96.5}},{unicode:53,advance:.5615234375,planeBounds:{left:.055524791080081196,bottom:-.02657487968177056,right:.5416431776699189,top:.7277467546817705},atlasBounds:{left:344.5,bottom:51.5,right:373.5,top:96.5}},{unicode:54,advance:.5615234375,planeBounds:{left:.046003306705081196,bottom:-.034712090549698794,right:.5321216932949189,top:.7363722467996989},atlasBounds:{left:227.5,bottom:144.5,right:256.5,top:190.5}},{unicode:55,advance:.5615234375,planeBounds:{left:.018010134969224725,bottom:-.02169206718177056,right:.5376539275307752,top:.7326295671817705},atlasBounds:{left:374.5,bottom:51.5,right:405.5,top:96.5}},{unicode:56,advance:.5615234375,planeBounds:{left:.037702525455081196,bottom:-.030073418674698794,right:.5238209120449189,top:.7410109186746989},atlasBounds:{left:257.5,bottom:144.5,right:286.5,top:190.5}},{unicode:57,advance:.5615234375,planeBounds:{left:.029401744205081196,bottom:-.025434746799698794,right:.5155201307949189,top:.7456495905496989},atlasBounds:{left:287.5,bottom:144.5,right:316.5,top:190.5}},{unicode:58,advance:.2421875,planeBounds:{left:.046394008438645884,bottom:-.029431286627488215,right:.19725833531135412,top:.5572633178774882},atlasBounds:{left:439.5,bottom:61.5,right:448.5,top:96.5}},{unicode:59,advance:.21142578125,planeBounds:{left:.001066852327789419,bottom:-.16459733294591408,right:.1854565851722106,top:.556198895445914},atlasBounds:{left:406.5,bottom:53.5,right:417.5,top:96.5}},{unicode:60,advance:.50830078125,planeBounds:{left:.016948142433865897,bottom:.0726146348300812,right:.4527784200661341,top:.5587330214199189},atlasBounds:{left:394.5,bottom:21.5,right:420.5,top:50.5}},{unicode:61,advance:.548828125,planeBounds:{left:.051535540940937666,bottom:.17620354038436353,right:.5041285215590624,top:.49469489711563647},atlasBounds:{left:477.5,bottom:31.5,right:504.5,top:50.5}},{unicode:62,advance:.5224609375,planeBounds:{left:.047629290940937666,bottom:.0731029160800812,right:.5002222715590624,top:.5592213026699189},atlasBounds:{left:421.5,bottom:21.5,right:448.5,top:50.5}},{unicode:63,advance:.47216796875,planeBounds:{left:.016704001808865897,bottom:-.027876153049698794,right:.4525342794411341,top:.7432081842996989},atlasBounds:{left:317.5,bottom:144.5,right:343.5,top:190.5}},{unicode:64,advance:.89794921875,planeBounds:{left:.034064457306783605,bottom:-.23896750384690937,right:.8721996065996072,top:.7165065663469093},atlasBounds:{left:155.5,bottom:198.5,right:205.5,top:255.5}},{unicode:65,advance:.65234375,planeBounds:{left:-.008838044092129387,bottom:-.02169206718177056,right:.6616700753421295,top:.7326295671817705},atlasBounds:{left:237.5,bottom:51.5,right:277.5,top:96.5}},{unicode:66,advance:.62255859375,planeBounds:{left:.06464099434422473,bottom:-.02169206718177056,right:.5842847869057752,top:.7326295671817705},atlasBounds:{left:205.5,bottom:51.5,right:236.5,top:96.5}},{unicode:67,advance:.65087890625,planeBounds:{left:.038439807122511785,bottom:-.030073418674698794,right:.6251344116274882,top:.7410109186746989},atlasBounds:{left:344.5,bottom:144.5,right:379.5,top:190.5}},{unicode:68,advance:.65576171875,planeBounds:{left:.06301501010836826,bottom:-.02169206718177056,right:.6161842086416317,top:.7326295671817705},atlasBounds:{left:162.5,bottom:51.5,right:195.5,top:96.5}},{unicode:69,advance:.568359375,planeBounds:{left:.0652904160800812,bottom:-.02169206718177056,right:.5514088026699189,top:.7326295671817705},atlasBounds:{left:132.5,bottom:51.5,right:161.5,top:96.5}},{unicode:70,advance:.552734375,planeBounds:{left:.059675181705081196,bottom:-.02169206718177056,right:.5457935682949189,top:.7326295671817705},atlasBounds:{left:102.5,bottom:51.5,right:131.5,top:96.5}},{unicode:71,advance:.68115234375,planeBounds:{left:.040148791497511785,bottom:-.030073418674698794,right:.6268433960024882,top:.7410109186746989},atlasBounds:{left:380.5,bottom:144.5,right:415.5,top:190.5}},{unicode:72,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:30.5,bottom:51.5,right:65.5,top:96.5}},{unicode:73,advance:.27197265625,planeBounds:{left:.06917965680657412,bottom:-.02169206718177056,right:.20328128069342588,top:.7326295671817705},atlasBounds:{left:196.5,bottom:51.5,right:204.5,top:96.5}},{unicode:74,advance:.5517578125,planeBounds:{left:.007184947330081194,bottom:-.02657487968177056,right:.4933033339199188,top:.7277467546817705},atlasBounds:{left:.5,bottom:51.5,right:29.5,top:96.5}},{unicode:75,advance:.626953125,planeBounds:{left:.061633166497511785,bottom:-.02169206718177056,right:.6483277710024882,top:.7326295671817705},atlasBounds:{left:452.5,bottom:97.5,right:487.5,top:142.5}},{unicode:76,advance:.5380859375,planeBounds:{left:.06341786132300943,bottom:-.02169206718177056,right:.5327735449269906,top:.7326295671817705},atlasBounds:{left:423.5,bottom:97.5,right:451.5,top:142.5}},{unicode:77,advance:.873046875,planeBounds:{left:.05911847969322944,bottom:-.02169206718177056,right:.8134401140567705,top:.7326295671817705},atlasBounds:{left:377.5,bottom:97.5,right:422.5,top:142.5}},{unicode:78,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:341.5,bottom:97.5,right:376.5,top:142.5}},{unicode:79,advance:.6875,planeBounds:{left:.033395854136655315,bottom:-.030073418674698794,right:.6536158646133446,top:.7410109186746989},atlasBounds:{left:416.5,bottom:144.5,right:453.5,top:190.5}},{unicode:80,advance:.630859375,planeBounds:{left:.061550166358368255,bottom:-.02169206718177056,right:.6147193648916317,top:.7326295671817705},atlasBounds:{left:273.5,bottom:97.5,right:306.5,top:142.5}},{unicode:81,advance:.6875,planeBounds:{left:.030466166636655315,bottom:-.14391866037519643,right:.6506861771133446,top:.7445045978751964},atlasBounds:{left:214.5,bottom:202.5,right:251.5,top:255.5}},{unicode:82,advance:.61572265625,planeBounds:{left:.06350329135836826,bottom:-.02169206718177056,right:.6166724898916317,top:.7326295671817705},atlasBounds:{left:186.5,bottom:97.5,right:219.5,top:142.5}},{unicode:83,advance:.59326171875,planeBounds:{left:.020778681983368255,bottom:-.030073418674698794,right:.5739478805166317,top:.7410109186746989},atlasBounds:{left:454.5,bottom:144.5,right:487.5,top:190.5}},{unicode:84,advance:.5966796875,planeBounds:{left:.005480822747511787,bottom:-.02169206718177056,right:.5921754272524882,top:.7326295671817705},atlasBounds:{left:112.5,bottom:97.5,right:147.5,top:142.5}},{unicode:85,advance:.6484375,planeBounds:{left:.049098994483368255,bottom:-.02657487968177056,right:.6022681930166317,top:.7277467546817705},atlasBounds:{left:78.5,bottom:97.5,right:111.5,top:142.5}},{unicode:86,advance:.63623046875,planeBounds:{left:-.008269192599201152,bottom:-.02169206718177056,right:.6454762238492011,top:.7326295671817705},atlasBounds:{left:38.5,bottom:97.5,right:77.5,top:142.5}},{unicode:87,advance:.88720703125,planeBounds:{left:.011923628617731797,bottom:-.02169206718177056,right:.8835841838822683,top:.7326295671817705},atlasBounds:{left:220.5,bottom:97.5,right:272.5,top:142.5}},{unicode:88,advance:.626953125,planeBounds:{left:.004098979136655316,bottom:-.02169206718177056,right:.6243189896133446,top:.7326295671817705},atlasBounds:{left:.5,bottom:97.5,right:37.5,top:142.5}},{unicode:89,advance:.6005859375,planeBounds:{left:-.010793598988344685,bottom:-.02169206718177056,right:.6094264114883446,top:.7326295671817705},atlasBounds:{left:148.5,bottom:97.5,right:185.5,top:142.5}},{unicode:90,advance:.5986328125,planeBounds:{left:.024196650733368255,bottom:-.02169206718177056,right:.5773658492666317,top:.7326295671817705},atlasBounds:{left:307.5,bottom:97.5,right:340.5,top:142.5}},{unicode:91,advance:.26513671875,planeBounds:{left:.05437250871693295,bottom:-.17280296457569408,right:.27228764753306706,top:.8329592145756942},atlasBounds:{left:59.5,bottom:195.5,right:72.5,top:255.5}},{unicode:92,advance:.41015625,planeBounds:{left:.0014037126767941326,bottom:-.08573505127848349,right:.4204712873232059,top:.7356373950284835},atlasBounds:{left:278.5,bottom:206.5,right:303.5,top:255.5}},{unicode:93,advance:.26513671875,planeBounds:{left:-.020659233400995285,bottom:-.17280296457569408,right:.2140186084009953,top:.8329592145756942},atlasBounds:{left:94.5,bottom:195.5,right:108.5,top:255.5}},{unicode:94,advance:.41796875,planeBounds:{left:.006855376669722368,bottom:.33229482979472236,right:.40916024833027764,top:.7345997014552776},atlasBounds:{left:486.5,bottom:231.5,right:510.5,top:255.5}},{unicode:95,advance:.451171875,planeBounds:{left:-.017473255794918804,bottom:-.09553469482549765,right:.4686451307949188,top:.021804226075497646},atlasBounds:{left:70.5,bottom:7.5,right:99.5,top:14.5}},{unicode:96,advance:.30908203125,planeBounds:{left:.00391839948107648,bottom:.5860277898277895,right:.2553589442689235,top:.7704175226722105},atlasBounds:{left:36.5,bottom:3.5,right:51.5,top:14.5}},{unicode:97,advance:.5439453125,planeBounds:{left:.028181041080081196,bottom:-.029187146002488215,right:.5142994276699189,top:.5575074585024882},atlasBounds:{left:30.5,bottom:15.5,right:59.5,top:50.5}},{unicode:98,advance:.56103515625,planeBounds:{left:.048932994205081196,bottom:-.032187684160555265,right:.5350513807949189,top:.7724220591605554},atlasBounds:{left:304.5,bottom:207.5,right:333.5,top:255.5}},{unicode:99,advance:.5234375,planeBounds:{left:.024518931705081196,bottom:-.029187146002488215,right:.5106373182949189,top:.5575074585024882},atlasBounds:{left:.5,bottom:15.5,right:29.5,top:50.5}},{unicode:100,advance:.56396484375,planeBounds:{left:.026227916080081196,bottom:-.032187684160555265,right:.5123463026699189,top:.7724220591605554},atlasBounds:{left:334.5,bottom:207.5,right:363.5,top:255.5}},{unicode:101,advance:.52978515625,planeBounds:{left:.026472056705081196,bottom:-.029187146002488215,right:.5125904432949189,top:.5575074585024882},atlasBounds:{left:468.5,bottom:61.5,right:497.5,top:96.5}},{unicode:102,advance:.34716796875,planeBounds:{left:.004575110905578838,bottom:-.022177918535555265,right:.3733545765944212,top:.7824318247855554},atlasBounds:{left:364.5,bottom:207.5,right:386.5,top:255.5}},{unicode:103,advance:.56103515625,planeBounds:{left:.026960337955081196,bottom:-.22888445766762702,right:.5130787245449189,top:.558962582667627},atlasBounds:{left:28.5,bottom:143.5,right:57.5,top:190.5}},{unicode:104,advance:.55078125,planeBounds:{left:.049826556565937666,bottom:-.01892352016762703,right:.5024195371840624,top:.768923520167627},atlasBounds:{left:.5,bottom:143.5,right:27.5,top:190.5}},{unicode:105,advance:.24267578125,planeBounds:{left:.046882289688645884,bottom:-.01680925468177056,right:.19774661656135412,top:.7375123796817705},atlasBounds:{left:498.5,bottom:145.5,right:507.5,top:190.5}},{unicode:106,advance:.23876953125,planeBounds:{left:-.048979545900995285,bottom:-.2324562772148376,right:.1856982959009953,top:.7397804959648377},atlasBounds:{left:140.5,bottom:197.5,right:154.5,top:255.5}},{unicode:107,advance:.5068359375,planeBounds:{left:.044294322330081196,bottom:-.01892352016762703,right:.5304127089199189,top:.768923520167627},atlasBounds:{left:58.5,bottom:143.5,right:87.5,top:190.5}},{unicode:108,advance:.24267578125,planeBounds:{left:.05428707868157412,bottom:-.01892352016762703,right:.18838870256842588,top:.768923520167627},atlasBounds:{left:477.5,bottom:208.5,right:485.5,top:255.5}},{unicode:109,advance:.87646484375,planeBounds:{left:.04430890170737297,bottom:-.024304333502488215,right:.832155942042627,top:.5623902710024882},atlasBounds:{left:116.5,bottom:15.5,right:163.5,top:50.5}},{unicode:110,advance:.5517578125,planeBounds:{left:.049826556565937666,bottom:-.024304333502488215,right:.5024195371840624,top:.5623902710024882},atlasBounds:{left:60.5,bottom:15.5,right:87.5,top:50.5}},{unicode:111,advance:.5703125,planeBounds:{left:.025090213094224725,bottom:-.029187146002488215,right:.5447340056557752,top:.5575074585024882},atlasBounds:{left:193.5,bottom:15.5,right:224.5,top:50.5}},{unicode:112,advance:.56103515625,planeBounds:{left:.048444712955081196,bottom:-.22644305141762702,right:.5345630995449189,top:.561403988917627},atlasBounds:{left:447.5,bottom:208.5,right:476.5,top:255.5}},{unicode:113,advance:.568359375,planeBounds:{left:.025983775455081196,bottom:-.22644305141762702,right:.5121021620449189,top:.561403988917627},atlasBounds:{left:417.5,bottom:208.5,right:446.5,top:255.5}},{unicode:114,advance:.33837890625,planeBounds:{left:.045180595002291775,bottom:-.024304333502488215,right:.34690924874770823,top:.5623902710024882},atlasBounds:{left:449.5,bottom:61.5,right:467.5,top:96.5}},{unicode:115,advance:.515625,planeBounds:{left:.021669814448009427,bottom:-.029187146002488215,right:.4910254980519906,top:.5575074585024882},atlasBounds:{left:164.5,bottom:15.5,right:192.5,top:50.5}},{unicode:116,advance:.32666015625,planeBounds:{left:-.019433670483564695,bottom:-.02877457520298586,right:.3158203892335647,top:.675258950202986},atlasBounds:{left:418.5,bottom:54.5,right:438.5,top:96.5}},{unicode:117,advance:.55126953125,planeBounds:{left:.048117572190937666,bottom:-.034069958502488215,right:.5007105528090624,top:.5526246460024882},atlasBounds:{left:88.5,bottom:15.5,right:115.5,top:50.5}},{unicode:118,advance:.484375,planeBounds:{left:-.002092396419918806,bottom:-.02080579450955998,right:.4840259901699188,top:.5491261070095601},atlasBounds:{left:331.5,bottom:16.5,right:360.5,top:50.5}},{unicode:119,advance:.75146484375,planeBounds:{left:-.002649098431770561,bottom:-.02080579450955998,right:.7516725359317705,top:.5491261070095601},atlasBounds:{left:225.5,bottom:16.5,right:270.5,top:50.5}},{unicode:120,advance:.49560546875,planeBounds:{left:-.0046143729128470395,bottom:-.02080579450955998,right:.4982667166628471,top:.5491261070095601},atlasBounds:{left:300.5,bottom:16.5,right:330.5,top:50.5}},{unicode:121,advance:.47314453125,planeBounds:{left:-.007219349544918806,bottom:-.23645281704262702,right:.4788990370449188,top:.551394223292627},atlasBounds:{left:387.5,bottom:208.5,right:416.5,top:255.5}},{unicode:122,advance:.49560546875,planeBounds:{left:.018007705073009427,bottom:-.02080579450955998,right:.4873633886769906,top:.5491261070095601},atlasBounds:{left:271.5,bottom:16.5,right:299.5,top:50.5}},{unicode:123,advance:.33837890625,planeBounds:{left:.011572188891435306,bottom:-.20234398020069408,right:.3468262486085647,top:.8034181989506942},atlasBounds:{left:73.5,bottom:195.5,right:93.5,top:255.5}},{unicode:124,advance:.24365234375,planeBounds:{left:.06315671142450235,bottom:-.15466084787519643,right:.18049563232549765,top:.7337624103751964},atlasBounds:{left:206.5,bottom:202.5,right:213.5,top:255.5}},{unicode:125,advance:.33837890625,planeBounds:{left:-.010156326733564695,bottom:-.20234398020069408,right:.3250977329835647,top:.8034181989506942},atlasBounds:{left:38.5,bottom:195.5,right:58.5,top:255.5}},{unicode:126,advance:.68017578125,planeBounds:{left:.046984728997511785,bottom:.1766063915990047,right:.6336793335024882,top:.4112842334009953},atlasBounds:{left:.5,bottom:.5,right:35.5,top:14.5}}],kerning:[]},pD=33987,gD=33988,AD=33989;function vD(e,t){const n=e.getContext("webgl2",{alpha:!0,antialias:t});if(!n)throw new Error("Unable to initialize WebGL2. Your browser may not support it.");return{gl:n,max2D:n.getParameter(n.MAX_TEXTURE_SIZE),max3D:n.getParameter(n.MAX_3D_TEXTURE_SIZE)}}function xD(e,t,n,r,i=!1){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage3D(e.TEXTURE_3D,1,e.R8,r[1],r[2],r[3]),i){const s=new Uint8Array(r[1]*r[2]*r[3]);e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r[1],r[2],r[3],e.RED,e.UNSIGNED_BYTE,s)}return t}function wD(e,t,n,r,i){t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage3D(e.TEXTURE_3D,1,e.R16I,r[1],r[2],r[3]);const s=r[1]*r[2]*r[3];return i.length!==s&&(i=new Int16Array(s)),e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r[1],r[2],r[3],e.RED_INTEGER,e.SHORT,i),t}function yD(e,t,n,r,i=null,s=!0){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA8,r[1],r[2]),i){let o=i;const a=r[1],l=r[2];if(s){o=new Uint8Array(i.length);const c=a*4;for(let u=0;u<l;u++){const d=u*c,h=(l-1-u)*c;o.set(i.subarray(d,d+c),h)}}e.texSubImage2D(e.TEXTURE_2D,0,0,0,a,l,e.RGBA,e.UNSIGNED_BYTE,o)}return t}function bD(e,t,n,r,i=!1){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage3D(e.TEXTURE_3D,1,e.RGBA8,r[1],r[2],r[3]),i){const s=new Uint8Array(r[1]*r[2]*r[3]*4);e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r[1],r[2],r[3],e.RGBA,e.UNSIGNED_BYTE,s)}return t}function CD(e,t,n,r,i=!1){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,2),e.pixelStorei(e.PACK_ALIGNMENT,2),e.texStorage3D(e.TEXTURE_3D,1,e.RGBA16UI,r[1],r[2],r[3]),i){const s=new Uint16Array(r[1]*r[2]*r[3]*4);e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r[1],r[2],r[3],e.RGBA_INTEGER,e.UNSIGNED_SHORT,s)}return t}function Yv(e,t){new URL(t,window.location.href).origin!==window.location.origin&&(e.crossOrigin="")}async function SD(e,t,n,r,i,s,o,a,l,c){return new Promise((u,d)=>{const h=new Image;h.onload=()=>{if(!i)return;let f;if(n===4){o!==null&&e.deleteTexture(o),f=e.createTexture();const p=h.width/h.height;e.activeTexture(gD),i.use(e),e.uniform1i(i.uniforms.bmpTexture,4),l&&l(p)}else if(n===5)a!==null&&e.deleteTexture(a),f=e.createTexture(),e.activeTexture(AD);else{if(!r){d(new Error("Font shader required for texture unit 3"));return}s!==null&&e.deleteTexture(s),f=e.createTexture(),r.use(e),e.activeTexture(pD),e.uniform1i(r.uniforms.fontTexture,3)}e.bindTexture(e.TEXTURE_2D,f),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),u(f),n!==4&&c&&c()},h.onerror=d,Yv(h,t),h.src=t})}var h1=(e,t)=>{const n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n);let i;return t?r<1.5?i=1:r<3?i=2:r<7?i=5:i=10:r<=1?i=1:r<=2?i=2:r<=5?i=5:i=10,i*Math.pow(10,n)};function ED(e){return new Promise((t,n)=>{let r;e instanceof File?r=Promise.resolve(e):r=new Promise((i,s)=>{e.file(i,s)}),r.then(i=>{const s=new FileReader;s.onload=()=>{typeof s.result=="string"?t(s.result):n(new Error("Expected a string from FileReader.result"))},s.onerror=()=>{n(s.error??new Error("Unknown FileReader error"))},s.readAsDataURL(i)}).catch(i=>n(i))})}function MD(e){const t=e.hdr.dims,n=e.permRAS,r=t[1]*t[2]*t[3],i=new Int16Array(r),s=[0,0,0];for(let f=0;f<3;f++)for(let p=0;p<3;p++)Math.abs(n[f])-1===p&&(s[p]=f*Math.sign(n[f]));let o=1;const a=[1,1,1],l=[!1,!1,!1];for(let f=0;f<s.length;f++)for(let p=0;p<s.length;p++)Math.abs(s[p])===f&&(a[p]=o,(s[p]<0||Object.is(s[p],-0))&&(l[p]=!0),o*=t[p+1]);let c=ue.range(0,t[1]-1,1);l[0]&&(c=ue.range(t[1]-1,0,-1));for(let f=0;f<t[1];f++)c[f]*=a[0];let u=ue.range(0,t[2]-1,1);l[1]&&(u=ue.range(t[2]-1,0,-1));for(let f=0;f<t[2];f++)u[f]*=a[1];let d=ue.range(0,t[3]-1,1);l[2]&&(d=ue.range(t[3]-1,0,-1));for(let f=0;f<t[3];f++)d[f]*=a[2];let h=0;for(let f=0;f<t[3];f++)for(let p=0;p<t[2];p++)for(let g=0;g<t[1];g++)i[c[g]+u[p]+d[f]]=e.img[h],h++;return i}function DD(e){const t=[5960464477539063e-23,152587890625e-16,.00390625,1];return(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3])/255}function f1(e,t){return e.scl_slope===0&&(e.scl_slope=1),t*e.scl_slope+e.scl_inter}function ps(e,t,n=4){const r=h1(t-e,!1),i=h1(r/(n-1),!0),s=Math.floor(e/i)*i,o=Math.ceil(t/i)*i;return[i,s,o,s===e&&o===t]}function m1(e,t){let n=ps(e,t,3);return n[3]||(n=ps(e,t,5)),n[3]||(n=ps(e,t,4)),n[3]||(n=ps(e,t,3)),n[3]||(n=ps(e,t,5)),[n[0],n[1],n[2]]}function or(e){return e*(Math.PI/180)}function cu(e,t,n,r){let i=-e,s=-t;return isFinite(n)&&isFinite(r)&&(i=n,s=r),i>s&&([i,s]=[s,i]),[i,s]}function je(e,t=[0,1,2]){const n=Te();return n[0]=e[t[0]],n[1]=e[t[1]],n[2]=e[t[2]],n}function TD(e){const t=Le(1,0,0,0),n=Un();return At(n,t,e),n[0]}function ID(e,t,n,r){const i=Le(e,t,n,1),s=Qe(r);zt(s,s),i[0]=i[0]*2-1,i[1]=i[1]*2-1,i[2]=i[2]*2-1;const o=Un();return At(o,i,s),o[3]===0||(o[0]/=o[3],o[1]/=o[3],o[2]/=o[3]),o}function Af(e,t=!0){const{volumes:n,meshes:r,volumeObject3D:i}=e;let s=q(0,0,0),o=q(0,0,0);if(n.length>0){if(!i)throw new Error("volumeObject3D undefined");s=q(i.extentsMin[0],i.extentsMin[1],i.extentsMin[2]),o=q(i.extentsMax[0],i.extentsMax[1],i.extentsMax[2]),t||(s=q(n[0].extentsMinOrtho[0],n[0].extentsMinOrtho[1],n[0].extentsMinOrtho[2]),o=q(n[0].extentsMaxOrtho[0],n[0].extentsMaxOrtho[1],n[0].extentsMaxOrtho[2]))}if(r.length>0){if(n.length<1){const l=r[0].extentsMin,c=r[0].extentsMax;s=q(l[0],l[1],l[2]),o=q(c[0],c[1],c[2])}for(let l=0;l<r.length;l++){const c=r[l].extentsMin,u=r[l].extentsMax,d=q(c[0],c[1],c[2]);Zh(s,s,d);const h=q(u[0],u[1],u[2]);Jh(o,o,h)}}const a=Te();return Pe(a,o,s),[s,o,a]}function Wv(e,t){const{volumes:n,meshes:r,volumeObject3D:i,volIdx:s=0,isSliceMM:o=!1}=t;if(n.length<1){const a=q(.1,.5,.5),[l,c,u]=Af({volumes:n,meshes:r,volumeObject3D:i},o);return a[0]=(e[0]-l[0])/u[0],a[1]=(e[1]-l[1])/u[1],a[2]=(e[2]-l[2])/u[2],isFinite(a[0])||(a[0]=.5),isFinite(a[1])||(a[1]=.5),isFinite(a[2])||(a[2]=.5),a}return n[s].convertMM2Frac(e,o)}function ac(e,t){const{volumes:n,meshes:r,volumeObject3D:i,volIdx:s=0,isSliceMM:o=!1}=t,a=Le(e[0],e[1],e[2],1);if(n.length>0)return n[s].convertFrac2MM(e,o);{const[l,c]=Af({volumes:n,meshes:r,volumeObject3D:i},o),u=(d,h,f)=>d*(1-f)+h*f;a[0]=u(l[0],c[0],e[0]),a[1]=u(l[1],c[1],e[1]),a[2]=u(l[2],c[2],e[2])}return a}function FD(e,t,n=0){return t[n].convertVox2Frac(e)}function RD(e,t,n=0){return t.length<=n?q(0,0,0):t[n].convertFrac2Vox(e)}function PD(e,t){return ue.vox2mm(e,t)}function ND(e,t){return t===1?je(e,[0,2,1]):t===2?je(e,[1,2,0]):e}function vf(e,t,n,r,i){const{volumes:s,meshes:o,volumeObject3D:a,isSliceMM:l=!1,restrict0to1:c=!0}=i,u=q(-1,-1,-1),d=n[r],h=d.axCorSag;if(h>2)return u;const f=d.leftTopWidthHeight.slice();let p=!1;f[2]<0&&(p=!0,f[0]+=f[2],f[2]=-f[2]);let g=(e-f[0])/f[2];p&&(g=1-g);const v=1-(t-f[1])/f[3];if(g<0||g>1||v<0||v>1||d.AxyzMxy.length<4)return u;let m=q(0,0,0);m[0]=d.leftTopMM[0]+g*d.fovMM[0],m[1]=d.leftTopMM[1]+v*d.fovMM[1];const A=d.AxyzMxy;m[2]=A[2]+A[4]*(m[1]-A[1])-A[3]*(m[0]-A[0]),h===1&&(m=je(m,[0,2,1])),h===2&&(m=je(m,[2,0,1]));const x=Wv(m,{volumes:s,meshes:o,volumeObject3D:a,isSliceMM:l});return c&&(x[0]<0||x[0]>1||x[1]<0||x[1]>1||x[2]<0||x[2]>1)?u:x}function kD(e,t,n,r){const{volumes:i,meshes:s,volumeObject3D:o,isSliceMM:a=!1,forceSlice:l=-1}=r;for(let c=0;c<n.length;c++){let u=c;l>=0&&(u=l);const d=n[u];if(d.axCorSag>2)continue;const f=d.leftTopWidthHeight;if(e<f[0]||t<f[1]||e>f[0]+f[2]||t>f[1]+f[3])continue;const p=vf(e,t,n,u,{volumes:i,meshes:s,volumeObject3D:o,isSliceMM:a,restrict0to1:!1});if(p[0]<0)continue;const g=ac(p,{volumes:i,meshes:s,volumeObject3D:o,isSliceMM:a});return Le(g[0],g[1],g[2],u)}return Le(NaN,NaN,NaN,NaN)}function BD(e,t,n){const{volumes:r,meshes:i,volumeObject3D:s,isSliceMM:o=!1}=n;for(let a=0;a<t.length;a++){const l=vf(e[0],e[1],t,a,{volumes:r,meshes:i,volumeObject3D:s,isSliceMM:o});if(l[0]>=0)return l}return q(-1,-1,-1)}function VD(e,t,n){const{volumes:r,meshes:i,volumeObject3D:s,isSliceMM:o=!1,sliceType:a}=n,l=ac(e,{volumes:r,meshes:i,volumeObject3D:s,isSliceMM:o});let c={index:-1,distance:1/0};for(let u=0;u<t.length;u++){const d=t[u],h=d.axCorSag;if(h>2||d.AxyzMxy.length<4)continue;let f=q(l[0],l[1],l[2]);h===1&&(f=je(f,[0,2,1])),h===2&&(f=je(f,[1,2,0]));const p=d.AxyzMxy,g=p[2]+p[4]*(f[1]-p[1])-p[3]*(f[0]-p[0]),v=Math.abs(f[2]-g),m=a===3?1:.1;if(v<c.distance&&(c={index:u,distance:v}),v<=m){const A=(f[0]-d.leftTopMM[0])/d.fovMM[0],x=(f[1]-d.leftTopMM[1])/d.fovMM[1];if(A>=0&&A<=1&&x>=0&&x<=1){const w=d.leftTopWidthHeight.slice();let b=!1;w[2]<0&&(b=!0,w[0]+=w[2],w[2]=-w[2]);let y=A;b&&(y=1-A);const C=1-x,S=w[0]+y*w[2],E=w[1]+C*w[3];return[S,E]}}}if(c.index>=0&&c.distance<2){const u=c.index,d=t[u],h=d.axCorSag;let f=q(l[0],l[1],l[2]);h===1&&(f=je(f,[0,2,1])),h===2&&(f=je(f,[1,2,0]));const p=d.AxyzMxy;f[2]=p[2]+p[4]*(f[1]-p[1])-p[3]*(f[0]-p[0]);const g=(f[0]-d.leftTopMM[0])/d.fovMM[0],v=(f[1]-d.leftTopMM[1])/d.fovMM[1];if(g>=-.1&&g<=1.1&&v>=-.1&&v<=1.1){const m=Math.max(0,Math.min(1,g)),A=Math.max(0,Math.min(1,v)),x=d.leftTopWidthHeight.slice();let w=!1;x[2]<0&&(w=!0,x[0]+=x[2],x[2]=-x[2]);let b=m;w&&(b=1-m);const y=1-A,C=x[0]+b*x[2],S=x[1]+y*x[3];return[C,S]}}return null}function UD(e,t,n){const{volumes:r,meshes:i,volumeObject3D:s,isSliceMM:o=!1,preferredSliceType:a}=n,l=ac(e,{volumes:r,meshes:i,volumeObject3D:s,isSliceMM:o});let c={index:-1,distance:1/0};for(let u=0;u<t.length;u++){const d=t[u],h=d.axCorSag;if(h>2||d.AxyzMxy.length<4||a!==void 0&&h!==a)continue;let f=q(l[0],l[1],l[2]);h===1&&(f=je(f,[0,2,1])),h===2&&(f=je(f,[1,2,0]));const p=d.AxyzMxy,g=p[2]+p[4]*(f[1]-p[1])-p[3]*(f[0]-p[0]),v=Math.abs(f[2]-g);if(v<c.distance&&(c={index:u,distance:v}),v<=.1){const A=(f[0]-d.leftTopMM[0])/d.fovMM[0],x=(f[1]-d.leftTopMM[1])/d.fovMM[1];if(A>=0&&A<=1&&x>=0&&x<=1){const w=d.leftTopWidthHeight.slice();let b=!1;w[2]<0&&(b=!0,w[0]+=w[2],w[2]=-w[2]);let y=A;b&&(y=1-A);const C=1-x,S=w[0]+y*w[2],E=w[1]+C*w[3];return{pos:[S,E],tileIndex:u}}}}if(c.index>=0&&c.distance<2){const u=c.index,d=t[u],h=d.axCorSag;let f=q(l[0],l[1],l[2]);h===1&&(f=je(f,[0,2,1])),h===2&&(f=je(f,[1,2,0]));const p=d.AxyzMxy;f[2]=p[2]+p[4]*(f[1]-p[1])-p[3]*(f[0]-p[0]);const g=(f[0]-d.leftTopMM[0])/d.fovMM[0],v=(f[1]-d.leftTopMM[1])/d.fovMM[1];if(g>=-.1&&g<=1.1&&v>=-.1&&v<=1.1){const m=Math.max(0,Math.min(1,g)),A=Math.max(0,Math.min(1,v)),x=d.leftTopWidthHeight.slice();let w=!1;x[2]<0&&(w=!0,x[0]+=x[2],x[2]=-x[2]);let b=m;w&&(b=1-m);const y=1-A,C=x[0]+b*x[2],S=x[1]+y*x[3];return{pos:[C,S],tileIndex:u}}}return null}var LD=function(e,t,n){const r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t),e.compileShader(r);const i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,n),e.compileShader(i);const s=e.createProgram();if(e.attachShader(s,r),e.attachShader(s,i),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(s)),e.getShaderParameter(r,e.COMPILE_STATUS)||console.log("Vertex shader compilation error:",e.getShaderInfoLog(r)),e.getShaderParameter(i,e.COMPILE_STATUS)||console.log("Fragment shader compilation error:",e.getShaderInfoLog(i)),k.error(e.getProgramInfoLog(s)),new Error("Shader failed to link, see console for log");return s},Ae=class{constructor(e,t,n){R(this,"program"),R(this,"uniforms",{}),R(this,"isMatcap"),R(this,"isCrosscut"),this.program=LD(e,t,n);const r=/uniform[^;]+[ ](\w+);/g,i=/uniform[^;]+[ ](\w+);/,s=t.match(r),o=n.match(r);s&&s.forEach(a=>{const l=a.match(i);this.uniforms[l[1]]=-1}),o&&o.forEach(a=>{const l=a.match(i);this.uniforms[l[1]]=-1});for(const a in this.uniforms)this.uniforms[a]=e.getUniformLocation(this.program,a)}use(e){e.useProgram(this.program)}},Ms=`#version 300 es
#line 4
layout(location=0) in vec3 pos;
layout(location=1) in vec3 texCoords;
uniform mat4 mvpMtx;
out vec3 vColor;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vColor = texCoords;
}`,xf=`
	vec4 drawColor(float scalar, float drawOpacity) {
		float nlayer = float(textureSize(colormap, 0).y);
		float layer = (nlayer - 0.5) / nlayer;
		vec4 dcolor = texture(colormap, vec2((scalar * 255.0)/256.0 + 0.5/256.0, layer)).rgba;
		dcolor.a *= drawOpacity;
		return dcolor;
}`,Bo=`vec3 GetBackPosition(vec3 startPositionTex) {
	vec3 startPosition = startPositionTex * volScale;
	vec3 invR = 1.0 / rayDir;
	vec3 tbot = invR * (vec3(0.0)-startPosition);
	vec3 ttop = invR * (volScale-startPosition);
	vec3 tmax = max(ttop, tbot);
	vec2 t = min(tmax.xx, tmax.yz);
	vec3 endPosition = startPosition + (rayDir * min(t.x, t.y));
	//convert world position back to texture position:
	endPosition = endPosition / volScale;
	return endPosition;
}

float distance2Plane(in vec4 samplePos, in vec4 clipPlane) {
	// treat clipPlane.a > 1 as "no clip" sentinel (keeps existing behavior)
	if (clipPlane.a > 1.0) {
			return 1000.0; // sentinel large distance
	}
	vec3 n = clipPlane.xyz;
	const float EPS = 1e-6;
	float nlen = length(n);
	if (nlen < EPS) {
			return 1000.0; // invalid plane normal
	}
	// signed plane value: dot(n, p-0.5) + a
	float signedDist = dot(n, samplePos.xyz - 0.5) + clipPlane.a;
	// perpendicular (Euclidean) distance is |signedDist| / |n|
	return abs(signedDist) / nlen;
}

// see if clip plane trims ray sampling range sampleStartEnd.x..y
void clipSampleRange(in vec3 dir, in vec4 rayStart, in vec4 clipPlane, inout vec2 sampleStartEnd, inout bool hasClip) {
	const float CSR_EPS = 1e-6;
	// quick exit: no clip plane
	if (clipPlane.a > 1.0)
			return;
	hasClip = true;
	// quick exit: empty range
	if ((sampleStartEnd.y - sampleStartEnd.x) <= CSR_EPS)
			return;
	// Which side does the ray start on? (plane eqn: dot(n, p-0.5) + a = 0)
	float sampleSide = dot(clipPlane.xyz, rayStart.xyz - 0.5) + clipPlane.a;
	bool startsFront = (sampleSide < 0.0);
	float dis = - 1.0;
	// plane normal dot ray direction
	float cdot = dot(dir, clipPlane.xyz);
	// avoid division by 0 for near-parallel plne
	if (abs(cdot) >= CSR_EPS)
		dis = (-clipPlane.a - dot(clipPlane.xyz, rayStart.xyz - 0.5)) / cdot;
	if (dis < 0.0 || dis > sampleStartEnd.y + CSR_EPS) {
			if (startsFront)
				sampleStartEnd = vec2(0.0, 0.0);
			return;
	}
	bool frontface = (cdot > 0.0);
	if (frontface)
		sampleStartEnd.x = max(sampleStartEnd.x, dis);
	else
		sampleStartEnd.y = min(sampleStartEnd.y, dis);
	// if nothing remains, mark empty
	if (sampleStartEnd.y - sampleStartEnd.x <= CSR_EPS)
		sampleStartEnd = vec2(0.0, 0.0);
}

bool skipSample (float pos, vec2 sampleRange) {
	return (pos < sampleRange.x || pos > sampleRange.y);
}

float frac2ndc(vec3 frac) {
//https://stackoverflow.com/questions/7777913/how-to-render-depth-linearly-in-modern-opengl-with-gl-fragcoord-z-in-fragment-sh
	vec4 pos = vec4(frac.xyz, 1.0); //fraction
	vec4 dim = vec4(vec3(textureSize(volume, 0)), 1.0);
	pos = pos * dim;
	vec4 shim = vec4(-0.5, -0.5, -0.5, 0.0);
	pos += shim;
	vec4 mm = transpose(matRAS) * pos;
	float z_ndc = (mvpMtx * vec4(mm.xyz, 1.0)).z;
	return (z_ndc + 1.0) / 2.0;
}`+xf,wf=`void main() {
	if (fColor.x > 2.0) {
		fColor = vec4(1.0, 0.0, 0.0, 0.5);
		return;
	}
	fColor = vec4(0.0,0.0,0.0,0.0);
	vec4 clipPlaneColorX = clipPlaneColor;
	//if (clipPlaneColor.a < 0.0)
	//	clipPlaneColorX.a = - 1.0;
	bool isColorPlaneInVolume = false;
	if (clipPlaneColorX.a < 0.0) {
		isColorPlaneInVolume = true;
		clipPlaneColorX.a = 0.0;
	}
	//fColor = vec4(vColor.rgb, 1.0); return;
	vec3 start = vColor;
	gl_FragDepth = 1.0;
	vec3 backPosition = GetBackPosition(start);
	// fColor = vec4(backPosition, 1.0); return;
	vec3 dir = normalize(backPosition - start);
	//clipVolumeStart(start, backPosition);
	dir = normalize(dir);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position

	vec2 sampleRange = vec2(0.0, len);
	bool hasClip = false;
	for (int i = 0; i < MAX_CLIP_PLANES; i++)
		clipSampleRange(dir, samplePos, clipPlanes[i], sampleRange, hasClip);
	bool isClip = (sampleRange.x > 0.0) || ((sampleRange.y < len) && (sampleRange.y > 0.0));
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if ((isClipCutaway) && (sampleRange.x <= 0.0) && (sampleRange.y >= len)) {
		//completely clipped, but ray does not intersect plane
		if (hasClip)
			samplePos.a = len + 1.0;
		else
			sampleRange = vec2(0.0, 0.0);
	}
	if ((!isClipCutaway) && (sampleRange.x >= sampleRange.y))
		samplePos.a = len + 1.0;
	while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	float drawOpacityA = renderDrawAmbientOcclusionXY.y;
	if ((samplePos.a >= len) && (((overlays < 1.0) && (drawOpacityA <= 0.0) ) || (backgroundMasksOverlays > 0)))  {
		if (isClip)
			fColor += clipPlaneColorX;
		return;
	}
	fColor = vec4(1.0, 1.0, 1.0, 1.0);
	//gl_FragDepth = frac2ndc(samplePos.xyz); //crude due to fast pass resolution
	if (samplePos.a > deltaDirFast.a )
		samplePos -= deltaDirFast;
	//end: fast pass
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	// clip planes create steep gradients: reduce aliasing with more jitter
	if (isClip)
		samplePos += deltaDir * ran * 1.41; //jitter ray
	else
		samplePos += deltaDir * ran; //jitter ray
`,lc=`
	if (firstHit.a < len) {
		gl_FragDepth = frac2ndc(firstHit.xyz);
		vec4 paqdSample = texture(paqd, samplePos.xyz);
		if (paqdSample.a > 0.0) {
			//colAcc.rgb = paqdSample.rgb;
			float a = max(abs(paqdUniforms[2]), abs(paqdUniforms[3]));
			colAcc.rgb = mix(colAcc.rgb, paqdSample.rgb, 0.5 * paqdSample.a * a);
		}
		if (isClip) {
			//shade voxels with clip color
			if (clipPlaneColor.a < 0.0) {
					float thresh = 4.0 * sliceSize;
					float firstHit1 = firstHit.a + deltaDir.a;
				if (isClipCutaway) {
					float min1 = abs(firstHit1 - sampleRange.y);
					float dx = samplePos.a - firstHit1;
					if (min1 < thresh)
						colAcc.rgb = mix(colAcc.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
					else if (( colAcc.a > earlyTermination ) && (dx > thresh)) {
						min1 = abs(firstHit1 - sampleRange.x);
						if (min1 < (thresh * 0.5)) {
							colAcc.rgb = mix(colAcc.rgb , clipPlaneColorX.rgb, abs(clipPlaneColor.a)*0.5);
						}
							
					}
				} else {
					if (abs(firstHit1 - sampleRange.x) < thresh)
						colAcc.rgb = mix(colAcc.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
				} // clipPlaneColor.a < 0.0
			}
			//ambient occlusion: make creases dark
			float min1 = 1000.0;
			float min2 = 1000.0;
			// find smallest and second-smallest distances
			vec4 firstHit1 = firstHit - deltaDir;
			for (int i = 0; i < MAX_CLIP_PLANES; i++) {
				float d = distance2Plane(firstHit1, clipPlanes[i]);
				if (d < min1) {
						min2 = min1;
						min1 = d;
				} else if (d < min2) {
						min2 = d;
				}
			}
			float thresh = 1.2 * sliceSize;
			if ((isClipCutaway) && (min2 < thresh) && (sampleRange.x > 0.0)) {
				if ((abs(sampleRange.x - firstHit.a) > ( 2.0 * thresh)) && ((abs(sampleRange.y - firstHit.a) > (2.0 * thresh))))
					min2 = thresh; 
			}
			// if second is 0 -> factor 0 (black), if second >= sliceSize -> factor 1 (unchanged)
			const float aoFrac = 0.5;
			float factor = (1.0 - aoFrac) + aoFrac * clamp(min2 / thresh, 0.0, 1.0);
			// linear darkening: multiply color by factor (or use mix(vec3(0), colAcc.rgb, factor))
			colAcc.rgb *= factor;
		}
	}
	colAcc.a = (colAcc.a / earlyTermination) * backOpacity;
	fColor = colAcc;
	float renderDrawAmbientOcclusionX = renderDrawAmbientOcclusionXY.x;
	float drawOpacity = renderDrawAmbientOcclusionXY.y;
	if ((overlays < 1.0) && (drawOpacity <= 0.0))
		return;
	//overlay pass
	samplePos = vec4(start.xyz, 0.0); //ray position
	//start: OPTIONAL fast pass: rapid traversal until first hit
	stepSizeFast = sliceSize * 1.0;
	deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (drawOpacity > 0.0)
			val = max(val, texture(drawing, samplePos.xyz).r);
		if (val > 0.001)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	if (samplePos.a >= len) {
		if (isClip && (fColor.a == 0.0))
				fColor += clipPlaneColorX;
			return;
	}
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	float overFarthest = len;
	colAcc = vec4(0.0, 0.0, 0.0, 0.0);

	samplePos += deltaDir * ran; //jitter ray
	vec4 overFirstHit = vec4(0.0,0.0,0.0,2.0 * len);
	if (backgroundMasksOverlays > 0)
		samplePos = firstHit;
	bool firstDraw = true;
	while (samplePos.a <= len) {
		vec4 colorSample = texture(overlay, samplePos.xyz);
		if ((colorSample.a < 0.01) && (drawOpacity > 0.0)) {
			float val = texture(drawing, samplePos.xyz).r;
			vec4 draw = drawColor(val, drawOpacity);
			if ((draw.a > 0.0) && (firstDraw)) {
				firstDraw = false;
				float sum = 0.0;
				const float mn = 1.0 / 256.0;
				const float sampleRadius = 1.1;
				float dx = sliceSize * sampleRadius;
				vec3 center = samplePos.xyz;
				//six neighbors that share a face
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,0.0), dir)).r, mn);
				//float proportion = (sum / mn) / 6.0;
				
				//12 neighbors that share an edge
				dx = sliceSize * sampleRadius * sqrt(2.0) * 0.5;
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,-dx,0.0), dir)).r, mn);

				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,-dx,0.0), dir)).r, mn);
				
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,+dx,0.0), dir)).r, mn);
				float proportion = (sum / mn) / 18.0; //proportion of six neighbors is non-zero
				
				//a high proportion of hits means crevice
				//since the AO term adds shadows that darken most voxels, it will result in dark surfaces
				//the term brighten adds a little illumination to balance this
				// without brighten, only the most extreme ridges will not be darker
				const float brighten = 1.2;
				vec3 ao = draw.rgb * (1.0 - proportion) * brighten;
				draw.rgb = mix (draw.rgb, ao , renderDrawAmbientOcclusionX);
			}
			colorSample = draw;
		}
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (overFirstHit.a > len)
				overFirstHit = samplePos;
			colorSample.a *= renderOverlayBlend;
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			overFarthest = samplePos.a;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	//if (samplePos.a >= len) {
	if (colAcc.a <= 0.0) {
		if (isClip && (fColor.a == 0.0))
			fColor += clipPlaneColorX;
		return;
	}
	if (overFirstHit.a < firstHit.a)
		gl_FragDepth = frac2ndc(overFirstHit.xyz);
	float overMix = colAcc.a;
	float overlayDepth = 0.3;
	if (fColor.a <= 0.0)
		overMix = 1.0;
	else if (((overFarthest) > backNearest)) {
		float dx = (overFarthest - backNearest)/1.73;
		dx = fColor.a * pow(dx, overlayDepth);
		overMix *= 1.0 - dx;
	}
	fColor.rgb = mix(fColor.rgb, colAcc.rgb, overMix);
	fColor.a = max(fColor.a, colAcc.a);
}`,OD=`#version 300 es
#line 215
#define MAX_CLIP_PLANES 6
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+Bo+`
	void main() {
	vec3 start = vColor;
	gl_FragDepth = 1.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	//clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		fColor = vec4(0.0,0.0,0.0,0.0);
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float dis = len;
	//check if axial plane is closest
	vec4 aClip = vec4(0.0, 0.0, 1.0, (1.0- clipPlane.z) - 0.5);
	float adis = (-aClip.a - dot(aClip.xyz, samplePos.xyz-0.5)) / dot(dir,aClip.xyz);
	if (adis > 0.0)
		dis = min(adis, dis);
	//check of coronal plane is closest
	vec4 cClip = vec4(0.0, 1.0, 0.0, (1.0- clipPlane.y) - 0.5);
	float cdis = (-cClip.a - dot(cClip.xyz, samplePos.xyz-0.5)) / dot(dir,cClip.xyz);
	if (cdis > 0.0)
		dis = min(cdis, dis);
	//check if coronal slice is closest
	vec4 sClip = vec4(1.0, 0.0, 0.0, (1.0- clipPlane.x) - 0.5);
	float sdis = (-sClip.a - dot(sClip.xyz, samplePos.xyz-0.5)) / dot(dir,sClip.xyz);
	if (sdis > 0.0)
		dis = min(sdis, dis);
	if ((dis > 0.0) && (dis < len)) {
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		colAcc = texture(volume, samplePos.xyz);
		colAcc.a = earlyTermination;
		firstHit = samplePos;
		backNearest = min(backNearest, samplePos.a);
	}
	//the following are only used by overlays
	vec4 clipPlaneColorX = clipPlaneColor;
	bool isColorPlaneInVolume = false;
	bool isClip = false;
	bool isClipCutaway = false;
	vec2 sampleRange;
	// vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`+lc,zD=`#version 300 es
#line 215
#define MAX_CLIP_PLANES 6
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform bool isClipCutaway;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+Bo+wf+`while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		vec4 colorSample = texture(volume, samplePos.xyz);
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (firstHit.a > len)
				firstHit = samplePos;
			// backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	if (firstHit.a < len)
		backNearest = firstHit.a;
`+lc,zs=192,Hv=`#version 300 es
#line 215
#define MAX_CLIP_PLANES 6
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform bool isClipCutaway;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 normMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing, gradient;
uniform highp sampler2D colormap;
uniform highp sampler2D matCap;
uniform vec2 renderDrawAmbientOcclusionXY;
uniform float gradientAmount;
uniform float silhouettePower;
uniform float gradientOpacity[${zs}];
in vec3 vColor;
out vec4 fColor;
`,jD=Hv+Bo+wf+`
	float startPos = samplePos.a;
	float clipCloseThresh = 5.0 * deltaDir.a;
	float clipClose = sampleRange.x;
	if (isClipCutaway)
		clipClose = sampleRange.y;
	if (!isClip)
		clipClose = -1.0;
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	float silhouetteThreshold = 1.0 - silhouettePower;
	while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			int gradIdx = int(grad.a * ${zs}.0);
			grad.a = gradientOpacity[gradIdx];
			if (grad.a > 0.0) {
				grad.rgb = normalize(grad.rgb*2.0 - 1.0);
				vec3 n = mat3(normMtx) * grad.rgb;
				// compute phong ads illumination
				const float ambient = 0.2;
				const float diffuse = 0.8;
				const float specular = 1.0;
				const float shininess = 10.0;
				vec3 l = normalize(vec3(0.0, -0.5, 0.5));
				vec3 viewDir = vec3(0.0, 0.0, -1.0);
				float ldn = dot(n, l);
				float a = ambient;
				vec3 d = abs(ldn) * colorSample.rgb * diffuse;
				float s = pow(max(dot(reflect(l, n), viewDir), 0.0), shininess) * specular;
				vec4 ads = vec4(a + d + s, 1.0);
				ads = mix(vec4(1.0), ads, gradientAmount);
				// highlight viewer-based edges
				// for opacity, light direction is ray direction
				float lightNormDot = dot(grad.rgb, rayDir);
				// n.b. "lightNormDot" is cosTheta, "silhouettePower" is Fresnel effect exponent
				if (abs(samplePos.a - clipClose) > clipCloseThresh)
					colorSample.rgb *= ads.rgb;
				if (firstHit.a > len)
					firstHit = samplePos;
				backNearest = min(backNearest, samplePos.a);
				colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
				colorSample.a *= grad.a;
				colorSample.a *= pow(1.0 - abs(lightNormDot), silhouettePower);
				float viewAlign = abs(lightNormDot); // 0 = perpendicular, 1 = aligned
				// linearly map silhouettePower (0..1) to a threshold range, e.g., [1.0, 0.0]
				// Cull voxels that are too aligned with the view direction
				if (viewAlign > silhouetteThreshold)
					colorSample.a = 0.0;
				colorSample.rgb *= colorSample.a;
				colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
				if ( colAcc.a > earlyTermination )
					break;
			}
		}
		samplePos += deltaDir; //advance ray position
	}
`+lc,GD=Hv+Bo+wf+`
	float startPos = samplePos.a;
	//float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			colorSample.rgb = abs(normalize(grad.rgb*2.0 - 1.0));
			if (firstHit.a > len)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+lc,Ha=`#version 300 es
#line 392
layout(location=0) in vec3 pos;
uniform int axCorSag;
uniform mat4 mvpMtx;
uniform mat4 frac2mm;
uniform float slice;
out vec3 texPos;
void main(void) {
	texPos = vec3(pos.x, pos.y, slice);
	if (axCorSag > 1)
		texPos = vec3(slice, pos.x, pos.y);
	else if (axCorSag > 0)
		texPos = vec3(pos.x, slice, pos.y);
	vec4 mm = frac2mm * vec4(texPos, 1.0);
	gl_Position = mvpMtx * mm;
}`,Xv=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform float drawRimOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;
`+xf+`
vec4 blendRGBA(vec4 foreground, vec4 background) {
  float alphaOut = foreground.a + background.a * (1.0 - foreground.a);
  vec3 colorOut = (foreground.rgb * foreground.a + background.rgb * background.a * (1.0 - foreground.a)) / alphaOut;
  return vec4(colorOut, alphaOut);
}
float paqdEaseAlpha(float alpha) {
  // t are alpha transitions
  // <t0 -> y0
  // t0..t1  -> mix between y0..y1
  // t1..t2 -> mix between y1..y2
  // >t2 -> y2
  float t0 = paqdUniforms[0]; // 0.3;
  float t1 = 0.5 * (paqdUniforms[0] + paqdUniforms[1]); // 0.4;
  float t2 = paqdUniforms[1]; // 0.9;
  float y0 = 0.0;
  float y1 = abs(paqdUniforms[2]); // 1.0;
  float y2 = abs(paqdUniforms[3]); //0.25;
  if (alpha <= t0) {
    return y0;
  } else if (alpha <= t1) {
    return mix(y0, y1, (alpha - t0) / (t1 - t0)); // LERP 0.0  1.0
  } else if (alpha <= t2) {
    return mix(y1, y2, (alpha - t1) / (t2 - t1)); // LERP 1.0  0.2
  } else {
    return y2;
  }
}

void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 ocolor = vec4(0.0);
	float overlayAlpha = overlayAlphaShader;
	if (overlays > 0.0) {
		ocolor = texture(overlay, texPos);
		//dFdx for "boxing" issue 435 has aliasing on some implementations (coarse vs fine)
		//however, this only identifies 50% of the edges due to aliasing effects
		// http://www.aclockworkberry.com/shader-derivative-functions/
		// https://bgolus.medium.com/distinctive-derivative-differences-cce38d36797b
		//if ((ocolor.a >= 1.0) && ((dFdx(ocolor.a) != 0.0) || (dFdy(ocolor.a) != 0.0)  ))
		//	ocolor.rbg = vec3(0.0, 0.0, 0.0);
		bool isOutlineBelowNotAboveThreshold = true;
		if (isOutlineBelowNotAboveThreshold) {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a < 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				//6 voxel neighbors that share a face
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 0.0;
				if (axCorSag != 2) {
					a = max(a, texture(overlay, vxR).a);
					a = max(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = max(a, texture(overlay, vxA).a);
					a = max(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = max(a, texture(overlay, vxS).a);
					a = max(a, texture(overlay, vxI).a);
				}
				bool isCheckCorners = true;
				if (isCheckCorners) {
					//12 voxel neighbors that share an edge
					vec3 vxRA = vec3(texPos.x+vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxLA = vec3(texPos.x-vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxRP = vec3(texPos.x+vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxLP = vec3(texPos.x-vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxRS = vec3(texPos.x+vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxLS = vec3(texPos.x-vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxRI = vec3(texPos.x+vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxLI = vec3(texPos.x-vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxAS = vec3(texPos.x, texPos.y+vx.y, texPos.z+vx.z);
					vec3 vxPS = vec3(texPos.x, texPos.y-vx.y, texPos.z+vx.z);
					vec3 vxAI = vec3(texPos.x, texPos.y+vx.y, texPos.z-vx.z);
					vec3 vxPI = vec3(texPos.x, texPos.y-vx.y, texPos.z-vx.z);

					if (axCorSag == 0) { //axial corners
						a = max(a, texture(overlay, vxRA).a);
						a = max(a, texture(overlay, vxLA).a);
						a = max(a, texture(overlay, vxRP).a);
						a = max(a, texture(overlay, vxLP).a);
					}
					if (axCorSag == 1) { //coronal corners
						a = max(a, texture(overlay, vxRS).a);
						a = max(a, texture(overlay, vxLS).a);
						a = max(a, texture(overlay, vxRI).a);
						a = max(a, texture(overlay, vxLI).a);
					}
					if (axCorSag == 2) { //sagittal corners
						a = max(a, texture(overlay, vxAS).a);
						a = max(a, texture(overlay, vxPS).a);
						a = max(a, texture(overlay, vxAI).a);
						a = max(a, texture(overlay, vxPI).a);
					}
				}
				if (a >= 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}

		} else {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a >= 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 1.0;
				if (axCorSag != 2) {
					a = min(a, texture(overlay, vxR).a);
					a = min(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = min(a, texture(overlay, vxA).a);
					a = min(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = min(a, texture(overlay, vxS).a);
					a = min(a, texture(overlay, vxI).a);
				}
				if (a < 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}
		} //outline above threshold
	}

`,YD=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler2D volume, overlay;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler2D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;`+xf+`void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos.xy);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 dcolor = drawColor(texture(drawing, texPos.xy).r, drawOpacity);
	if (dcolor.a > 0.0) {
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
}`,Kv=`	ocolor.a *= overlayAlpha;
	float drawV = texture(drawing, texPos).r;
	vec4 dcolor = drawColor(drawV, drawOpacity);
	if (dcolor.a > 0.0) {
		if (drawRimOpacity >= 0.0) {
			vec3 vx = 1.0 / vec3(textureSize(drawing, 0));
			//6 voxel neighbors that share a face
			vec3 offsetX = dFdx(texPos); // left-right spacing
			vec3 offsetY = dFdy(texPos); // up-down spacing
			float L = texture(drawing, texPos - offsetX).r;
			float R = texture(drawing, texPos + offsetX).r;
			float T = texture(drawing, texPos - offsetY).r;
			float B = texture(drawing, texPos + offsetY).r;
			if (L != drawV || R != drawV || T != drawV || B != drawV)
				dcolor.a = drawRimOpacity;
		}
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
	vec4 pcolor = texture(paqd, texPos);
	if (pcolor.a > 0.0) {
		pcolor.a = paqdEaseAlpha(pcolor.a);
		if (pcolor.a > 0.0) {
			if (paqdUniforms[3] < 0.0)
				ocolor = blendRGBA(pcolor, ocolor);
			else
				ocolor = blendRGBA(ocolor, pcolor);
		}
	}
	if ((backgroundMasksOverlays > 0) && (background.a == 0.0))
		return;
	float a = color.a + ocolor.a * (1.0 - color.a); // premultiplied alpha
	if (a == 0.0) return;
	color.rgb = mix(color.rgb, ocolor.rgb, ocolor.a / a);
	color.a = a;
}`,WD=Xv+Kv,HD=Xv+`	if (ocolor.a > 0.0) {
		//https://gamedev.stackexchange.com/questions/102889/is-it-possible-to-convert-vec4-to-int-in-glsl-using-opengl-es
		uint alpha = uint(ocolor.a * 255.0);
		vec3 xyzFlip = vec3(float((uint(1) & alpha) > uint(0)), float((uint(2) & alpha) > uint(0)), float((uint(4) & alpha) > uint(0)));
		//convert from 0 and 1 to -1 and 1
		xyzFlip = (xyzFlip * 2.0) - 1.0;
		//https://math.stackexchange.com/questions/1905533/find-perpendicular-distance-from-point-to-line-in-3d
		//v1 principle direction of tensor for this voxel
		vec3 v1 = ocolor.rgb;
		//flips encode polarity to convert from 0..1 to -1..1 (27 bits vs 24 bit precision)
		v1 = normalize( v1 * xyzFlip);
		vec3 vxl = fract(texPos * vec3(textureSize(volume, 0))) - 0.5;
		//vxl coordinates now -0.5..+0.5 so 0,0,0 is origin
		vxl.x = -vxl.x;
		float t = dot(vxl,v1);
		vec3 P = t * v1;
		float dx = length(P-vxl);
		ocolor.a = 1.0 - smoothstep(0.2,0.25, dx);
		//if modulation was applied, use that to scale alpha not color:
		ocolor.a *= length(ocolor.rgb);
		ocolor.rgb = normalize(ocolor.rgb);
		//compute distance one half voxel closer to viewer:
		float pan = 0.5;
		if (axCorSag == 0)
			vxl.z -= pan;
		if (axCorSag == 1)
			vxl.y -= pan;
		if (axCorSag == 2)
			vxl.x += pan;
		t = dot(vxl,v1);
		P = t * v1;
		float dx2 = length(P-vxl);
		ocolor.rgb += (dx2-dx-(0.5 * pan)) * 1.0;
	}
`+Kv,uu=`#version 300 es
#line 480
precision highp int;
precision highp float;
uniform vec4 lineColor;
out vec4 color;
void main() {
	color = lineColor;
}`,XD=`#version 300 es
#line 723
precision highp int;
precision highp float;

uniform vec4 lineColor;
uniform vec4 leftTopWidthHeight;
uniform float thickness; // line thickness in pixels
uniform vec2 canvasWidthHeight;

out vec4 color;

void main() {
    // fragment position in screen coordinates
    vec2 fragCoord = gl_FragCoord.xy;

    // canvas height
    float canvasHeight = canvasWidthHeight.y;

    // 'top' and 'bottom' to match gl_FragCoord.y coordinate system
    float top = canvasHeight - leftTopWidthHeight.y;
    float bottom = top - leftTopWidthHeight.w;

    // left and right edges
    float left = leftTopWidthHeight.x;
    float right = left + leftTopWidthHeight.z;

    bool withinLeft = fragCoord.x >= left && fragCoord.x <= left + thickness;
    bool withinRight = fragCoord.x <= right && fragCoord.x >= right - thickness;
    bool withinTop = fragCoord.y <= top && fragCoord.y >= top - thickness;
    bool withinBottom = fragCoord.y >= bottom && fragCoord.y <= bottom + thickness;

    bool isOutline = withinLeft || withinRight || withinTop || withinBottom;

    if (isOutline) {
        color = lineColor;
    } else {
        discard; 
    }
}`,KD=`#version 300 es
#line 490
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vColor;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vColor = pos.xy;
}`,_D=`#version 300 es
#line 506
precision highp int;
precision highp float;
uniform highp sampler2D colormap;
uniform float layer;
in vec2 vColor;
out vec4 color;
void main() {
	float nlayer = float(textureSize(colormap, 0).y);
	float fmap = (0.5 + layer) / nlayer;
	color = vec4(texture(colormap, vec2(vColor.x, fmap)).rgb, 1.0);
}`,p1=`#version 300 es
#line 520
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
}`,QD=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec4 startXYendXY;
void main(void) {
	vec2 posXY = mix(startXYendXY.xy, startXYendXY.zw, pos.x);
	vec2 dir = normalize(startXYendXY.xy - startXYendXY.zw);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0
	gl_Position = vec4((posXY * 2.0) - 1.0, 0.0, 1.0);
}`,qD=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec2 startXY;
uniform vec3 endXYZ; // transformed XYZ point
void main(void) {	
	vec2 posXY = mix(startXY.xy, endXYZ.xy, pos.x);
	vec2 startDiff = endXYZ.xy - startXY.xy;
	float startDistance = length(startDiff);
	vec2 diff = endXYZ.xy - posXY;
	float currentDistance = length(diff);
	vec2 dir = normalize(startXY.xy - endXYZ.xy);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0	
	float z = endXYZ.z * ( 1.0 - abs(currentDistance/startDistance)); 
	gl_Position = vec4((posXY * 2.0) - 1.0, z, 1.0);
}`,ZD=`#version 300 es
#line 549
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(pos.x, 1.0 - pos.y);
}`,JD=`#version 300 es
#line 565
precision highp int;
precision highp float;
uniform highp sampler2D bmpTexture;
in vec2 vUV;
out vec4 color;
void main() {
	color = texture(bmpTexture, vUV);
}`,$D=`#version 300 es
#line 576
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(uvLeftTopWidthHeight.x + (pos.x * uvLeftTopWidthHeight.z), uvLeftTopWidthHeight.y  + ((1.0 - pos.y) * uvLeftTopWidthHeight.w) );
}`,eT=`#version 300 es
#line 593
precision highp int;
precision highp float;
uniform highp sampler2D fontTexture;
uniform vec4 fontColor;
uniform float screenPxRange;
in vec2 vUV;
out vec4 color;
float median(float r, float g, float b) {
	return max(min(r, g), min(max(r, g), b));
}
void main() {
	vec3 msd = texture(fontTexture, vUV).rgb;
	float sd = median(msd.r, msd.g, msd.b);
	float screenPxDistance = screenPxRange*(sd - 0.5);
	float opacity = clamp(screenPxDistance + 0.5, 0.0, 1.0);
	color = vec4(fontColor.rgb , fontColor.a * opacity);
}`,tT=`#version 300 es
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = pos.xy;
}`,nT=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 circleColor;
uniform float fillPercent;
in vec2 vUV;
out vec4 color;
void main() {
	/* Check if the pixel is inside the circle
		 and color it with a gradient. Otherwise, color it 
		 transparent   */
	float distance = length(vUV-vec2(0.5,0.5));
	if ( distance < 0.5 && distance >= (1.0 - fillPercent) / 2.0){
			color = vec4(circleColor.r,circleColor.g,circleColor.b,circleColor.a) ;			
	}else{
			color = vec4(0.0,0.0,0.0,0.0);
	}
}
`,Tr=`#version 300 es
#line 613
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4( (vPos.xy-vec2(0.5,0.5)) * 2.0, 0.0, 1.0);
}`,ca=`#version 300 es
uniform highp usampler3D intensityVol;
`,g1=`#version 300 es
uniform highp isampler3D intensityVol;
`,rT=`#version 300 es
uniform highp sampler3D intensityVol;
`,A1=`#line 1042
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform bool isAdditiveBlend;
uniform float coordZ;
uniform float layer;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform uint activeIndex;
uniform vec4 xyzaFrac;
uniform mat4 mtx;
float textureWidth;
float nlayer;
float layerY;

vec4 scalar2color(uint idx) {
	float fx = (float(idx) + 0.5) / textureWidth;
	vec4 clr = texture(colormap, vec2(fx, layerY)).rgba;
	if (clr.a > 0.0)
		clr.a = 1.0;
	clr.a *= opacity;
	return clr;
}
void main(void) {
	vec4 vx = vec4(TexCoord.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint idx = uint(texture(intensityVol, vx.xyz).r);
	if (idx == uint(0)) {
		if (layer < 1.0) {
			FragColor = vec4(0.0, 0.0, 0.0, 0.0);
			return;
		}
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	textureWidth = float(textureSize(colormap, 0).x);
	nlayer = float(textureSize(colormap, 0).y);
	layerY = ((2.0 * layer) + 1.5) / nlayer;
	//idx = ((idx - uint(1)) % uint(100))+uint(1);
	FragColor = scalar2color(idx);
	bool isBorder = false;
	vx = vec4(TexCoord.x+xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint R = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x-xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint L = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y+xyzaFrac.y, coordZ, 1.0) * mtx;
	uint A = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y-xyzaFrac.y, coordZ, 1.0) * mtx;
	uint P = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y, coordZ+xyzaFrac.z, 1.0) * mtx;
	uint S = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y, coordZ-xyzaFrac.z, 1.0) * mtx;
	uint I = uint(texture(intensityVol, vx.xyz).r);
	vec4 centerColor = FragColor;
	FragColor.a += scalar2color(R).a;
	FragColor.a += scalar2color(L).a;
	FragColor.a += scalar2color(A).a;
	FragColor.a += scalar2color(P).a;
	FragColor.a += scalar2color(S).a;
	FragColor.a += scalar2color(I).a;
	FragColor.a /= 7.0;
	if ((!isBorder) &&(idx == activeIndex)) {
		if (centerColor.a > 0.5)
			FragColor.a *= 0.4;
		else
			FragColor.a =0.8;
	}
	if (xyzaFrac.a != 0.0) { //outline
		if ((idx != R) || (idx != L) || (idx != A) || (idx != P) || (idx != S) || (idx != I)) {
			isBorder = true;
			if (xyzaFrac.a > 0.0)
				FragColor.a = xyzaFrac.a;
			else
				FragColor = vec4(0.0, 0.0, 0.0, 1.0);
		}
	}
	if (layer < 1.0) return;
		vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		// https://en.wikipedia.org/wiki/Alpha_compositing
		float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
		if (aout <= 0.0) return;
		if (isAdditiveBlend)
			FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
		else
			FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
		FragColor.a = aout;
}`,du=`#line 691
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform float cal_maxNeg;
uniform float cal_minNeg;
uniform bool isAlphaThreshold;
uniform bool isColorbarFromZero;
uniform bool isAdditiveBlend;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform int modulation;
uniform highp sampler3D modulationVol;
uniform float opacity;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	if ((vx.x < 0.0) || (vx.x > 1.0) || (vx.y < 0.0) || (vx.y > 1.0) || (vx.z < 0.0) || (vx.z > 1.0)) {
		//set transparent if out of range
		//https://webglfundamentals.org/webgl/webgl-3d-textures-repeat-clamp.html
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	float f = (scl_slope * float(texture(intensityVol, vx.xyz).r)) + scl_inter;
	float mn = cal_min;
	float mx = cal_max;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mn = 0.0;
	float r = max(0.00001, abs(mx - mn));
	mn = min(mn, mx);
	float txl = mix(0.0, 1.0, (f - mn) / r);
	if (f > mn) { //issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
	}
	//https://stackoverflow.com/questions/5879403/opengl-texture-coordinates-in-pixel-space
	float nlayer = float(textureSize(colormap, 0).y);
	//each volume has two color maps:
	// (layer*2) = negative and (layer * 2) + 1 = positive
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(txl, y)).rgba;
	//negative colors
	mn = cal_minNeg;
	mx = cal_maxNeg;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mx = 0.0;
	//if ((!isnan(cal_minNeg)) && ( f < mx)) {
	if ((cal_minNeg < cal_maxNeg) && ( f < mx)) {
		r = max(0.00001, abs(mx - mn));
		mn = min(mn, mx);
		txl = 1.0 - mix(0.0, 1.0, (f - mn) / r);
		//issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
		y = ((2.0 * layer) + 0.5)/nlayer;
		FragColor = texture(colormap, vec2(txl, y));
	}
	if (layer > 0.7)
		FragColor.a = step(0.00001, FragColor.a);
	//if (modulation > 10)
	//	FragColor.a *= texture(modulationVol, vx.xyz).r;
	//	FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (isAlphaThreshold) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = pow(-f / -cal_maxNeg, 2.0);
		else if ((f > 0.0) && (cal_min > 0.0))
			FragColor.a *= pow(f / cal_min, 2.0); //issue435:  A = (V/X)**2
		//FragColor.g = 0.0;
	} else if (isColorbarFromZero) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = 0.0;
		else if ((f > 0.0) && (cal_min > 0.0) && (f < cal_min))
			FragColor.a *= 0.0;

	}
	if (modulation == 1) {
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	} else if (modulation == 2) {
		FragColor.a = texture(modulationVol, vx.xyz).r;
	}
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	if (isAdditiveBlend)
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
	else
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,iT=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
float textureWidth;
float nlayer;
float layerY;

vec4 scalar2color(uint idx) {
	float fx = (float(idx) + 0.5) / textureWidth;
	vec4 clr = texture(colormap, vec2(fx, layerY)).rgba;
	if (clr.a > 0.0)
		clr.a = 1.0;
	clr.a *= opacity;
	return clr;
}

vec4 paqd2color(uvec4 rgba) {
  // paqd r: max prob index, g: 2nd index, b: max prob a: 2nd prob
  float prob1 = float(rgba.b)/255.0;
  float prob2 = float(rgba.a)/255.0;
  vec4 clr1 = scalar2color(rgba.r);
  vec4 clr2 = scalar2color(rgba.g);
  float total = prob1 + prob2;
  vec4 clr = vec4(clr1.rgb, total);
  // vec4 clr = vec4(clr1.rgb, prob1);
  if (total > 0.0) {
    clr.rgb = mix(clr2.rgb, clr1.rgb, prob1 / total);
  }
  return clr;
}
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	ivec3 voxelCoord = ivec3(vx.xyz * vec3(textureSize(intensityVol, 0)));
	uvec4 rgba = texelFetch(intensityVol, voxelCoord, 0);
	FragColor = vec4(0.0, 0.0, 0.0, 0.0);
	if (rgba.r > uint(0)) {
		textureWidth = float(textureSize(colormap, 0).x);
		nlayer = float(textureSize(colormap, 0).y);
		layerY = ((2.0 * layer) + 1.5) / nlayer;
		FragColor = paqd2color(rgba);
		return;
	}
	// if (layer > 2.0) return;
	// FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
}`,sT=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	uvec4 aColor = texture(intensityVol, vx.xyz);
	FragColor = vec4(float(aColor.r) / 255.0, float(aColor.g) / 255.0, float(aColor.b) / 255.0, float(aColor.a) / 255.0);
	if (modulation == 1)
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (!hasAlpha) {
		FragColor.a = (FragColor.r * 0.21 + FragColor.g * 0.72 + FragColor.b * 0.07);
		//next line: we could binarize alpha, but see rendering of visible human
		//FragColor.a = step(0.01, FragColor.a);
	}
	if (modulation == 2)
		FragColor.a = texture(modulationVol, vx.xyz).r;
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,oT=`#version 300 es
#line 808
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4((vPos.x - 0.5) * 2.0, (vPos.y - 0.5) * 2.0, 0.0, 1.0);
}`,aT=`#version 300 es
#line 829
	precision highp float;
	precision highp int;
	precision highp isampler3D;
	layout(location = 0) out int label;
	layout(location = 1) out int strength;
	in vec2 TexCoord;
	uniform int finalPass;
	uniform float coordZ;
	uniform lowp sampler3D in3D;
	uniform highp isampler3D backTex; // background
	uniform highp isampler3D labelTex; // label
	uniform highp isampler3D strengthTex; // strength
void main(void) {
	vec3 interpolatedTextureCoordinate = vec3(TexCoord.xy, coordZ);
	ivec3 size = textureSize(backTex, 0);
	ivec3 texelIndex = ivec3(floor(interpolatedTextureCoordinate * vec3(size)));
	int background = texelFetch(backTex, texelIndex, 0).r;
	label = texelFetch(labelTex, texelIndex, 0).r;
	strength = texelFetch(strengthTex, texelIndex, 0).r;
	for (int k = -1; k <= 1; k++) {
		for (int j = -1; j <= 1; j++) {
			for (int i = -1; i <= 1; i++) {
				if (i != 0 && j != 0 && k != 0) {
					ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
					int neighborBackground = texelFetch(backTex, neighborIndex, 0).r;
					int neighborStrength = texelFetch(strengthTex, neighborIndex, 0).r;
					int strengthCost = abs(neighborBackground - background);
					int takeoverStrength = neighborStrength - strengthCost;
					if (takeoverStrength > strength) {
						strength = takeoverStrength;
						label = texelFetch(labelTex, neighborIndex, 0).r;
					}
				}
			}
		}
	}
	if (finalPass < 1)
		return;
	int ok = 1;
	ivec4 labelCount = ivec4(0,0,0,0);
	for (int k = -1; k <= 1; k++)
		for (int j = -1; j <= 1; j++)
			for (int i = -1; i <= 1; i++) {
				ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
				int ilabel = texelFetch(labelTex, neighborIndex, 0).r;
				if ((ilabel < 0) || (ilabel > 3))
					ok = 0;
				else
					labelCount[ilabel]++;
			}
	if (ok != 1) {
		return;
	}
	int maxIdx = 0;
	for (int i = 1; i < 4; i++) {
		if (labelCount[i] > labelCount[maxIdx])
			maxIdx = i;
	}
	label = maxIdx;
}`,lT=`#version 300 es
layout(location=0) in vec3 pos;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
}`,cT=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 surfaceColor;
out vec4 color;
void main() {
	color = surfaceColor;
}`,uT=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 clr;
out vec4 vClr;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vClr = clr;
}`,dT=`#version 300 es
precision highp int;
precision highp float;
in vec4 vClr;
out vec4 color;
uniform float opacity;
void main() {
	color = vec4(vClr.rgb, opacity);
}`,yf=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
out vec3 vN;
out vec4 vP;
out vec4 vPc;
void main(void) {
	vec3 lightPosition = vec3(0.0, 0.0, -10.0);
	vP = vec4(pos, 1.0);
	vPc = mvpMtx * vec4(pos, 1.0);
	gl_Position = vPc;
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,hT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
out vec4 color;
vec4 packFloatToVec4i(const float value) {
	const vec4 bitSh = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
	const vec4 bitMsk = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
	vec4 res = fract(value * bitSh);
	res -= res.xxyz * bitMsk;
	return res;
}
void main() {
	color = packFloatToVec4i(gl_FragCoord.z);
}`,fT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
float stepmix(float edge0, float edge1, float E, float x){
	float T = clamp(0.5 * (x - edge0 + E) / E, 0.0, 1.0);
	return mix(edge0, edge1, T);
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0);
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.5;
	float shininess = 50.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float df = max(0.0, dot(n, l));
	float sf = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	const float A = 0.1;
	const float B = 0.3;
	const float C = 0.6;
	const float D = 1.0;
	float E = fwidth(df);
	if (df > A - E && df < A + E) df = stepmix(A, B, E, df);
	else if (df > B - E && df < B + E) df = stepmix(B, C, E, df);
	else if (df > C - E && df < C + E) df = stepmix(C, D, E, df);
	else if (df < A) df = 0.0;
	else if (df < B) df = B;
	else if (df < C) df = C;
	else df = D;
	E = fwidth(sf);
	if (sf > 0.5 - E && sf < 0.5 + E)
		sf = smoothstep(0.5 - E, 0.5 + E, sf);
	else
		sf = step(0.5, sf);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(df, 0.0) * vClr.rgb * diffuse;
	color.rgb = a + d + (specular * sf);
	color.a = opacity;
}`,mT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.25;
	float shininess = 10.0;
	float PenWidth = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	float view = abs(dot(n,r)); //with respect to viewer
	if (PenWidth < view) discard;
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color.rgb = a + d + s;
	color.a = opacity;
}`,pT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	const float thresh = 0.4;
	const vec3 viewDir = vec3(0.0, 0.0, -1.0);
	vec3 n = normalize(vN);
	// use abs() for two-sided lighting, max() for one sided
	float cosTheta = abs(dot(n, viewDir));
	// float cosTheta = max(dot(n, viewDir), 0.0);
	// optional fresnel equation - adjust exponent
	// cosTheta = 1.0 - pow(1.0 - cosTheta, 2.0);
	// use step for binary edges, smoothstep for feathered edges
	// vec3 d = step(thresh, cosTheta) * vClr.rgb;
	vec3 d = smoothstep(thresh - 0.05, thresh + 0.05, cosTheta) * vClr.rgb;
	color = vec4(d, opacity);
}`,gT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
  const float edge0 = 0.1;
  const float edge1 = 0.25;
  const vec3 viewDir = vec3(0.0, 0.0, -1.0);
  vec3 n = normalize(vN);
  float cosTheta = abs(dot(n, viewDir));
  float alpha = 1.0 - smoothstep(edge0, edge1, cosTheta);
  if (alpha <= 0.0) {
    discard;
  }
  color = vec4(0.0, 0.0, 0.0, opacity * alpha);
}`,AT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float diffuse = 1.0;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 0.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d = lightNormDot * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(d + s, opacity);
}`,vT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float diffuse = 1.4;
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(normalize(vN), l), 0.0);
	color = vec4(lightNormDot * vClr.rgb * diffuse, opacity);
}`,xT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float specularRGB = 0.7;
	float specularWhite = 0.3;
	float shininess = 10.0;
	float diffuse = 1.0;
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	vec3 n = normalize(vN);
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d3 = lightNormDot * vClr.rgb * diffuse;
	float s = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 s3 = specularRGB * s * vClr.rgb;
	s *= specularWhite;
	color = vec4(d3 + s3 + s, opacity);
}`,wT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
in vec4 vPc;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	// Compute curvature
	vec3 dx = dFdx(n);
	vec3 dy = dFdy(n);
	vec3 xneg = n - dx;
	vec3 xpos = n + dx;
	vec3 yneg = n - dy;
	vec3 ypos = n + dy;
	float depth = length(vPc.xyz);
	float curv = (cross(xneg, xpos).y - cross(yneg, ypos).x) / depth;
	//at this stage 0.5 for flat, with valleys dark and ridges bright
	curv = 1.0 - (curv + 0.5);
	//clamp
	curv =  min(max(curv, 0.0), 1.0);
	// easing function
	curv = pow(curv, 0.5);
	//modulate ambient and diffuse with curvature
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.6;
	float diffuse = 0.6;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 lightPosition = vec3(0.0, 10.0, -2.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient * curv;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,yT=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 sliceMM;
uniform float thickMM ;
in vec4 vClr;
in vec4 vP;  // vertex position in mm
out vec4 color;
void main() {
    const float LINE_WIDTH_PX = 4.0;   // target thickness in pixels
    //const float LINE_THRESH_MM = 1.5;   // target thickness in pixels
    const float TILT_STRENGTH = 1.0;   // >0 shrinks ribbon for oblique triangles
    // --- signed distances to each orthogonal plane (object space) ---
    vec3 d = vP.xyz - sliceMM.xyz;
    vec3 ad = abs(d);
    // --- derivatives to get pixel-consistent widths (per-axis) ---
    vec3 fd = fwidth(vP.xyz);
    //minDist is in mm not pixels
    float minDist = min(ad.x, min(ad.y, ad.z));
    if (minDist >  sliceMM.w) discard;
    // --- per-plane obliqueness: use the two in-plane components' fwidth ---
    float tiltX = length(fd.yz); // for plane with normal X
    float tiltY = length(fd.xz); // for plane with normal Y
    float tiltZ = length(fd.xy); // for plane with normal Z
    float tfX = clamp(1.0 / (1.0 + TILT_STRENGTH * tiltX), 0.0, 1.0);
    float tfY = clamp(1.0 / (1.0 + TILT_STRENGTH * tiltY), 0.0, 1.0);
    float tfZ = clamp(1.0 / (1.0 + TILT_STRENGTH * tiltZ), 0.0, 1.0);
    // --- half-widths for each plane (apply per-axis tilt factor) ---
    vec3 halfWidth;
    halfWidth.x = (LINE_WIDTH_PX * 0.5) * fd.x * tfX;
    halfWidth.y = (LINE_WIDTH_PX * 0.5) * fd.y * tfY;
    halfWidth.z = (LINE_WIDTH_PX * 0.5) * fd.z * tfZ;
    // --- smooth alpha for each plane ---
    vec3 edgeA = 1.0 - smoothstep(vec3(0.0), halfWidth, ad);
    // combine planes (max of X,Y,Z ribbons)
    float edgeAlpha = max(edgeA.x, max(edgeA.y, edgeA.z));
    if (edgeAlpha <= 1e-4) discard; // outside ribbons
    color = vec4(vClr.rgb, vClr.a * edgeAlpha);
}`,bT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,CT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
uniform sampler2D matCap;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	vec2 uv = n.xy * 0.5 + 0.5;
	uv.y = 1.0 - uv.y;
	vec3 clr = texture(matCap,uv.xy).rgb * vClr.rgb;
	color = vec4(clr, opacity);
}`,ST=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float ambient = 0.35;
	float diffuse = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	color = vec4(a + d, opacity);
}`,ET=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 up = vec3(0.0, 1.0, 0.0);
	float ax = dot(n, up) * 0.5 + 0.5;  //Shreiner et al. (2013) OpenGL Programming Guide, 8th Ed., p 388. ISBN-10: 0321773039
	vec3 upClr = vec3(1.0, 1.0, 0.95);
	vec3 downClr = vec3(0.4, 0.4, 0.6);
	vec3 a = vClr.rgb * ambient;
	a *= mix(downClr, upClr, ax);
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,MT=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
//Spherical harmonics constants
const float C1 = 0.429043;
const float C2 = 0.511664;
const float C3 = 0.743125;
const float C4 = 0.886227;
const float C5 = 0.247708;
//Spherical harmonics coefficients
// Ramamoorthi, R., and P. Hanrahan. 2001b. "An Efficient Representation for Irradiance Environment Maps." In Proceedings of SIGGRAPH 2001, pp. 497500.
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// Constants for Eucalyptus Grove lighting
const vec3 L00  = vec3( 0.3783264,  0.4260425,  0.4504587);
const vec3 L1m1 = vec3( 0.2887813,  0.3586803,  0.4147053);
const vec3 L10  = vec3( 0.0379030,  0.0295216,  0.0098567);
const vec3 L11  = vec3(-0.1033028, -0.1031690, -0.0884924);
const vec3 L2m2 = vec3(-0.0621750, -0.0554432, -0.0396779);
const vec3 L2m1 = vec3( 0.0077820, -0.0148312, -0.0471301);
const vec3 L20  = vec3(-0.0935561, -0.1254260, -0.1525629);
const vec3 L21  = vec3(-0.0572703, -0.0502192, -0.0363410);
const vec3 L22  = vec3( 0.0203348, -0.0044201, -0.0452180);
vec3 SH(vec3 vNormal) {
	vNormal = vec3(vNormal.x,vNormal.z,vNormal.y);
	vec3 diffuseColor = C1 * L22 * (vNormal.x * vNormal.x - vNormal.y * vNormal.y) +
	C3 * L20 * vNormal.z * vNormal.z +
	C4 * L00 -
	C5 * L20 +
	2.0 * C1 * L2m2 * vNormal.x * vNormal.y +
	2.0 * C1 * L21  * vNormal.x * vNormal.z +
	2.0 * C1 * L2m1 * vNormal.y * vNormal.z +
	2.0 * C2 * L11  * vNormal.x +
	2.0 * C2 * L1m1 * vNormal.y +
	2.0 * C2 * L10  * vNormal.z;
	return diffuseColor;
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.1;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 a = vClr.rgb * ambient;
	vec3 d = vClr.rgb * diffuse * SH(-reflect(n, vec3(l.x, l.y, -l.z)) );
	color = vec4(a + d + s, opacity);
}`,DT=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
flat out vec3 vN;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,_v=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
flat in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,TT=`#version 300 es
#line 1260
#define MAX_CLIP_PLANES 6
//precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 volScale;
uniform vec3 texVox;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform bool isClipCutaway;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform mat4 matRAS;
uniform mat4 mvpMtx;
uniform float drawOpacity, renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform int backgroundMasksOverlays;
in vec3 vColor;
out vec4 fColor;
`+Bo+`
void main() {
	int id = 254;
	vec3 start = vColor;
	gl_FragDepth = 1.0;
	fColor = vec4(0.0, 0.0, 0.0, 0.0); //assume no hit: ID = 0
	float fid = float(id & 255)/ 255.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	//clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) return;//discard; //length limit for parallel rays
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	dir = normalize(dir);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	bool hasClip = false;
	vec2 sampleRange = vec2(0.0, len);
	for (int i = 0; i < MAX_CLIP_PLANES; i++)
		clipSampleRange(dir, samplePos, clipPlanes[i], sampleRange, hasClip);
	bool isClip = (sampleRange.x > 0.0) || ((sampleRange.y < len) && (sampleRange.y > 0.0));
	//vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	if (isClip) fColor = vec4(samplePos.xyz, 253.0 / 255.0); //assume no hit: ID = 0
	if ((isClipCutaway) && (sampleRange.x <= 0.0) && (sampleRange.y >= len)) {
		//completely clipped, but ray does not intersect plane
		if (hasClip)
			samplePos.a = len + 1.0;
		else
			sampleRange = vec2(0.0, 0.0);
	}
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			break;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//end: fast pass
	if ((overlays < 1.0) || (backgroundMasksOverlays > 0)) {
		return; //background hit, no overlays
	}
	//overlay pass
	len = min(len, samplePos.a); //only find overlay closer than background
	samplePos = vec4(start.xyz, 0.0); //ray position
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			return;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//if (fColor.a == 0.0) discard; //no hit in either background or overlays
	//you only get here if there is a hit with the background that is closer than any overlay
}`,IT=`#version 300 es
// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
layout(location=0)  in vec3 a_position;
layout(location=1)  in vec3 a_color;
// A matrix to transform the positions by
uniform mat4 u_matrix;
out vec3 vColor;
// all shaders have a main function
void main() {
	// Multiply the position by the matrix.
	vec4 pos = vec4(a_position, 1.0);
	gl_Position = u_matrix * vec4(pos);
	vColor = a_color;
}
`,FT=`#version 300 es
precision highp float;
uniform vec4 u_color;
in vec3 vColor;
out vec4 outColor;
void main() {
	outColor = vec4(vColor, 1.0);
}`,RT=`#version 300 es
#line 1359
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	vec2 viewCoord = (vPos.xy - 0.5) * 2.0;
	gl_Position = vec4((vPos.xy - 0.5) * 2.0, 0.0, 1.0);
}`,PT=`#version 300 es
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform lowp sampler3D in3D;
void main(void) {
 FragColor = texture(in3D, vec3(TexCoord.xy, coordZ));
}`,ua=`#version 300 es
#line 286
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
    TexCoord = vPos.xy;
    gl_Position = vec4( (vPos.xy-vec2(0.5,0.5))* 2.0, 0.0, 1.0);
}`,NT=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 samp = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
 FragColor = samp*0.125;
}`,kT=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 XYZ = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 vec4 OYZ = texture(intensityVol,vx+vec3(0.0,+dY,+dZ));
 vec4 xYZ = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 vec4 XOZ = texture(intensityVol,vx+vec3(+dX,0.0,+dZ));
 vec4 OOZ = texture(intensityVol,vx+vec3(0.0,0.0,+dZ));
 vec4 xOZ = texture(intensityVol,vx+vec3(-dX,0.0,+dZ));
 vec4 XyZ = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 vec4 OyZ = texture(intensityVol,vx+vec3(0.0,-dY,+dZ));
 vec4 xyZ = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));

 vec4 XYO = texture(intensityVol,vx+vec3(+dX,+dY,0.0));
 vec4 OYO = texture(intensityVol,vx+vec3(0.0,+dY,0.0));
 vec4 xYO = texture(intensityVol,vx+vec3(-dX,+dY,0.0));
 vec4 XOO = texture(intensityVol,vx+vec3(+dX,0.0,0.0));
 vec4 OOO = texture(intensityVol,vx+vec3(0.0,0.0,0.0));
 vec4 xOO = texture(intensityVol,vx+vec3(-dX,0.0,0.0));
 vec4 XyO = texture(intensityVol,vx+vec3(+dX,-dY,0.0));
 vec4 OyO = texture(intensityVol,vx+vec3(0.0,-dY,0.0));
 vec4 xyO = texture(intensityVol,vx+vec3(-dX,-dY,0.0));

 vec4 XYz = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 vec4 OYz = texture(intensityVol,vx+vec3(0.0,+dY,-dZ));
 vec4 xYz = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 vec4 XOz = texture(intensityVol,vx+vec3(+dX,0.0,-dZ));
 vec4 OOz = texture(intensityVol,vx+vec3(0.0,0.0,-dZ));
 vec4 xOz = texture(intensityVol,vx+vec3(-dX,0.0,-dZ));
 vec4 Xyz = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 vec4 Oyz = texture(intensityVol,vx+vec3(0.0,-dY,-dZ));
 vec4 xyz = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));

 vec4 blurred = vec4 (0.0, 0.0, 0.0, 0.0);
 blurred.r = 2.0*(xOz.r +xOZ.r +xyO.r +xYO.r +xOO.r +XOz.r +XOZ.r +XyO.r +XYO.r +XOO.r) +xyz.r +xyZ.r +xYz.r +xYZ.r +Xyz.r +XyZ.r +XYz.r +XYZ.r;
 blurred.g = 2.0*(Oyz.r +OyZ.r +xyO.r +XyO.r +OyO.r +OYz.r +OYZ.r +xYO.r +XYO.r +OYO.r) +xyz.r +Xyz.r +xyZ.r +XyZ.r +xYz.r +XYz.r +xYZ.r +XYZ.r;
 blurred.b = 2.0*(Oyz.r +OYz.r +xOz.r +XOz.r +OOz.r +OyZ.r +OYZ.r +xOZ.r +XOZ.r +OOZ.r) +xyz.r +Xyz.r +xYz.r +XYz.r +xyZ.r +XyZ.r +XyZ.r +XYZ.r;
 blurred.a = 0.32*(abs(blurred.r)+abs(blurred.g)+abs(blurred.b));
 // 0.0357 = 1/28 to account for weights, rescale to 2**16,
 FragColor = 0.0357*blurred;
}`,Qv=`
  gradientSample.a = log2(gradientSample.r*gradientSample.r + gradientSample.g*gradientSample.g + gradientSample.b*gradientSample.b + 1.922337562475971e-06) + 18.988706873717717;
`,BT=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  float TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ)).r;
  float TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ)).r;
  float TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ)).r;
  float TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ)).r;
  float BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ)).r;
  float BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ)).r;
  float BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ)).r;
  float BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ)).r;
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = BAR+BAL+BPR+BPL -TAR-TAL-TPR-TPL;
  gradientSample.g = TPR+TPL+BPR+BPL -TAR-TAL-BAR-BAL;
  gradientSample.b = TAL+TPL+BAL+BPL -TAR-TPR-BAR-BPR;
${Qv}
	// 0.04242020977371934 = 1/(log2(3*8) - log2(1/(255**2*8))) // 3*8 -> max for 1st order gradient
	gradientSample.a *= 0.04242020977371934;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb = (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,VT=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform float dX2;
uniform float dY2;
uniform float dZ2;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  vec4 TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
  vec4 TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
  vec4 TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
  vec4 TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
  vec4 BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
  vec4 BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
  vec4 BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
  vec4 BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
  vec4 T = texture(intensityVol,vx+vec3(+dX2,0.0,0.0));
  vec4 A = texture(intensityVol,vx+vec3(0.0,+dY2,0.0));
  vec4 R = texture(intensityVol,vx+vec3(0.0,0.0,+dZ2));
  vec4 B = texture(intensityVol,vx+vec3(-dX2,0.0,0.0));
  vec4 P = texture(intensityVol,vx+vec3(0.0,-dY2,0.0));
  vec4 L = texture(intensityVol,vx+vec3(0.0,0.0,-dZ2));
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = -4.0*B.r +8.0*(BAR.r+BAL.r+BPR.r+BPL.r) -8.0*(TAR.r+TAL.r+TPR.r+TPL.r) +4.0*T.r;
  gradientSample.g = -4.0*P.g +8.0*(TPR.g+TPL.g+BPR.g+BPL.g) -8.0*(TAR.g+TAL.g+BAR.g+BAL.g) +4.0*A.g;
  gradientSample.b = -4.0*L.b +8.0*(TAL.b+TPL.b+BAL.b+BPL.b) -8.0*(TAR.b+TPR.b+BAR.b+BPR.b) +4.0*R.b;
${Qv}
	gradientSample.a *= 0.0325;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb =  (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`;function UT(){return[{Name:"Phong",Frag:bT},{Name:"Matte",Frag:ST},{Name:"Harmonic",Frag:MT},{Name:"Hemispheric",Frag:ET},{Name:"Crevice",Frag:wT},{Name:"Edge",Frag:AT},{Name:"Diffuse",Frag:vT},{Name:"Outline",Frag:mT},{Name:"Specular",Frag:xT},{Name:"Toon",Frag:fT},{Name:"Flat",Frag:_v},{Name:"Matcap",Frag:CT},{Name:"Rim",Frag:pT},{Name:"Silhouette",Frag:gT},{Name:"Crosscut",Frag:yT}]}function Ds(e){const{gl:t,shader:n,gradientAmount:r=0,renderDrawAmbientOcclusion:i,renderSilhouette:s,gradientOpacity:o}=e;n.use(t),t.uniform1i(n.uniforms.volume,0),t.uniform1i(n.uniforms.colormap,1),t.uniform1i(n.uniforms.overlay,2),t.uniform1i(n.uniforms.drawing,7),t.uniform1i(n.uniforms.paqd,8),t.uniform1fv(n.uniforms.renderDrawAmbientOcclusion,[i,1]),t.uniform1f(n.uniforms.gradientAmount,r),t.uniform1f(n.uniforms.silhouettePower,s);const a=new Float32Array(zs);for(let l=0;l<zs;l++)o===0?a[l]=1:a[l]=Math.pow(l/(zs-1),o*8);t.uniform1fv(t.getUniformLocation(n.program,"gradientOpacity"),a),n.uniforms.clipPlanes=t.getUniformLocation(n.program,"clipPlanes[0]")}function LT(e){const{gl:t,fragmentShaderText:n,drawOpacity:r,customSliceShader:i}=e;if(i&&t.deleteProgram(i.program),!n)return null;const s=new Ae(t,Ha,n);return s.use(t),t.uniform1i(s.uniforms.volume,0),t.uniform1i(s.uniforms.colormap,1),t.uniform1i(s.uniforms.overlay,2),t.uniform1i(s.uniforms.drawing,7),t.uniform1i(s.uniforms.paqd,8),t.uniform1f(s.uniforms.drawOpacity,r),s}function qv(e,t){const n=e.toLowerCase();for(let r=0;r<t.length;r++)if(t[r].Name.toLowerCase()===n)return r}function OT(e){const{gl:t,fragmentShaderText:n,name:r,meshShaders:i}=e;if(!n)throw new Error("Need fragment shader");const s=qv(r,i);if(s!==void 0&&s>=0){const a=i[s].shader;a&&t.deleteProgram(a.program),i.splice(s,1)}const o=new Ae(t,yf,n);return o.use(t),{Name:r,Frag:n,shader:o}}function zT(e,t=!0){const n=e.map(r=>r.Name);return t?n.sort():n}function jT(e,t){const n=new Ae(e,Ha,YD);n.use(e),e.uniform1i(n.uniforms.volume,0),e.uniform1i(n.uniforms.colormap,1),e.uniform1i(n.uniforms.overlay,2),e.uniform1i(n.uniforms.drawing,7),e.uniform1f(n.uniforms.drawOpacity,t);const r=new Ae(e,Ha,WD);r.use(e),e.uniform1i(r.uniforms.volume,0),e.uniform1i(r.uniforms.colormap,1),e.uniform1i(r.uniforms.overlay,2),e.uniform1i(r.uniforms.drawing,7),e.uniform1f(r.uniforms.drawOpacity,t);const i=new Ae(e,Ha,HD);return i.use(e),e.uniform1i(i.uniforms.volume,0),e.uniform1i(i.uniforms.colormap,1),e.uniform1i(i.uniforms.overlay,2),e.uniform1i(i.uniforms.drawing,7),e.uniform1f(i.uniforms.drawOpacity,t),{slice2DShader:n,sliceMMShader:r,sliceV1Shader:i}}function GT(e,t,n){const r=new Ae(e,IT,FT),i=e.createVertexArray();e.bindVertexArray(i);const s=e.createBuffer();return e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.vertexAttribPointer(0,3,e.FLOAT,!1,24,0),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,3,e.FLOAT,!1,24,12),e.bindVertexArray(n),{shader:r,vao:i}}function YT(e){const t=new Ae(e,p1,uu);t.use(e);const n=new Ae(e,p1,XD);n.use(e);const r=new Ae(e,QD,uu);r.use(e);const i=new Ae(e,qD,uu);i.use(e);const s=new Ae(e,tT,nT);return s.use(e),{rectShader:t,rectOutlineShader:n,lineShader:r,line3DShader:i,circleShader:s}}function WT(e){const{gl:t,renderDrawAmbientOcclusion:n,renderSilhouette:r,gradientOpacity:i}=e,s=new Ae(t,Ms,zD);Ds({gl:t,shader:s,renderDrawAmbientOcclusion:n,renderSilhouette:r,gradientOpacity:i});const o=new Ae(t,Ms,OD);Ds({gl:t,shader:o,renderDrawAmbientOcclusion:n,renderSilhouette:r,gradientOpacity:i});const a=new Ae(t,Ms,jD);Ds({gl:t,shader:a,gradientAmount:.3,renderDrawAmbientOcclusion:n,renderSilhouette:r,gradientOpacity:i}),t.uniform1i(a.uniforms.matCap,5),t.uniform1i(a.uniforms.gradient,6);const l=new Ae(t,Ms,GD);return Ds({gl:t,shader:l,renderDrawAmbientOcclusion:n,renderSilhouette:r,gradientOpacity:i}),t.uniform1i(l.uniforms.matCap,5),t.uniform1i(l.uniforms.gradient,6),{renderVolumeShader:s,renderSliceShader:o,renderGradientShader:a,renderGradientValuesShader:l,renderShader:s}}function HT(e){const t=new Ae(e,KD,_D);return t.use(e),e.uniform1i(t.uniforms.colormap,1),t}function XT(e){const t=new Ae(e,ua,NT),n=new Ae(e,ua,kT),r=new Ae(e,ua,BT),i=new Ae(e,ua,VT),s=new Ae(e,oT,aT),o=new Ae(e,RT,PT);return{blurShader:t,sobelBlurShader:n,sobelFirstOrderShader:r,sobelSecondOrderShader:i,growCutShader:s,passThroughShader:o}}function KT(e){const t=new Ae(e,Tr,ca.concat(A1)),n=new Ae(e,Tr,g1.concat(A1)),r=new Ae(e,Tr,ca.concat(du)),i=new Ae(e,Tr,g1.concat(du)),s=new Ae(e,Tr,rT.concat(du)),o=new Ae(e,Tr,ca.concat(sT)),a=new Ae(e,Tr,ca.concat(iT));return{orientShaderAtlasU:t,orientShaderAtlasI:n,orientShaderU:r,orientShaderI:i,orientShaderF:s,orientShaderRGBU:o,orientShaderPAQD:a}}function _T(e){const t=new Ae(e,lT,cT);t.use(e);const n=new Ae(e,uT,dT);return{surfaceShader:t,fiberShader:n}}function QT(e){const t=new Ae(e,Ms,TT);return t.use(e),t.uniforms.clipPlanes=e.getUniformLocation(t.program,"clipPlanes[0]"),e.uniform1i(t.uniforms.volume,0),e.uniform1i(t.uniforms.colormap,1),e.uniform1i(t.uniforms.overlay,2),e.uniform1i(t.uniforms.drawing,7),t}function qT(e,t){for(let n=0;n<t.length;n++){const r=t[n];r.Name==="Flat"?r.shader=new Ae(e,DT,_v):r.shader=new Ae(e,yf,r.Frag),r.shader.use(e),r.shader.isCrosscut=r.Name==="Crosscut",r.shader.isMatcap=r.Name==="Matcap",r.shader.isMatcap&&e.uniform1i(r.shader.uniforms.matCap,5)}}function ZT(e,t){const n=[...e,t],r=n.length===1?0:n.length-1;return{volumes:n,index:r}}function $i(e,t){for(let n=0;n<e.length;n++)if(e[n].id===t)return n;return-1}function JT(e,t){const n=e.slice(1);for(let r=0;r<n.length;r++)if(n[r].id===t)return r;return-1}function es(e,t,n=0){const r=e.length;if(n>r)return{volumes:e,back:e.length>0?e[0]:null,overlays:e.slice(1)};const i=$i(e,t.id),s=[...e];return n===0?(s.splice(i,1),s.unshift(t)):n<0?s.splice(i,1):(s.splice(i,1),s.splice(n,0,t)),{volumes:s,back:s.length>0?s[0]:null,overlays:s.slice(1)}}function Zv(e,t){return{volumes:es(e,t,-1).volumes,removed:t}}function $T(e,t){if(t>=e.length)throw new Error("Index of volume out of bounds");return Zv(e,e[t])}function eI(e,t){return es(e,t,0)}function tI(e,t){const n=$i(e,t.id);return es(e,t,n+1)}function nI(e,t){const n=$i(e,t.id);return es(e,t,n-1)}function rI(e,t){return es(e,t,e.length-1)}function iI(e,t,n){return e[t].opacity=n,e}function sI(e,t){return e[t].clone()}function oI(e,t,n){const r=$i(e,t);if(r<0)return e;const i=e[r];let s=n;return s>i.nFrame4D-1&&(s=i.nFrame4D-1),s<0&&(s=0),s===i.frame4D||(i.frame4D=s),e}function aI(e,t){const n=$i(e,t);return n<0?0:e[n].frame4D}function lI(e){const t=e.hdr,n=t.dims[1]*t.dims[2]*t.dims[3],r=new Uint8ClampedArray(n*4),i=.2*Math.min(Math.min(t.dims[1],t.dims[2]),t.dims[3]),s=.5*t.dims[1],o=.5*t.dims[2],a=.5*t.dims[3];let l=0;for(let c=0;c<t.dims[3];c++)for(let u=0;u<t.dims[2];u++)for(let d=0;d<t.dims[1];d++){const h=Math.abs(d-s),f=Math.abs(u-o),p=Math.abs(c-a),g=Math.sqrt(h*h+f*f+p*p);let v=0;g<i&&(v=255),r[l++]=0,r[l++]=v,r[l++]=0,r[l++]=v*.5}return r}function cI(e){let t=e.img;return e.frame4D>0&&e.frame4D<e.nFrame4D&&(t=e.img.slice(e.frame4D*e.nVox3D,(e.frame4D+1)*e.nVox3D)),t}function uI(e){const{hdr:t,max2D:n,max3D:r}=e,i=t.dims[1]>n||t.dims[2]>n,s=t.dims[1]>r||t.dims[2]>r||t.dims[3]>r;return{isAboveMax2D:i,isAboveMax3D:s}}function dI(e){const{gl:t,overlayItem:n,orientShader:r,createColormapTexture:i}=e;if(n.colormapLabel===null||n.colormapLabel.lut.length<=7)return{colormapLabelTexture:null,shouldCleanup:!1};const s=n.colormapLabel.max-n.colormapLabel.min+1,o=i(null,1,s);return t.texSubImage2D(t.TEXTURE_2D,0,0,0,s,1,t.RGBA,t.UNSIGNED_BYTE,n.colormapLabel.lut),t.uniform1f(r.uniforms.cal_min,n.colormapLabel.min-.5),t.uniform1f(r.uniforms.cal_max,n.colormapLabel.max+.5),t.bindTexture(t.TEXTURE_2D,o),{colormapLabelTexture:o,shouldCleanup:!0}}function hI(e){const{gl:t,overlayItem:n,hdr:r,volumes:i,orientShader:s,r8Tex:o,TEXTURE7:a}=e;if(n.modulationImage===null||n.modulationImage<0||n.modulationImage>=i.length)return t.uniform1i(s.uniforms.modulation,0),{modulateTexture:null};const l=i[n.modulationImage].hdr;if(l.dims[1]!==r.dims[1]||l.dims[2]!==r.dims[2]||l.dims[3]!==r.dims[3])return k.debug("Modulation image dimensions do not match target"),t.uniform1i(s.uniforms.modulation,0),{modulateTexture:null};k.debug("modulating",i),n.modulateAlpha?(t.uniform1i(s.uniforms.modulation,2),t.uniform1f(s.uniforms.opacity,1)):t.uniform1i(s.uniforms.modulation,1);const c=o(null,a,r.dims,!0);t.activeTexture(a),t.bindTexture(t.TEXTURE_3D,c);const u=r.dims[1]*r.dims[2]*r.dims[3],d=new Uint8Array(u),h=i[n.modulationImage].cal_min,f=1/(i[n.modulationImage].cal_max-h),p=i[n.modulationImage].img.buffer;let g=new Uint8Array(p);switch(l.datatypeCode){case 4:g=new Int16Array(p);break;case 16:g=new Float32Array(p);break;case 64:g=new Float64Array(p);break;case 128:g=new Uint8Array(p);break;case 512:g=new Uint16Array(p);break}k.debug(i[n.modulationImage]);const v=i[n.modulationImage].colormapNegative.length>0;let m=i[n.modulationImage].cal_min,A=i[n.modulationImage].cal_max;isFinite(i[n.modulationImage].cal_minNeg)&&isFinite(i[n.modulationImage].cal_maxNeg)&&(m=i[n.modulationImage].cal_minNeg,A=i[n.modulationImage].cal_maxNeg),m=Math.abs(m),A=Math.abs(A),m>A&&([m,A]=[A,m]);const x=1/(A-m);let w=Math.abs(n.modulateAlpha);w=Math.max(w,1);const b=i[n.modulationImage].frame4D*u;for(let y=0;y<u;y++){const C=g[y+b]*l.scl_slope+l.scl_inter;let S=(C-h)*f;v&&C<0&&(S=(Math.abs(C)-m)*x),S=Math.min(Math.max(S,0),1),S=Math.pow(S,w)*255,d[y]=S}return t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,r.dims[1],r.dims[2],r.dims[3],t.RED,t.UNSIGNED_BYTE,d),{modulateTexture:c}}function fI(e,t,n){if(!e.dimsRAS||!e.matRAS||!e.pixDimsRAS||!e.vox2mm)throw new Error("Cannot create NiivueObject3D: Missing required RAS properties or vox2mm access on NVImage.");const r=e.dimsRAS,i=e.matRAS,s=e.pixDimsRAS,o=-.5,a=-.5,l=-.5,c=r[1]-1+.5,u=r[2]-1+.5,d=r[3]-1+.5,h=e.vox2mm,f=h.call(e,[o,a,l],i),p=h.call(e,[o,u,l],i),g=h.call(e,[o,a,d],i),v=h.call(e,[o,u,d],i),m=h.call(e,[c,a,l],i),A=h.call(e,[c,u,l],i),x=h.call(e,[c,a,d],i),w=h.call(e,[c,u,d],i),b=[...g,0,0,1,...x,1,0,1,...w,1,1,1,...v,0,1,1,...f,0,0,0,...p,0,1,0,...A,1,1,0,...m,1,0,0],y=n.createBuffer();if(!y)throw new Error("Failed to create GL index buffer");n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,y);const C=[0,3,2,2,1,0,4,7,6,6,5,4,5,6,2,2,3,5,4,0,1,1,7,4,7,1,2,2,6,7,4,5,3,3,0,4];n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(C),n.STATIC_DRAW);const S=n.createBuffer();if(!S)throw new Error("Failed to create GL vertex buffer");n.bindBuffer(n.ARRAY_BUFFER,S),n.bufferData(n.ARRAY_BUFFER,new Float32Array(b),n.STATIC_DRAW);const E=n.createVertexArray();if(!E)throw new Error("Failed to create GL VAO");n.bindVertexArray(E),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,y),n.bindBuffer(n.ARRAY_BUFFER,S);const T=24;n.enableVertexAttribArray(0),n.vertexAttribPointer(0,3,n.FLOAT,!1,T,0),n.enableVertexAttribArray(1),n.vertexAttribPointer(1,3,n.FLOAT,!1,T,12),n.bindVertexArray(null);const F=new qr(t,S,n.TRIANGLES,C.length,y,E),M=[...g,...x,...w,...v,...f,...p,...A,...m],B=u8(M);return F.extentsMin=B.min.slice(),F.extentsMax=B.max.slice(),F.furthestVertexFromOrigin=B.furthestVertexFromOrigin,F.originNegate=fn(B.origin),aS(F.originNegate,F.originNegate),F.fieldOfViewDeObliqueMM=[r[1]*s[1],r[2]*s[2],r[3]*s[3]],F}var mI=33984,pI=33986,v1=33994;function gI(e){const{overlayItem:t,VOLUME_ID:n,gl:r}=e;return fI(t,n,r)}function AI(e){const{overlayItem:t,mm2frac:n}=e,r=n(t.mm000,0,!0);let i=n(t.mm100,0,!0),s=n(t.mm010,0,!0),o=n(t.mm001,0,!0);i=Pe(i,i,r),s=Pe(s,s,r),o=Pe(o,o,r);const a=en(i[0],s[0],o[0],r[0],i[1],s[1],o[1],r[1],i[2],s[2],o[2],r[2],0,0,0,1);return zt(a,a),a}function vI(e){const{layer:t,backDims:n,rgbaTex:r}=e;if(t===0)return{volumeTexture:r(null,mI,n)};if(t===1){const i=r(null,pI,n);return{overlayTexture:i,overlayTextureID:i}}return{}}function xI(e){const t=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,t),e.disable(e.CULL_FACE),e.disable(e.BLEND),t}function wI(e){const{gl:t,layer:n,backDims:r,rgbaTex:i,passThroughShader:s}=e;if(n<=1)return i(null,v1,[2,2,2,2]);const o=i(null,v1,r);t.bindTexture(t.TEXTURE_3D,o),s.use(t),t.uniform1i(s.uniforms.in3D,2);for(let a=0;a<r[3];a++){const l=1/r[3]*(a+.5);t.uniform1f(s.uniforms.coordZ,l),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,0,a),t.drawArrays(t.TRIANGLE_STRIP,0,4)}return o}function yI(e){const{gl:t,overlayItem:n,orientShader:r,layer:i,isAdditiveBlend:s}=e,o=n.colormapType!==0?1:0,a=n.colormapType===1?1:0;t.uniform1i(r.uniforms.isAlphaThreshold,a),t.uniform1i(r.uniforms.isColorbarFromZero,o),t.uniform1i(r.uniforms.isAdditiveBlend,s?1:0);let l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;n.colormapNegative.length>0&&(l=Math.min(-n.cal_min,-n.cal_max),c=Math.max(-n.cal_min,-n.cal_max),isFinite(n.cal_minNeg)&&isFinite(n.cal_maxNeg)&&(l=Math.min(n.cal_minNeg,n.cal_maxNeg),c=Math.max(n.cal_minNeg,n.cal_maxNeg))),t.uniform1f(r.uniforms.layer??null,i),t.uniform1f(r.uniforms.cal_minNeg??null,l),t.uniform1f(r.uniforms.cal_maxNeg??null,c)}function bI(e){const{gl:t,orientShader:n,backDims:r,outTexture:i,mtx:s,hdr:o,intensityVolTextureUnit:a,blendTextureUnit:l,colormapTextureUnit:c,modulationTextureUnit:u,opacity:d,atlasOutline:h,atlasActiveIndex:f}=e;n.use(t),t.uniform1i(n.uniforms.intensityVol??null,a),t.uniform1i(n.uniforms.blend3D??null,l),t.uniform1i(n.uniforms.colormap??null,c),t.uniform1f(n.uniforms.scl_inter??null,o.scl_inter),t.uniform1f(n.uniforms.scl_slope??null,o.scl_slope),t.uniform1f(n.uniforms.opacity??null,d),t.uniform1i(n.uniforms.modulationVol??null,u),t.uniformMatrix4fv(n.uniforms.mtx,!1,s);let p=0;o.intent_code===1002&&(p=h,t.uniform1ui(n.uniforms.activeIndex,f|0)),t.uniform4fv(n.uniforms.xyzaFrac,[1/r[1],1/r[2],1/r[3],p]);for(let g=0;g<r[3];g++){const v=1/r[3]*(g+.5);t.uniform1f(n.uniforms.coordZ,v),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,i,0,g),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}function CI(e){const{gl:t,renderShader:n,pickingImageShader:r,sliceShader:i,overlaysLength:s,clipPlaneColor:o,backOpacity:a,renderOverlayBlend:l,clipPlane:c,texVox:u,volScale:d,drawOpacity:h,paqdUniforms:f}=e;n.use(t),t.uniform1f(n.uniforms.overlays,s),t.uniform4fv(n.uniforms.clipPlaneColor,o),t.uniform1f(n.uniforms.backOpacity,a),t.uniform1f(n.uniforms.renderOverlayBlend,l),t.uniform4fv(n.uniforms.clipPlane,c),t.uniform3fv(n.uniforms.texVox,u),t.uniform3fv(n.uniforms.volScale,d),r.use(t),t.uniform1f(r.uniforms.overlays,s),t.uniform3fv(r.uniforms.texVox,u),i.use(t),t.uniform1f(i.uniforms.overlays,s),t.uniform1f(i.uniforms.drawOpacity,h),t.uniform4fv(i.uniforms.paqdUniforms,f)}function SI(e){const{is2DSliceShader:t,isV1SliceShader:n,sliceMMShader:r,slice2DShader:i,sliceV1Shader:s,customSliceShader:o}=e;let a=r;if(t&&(a=i),n&&(a=s),o&&(a=o),!a)throw new Error("slice shader undefined");return a}function EI(e){const{gl:t,shader:n,is2DSliceShader:r,drawTexture:i,paqdTexture:s,TEXTURE7_DRAW:o,TEXTURE8_PAQD:a}=e;t.uniform1i(n.uniforms.drawing,7),t.activeTexture(o),r?t.bindTexture(t.TEXTURE_2D,i):t.bindTexture(t.TEXTURE_3D,i),t.uniform1i(n.uniforms.paqd,8),t.activeTexture(a),t.bindTexture(t.TEXTURE_3D,s)}function MI(e){const{gl:t,TEXTURE9_ORIENT:n}=e,r=t.createTexture();return t.activeTexture(n),t.bindTexture(t.TEXTURE_3D,r),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1),r}var DI=2,TI=4,II=16,FI=64,RI=128,PI=512,NI=2304,hu=1002;function kI(e){const{gl:t,hdr:n,img:r,orientShaderU:i,orientShaderI:s,orientShaderF:o,orientShaderRGBU:a,orientShaderAtlasU:l,orientShaderAtlasI:c}=e;let u=i;if(n.datatypeCode===DI)n.intent_code===hu&&(u=l),t.texStorage3D(t.TEXTURE_3D,1,t.R8UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED_INTEGER,t.UNSIGNED_BYTE,r);else if(n.datatypeCode===TI)u=s,n.intent_code===hu&&(u=c),t.texStorage3D(t.TEXTURE_3D,1,t.R16I,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED_INTEGER,t.SHORT,r);else if(n.datatypeCode===II)t.texStorage3D(t.TEXTURE_3D,1,t.R32F,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED,t.FLOAT,r),u=o;else if(n.datatypeCode===FI){const d=Float32Array.from(r);t.texStorage3D(t.TEXTURE_3D,1,t.R32F,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED,t.FLOAT,d),u=o}else n.datatypeCode===RI?(u=a,u.use(t),t.uniform1i(u.uniforms.hasAlpha,0),t.texStorage3D(t.TEXTURE_3D,1,t.RGB8UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RGB_INTEGER,t.UNSIGNED_BYTE,r)):n.datatypeCode===PI&&(n.intent_code===hu&&(u=l),t.texStorage3D(t.TEXTURE_3D,1,t.R16UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED_INTEGER,t.UNSIGNED_SHORT,r));return{orientShader:u}}function BI(e){const{gl:t,hdr:n,img:r,overlayItem:i,layer:s,orientShaderRGBU:o,orientShaderPAQD:a,volumes:l,backDims:c,rgbaTex:u,paqdTexture:d,TEXTURE8_PAQD:h,TEXTURE9_ORIENT:f}=e;let p=o,g=null,v=d;if(i.colormapLabel){p=a;let m=!0;for(let A=0;A<s;A++){const x=l[A].hdr.datatypeCode===NI,w=!!l[A].colormapLabel;x&&w&&(m=!1)}m&&(v=u(d,h,c)),g=v,t.activeTexture(f)}return p.use(t),t.uniform1i(p.uniforms.hasAlpha,1),t.texStorage3D(t.TEXTURE_3D,1,t.RGBA8UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RGBA_INTEGER,t.UNSIGNED_BYTE,r),{orientShader:p,outTexture:g,paqdTexture:v}}function Cr(e,t){if(typeof t=="number")return t>=e.length?-1:t;for(let n=0;n<e.length;n++)if(e[n].id===t)return n;return-1}function VI(e,t){const n=[...e,t],r=n.length===1?0:n.length-1;return{meshes:n,index:r}}function UI(e,t,n=0){const r=e.length;if(n>r)return{meshes:e};const i=Cr(e,t.id);if(i<0)return{meshes:e};const s=[...e];return n===0?(s.splice(i,1),s.unshift(t)):n<0?s.splice(i,1):(s.splice(i,1),s.splice(n,0,t)),{meshes:s}}function LI(e){const{meshes:t,id:n,key:r,val:i,gl:s}=e,o=Cr(t,n);return o<0?(k.warn("setMeshProperty() id not loaded",n),-1):(t[o].setProperty(r,i,s),o)}function OI(e){const{meshes:t,meshId:n,Xmm:r,Ymm:i,Zmm:s}=e,o=Cr(t,n);return o<0?(k.warn("indexNearestXYZmm() id not loaded",n),[NaN,NaN]):t[o].indexNearestXYZmm(r,i,s)}function zI(e){const{meshes:t,meshId:n,gl:r,order:i=3}=e,s=Cr(t,n);return s<0?(k.warn("decimateHierarchicalMesh() id not loaded",n),!1):t[s].decimateHierarchicalMesh(r,i)}function jI(e){const{meshes:t,meshId:n,gl:r}=e,i=Cr(t,n);return i<0?(k.warn("reverseFaces() id not loaded",n),!1):(t[i].reverseFaces(r),!0)}async function GI(e){const{meshes:t,meshId:n,layer:r,key:i,val:s,gl:o}=e,a=Cr(t,n);return a<0?(k.warn("setMeshLayerProperty() id not loaded",n),!1):(await t[a].setLayerProperty(r,i,s,o),!0)}function YI(e){const{meshes:t,meshShaders:n,id:r,meshShaderNameOrNumber:i,meshShaderNameToNumber:s}=e;let o=0;if(typeof i=="number"?o=i:o=s(i),o===void 0)throw new Error("shaderIndex undefined");o=Math.min(o,n.length-1),o=Math.max(o,0);const a=Cr(t,r);return a>=t.length||a<0?(k.debug("Unable to change shader until mesh is loaded (maybe you need async)"),null):(t[a].meshShaderIndex=o,{meshIndex:a,shaderIndex:o})}var da={name:"untitled connectome",nodeColormap:"warm",nodeColormapNegative:"winter",nodeMinColor:0,nodeMaxColor:4,nodeScale:3,edgeColormap:"warm",edgeColormapNegative:"winter",edgeMin:2,edgeMax:6,edgeScale:1,legendLineThickness:0,showLegend:!0},Xa=class Jv extends ui{constructor(t,n){super(new Float32Array([]),new Uint32Array([]),n.name,new Uint8Array([]),1,!0,t,n),R(this,"gl"),R(this,"nodesChanged"),this.gl=t,this.type="connectome",this.nodes&&this.updateLabels(),this.nodesChanged=new EventTarget}static convertLegacyConnectome(t){const n={nodes:[],edges:[],...da};for(const i in t)if(i in da){const s=i;n[s]=t[s]}const r=t.nodes;for(let i=0;i<r.names.length;i++)n.nodes.push({name:r.names[i],x:r.X[i],y:r.Y[i],z:r.Z[i],colorValue:r.Color[i],sizeValue:r.Size[i]});for(let i=0;i<r.names.length-1;i++)for(let s=i+1;s<r.names.length;s++){const o=t.edges[i*r.names.length+s];n.edges.push({first:i,second:s,colorValue:o})}return n}static convertFreeSurferConnectome(t,n="warm"){let r=!0;if("data_type"in t?t.data_type!=="fs_pointset"&&(r=!1):r=!1,"points"in t||(r=!1),!r)throw Error("not a valid FreeSurfer json pointset");const i=t.points.map(o=>({name:Array.isArray(o.comments)&&o.comments.length>0&&"text"in o.comments[0]?o.comments[0].text:"",x:o.coordinates.x,y:o.coordinates.y,z:o.coordinates.z,colorValue:1,sizeValue:1,metadata:o.comments}));return{...da,nodeColormap:n,edgeColormap:n,nodes:i,edges:[]}}updateLabels(){const t=this.nodes;if(t&&t.length>0){const n=t.reduce((c,u)=>c.sizeValue>u.sizeValue?c:u).sizeValue;let r,i;if(typeof this.nodeMinColor<"u"&&isFinite(this.nodeMinColor))r=this.nodeMinColor;else{r=t[0].colorValue;for(let c=1;c<t.length;c++)t[c].colorValue<r&&(r=t[c].colorValue)}if(typeof this.nodeMaxColor<"u"&&isFinite(this.nodeMaxColor))i=this.nodeMaxColor;else{i=t[0].colorValue;for(let c=1;c<t.length;c++)t[c].colorValue>i&&(i=t[c].colorValue)}const s=Ee.colormap(this.nodeColormap,this.colormapInvert),o=Ee.colormap(this.nodeColormapNegative,this.colormapInvert),a="nodeColormapNegative"in this;let l=this.legendLineThickness?this.legendLineThickness:0;this.showLegend===!1&&(l=0);for(let c=0;c<t.length;c++){let u=t[c].colorValue,d=!1;if(a&&u<0&&(d=!0,u=-u),r<i){if(u<r){k.warn("color value lower than min");continue}u=(u-r)/(i-r)}else u=1;u=Math.round(Math.max(Math.min(255,u*255)))*4;let h=[s[u],s[u+1],s[u+2],255];d&&(h=[o[u],o[u+1],o[u+2],255]),h=h.map(f=>f/255),k.debug("adding label for ",t[c]),t[c].label=new mf(t[c].name,{textColor:h,bulletScale:t[c].sizeValue/n,bulletColor:h,lineWidth:l,lineColor:h,textScale:1,textAlignment:"left",lineTerminator:"none"},[t[c].x,t[c].y,t[c].z]),k.debug("label for node:",t[c].label)}}}addConnectomeNode(t){if(k.debug("adding node",t),!this.nodes)throw new Error("nodes not defined");this.nodes.push(t),this.updateLabels(),this.nodesChanged.dispatchEvent(new CustomEvent("nodeAdded",{detail:{node:t}}))}deleteConnectomeNode(t){const n=this.nodes.indexOf(t),r=this.edges;r&&(this.edges=r.filter(i=>i.first!==n&&i.second!==n)),this.nodes=this.nodes.filter(i=>i!==t),this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeDeleted",{detail:{node:t}}))}updateConnectomeNodeByIndex(t,n){this.nodes[t]=n,this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeChanged",{detail:{node:n}}))}updateConnectomeNodeByPoint(t,n){const r=this.nodes;if(!r)throw new Error("Node to update does not exist");const i=r.find(o=>ue.arraysAreEqual([o.x,o.y,o.z],t));if(!i)throw new Error(`Node with point ${t} to update does not exist`);const s=r.findIndex(o=>o===i);this.updateConnectomeNodeByIndex(s,n)}addConnectomeEdge(t,n,r){const i=this.edges;let s=i.find(o=>(o.first===t||o.second===t)&&o.first+o.second===t+n);return s||(s={first:t,second:n,colorValue:r},i.push(s),this.updateConnectome(this.gl),s)}deleteConnectomeEdge(t,n){const r=this.edges,i=r.find(s=>(s.first===t||s.first===n)&&s.first+s.second===t+n);if(i)this.edges=r.filter(s=>s!==i);else throw new Error(`edge between ${t} and ${n} not found`);return this.updateConnectome(this.gl),i}findClosestConnectomeNode(t,n){const r=this.nodes;if(!r||r.length===0)return null;const i=r.map((s,o)=>({node:s,distance:Math.sqrt(Math.pow(s.x-t[0],2)+Math.pow(s.y-t[1],2)+Math.pow(s.z-t[2],2)),index:o})).filter(s=>s.distance<n).sort((s,o)=>s.distance-o.distance);return i.length>0?i[0].node:null}updateConnectome(t){const n=[],r=[],i=[];let s=Ee.colormap(this.nodeColormap,this.colormapInvert),o=Ee.colormap(this.nodeColormapNegative,this.colormapInvert),a="nodeColormapNegative"in this;this.nodeMinColor===void 0&&(this.nodeMinColor=NaN),this.nodeMaxColor===void 0&&(this.nodeMaxColor=NaN),this.edgeMin===void 0&&(this.edgeMin=NaN),this.edgeMax===void 0&&(this.edgeMax=NaN);let l=this.nodeMinColor,c=this.nodeMaxColor;if(!isFinite(l)||!isFinite(l)){const m=this.nodes;l=m[0].colorValue,c=m[0].colorValue;for(let A=0;A<m.length;A++)l=Math.min(l,m[A].colorValue),c=Math.max(c,m[A].colorValue)}const u=this.nodes,d=u.length;for(let m=0;m<d;m++){const A=u[m].sizeValue*this.nodeScale;if(A<=0)continue;let x=u[m].colorValue,w=!1;if(a&&x<0&&(w=!0,x=-x),l<c){if(x<l)continue;x=(x-l)/(c-l)}else x=1;x=Math.round(Math.max(Math.min(255,x*255)))*4;let b=[s[x],s[x+1],s[x+2],255];w&&(b=[o[x],o[x+1],o[x+2],255]);const y=q(u[m].x,u[m].y,u[m].z);qr.makeColoredSphere(r,n,i,A,y,b)}s=Ee.colormap(this.edgeColormap,this.colormapInvert),o=Ee.colormap(this.edgeColormapNegative,this.colormapInvert),a="edgeColormapNegative"in this;const h=this.edges;if(h!==void 0&&h.length>0){if(l=this.edgeMin,c=this.edgeMax,!isFinite(l)||!isFinite(l)){l=h[0].colorValue,c=h[0].colorValue;for(let m=0;m<h.length;m++)l=Math.min(l,h[m].colorValue),c=Math.max(c,h[m].colorValue)}for(const m of h){let A=m.colorValue;const x=a&&A<0;x&&(A=-A);const w=A*this.edgeScale;if(w<=0)continue;if(l<c){if(A<l)continue;A=(A-l)/(c-l)}else A=1;A=Math.round(Math.max(Math.min(255,A*255)))*4;let b=[s[A],s[A+1],s[A+2],255];x&&(b=[o[A],o[A+1],o[A+2],255]);const y=q(u[m.first].x,u[m.first].y,u[m.first].z),C=q(u[m.second].x,u[m.second].y,u[m.second].z);qr.makeColoredCylinder(r,n,i,y,C,w,b)}}const f=new Float32Array(r),p=new Uint32Array(n),g=kr.getExtents(f);this.furthestVertexFromOrigin=g.mxDx,this.extentsMin=g.extentsMin,this.extentsMax=g.extentsMax;const v=this.generatePosNormClr(f,p,new Uint8Array(i));t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(p),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Float32Array.from(v),t.STATIC_DRAW),this.indexCount=n.length}updateMesh(t){this.updateConnectome(t),this.updateLabels()}json(){const t={};for(const n in this)(n in da||n==="nodes"||n==="edges")&&(t[n]=this[n]);return t}static async loadConnectomeFromUrl(t,n){const i=await(await fetch(n)).json();return new Jv(t,i)}};function WI(e){const{gl:t,json:n}=e;let r=n;if("data_type"in n&&n.data_type==="fs_pointset")r=Xa.convertFreeSurferConnectome(n),k.warn("converted FreeSurfer connectome",r);else if("nodes"in n){const i=n.nodes;"names"in i&&"X"in i&&"Y"in i&&"Z"in i&&"Color"in i&&"Size"in i&&(r=Xa.convertLegacyConnectome(n))}else throw new Error("not a known connectome format");return new Xa(t,r)}function HI(e,t="none"){const n=[1,1,1,1];return{text:e.name,style:{textColor:n,bulletScale:1,bulletColor:n,lineWidth:0,lineColor:n,lineTerminator:t,textScale:1},position:[e.x,e.y,e.z]}}function XI(e){const{meshes:t,documentLabels:n}=e,o=t.filter(l=>l.type==="connectome").flatMap(l=>l.nodes).map(l=>l.label).filter(l=>l!==void 0);return[...n,...o]}function KI(e){const{meshes:t,documentLabels:n}=e,o=t.filter(u=>u.type==="connectome"&&u.showLegend!==!1).flatMap(u=>u.nodes).map(u=>u.label).filter(u=>u!==void 0&&u.text!==""),a=n.filter(u=>u.anchor==null||u.anchor===0),l=new Set(o);for(const u of a)l.add(u);const c=t.filter(u=>u.type==="mesh");for(let u=0;u<c.length;u++)for(let d=0;d<c[u].layers.length;d++)if(c[u].layers[d].labels)for(let h=0;h<c[u].layers[d].labels.length;h++)l.add(c[u].layers[d].labels[h]);return Array.from(l)}var $v={};Rt($v,{MESH_EXTENSIONS:()=>bf,getFileExt:()=>Cf,getLoader:()=>_I,getMediaByUrl:()=>tx,handleDragEnter:()=>ix,handleDragOver:()=>sx,isDicomExtension:()=>QI,isMeshExt:()=>ex,readDirectory:()=>rx,readFileAsDataURL:()=>qI,registerLoader:()=>nx,traverseFileTree:()=>Sf});var bf=["ASC","BYU","DFS","FSM","PIAL","ORIG","INFLATED","SMOOTHWM","SPHERE","WHITE","G","GEO","GII","ICO","MZ3","NV","OBJ","OFF","PLY","SRF","STL","TCK","TRACT","TRI","TRK","TT","TRX","VTK","WRL","X3D","JCON","JSON"];function Cf(e,t=!0){let n;typeof e=="object"?(n=e.fullname,t=e.upperCase??!0):n=e,k.debug("fullname: ",n);const r=/(?:\.([^.]+))?$/;let i=r.exec(n)[1];if(i=i.toUpperCase(),i==="GZ")i=r.exec(n.slice(0,-3))[1],i=i.toUpperCase();else if(i==="CBOR"){const s=i;i=r.exec(n.slice(0,-5))[1],i=i.toUpperCase(),i=`${i}.${s}`}return t?i:i.toLowerCase()}function ex(e){const t=Cf(e);return k.debug("checking mesh ext:",t),bf.includes(t)}function tx(e,t){return[...t.entries()].filter(n=>n[1]===e).map(n=>n[0]).pop()}function nx(e){const{loaders:t,loader:n,fileExt:r,toExt:i}=e;return{...t,[r.toUpperCase()]:{loader:n,toExt:i}}}function _I(e,t){return e[t.toUpperCase()]}function QI(e){return e.toUpperCase()==="DCM"}async function Sf(e,t="",n){return new Promise(r=>{if(e.isFile)e.file(i=>{i.fullPath=t+i.name,i._webkitRelativePath=t+i.name,n.push(i),r(n)});else if(e.isDirectory){const i=e.createReader(),s=()=>{i.readEntries(o=>{if(o.length>0){const a=o.map(l=>Sf(l,t+e.name+"/",n));Promise.all(a).then(s).catch(l=>{throw l})}else r(n)})};s()}})}function rx(e){const t=e.createReader();let n=[];const r=async s=>{const o=[],a=async l=>new Promise((c,u)=>l.file(c,u));for(let l=0;l<s.length;l++)o.push(await a(s[l]));return o},i=()=>{t.readEntries(s=>{s.length?(n=n.concat(s),i()):r(n).then(async()=>{}).catch(o=>{throw o})})};return i(),n}function qI(e){return new Promise((t,n)=>{e.file(r=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>n(new Error("Failed to read file as data URL")),i.readAsDataURL(r)},r=>n(r))})}function ix(e){e.stopPropagation(),e.preventDefault()}function sx(e){e.stopPropagation(),e.preventDefault()}var ZI=33984,JI=33986;function $I(e){const{gl:t,layer:n,isForceLinear:r=!1,isNearestInterpolation:i,is2DSliceShader:s}=e;let o=t.LINEAR;!r&&i&&(o=t.NEAREST),n===0?t.activeTexture(ZI):t.activeTexture(JI),s?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o)):(t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,o),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,o))}function x1(e,t,n,r){let i=n.slice(),s=r.slice();return e===1&&(i=t.slice()),e===2&&(i=t.slice(),s=n.slice()),{linesH:i,linesV:s}}function eF(e,t,n,r){let i,s;switch(e){case 0:i=t[0],s=t[1];break;case 1:i=t[0],s=t[2];break;case 2:i=t[1],s=t[2];break;default:return[n,r]}const o=i/s,a=n/r;let l,c;return o>a?(l=n,c=n/o):(c=r,l=r*o),[l,c]}var tF=33984,Ef=33990,w1=33992;function cc(e,t){const n=-t*(Math.PI/180),r=(e-90)%360*(Math.PI/180),i=[Math.cos(n)*Math.cos(r),Math.cos(n)*Math.sin(r),Math.sin(n)],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return s<=0||(i[0]/=s,i[1]/=s,i[2]/=s),i}function Mf(e){const{azimuth:t,elevation:n,obliqueRAS:r}=e,i=ge();if(i[0]=-1,Sl(i,i,or(270-n)),El(i,i,or(t-180)),r){const s=Qe(r);Gr(i,i,s)}return i}function ox(e){const{azimuth:t,elevation:n,obliqueRAS:r}=e,i=q(0,0,-1),s=Mf({azimuth:t,elevation:n,obliqueRAS:r}),o=ir(1,0,0,0,-1,0,0,0,-1),a=Te();zm(a,i,o);const l=yd();$6(l,s);const c=yd();if(!eS(c,l))return q(0,0,1);const u=Te();zm(u,a,c),Zt(u,u);const d=5e-5;for(let h=0;h<3;h++)Math.abs(u[h])<d&&(u[h]=Math.sign(u[h])*d||d);return u}function y1(e){const{gl:t,hdr:n,genericVAO:r,unusedVAO:i,volumeTexture:s,paqdTexture:o,gradientOrder:a,blurShader:l,sobelBlurShader:c,sobelFirstOrderShader:u,sobelSecondOrderShader:d,rgbaTex:h}=e;let{gradientTexture:f}=e;t.bindVertexArray(r);const p=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,p),t.viewport(0,0,n.dims[1],n.dims[2]),t.disable(t.BLEND);const g=h(null,w1,n.dims,!0),v=a===2?c:l;v.use(t),t.activeTexture(tF),t.bindTexture(t.TEXTURE_3D,s),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.LINEAR);const m=.7;t.uniform1i(v.uniforms.intensityVol,0),t.uniform1f(v.uniforms.dX,m/n.dims[1]),t.uniform1f(v.uniforms.dY,m/n.dims[2]),t.uniform1f(v.uniforms.dZ,m/n.dims[3]);for(let w=0;w<n.dims[3]-1;w++){const b=1/n.dims[3]*(w+.5);t.uniform1f(v.uniforms.coordZ,b),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,g,0,w);const y=t.checkFramebufferStatus(t.FRAMEBUFFER);y!==t.FRAMEBUFFER_COMPLETE&&k.error("blur shader: ",y),t.drawArrays(t.TRIANGLE_STRIP,0,4)}const A=a===2?d:u;A.use(t),t.activeTexture(w1),t.bindTexture(t.TEXTURE_3D,g),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.uniform1i(A.uniforms.intensityVol,8);const x=.7;t.uniform1f(A.uniforms.dX,x/n.dims[1]),t.uniform1f(A.uniforms.dY,x/n.dims[2]),t.uniform1f(A.uniforms.dZ,x/n.dims[3]),a===2&&(t.uniform1f(A.uniforms.dX2,2*x/n.dims[1]),t.uniform1f(A.uniforms.dY2,2*x/n.dims[2]),t.uniform1f(A.uniforms.dZ2,2*x/n.dims[3])),t.uniform1f(A.uniforms.coordZ,.5),f!==null&&t.deleteTexture(f),f=h(f,Ef,n.dims);for(let w=0;w<n.dims[3]-1;w++){const b=1/n.dims[3]*(w+.5);t.uniform1f(A.uniforms.coordZ,b),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,f,0,w);const y=t.checkFramebufferStatus(t.FRAMEBUFFER);y!==t.FRAMEBUFFER_COMPLETE&&k.error("sobel shader: ",y),t.drawArrays(t.TRIANGLE_STRIP,0,4)}return t.deleteFramebuffer(p),t.deleteTexture(g),t.bindFramebuffer(t.FRAMEBUFFER,null),t.activeTexture(33992),t.bindTexture(t.TEXTURE_3D,o),t.bindVertexArray(i),f}function nF(e){const{gl:t,gradientTexture:n,dims:r}=e;if(!n||!r)return null;const i=r[1],s=r[2],o=r[3],a=i*s*o,l=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,l);const c=new Float32Array(a*4);try{for(let u=0;u<o;u++){t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,n,0,u);const d=t.checkFramebufferStatus(t.FRAMEBUFFER);if(d!==t.FRAMEBUFFER_COMPLETE){console.warn("Framebuffer not complete for gradient texture reading, slice",u,"status:",d.toString(16));continue}try{const h=new Uint8Array(i*s*4);t.readPixels(0,0,i,s,t.RGBA,t.UNSIGNED_BYTE,h);const f=new Float32Array(i*s*4);for(let g=0;g<h.length;g++)f[g]=h[g]/127.5-1;const p=u*i*s*4;c.set(f,p)}catch(h){console.warn("Failed to read pixels for slice",u,":",h);const f=u*i*s*4,p=new Float32Array(i*s*4);c.set(p,f)}}}catch(u){return console.error("Error reading gradient texture:",u),null}finally{t.deleteFramebuffer(l),t.bindFramebuffer(t.FRAMEBUFFER,null)}return c}function rF(e){const{gl:t,data:n,dims:r,backDims:i,gradientTextureAmount:s,hdr:o,gradientGLFn:a}=e;let{gradientTexture:l}=e;if(n===null)return o&&s>0&&a&&a(o),{gradientTexture:l,useCustomGradientTexture:!1};if(!r&&!i)return console.warn("No dimensions provided and no background volume loaded"),{gradientTexture:l,useCustomGradientTexture:!1};const c=r||i,u=c[1],d=c[2],h=c[3],f=u*d*h*4;if(n.length!==f)return console.warn(`Custom gradient data size mismatch. Expected ${f}, got ${n.length}`),{gradientTexture:l,useCustomGradientTexture:!1};l!==null&&t.deleteTexture(l),l=t.createTexture(),t.activeTexture(Ef),t.bindTexture(t.TEXTURE_3D,l),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1);let p;if(n instanceof Float32Array){p=new Uint8Array(n.length);for(let g=0;g<n.length;g++){const v=Math.max(-1,Math.min(1,n[g]));p[g]=Math.round((v+1)*127.5)}}else p=n;return t.texStorage3D(t.TEXTURE_3D,1,t.RGBA8,u,d,h),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,u,d,h,t.RGBA,t.UNSIGNED_BYTE,p),{gradientTexture:l,useCustomGradientTexture:!0}}function iF(e){const{gl:t,mvpMatrix:n,azimuth:r,elevation:i,volumesLength:s,volumeObject3D:o,unusedVAO:a,renderShader:l,pickingImageShader:c,mouseDepthPicker:u,backgroundMasksOverlays:d,gradientTextureAmount:h,gradientTexture:f,drawBitmap:p,renderDrawAmbientOcclusion:g,drawOpacity:v,paqdUniforms:m,matRAS:A,crosshairPos:x,clipPlaneDepthAziElevs:w,isClipPlanesCutaway:b,obliqueRAS:y}=e;if(s===0)return;const C=ox({azimuth:r,elevation:i,obliqueRAS:y}),S=o;if(S){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.CULL_FACE),t.cullFace(t.FRONT);let E=l;if(u&&(E=c),E.use(t),t.uniform1i(E.uniforms.backgroundMasksOverlays,d),h>0&&E.uniforms.normMtx&&f){t.activeTexture(Ef),t.bindTexture(t.TEXTURE_3D,f);const T=Mf({azimuth:r,elevation:i,obliqueRAS:y}),F=ge();zt(F,T);const M=ge();Ot(M,F),t.uniformMatrix4fv(E.uniforms.normMtx,!1,M)}if(p&&p.length>8?t.uniform2f(E.uniforms.renderDrawAmbientOcclusionXY,g,v):t.uniform2f(E.uniforms.renderDrawAmbientOcclusionXY,g,0),t.uniform4fv(E.uniforms.paqdUniforms,m),t.uniformMatrix4fv(E.uniforms.mvpMtx,!1,n),t.uniformMatrix4fv(E.uniforms.matRAS,!1,A),t.uniform3fv(E.uniforms.rayDir,C),h<0)t.uniform4fv(E.uniforms.clipPlane,[x[0],x[1],x[2],30]);else{const F=new Float32Array(24).fill(2);for(let M=0;M<w.length;M++){const B=w[M],P=cc(B[1]+180,B[2]),z=[P[0],P[1],P[2],B[0]];F.set(z,M*4)}t.uniform4fv(E.uniforms.clipPlanes,F)}t.uniform1f(E.uniforms.drawOpacity,1),t.uniform1i(E.uniforms.isClipCutaway,b?1:0),t.bindVertexArray(S.vao),t.drawElements(S.mode,S.indexCount,t.UNSIGNED_SHORT,0),t.bindVertexArray(a)}}var sF=33989;function oF(e){const{visible:t,opacity:n,indexCount:r}=e;return t&&n>0&&r>=3}function aF(e){var s;const{meshShaderIndex:t,meshShaders:n,pickingMeshShader:r,mouseDepthPicker:i}=e;return i?r:((s=n[t])==null?void 0:s.shader)??null}function lF(e){const{meshOpacity:t,globalAlpha:n}=e;return t*n}function cF(e){const{offsetPt0:t,fiberSides:n,fiberRadius:r}=e;return!!t&&(n<3||r<=0)}function uF(e){const{modelMtx:t,crosshairMM:n,is2D:r}=e,i=1e9,s=[n[0],n[1],n[2]];return r&&(Math.abs(t[2])+Math.abs(t[4])+Math.abs(t[9])>=2.95&&(s[1]=i,s[2]=i),Math.abs(t[0])+Math.abs(t[6])+Math.abs(t[9])>=2.95&&(s[0]=i,s[2]=i),Math.abs(t[0])+Math.abs(t[5])+Math.abs(t[10])>=2.95&&(s[0]=i,s[1]=i)),s}function dF(e){let t=Number(e);return Number.isFinite(t)||(t=1),t}function hF(e){const{gl:t,shader:n,modelMtx:r,sliceMM:i,meshThickness:s}=e;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.uniformMatrix4fv(n.uniforms.modelMtx,!1,r),t.uniform4fv(n.uniforms.sliceMM,[i[0],i[1],i[2],s])}function b1(e){const{gl:t,shader:n,mvpMtx:r,normMtx:i,opacity:s}=e;t.uniformMatrix4fv(n.uniforms.mvpMtx,!1,r),t.uniformMatrix4fv(n.uniforms.normMtx,!1,i),t.uniform1f(n.uniforms.opacity,s)}function fF(e){const{gl:t,matCapTexture:n}=e;t.activeTexture(sF),t.bindTexture(t.TEXTURE_2D,n)}function C1(e){const{gl:t,mesh:n,unusedVAO:r}=e;t.bindVertexArray(n.vao),t.drawElements(t.TRIANGLES,n.indexCount,t.UNSIGNED_INT,0),t.bindVertexArray(r)}function mF(e){const{gl:t,mesh:n,unusedVAO:r}=e;t.bindVertexArray(n.vaoFiber),t.drawElements(t.LINE_STRIP,n.indexCount,t.UNSIGNED_INT,0),t.bindVertexArray(r)}function pF(e){const{gl:t}=e;t.enable(t.BLEND),t.depthMask(!1),t.depthFunc(t.ALWAYS)}function gF(e){e.depthMask(!0),e.depthFunc(e.LEQUAL),e.disable(e.BLEND)}function AF(e){e.depthMask(!0),e.disable(e.BLEND)}function vF(e){var w;const{gl:t,meshes:n,isDepthTest:r,alpha:i,mvpMatrix:s,modelMatrix:o,normalMatrix:a,is2D:l,meshShaders:c,pickingMeshShader:u,fiberShader:d,mouseDepthPicker:h,matCapTexture:f,unusedVAO:p,meshXRay:g,meshThicknessOn2D:v,frac2mm:m,crosshairPos:A}=e;if(n.length<1)return;t.enable(t.DEPTH_TEST),r?t.depthFunc(t.LEQUAL):t.depthFunc(t.ALWAYS),t.cullFace(t.BACK),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);let x=!1;for(const b of n){if(!oF({visible:b.visible,opacity:b.opacity,indexCount:b.indexCount}))continue;const y=lF({meshOpacity:b.opacity,globalAlpha:i}),C=aF({meshShaderIndex:b.meshShaderIndex,meshShaders:c,pickingMeshShader:u,mouseDepthPicker:h});if(C){if(C.use(t),C.isCrosscut){const S=m([A[0],A[1],A[2]]),E=uF({modelMtx:o,crosshairMM:S,is2D:l}),T=dF(v);hF({gl:t,shader:C,modelMtx:o,sliceMM:E,meshThickness:T})}else t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST);if(b1({gl:t,shader:C,mvpMtx:s,normMtx:a,opacity:y}),y>=1?(t.disable(t.BLEND),t.depthMask(!0)):(t.enable(t.BLEND),t.depthMask(!1)),cF({offsetPt0:b.offsetPt0,fiberSides:b.fiberSides,fiberRadius:b.fiberRadius})){x=!0;continue}C.isMatcap&&fF({gl:t,matCapTexture:f}),C1({gl:t,mesh:b,unusedVAO:p})}}if(t.enable(t.CULL_FACE),g>0&&!x){pF({gl:t});for(const b of n){if(!b.visible||b.indexCount<3)continue;const y=(w=c[b.meshShaderIndex])==null?void 0:w.shader;y&&(y.use(t),b1({gl:t,shader:y,mvpMtx:s,normMtx:a,opacity:b.opacity*i*g}),C1({gl:t,mesh:b,unusedVAO:p}))}gF(t)}if(x&&d){d.use(t),t.uniformMatrix4fv(d.uniforms.mvpMtx,!1,s),t.uniform1f(d.uniforms.opacity,i);for(const b of n)b.offsetPt0&&(b.fiberSides>=3&&b.fiberRadius>0||mF({gl:t,mesh:b,unusedVAO:p}))}AF(t)}function xF(e){const{canvasWidth:t,canvasHeight:n,leftTopWidthHeight:r,azimuth:i,elevation:s,furthestFromPivot:o,pivot3D:a,volScaleMultiplier:l,position:c}=e;let u=r;(u[2]===0||u[3]===0)&&(u=[0,0,t,n]);const d=u[2]/u[3];let h=o;const f=a,p=ge();h=.8*h/l,d<1?Ml(p,-h,h,-h/d,h/d,h*8,h*.01):Ml(p,-h*d,h*d,-h,h,h*8,h*.01);const g=ge();g[0]=-1;const v=q(0,0,-h*1.8);Pi(g,g,v),c&&Pi(g,g,c),Sl(g,g,or(270-s)),El(g,g,or(i-180)),Pi(g,g,[-f[0],-f[1],-f[2]]);const m=ge();zt(m,g);const A=ge();Ot(A,m);const x=ge();return Gr(x,p,g),{mvpMatrix:x,modelMatrix:g,normalMatrix:A}}function wF(e){const{sceneMin:t,sceneMax:n}=e,r=Te();Yr(r,t,n),sS(r,r,.5);const i=Te();return Pe(i,n,t),{pivot3D:[r[0],r[1],r[2]],furthestFromPivot:gr(i)*.5,extentsMin:t,extentsMax:n}}function yF(e){const{volumes:t}=e;if(t.length<1)return 0;let n=0;for(let r=0;r<t.length;r++)n=Math.max(n,t[r].nFrame4D??0);return n}function bF(e){const{fontMets:t,scale:n,str:r}=e;if(!r)return 0;let i=0;const s=new TextEncoder().encode(r);for(let o=0;o<r.length;o++)i+=n*t.mets[s[o]].xadv;return i}function CF(e){const{fontMets:t,scale:n,str:r}=e;if(!r)return 0;const i=new Set(Array.from(r)),s=new TextEncoder().encode(Array.from(i).join("")),a=Object.values(t.mets).filter((l,c)=>s.includes(c)).reduce((l,c)=>l.lbwh[3]>c.lbwh[3]?l:c).lbwh[3];return n*a}function SF(e,t){const{xy:n,str:r,fontPx:i,canvasWidth:s}=e;let o=e.scale,a=i*o,l=t(a,r);l>s&&(o*=(s-2)/l,a=i*o,l=t(a,r));let c=n[0]-.5*t(a,r);return c=Math.max(c,1),c=Math.min(c,s-l-1),{x:c,y:n[1],scale:o}}function EF(e,t){const{xy:n,str:r,fontPx:i,canvasWidth:s}=e;let o=e.scale,a=i*o,l=t(a,r);l>s&&(o*=(s-2)/l,a=i*o,l=t(a,r));let c=n[0]-.5*t(a,r);c=Math.max(c,1),c=Math.min(c,s-l-1);const u=n[1]-a;return{x:c,y:u,scale:o}}function MF(e,t,n,r,i){const s=n*r,o=i(s,t),a=(e[0]+e[2])*.5-.5*o,l=(e[1]+e[3])*.5-.5*s;return{textX:a,textY:l,rectLTWH:[a-1,l-1,o+2,s+2]}}function DF(e,t){const n=e??t;return n&&n[0]+n[1]+n[2]>.8?[0,0,0,.5]:[1,1,1,.5]}function TF(e){const{fovMM:t,ltwh:n,rulerWidth:r,regionBounds:i}=e;if(n.length<4||t.length<1)return null;const o=100/t[0]*n[2],a=Math.max(Math.round(o*.1),2),l=Math.floor(n[0]+.5*n[2]-.5*o),c=Math.floor(n[1]+n[3]-a)+.5*r,u=Math.max(i.x,l),d=Math.min(i.x+i.w,l+o),h=Math.min(i.y+i.h,c);return d<=u?null:{startXYendXY:[u,h,d,h],pix1cm:a,clipped:u>l||d<l+o}}function IF(e){return e[0]+e[1]+e[2]<.8?[1,1,1,1]:[0,0,0,1]}function FF(e,t){const n=[],r=-.1*(e[0]-e[2]),i=e[1]-Math.floor(.5*t),s=Math.floor(i-.35*r),o=Math.floor(i-.7*r);for(let a=0;a<11;a++){let l=e[0]+a*r;l=Math.max(l,e[0]+.5*t),l=Math.min(l,e[2]-.5*t);const c=[l,i,l,a%5===0?o:s];n.push(c)}return n}function RF(e){const{startXYendXY:t,distance:n}=e,r=t[0],i=t[1],s=t[2],o=t[3],a=r-s,l=i-o;if(a===0&&l===0)return{origin:[s+n,o],terminus:[s+n,o]};const c=Math.sqrt(a*a+l*l),u=n*a/c,d=n*l/c;return{origin:[r+u,i+d],terminus:[s-u,o-d]}}function PF(e,t,n){const r=[],i=e[2]-e[0],s=e[3]-e[1],o=Math.sqrt(i*i+s*s);if(o===0)return r;const l=t*n/2,c=i/o,u=s/o,d=c*l,h=u*l;let f=Math.floor(o/l);o%l&&f++;let p=e[0],g=e[1];for(let v=0;v<f-1;v++)v%2===0&&r.push({startX:p,startY:g,endX:p+d,endY:g+h}),p+=d,g+=h;return r}function NF(e,t,n){let r=t,i=t*n;return i>e&&(r=e/n,i=e),{left:(e-i)/2,top:(t-r)/2,width:i,height:r}}function ax(e,t){const n=t||e.target;if(!n)return;const r=n;if(typeof r.getBoundingClientRect!="function")return;const i=r.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}function kF(e,t){const n=t||e.target;return ax(e,n)}function BF(e){const{forceDevicePixelRatio:t}=e;return t===0?window.devicePixelRatio||1:t<0?1:t}function VF(e){const{canvas:t,isResizeCanvas:n,forceDevicePixelRatio:r}=e;if(!n)return{dpr:1,width:t.width,height:t.height,shouldDraw:!0};const i=BF({forceDevicePixelRatio:r});let s,o;const a=t.parentElement;return a&&"width"in a?(s=a.width*i,o=a.height*i):(s=t.offsetWidth*i,o=t.offsetHeight*i),{dpr:i,width:s,height:o,shouldDraw:!0}}function UF(e){return()=>{requestAnimationFrame(()=>{e()})}}function LF(e){return new ResizeObserver(()=>{requestAnimationFrame(()=>{e()})})}function OF(e){return new MutationObserver(e)}function S1(e){e.style.width="100%",e.style.height="100%",e.style.display="block"}function zF(e,t){return e!==null&&t!==null}function jF(e,t,n){n&&window.removeEventListener("resize",n),e&&e.disconnect(),t&&t.disconnect()}function GF(e){e&&e.abort()}var lx={};Rt(lx,{CENTER_MOUSE_BUTTON:()=>Df,LEFT_MOUSE_BUTTON:()=>Rl,RIGHT_MOUSE_BUTTON:()=>Tf,calculateMouseDownPosition:()=>Od,calculateMouseMovePosition:()=>ux,calculateWindowingValues:()=>XF,createOffCanvasPosition:()=>hx,createResetButtonState:()=>dx,determineButtonState:()=>YF,getMouseButtonDragMode:()=>cx,getNextAngleState:()=>KF,hasDragMoved:()=>zd,initializeDragState:()=>WF,isAngleMeasurementInProgress:()=>_F,isFunction:()=>fx,isOffCanvas:()=>HF,shouldTrackDrag:()=>QF});var Rl=0,Df=1,Tf=2;function cx(e){const{button:t,shiftKey:n,ctrlKey:r,mouseConfig:i,dragMode:s,dragModePrimary:o}=e;return t===Rl?i!=null&&i.leftButton?n&&i.leftButton.withShift!==void 0?i.leftButton.withShift:r&&i.leftButton.withCtrl!==void 0?i.leftButton.withCtrl:i.leftButton.primary:r?8:o:t===Tf?(i==null?void 0:i.rightButton)!==void 0?i.rightButton:s:t===Df&&(i==null?void 0:i.centerButton)!==void 0?i.centerButton:s}function YF(e){const{button:t,shiftKey:n}=e;return t===Rl&&n?{mouseButtonCenterDown:!0}:t===Rl?{mouseButtonLeftDown:!0}:t===Tf?{mouseButtonRightDown:!0}:t===Df?{mouseButtonCenterDown:!0}:{}}function Od(e){const{x:t,y:n,dpr:r}=e,i=t*r,s=n*r;return{scaledX:i,scaledY:s,mousePos:[i,s]}}function ux(e){const{x:t,y:n,dpr:r,currentMousePos:i}=e,s=t*r,o=n*r,a=(s-i[0])/r,l=(o-i[1])/r;return{scaledX:s,scaledY:o,dx:a,dy:l,mousePos:[s,o]}}function WF(e){const{posX:t,posY:n,pan2Dxyzmm:r,clipPlaneDepthAziElev:i}=e;return{dragStart:[t,n],pan2DxyzmmAtMouseDown:Nn(r),isDragging:!0,dragClipPlaneStartDepthAziElev:[...i]}}function dx(){return{mousedown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1}}function zd(e,t){return e[0]!==t[0]||e[1]!==t[1]}function HF(e){return e[0]<0||e[1]<0}function hx(){return[-1,-1]}function XF(e){const{currentX:t,currentY:n,windowX:r,windowY:i,calMin:s,calMax:o,robustMin:a,robustMax:l,windowRangeMultiplier:c}=e,d=(l-a)*c/100;let h=s,f=o;return n<i?(h=s-d,f=o-d):n>i&&(h=s+d,f=o+d),t>r?(h=h-d,f=f+d):t<r&&(h=h+d,f=f-d),{newCalMin:h,newCalMax:f,newWindowX:t,newWindowY:n}}function KF(e){const{currentState:t,dragMode:n}=e;if(n!==7)return t;switch(t){case"none":return"drawing_first_line";case"drawing_first_line":return"drawing_second_line";case"drawing_second_line":return"complete";case"complete":return"drawing_first_line";default:return"none"}}function _F(e){return e==="drawing_first_line"||e==="drawing_second_line"}function QF(e){return e!==8&&e!==9&&e!==0}function fx(e){return Object.prototype.toString.call(e).indexOf("Function")>-1}function qF(e){const{isDoubleTouch:t,touchConfig:n,dragMode:r,dragModePrimary:i}=e;return t?(n==null?void 0:n.doubleTouch)??r:(n==null?void 0:n.singleTouch)??i}function fu(e){const{touch:t,canvasRect:n}=e;return{x:t.clientX-n.left,y:t.clientY-n.top}}function ZF(e){const{currentTime:t,lastTouchTime:n,doubleTouchTimeout:r}=e,i=t-n;return{isDoubleTap:i<r&&i>0,timeSinceTouch:i}}function JF(e){const{currentTime:t,touchCount:n,isTouchdown:r}=e;return{touchdown:!0,currentTouchTime:t,multiTouchGesture:r&&n>=2}}function $F(){return{touchdown:!1,lastTwoTouchDistance:0,multiTouchGesture:!1}}function eR(e){return{doubleTouch:!1,lastTouchTime:e}}function tR(e){return{doubleTouch:!0,lastTouchTime:e}}function nR(e){const{touch1:t,touch2:n,lastTwoTouchDistance:r}=e,i=Math.hypot(t.pageX-n.pageX,t.pageY-n.pageY);let s;r===0?s=0:i<r?s=-.01:s=.01;const o={x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2};return{distance:i,scrollDelta:s,centerPosition:o}}function rR(e,t){return e===2&&t===2}function iR(e){const{touch:t,canvasRect:n}=e;return{x:t.clientX-n.left,y:t.clientY-n.top,pageX:t.pageX,pageY:t.pageY}}function sR(e){const{touchdown:t,multiTouchGesture:n}=e;return t&&!n}function E1(e,t){return e&&t<2}function oR(e){const{touch:t,canvasRect:n}=e;return[t.clientX-n.left,t.clientY-n.top]}function aR(e){const{doubleTouch:t,isDragging:n}=e;return t&&n}function lR(e){return e===null}var cR=[[2,0,0],[0,270,0],[0,90,0],[0,0,0],[0,180,0],[0,0,-90],[0,0,90]];function uR(e){const{code:t,ctrlKey:n,shiftKey:r,sliceType:i}=e,s=i===4;return t==="KeyH"&&s?{action:"render_azimuth_decrease"}:t==="KeyL"&&s?{action:"render_azimuth_increase"}:t==="KeyJ"&&s?{action:"render_elevation_increase"}:t==="KeyK"&&s?{action:"render_elevation_decrease"}:t==="KeyH"&&!s?{action:"crosshair_left"}:t==="KeyL"&&!s?{action:"crosshair_right"}:t==="KeyU"&&!s&&n?{action:"crosshair_forward"}:t==="KeyD"&&!s&&n?{action:"crosshair_backward"}:t==="KeyJ"&&!s?{action:"crosshair_down"}:t==="KeyK"&&!s?{action:"crosshair_up"}:t==="KeyM"&&!s?{action:"cycle_drag_mode"}:t==="ArrowLeft"?{action:"frame_previous"}:t==="ArrowRight"?{action:"frame_next"}:t==="Slash"&&r?{action:"show_version"}:{action:"none"}}function dR(e){const t=e+1;return t>=4?0:t}function hR(e){const{currentTime:t,lastCalledTime:n,debounceTime:r}=e;return t-n>r}function fR(e){const{currentIndex:t,clipPlanesLength:n}=e,r=n||6;let i;return t==null?i=0:i=(t+1)%r,{newIndex:i,defaultClipPlane:[0,0,0,2],defaultDepthAziElev:[2,0,0]}}function mR(e){const{currentClipPlaneIndex:t}=e,n=(t+1)%7,r=cR[n];return{newIndex:n,depthAziElev:r}}function pR(e){const{currentSliceType:t,totalSliceTypes:n}=e;return(t+1)%n}function mu(e,t){return e===t}function gR(e){const{deltaY:t,invertScrollDirection:n}=e;let r=t<0?-.01:.01;return n&&(r=-r),r}function AR(e){const{dragMode:t,dragStart:n,dragEnd:r}=e;if(t!==6)return!1;const i=n.reduce((o,a)=>o+a,0),s=r.reduce((o,a)=>o+a,0);return i>0&&s>0}function vR(e){const{dragStart:t,dragEnd:n,delta:r}=e,i=[...t],s=[...n];return t[0]<n[0]?(i[0]=t[0]-r,s[0]=n[0]+r):(i[0]=t[0]+r,s[0]=n[0]-r),t[1]<n[1]?(i[1]=t[1]-r,s[1]=n[1]+r):(i[1]=t[1]+r,s[1]=n[1]-r),{newDragStart:i,newDragEnd:s}}function xR(e){return e>0?1:-1}function wR(e){const{currentZoom:t,scrollAmount:n}=e,r=n<0?1:-1;let i=t*(1+10*(.01*r));i=Math.round(i*10)/10;const s=t-i;return{newZoom:i,zoomChange:s}}function yR(e){const{currentPan:t,zoomChange:n,crosshairMM:r}=e;return[t[0]+n*r[0],t[1]+n*r[1],t[2]+n*r[2]]}function bR(e){const{currentPercent:t,scrollAmount:n}=e;let r=t;return n<0?(r-=.01,r=Math.max(r,0)):(r+=.01,r=Math.min(r,1)),r}function CR(e){const{thumbnailVisible:t,mosaicStringLength:n,eventInBounds:r,hasBounds:i}=e;return t||n>0?{shouldProcess:!1,showBoundsBorder:!1}:r?{shouldProcess:!0,showBoundsBorder:i}:{shouldProcess:!1,showBoundsBorder:!1}}function SR(e){const{dragMode:t,isInRenderTile:n}=e;return t===3&&!n}function ER(e,t,n){return[e-n.left,t-n.top]}var MR={none:0,contrast:1,measurement:2,angle:7,pan:3,slicer3D:4,callbackOnly:5,roiSelection:6,crosshair:8,windowing:9};function DR(e){if(typeof e=="string"){const t=MR[e];return t!==void 0?t:null}return e}function TR(e){const{activeDragMode:t,fallbackDragMode:n}=e;return t!==null?t:n}function IR(){return{activeDragMode:null,activeDragButton:null}}function FR(e,t){return{activeDragMode:e,activeDragButton:t}}function RR(e){if(e.length>2)throw new Error("array must not contain more than two values");return[Math.floor(Math.min(e[0],e[1])),Math.floor(Math.max(e[0],e[1]))]}function PR(e,t){const n=e[2],r=e[3],i=e[0]-n,s=e[1]-r,o=t[2]-n,a=t[3]-r,l=i*o+s*a,c=Math.sqrt(i*i+s*s),u=Math.sqrt(o*o+a*a);if(c===0||u===0)return 0;const d=Math.max(-1,Math.min(1,l/(c*u)));return Math.acos(d)*(180/Math.PI)}function NR(){return{angleState:"none",angleFirstLine:[0,0,0,0]}}function M1(e,t,n){return[e*n,t*n]}function kR(e){const{startMM:t,endMM:n,pan2DxyzmmAtMouseDown:r}=e,i=Un();fS(i,n,t);const s=r[3];return{pan2Dxyzmm:[r[0]+s*i[0],r[1]+s*i[1],r[2]+s*i[2],s]}}function BR(e){const{startY:t,endY:n,pan2DxyzmmAtMouseDown:r,currentPan2Dxyzmm:i,crosshairMM:s,yoke3Dto2DZoom:o}=e;let a=r[3];const l=n-t;a+=l*.01,a=Math.max(a,.1),a=Math.min(a,10);const u=i[3]-a,d={zoom:a,pan2Dxyzmm:[i[0]+u*s[0],i[1]+u*s[1],i[2]+u*s[2],a]};return o&&(d.volScaleMultiplier=a),d}function VR(e){const{x:t,y:n,windowX:r,windowY:i,currentCalMin:s,currentCalMax:o,globalMin:a,globalMax:l}=e;let c=s,u=o;return n<i?(c+=1,u+=1):n>i&&(c-=1,u-=1),t>r?(c-=1,u+=1):t<r&&(c+=1,u-=1),u-c<1&&(u=c+1),c<a&&(c=a),u>l&&(u=l),c>u&&(c=u-1),{calMin:c,calMax:u,windowX:t,windowY:n}}function UR(e){const{xrange:t,yrange:n,zrange:r,dims:i,img:s}=e;let o=-Number.MAX_VALUE,a=Number.MAX_VALUE;const l=i[1],c=i[2];for(let u=r[0];u<r[1];u++){const d=u*l*c;for(let h=n[0];h<n[1];h++){const f=h*l;for(let p=t[0];p<t[1];p++){const g=d+f+p;a>s[g]&&(a=s[g]),o<s[g]&&(o=s[g])}}}return{lo:a,hi:o,hasVariation:a<o}}function LR(e,t,n,r,i){const s=[...n],o=[...r],a=[...i];return e[0]-t[0]===0?s[1]=e[0]+1:e[1]-t[1]===0?o[1]=e[1]+1:e[2]-t[2]===0&&(a[1]=e[2]+1),{xrange:s,yrange:o,zrange:a}}function OR(e){return e===7}function D1(e){return bf.includes(e)?"mesh":e==="NVD"?"document":"volume"}function zR(e){return e.lastIndexOf("BRIK")!==-1?"brik":e.toUpperCase().lastIndexOf("IMG")!==-1?"img":null}function jR(e,t){const n=e.name.lastIndexOf("HEAD");if(n===-1)return null;const r=e.name.substring(0,n);for(const i of Array.from(t)){const s=i.webkitGetAsEntry();if(!s)continue;const o=s.name.lastIndexOf("BRIK");if(o===-1)continue;const a=s.name.substring(0,o);if(r===a)return s}return null}function GR(e,t){const r=e.name.toUpperCase().lastIndexOf("HDR");if(r===-1)return null;const i=e.name.substring(0,r);for(const s of Array.from(t)){const o=s.webkitGetAsEntry();if(!o)continue;const l=o.name.toUpperCase().lastIndexOf("IMG");if(l===-1)continue;const c=o.name.substring(0,l);if(i.toUpperCase()===c.toUpperCase())return o}return null}function YR(e,t){const n=jR(e,t);return n||GR(e,t)}function T1(e){return new Promise((t,n)=>{e.file(t,n)})}function WR(e){const t=[];for(const n of Array.from(e)){const r=n.webkitGetAsEntry();if(!r){k.warn("could not get entry from dropped item");continue}if(r.isFile){if(zR(r.name))continue;const i=YR(r,e);t.push({entry:r,pairedEntry:i})}}return t}function HR(e){const t=[];for(const n of Array.from(e)){const r=n.webkitGetAsEntry();r!=null&&r.isDirectory&&t.push(r)}return t}function XR(e){return e.getData("text/uri-list")||null}function KR(e){return e.items.length>0}function If(e){const{x:t,y:n,screenSlices:r}=e;for(let i=0;i<r.length;i++){const s=r[i].leftTopWidthHeight;if(t>s[0]&&n>s[1]&&t<s[0]+s[2]&&n<s[1]+s[3])return i}return-1}function _R(e){const{x:t,y:n,screenSlices:r}=e,i=If({x:t,y:n,screenSlices:r});return i>=0&&r[i].axCorSag===4?i:-1}function QR(e){const{x:t,y:n,graph:r,volumesLength:i,firstVolumeFrameCount:s}=e;if(r.opacity<=0||i<1||s<1||!r.plotLTWH||r.plotLTWH[2]<1||r.plotLTWH[3]<1)return!1;const o=[(t-r.LTWH[0])/r.LTWH[2],(n-r.LTWH[1])/r.LTWH[3]];return o[0]>0&&o[1]>0&&o[0]<=1&&o[1]<=1}function qR(e){const{x:t,y:n,dpr:r,canvasHeight:i,boundsRegion:s}=e,[o,a,l,c]=s,u=t*r,d=i-n*r;return u>=o&&u<=o+l&&d>=a&&d<=a+c}function Pl(e){const{sliceType:t,crosshairPos:n}=e;return t===0?n[2]:t===1?n[1]:t===2?n[0]:0}function ZR(e){const{dragStart:t,screenSlices:n,crosshairPos:r,currentSliceType:i,canvasPos2frac:s}=e,o=If({x:t[0],y:t[1],screenSlices:n});if(o>=0&&o<n.length){const l=n[o].axCorSag,c=Pl({sliceType:l,crosshairPos:r});return{sliceIndex:o,sliceType:l,slicePosition:c}}let a=0;return i===0?a=r[2]:i===1?a=r[1]:i===2?a=r[0]:i===3&&s([t[0],t[1]])[0]>=0&&(a=r[2]),{sliceIndex:-1,sliceType:i,slicePosition:a}}function JR(e){const{sliceType:t,slicePosition:n,currentSliceTypeOpt:r,screenSlices:i,crosshairPos:s}=e;if(r===3){if(t>2)return!1;for(let c=0;c<i.length;c++)if(i[c].axCorSag===t){const u=Pl({sliceType:t,crosshairPos:s});if(Math.abs(u-n)<.001)return!0}return!1}if(t!==r)return!1;const o=Pl({sliceType:t,crosshairPos:s});return Math.abs(o-n)<.001}function $R(e){const{posChange:t,volumesLength:n,clipPlaneDepthAziElevs:r,activeClipPlaneIndex:i,volScaleMultiplier:s}=e;if(t===0)return{action:"none"};if(n>0&&r[i][0]<1.8){const a=r[i][0];let l=a;return t>0&&(l=Math.min(1.5,a+.025)),t<0&&(l=Math.max(-1.5,a-.025)),l!==a?{action:"clipPlane",newClipPlaneDepth:l}:{action:"none"}}let o=s;return t>0&&(o=Math.min(2,s*1.1)),t<0&&(o=Math.max(.5,s*.9)),{action:"zoom",newVolScaleMultiplier:o}}function eP(e){const{posChange:t,currentZoom:n,yoke3Dto2DZoom:r,crosshairMM:i}=e;let s=n*(1+10*t);s=Math.round(s*10)/10;const o=n-s;return{newZoom:s,zoomChange:o,panOffsetX:o*i[0],panOffsetY:o*i[1],panOffsetZ:o*i[2],newVolScaleMultiplier:r?s:void 0}}function tP(e){const{x:t,y:n,z:r,currentVox:i,dimsRAS:s}=e,o=fn(i),a=o[2];return o[0]+=t,o[1]+=n,o[2]+=r,o[0]=Math.max(0,Math.min(o[0],s[1]-1)),o[1]=Math.max(0,Math.min(o[1],s[2]-1)),o[2]=Math.max(0,Math.min(o[2],s[3]-1)),{newVox:o,zChanged:a!==o[2]}}function nP(e){const{scrollRequiresFocus:t,canvasHasFocus:n}=e;return!t||n}function rP(e){const{posChange:t,dragMode:n,isInRenderTile:r}=e;return t!==0&&n===3&&!r}function iP(e){const{layout:t}=e;for(let n=0;n<t.length;n++){const[r,i,s,o]=t[n].position,a=r+s,l=i+o;for(let c=n+1;c<t.length;c++){const[u,d,h,f]=t[c].position,p=u+h,g=d+f,v=r<p&&a>u,m=i<g&&l>d;if(v&&m)return{valid:!1,error:`Custom layout is invalid. Tile ${n} overlaps with tile ${c}.`,overlappingTiles:[n,c]}}}return{valid:!0}}function sP(e){const{bounds:t,canvasWidth:n,canvasHeight:r,cssWidth:i,cssHeight:s,dpr:o}=e;if(!t)return[0,0,n,r];const[[a,l],[c,u]]=t,d=Math.floor(a*i*o),h=Math.ceil((c-a)*i*o);let f=Math.floor((1-u)*s*o),p=Math.ceil((u-l)*s*o);return f<0&&(p+=f,f=0),f+p>r&&(p=r-f),[d,f,h,p]}function oP(e){const{bounds:t,rectWidth:n,rectHeight:r}=e;if(!t)return[0,0,n,r];const[[i,s],[o,a]]=t,l=Math.round(i*n),c=Math.round((o-i)*n),u=Math.round(s*r),d=Math.round(a*r),h=d-u,f=r-d;return[l,f,c,h]}function aP(e){const{canvasHeight:t,bounds:n,colorbarHeight:r}=e;let i=t;if(n){const[[,s],[,o]]=n,a=Math.round(s*t);i=Math.round(o*t)-a}return i-r}function lP(e){const{canvasWidth:t,bounds:n,legendPanelWidth:r}=e;let i=t;if(n){const[[s],[o]]=n;i=Math.round((o-s)*t)}return i-r}function cP(e){const{forceVox:t,getScreenFieldOfViewMM:n,getScreenFieldOfViewVox:r,backDims:i}=e;let s=n(0);t&&(s=r(0));const o=Math.max(s[0],Math.max(s[1],s[2])),a=[s[0]/o,s[1]/o,s[2]/o],l=[i[1],i[2],i[3]];return{volScale:a,vox:l,longestAxis:o,dimsMM:s}}function uP(e){const{axCorSag:t,sliceFrac:n,frac2mm:r,swizzleVec3MM:i}=e;let s=2;t===1&&(s=1),t===2&&(s=0);const o=[0,0,0],a=[1,1,0],l=[1,0,1];o[s]=n,a[s]=n,l[s]=n;const c=r(o),u=r(a),d=r(l),h=i(q(c[0],c[1],c[2]),t),f=i(q(u[0],u[1],u[2]),t),p=i(q(d[0],d[1],d[2]),t),g=(f[0]-h[0])*(p[1]-h[1])-(p[0]-h[0])*(f[1]-h[1]);let v=(f[0]-h[0])*(p[2]-h[2])-(p[0]-h[0])*(f[2]-h[2]);v/=g;let m=(f[1]-h[1])*(p[2]-h[2])-(p[1]-h[1])*(f[2]-h[2]);m/=g;const A=[0,0,0,0,0];return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=m,A[4]=v,A}function dP(e){const{labels:t,fontPx:n,textHeight:r}=e;if(t.length===0)return 0;const i=t.length===1?t[0].style.bulletScale??1:t.reduce((l,c)=>(l.style.bulletScale??1)>(c.style.bulletScale??1)?l:c).style.bulletScale??1,s=t.length===1?t[0]:t.reduce((l,c)=>{const u=n*l.style.textScale,d=n*c.style.textScale;return r(u,l.text)>r(d,c.text)?l:c}),o=n*s.style.textScale;let a=r(o,s.text)*i;return a+=o,a}function hP(e){const{labels:t,showLegend:n,fontPx:r,canvasWidth:i,textWidth:s,getBulletMarginWidth:o}=e;if(!n||t.length===0)return 0;const l=r*1;let c=0;const u=t.reduce((p,g)=>{const v=r*p.style.textScale,m=r*g.style.textScale;return s(v,p.text)>s(m,g.text)?p:g}),d=r*u.style.textScale,h=s(d,u.text),f=o();return h&&(c=f+h,c+=l*2),c>=i?0:c}function fP(e){const{labels:t,fontPx:n,panelScale:r,textHeight:i}=e;let s=0;const o=n;for(const a of t){const l=n*a.style.textScale*r,c=i(l,a.text);s+=c}return s&&(s+=o/2*(t.length+1)*r),s}function mP(e){const{fontPx:t,boundsRegion:n,colorbarWidth:r}=e,i=3*t;if(i<0)return{leftTopWidthHeight:[0,0,0,0],colorbarHeight:0};const[s,o,a,l]=n,u=(r>0&&r<=1?r:1)*a;return{leftTopWidthHeight:[s+(a-u)/2,o+l-i,u,i],colorbarHeight:i+1}}function pP(e){const{x:t,y:n,boundsRegion:r}=e,[i,s,o,a]=r;return t>=i&&t<=i+o&&n>=s&&n<=s+a}function gP(e){const{mouseX:t,mouseY:n,boundsRegion:r}=e;if(t<0||n<0)return!1;const[i,s,o,a]=r;return t>=i&&t<=i+o&&n>=s&&n<=s+a}function AP(e){let t=e%360;return t<0&&(t+=360),t}function vP(e){const{currentAzimuth:t,currentElevation:n,deltaX:r,deltaY:i}=e,s=AP(t+r),o=n+i;return{azimuth:s,elevation:o}}function xP(e){const{dx:t,dy:n,threshold:r=1}=e;return Math.abs(t)>=r||Math.abs(n)>=r}var wP=[0,0,0,2],yP=[2,0,0],bP=1.8;function CP(e){const{depth:t,azimuth:n,elevation:r}=e,i=cc(n+180,r);return[i[0],i[1],i[2],t]}function SP(e){const{depth:t,azimuth:n,elevation:r}=e,i=cc(n,r);return[i[0],i[1],i[2],-t]}function EP(e){const{startDepthAziElev:t,dragDeltaX:n,dragDeltaY:r}=e,i=[t[0],(t[1]-n)%360,t[2]+r],s=i[1]!==t[1]||i[2]!==t[2];return{depthAziElev:i,changed:s}}function MP(e){const{index:t}=e,n=e.clipPlanes?[...e.clipPlanes]:[],r=e.clipPlaneDepthAziElevs?[...e.clipPlaneDepthAziElevs]:[];for(;n.length<=t;)n.push([...wP]);for(;r.length<=t;)r.push([...yP]);return{clipPlanes:n,clipPlaneDepthAziElevs:r}}function DP(e,t=bP){return e<t}function TP(e){const{depthAziElevs:t}=e,n=[],r=[];for(const i of t){const s=SP({depth:i[0],azimuth:i[1],elevation:i[2]});n.push(s),r.push([...i])}return{clipPlanes:n,clipPlaneDepthAziElevs:r}}function IP(e){const{isDragging:t,activeClipPlaneDepth:n,dragStartTileIndex:r}=e;return t&&DP(n)&&r>=0}function FP(e){const{index:t,depthAzimuthElevation:n}=e,{clipPlanes:r,clipPlaneDepthAziElevs:i}=MP({clipPlanes:e.clipPlanes,clipPlaneDepthAziElevs:e.clipPlaneDepthAziElevs,index:t}),s=CP({depth:n[0],azimuth:n[1],elevation:n[2]});return r[t]=s,i[t]=[...n],{clipPlanes:r,clipPlaneDepthAziElevs:i,clipPlane:s}}function RP(e){return!!e&&e.length>0}function PP(e){const t=e.length;let n=0;const r=new Uint8Array(t+Math.ceil(.01*t)),i=new Int8Array(r.buffer);let s=0;for(;n<t;){let o=e[n];n++;let a=1;for(;a<129&&n<t&&e[n]===o;)n++,a++;if(a>1){i[s]=-a+1,s++,r[s]=o,s++;continue}for(;n<t&&!(a>127||n+2<t&&o!==e[n]&&e[n+2]===e[n]&&e[n+1]===e[n]);)o=e[n],n++,a++;r[s]=a-1,s++;for(let l=0;l<a;l++)r[s]=e[n-a+l],s++}return k.debug("PackBits "+t+" -> "+s+" bytes (x"+t/s+")"),r.slice(0,s)}function Ff(e,t){const n=new Uint8Array(e.buffer),r=new Int8Array(n.buffer);let i=0;const s=new Uint8Array(t);let o=0;for(;i<n.length;){const a=r[i];if(i++,a<0){const l=r[i];i++;for(let c=0;c<1-a;c++)s[o]=l,o++}else for(let l=0;l<a+1;l++)s[o]=r[i],i++,o++}return s}var NP=({drawUndoBitmaps:e,currentDrawUndoBitmap:t,drawBitmap:n})=>{const r=e.length;if(r<1){k.debug("undo bitmaps not loaded");return}if(t--,t<0&&(t=r-1),t>=r&&(t=0),e[t].length<2){k.debug("drawUndo is misbehaving");return}return n=Ff(e[t],n.length),{drawBitmap:n,currentDrawUndoBitmap:t}};function kP(e,t,n){const{dimX:r,dimY:i,dimZ:s}=n;let o;if(e===0)o=s;else if(e===1)o=i;else if(e===2)o=r;else return null;let a=-1,l=-1;for(let c=0;c<o;c++){let u=!1;if(e===0){const d=c*r*i;for(let h=0;h<r*i;h++)if(t[d+h]>0){u=!0;break}}else if(e===1)for(let d=0;d<s;d++){for(let h=0;h<r;h++){const f=h+c*r+d*r*i;if(t[f]>0){u=!0;break}}if(u)break}else if(e===2)for(let d=0;d<s;d++){for(let h=0;h<i;h++){const f=c+h*r+d*r*i;if(t[f]>0){u=!0;break}}if(u)break}u&&(a===-1&&(a=c),l=c)}return a===-1||l===-1?null:{first:a,last:l}}function pu(e,t,n,r){const{dimX:i,dimY:s,dimZ:o}=r;let a;if(t===0){a=new Float32Array(i*s);const l=e*i*s;for(let c=0;c<i*s;c++)a[c]=n[l+c]}else if(t===1){a=new Float32Array(i*o);for(let l=0;l<o;l++)for(let c=0;c<i;c++){const u=c+e*i+l*i*s,d=c+l*i;a[d]=n[u]}}else if(t===2){a=new Float32Array(s*o);for(let l=0;l<o;l++)for(let c=0;c<s;c++){const u=e+c*i+l*i*s,d=c+l*s;a[d]=n[u]}}else throw new Error("Invalid slice type");return a}function gu(e,t,n,r,i){const{dimX:s,dimY:o,dimZ:a}=r;let l;if(t===0){l=new Float32Array(s*o);const c=e*s*o;for(let u=0;u<s*o;u++)l[u]=n[c+u]/i}else if(t===1){l=new Float32Array(s*a);for(let c=0;c<a;c++)for(let u=0;u<s;u++){const d=u+e*s+c*s*o,h=u+c*s;l[h]=n[d]/i}}else if(t===2){l=new Float32Array(o*a);for(let c=0;c<a;c++)for(let u=0;u<o;u++){const d=e+u*s+c*s*o,h=u+c*o;l[h]=n[d]/i}}else throw new Error("Invalid slice type");return l}function BP(e,t,n,r,i,s,o){const{dimX:a,dimY:l,dimZ:c}=i;if(n===0){const u=t*a*l;for(let d=0;d<e.length;d++)e[d]>=s&&(r[u+d]=o)}else if(n===1)for(let u=0;u<c;u++)for(let d=0;d<a;d++){const h=d+u*a,f=d+t*a+u*a*l;e[h]>=s&&(r[f]=o)}else if(n===2)for(let u=0;u<c;u++)for(let d=0;d<l;d++){const h=d+u*l,f=t+d*a+u*a*l;e[h]>=s&&(r[f]=o)}else throw new Error("Invalid slice type")}function I1(e,t,n){if(t<3||n<3)return;const r=new Float32Array(e.length);for(let i=0;i<n;i++)for(let s=0;s<t;s++){const o=s+i*t;s===0||s===t-1?r[o]=e[o]:r[o]=(e[o-1]+2*e[o]+e[o+1])*.25}for(let i=0;i<n;i++)for(let s=0;s<t;s++){const o=s+i*t;i===0||i===n-1?e[o]=r[o]:e[o]=(r[o-t]+2*r[o]+r[o+t])*.25}}function VP(e,t,n,r){const i=Math.abs(n-e),s=Math.abs(n-t),o=Math.exp(-i*i/(2*r*r)),a=Math.exp(-s*s/(2*r*r)),l=o+a;return l<1e-6?.5:o/l}function UP(e,t,n,r,i,s){const o=(n-r)/(i-r),a=1-o;for(let l=0;l<e.length;l++)s[l]=e[l]*a+t[l]*o}function LP(e,t,n,r,i,s,o,a,l,c){const u=(n-r)/(i-r),d=1-u;for(let h=0;h<e.length;h++)if(e[h]>0||t[h]>0){const f=VP(a[h],l[h],c[h],o.intensitySigma),p=o.intensityWeight,g=p*f+(1-p)*d,v=1-g;s[h]=e[h]*g+t[h]*v}else s[h]=e[h]*d+t[h]*u}function OP(e,t,n,r,i,s,o,a){const{dimX:l,dimY:c,dimZ:u}=t,d=o.sliceType??0;let h,f,p;if(d===0)h=l,f=c,p=u-1;else if(d===1)h=l,f=u,p=c-1;else if(d===2)h=c,f=u,p=l-1;else throw new Error("Invalid slice type. Must be AXIAL, CORONAL, or SAGITTAL");const g={intensityWeight:o.intensityWeight??.7,binaryThreshold:o.binaryThreshold??.375,intensitySigma:o.intensitySigma??.1,applySmoothingToSlices:o.applySmoothingToSlices??!0,useIntensityGuided:o.useIntensityGuided??!0};if(i!==void 0&&s!==void 0){if(i>=s)throw new Error("Low slice index must be less than high slice index");if(i<0||s>p)throw new Error(`Slice indices out of bounds [0, ${p}]`)}const v=new Map;for(let m=0;m<=p;m++){const A=pu(m,d,e,t);for(let x=0;x<A.length;x++){const w=A[x];if(w>0)if(!v.has(w))v.set(w,{min:m,max:m});else{const b=v.get(w);b.min=Math.min(b.min,m),b.max=Math.max(b.max,m)}}}for(const[m,A]of v){const x=i!==void 0?Math.max(i,A.min):A.min,w=s!==void 0?Math.min(s,A.max):A.max;if(x>=w||w-x<2)continue;const b=pu(x,d,e,t),y=pu(w,d,e,t),C=new Float32Array(b.length),S=new Float32Array(y.length);for(let E=0;E<b.length;E++)C[E]=b[E]===m?1:0,S[E]=y[E]===m?1:0;g.applySmoothingToSlices&&(I1(C,h,f),I1(S,h,f));for(let E=x+1;E<w;E++){const T=new Float32Array(h*f);if(g.useIntensityGuided&&n){const F=gu(x,d,n,t,r),M=gu(w,d,n,t,r),B=gu(E,d,n,t,r);LP(C,S,E,x,w,T,g,F,M,B)}else UP(C,S,E,x,w,T);BP(T,E,d,e,t,g.binaryThreshold,m)}}a()}function zP(e,t){const n=[...e],r=t;if(!n||n.length<1)return{drawUndoBitmaps:n,currentDrawUndoBitmap:r};for(let i=n.length-1;i>=0;i--)n[i]=new Uint8Array;return{drawUndoBitmaps:n,currentDrawUndoBitmap:r}}function jP(e){const{drawBitmap:t,drawUndoBitmaps:n,currentDrawUndoBitmap:r,maxDrawUndoBitmaps:i,drawFillOverwrites:s}=e;if(!t||t.length<1)return k.debug("addUndoBitmap error: No drawing open"),{drawBitmap:t,drawUndoBitmaps:n,currentDrawUndoBitmap:r,needsRefresh:!1};const o=[...n];let a=t,l=!1;if(!s&&o.length>0){const u=t.length,d=Ff(o[r],u);a=new Uint8Array(t);for(let h=0;h<u;h++)d[h]>0&&(a[h]=d[h]);l=!0}let c=r+1;return c>=i&&(c=0),o[c]=PP(a),{drawBitmap:a,drawUndoBitmaps:o,currentDrawUndoBitmap:c,needsRefresh:l}}function Au(e,t,n){const r=new Array(e);if(n)for(let i=0;i<e;i++)r[i]=(e-1-i)*t;else for(let i=0;i<e;i++)r[i]=i*t;return r}function GP(e){const{permRAS:t,dims:n}=e,r=[0,0,0];for(let u=0;u<3;u++)for(let d=0;d<3;d++)Math.abs(t[u])-1===d&&(r[d]=u*Math.sign(t[u]));let i=1;const s=[1,1,1],o=[!1,!1,!1];for(let u=0;u<r.length;u++)for(let d=0;d<r.length;d++)Math.abs(r[d])===u&&(s[d]=i,(r[d]<0||Object.is(r[d],-0))&&(o[d]=!0),i*=n[d+1]);const a=Au(n[1],s[0],o[0]),l=Au(n[2],s[1],o[1]),c=Au(n[3],s[2],o[2]);return{instride:s,inflip:o,xlut:a,ylut:l,zlut:c}}function YP(e){const{inputData:t,dims:n,xlut:r,ylut:i,zlut:s}=e,o=n[1]*n[2]*n[3],a=new Uint8Array(o);let l=0;for(let c=0;c<n[3];c++)for(let u=0;u<n[2];u++)for(let d=0;d<n[1];d++)a[r[d]+i[u]+s[c]]=t[l],l++;return a}function WP(e){const{drawingDims:t,backgroundDims:n}=e;return t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function vu(e){return!e||e.length<4?0:e[1]*e[2]*e[3]}function xu(e){return new Uint8Array(e)}function HP(e){let{useClickToSegmentBitmap:t,drawingEnabled:n,clickToSegment:r,drawBitmap:i,clickToSegmentGrowingBitmap:s}=e,o=null;t&&(!n||!r)&&(k.debug("determineBitmapDataSource: Conditions not met for clickToSegment bitmap, using drawBitmap."),t=!1);const a=t?s:i;return!a&&!t&&s?o="drawBitmap is null, but clickToSegmentGrowingBitmap exists. Check state.":!a&&t&&i?(o="clickToSegmentGrowingBitmap is null, falling back to drawBitmap.",t=!1):a||(o="Both bitmaps are null. Uploading empty data."),{bitmapDataSource:t?s:i,useClickToSegmentBitmap:t,warning:o}}function XP(e){const{clickToSegmentIsGrowing:t,drawShapePreviewBitmap:n,drawBitmap:r}=e;let i=r,s=!1;return t&&(s=!0),n&&(i=n),{clickToSegmentIsGrowing:!1,drawPenLocation:[NaN,NaN,NaN],drawPenAxCorSag:-1,drawPenFillPts:[],drawShapeStartLocation:[NaN,NaN,NaN],drawShapePreviewBitmap:null,drawBitmap:i,needsRefresh:s}}function KP(e,t){return e===8?[t[0],2,2,2,...t.slice(4)]:t}function _P(e,t){return e===8?!0:e===t}function F1(e,t,n,r,i){return e+t*r+n*r*i}function Tn(e,t){return Math.min(Math.max(e,0),t-1)}function Ni(e){const{x:t,y:n,z:r,penValue:i,drawBitmap:s,dims:o,penSize:a,penAxCorSag:l}=e,c=o[1],u=o[2],d=o[3],h=Tn(t,c),f=Tn(n,u),p=Tn(r,d);if(s[F1(h,f,p,c,u)]=i,a>1){const g=Math.floor(a/2),v=l===0,m=l===1,A=l===2;for(let x=-g;x<=g;x++)for(let w=-g;w<=g;w++){let b,y,C;if(v)b=Tn(h+x,c),y=Tn(f+w,u),C=p;else if(m)b=Tn(h+x,c),y=f,C=Tn(p+w,d);else if(A)b=h,y=Tn(f+w,u),C=Tn(p+x,d);else continue;s[F1(b,y,C,c,u)]=i}}}function QP(e){const{ptA:t,ptB:n,penValue:r,drawBitmap:i,dims:s,penSize:o,penAxCorSag:a}=e,l=Math.abs(t[0]-n[0]),c=Math.abs(t[1]-n[1]),u=Math.abs(t[2]-n[2]),d=n[0]>t[0]?1:-1,h=n[1]>t[1]?1:-1,f=n[2]>t[2]?1:-1;let p=t[0],g=t[1],v=t[2];const m=n[0],A=n[1],x=n[2],w={x:0,y:0,z:0,penValue:r,drawBitmap:i,dims:s,penSize:o,penAxCorSag:a};if(l>=c&&l>=u){let b=2*c-l,y=2*u-l;for(;p!==m;)p+=d,b>=0&&(g+=h,b-=2*l),y>=0&&(v+=f,y-=2*l),b+=2*c,y+=2*u,w.x=p,w.y=g,w.z=v,Ni(w)}else if(c>=l&&c>=u){let b=2*l-c,y=2*u-c;for(;g!==A;)g+=h,b>=0&&(p+=d,b-=2*c),y>=0&&(v+=f,y-=2*c),b+=2*l,y+=2*u,w.x=p,w.y=g,w.z=v,Ni(w)}else{let b=2*c-u,y=2*l-u;for(;v!==x;)v+=f,b>=0&&(g+=h,b-=2*u),y>=0&&(p+=d,y-=2*u),b+=2*c,y+=2*l,w.x=p,w.y=g,w.z=v,Ni(w)}}function mx(e){const{img2D:t,dims2D:n,minPt:r,maxPt:i}=e,s=n[0],[o,a]=r,[l,c]=i,u=4*(l-o+c-a+2),d=new Int32Array(u*2);let h=0,f=0;function p(m,A){if(m<o||m>l||A<a||A>c)return;const x=m+A*s;t[x]===0&&(t[x]=2,d[f]=m,d[f+1]=A,f=(f+2)%d.length)}function g(){if(h===f)return null;const m=d[h],A=d[h+1];return h=(h+2)%d.length,[m,A]}for(let m=o;m<=l;m++)p(m,a),p(m,c);for(let m=a+1;m<=c-1;m++)p(o,m),p(l,m);let v;for(;(v=g())!==null;){const[m,A]=v;p(m-1,A),p(m+1,A),p(m,A-1),p(m,A+1)}}function R1(e,t,n,r,i){const s=Math.abs(n[0]-r[0]),o=Math.abs(n[1]-r[1]);e[n[0]+n[1]*t[0]]=i,e[r[0]+r[1]*t[0]]=i;const a=r[0]>n[0]?1:-1,l=r[1]>n[1]?1:-1;let c=n[0],u=n[1];const d=r[0],h=r[1];if(s>=o){let f=2*o-s;for(;c!==d;)c+=a,f>=0&&(u+=l,f-=2*s),f+=2*o,e[c+u*t[0]]=i}else{let f=2*s-o;for(;u!==h;)u+=l,f>=0&&(c+=a,f-=2*o),f+=2*s,e[c+u*t[0]]=i}}function P1(e,t){const n=Math.min(Math.max(e[0],0),t[0]-1),r=Math.min(Math.max(e[1],0),t[1]-1);return[n,r]}function qP(e){let t=0,n=1;return e===1?n=2:e===2&&(t=1,n=2),[t,n]}function ZP(e){const{penFillPts:t,penAxCorSag:n,drawBitmap:r,dims:i,penValue:s,fillOverwrites:o,currentUndoBitmap:a}=e,l=t.length;if(l<2)return{drawBitmap:r,success:!1};const[c,u]=qP(n),d=[i[c+1],i[u+1]],h=new Uint8Array(d[0]*d[1]),f=1,p=P1([t[0][c],t[0][u]],d);let g=[...p],v=[...p],m=p;for(let y=1;y<l;y++){let C=[t[y][c],t[y][u]];C=P1(C,d),g=[Math.min(C[0],g[0]),Math.min(C[1],g[1])],v=[Math.max(C[0],v[0]),Math.max(C[1],v[1])],R1(h,d,m,C,f),m=C}R1(h,d,p,m,f);const A=1;g[0]=Math.max(0,g[0]-A),g[1]=Math.max(0,g[1]-A),v[0]=Math.min(d[0]-1,v[0]+A),v[1]=Math.min(d[1]-1,v[1]+A);for(let y=0;y<d[1];y++)for(let C=0;C<d[0];C++){if(C>=g[0]&&C<v[0]&&y>=g[1]&&y<=v[1])continue;const S=C+y*d[0];h[S]===0&&(h[S]=2)}const x=Date.now();mx({img2D:h,dims2D:d,minPt:g,maxPt:v}),k.debug(`FloodFill ${Date.now()-x}`);const w=t[0][3-(c+u)],b=new Uint8Array(r);if(n===0){const y=w*d[0]*d[1];for(let C=0;C<d[0]*d[1];C++)h[C]!==2&&(b[C+y]=s)}else{let y=1;const C=i[1]*i[2];let S=w*i[1];n===2&&(y=i[1],S=w);let E=0;for(let T=0;T<d[1];T++)for(let F=0;F<d[0];F++)h[E]!==2&&(b[F*y+T*C+S]=s),E++}if(!o&&a&&a.length>0){const y=b.length,C=Ff(a,y);for(let S=0;S<y;S++)C[S]!==0&&(b[S]=C[S])}return{drawBitmap:b,success:!0}}function px(e){const{ptA:t,ptB:n,dims:r}=e,i=r[1],s=r[2],o=r[3],a=Math.min(Math.max(Math.min(t[0],n[0]),0),i-1),l=Math.min(Math.max(Math.min(t[1],n[1]),0),s-1),c=Math.min(Math.max(Math.min(t[2],n[2]),0),o-1),u=Math.min(Math.max(Math.max(t[0],n[0]),0),i-1),d=Math.min(Math.max(Math.max(t[1],n[1]),0),s-1),h=Math.min(Math.max(Math.max(t[2],n[2]),0),o-1);return{x1:a,y1:l,z1:c,x2:u,y2:d,z2:h}}function JP(e){const{x1:t,y1:n,z1:r,x2:i,y2:s,z2:o}=e,a=(t+i)/2,l=(n+s)/2,c=(r+o)/2,u=Math.abs(i-t)/2,d=Math.abs(s-n)/2,h=Math.abs(o-r)/2;return{centerX:a,centerY:l,centerZ:c,radiusX:u,radiusY:d,radiusZ:h}}function $P(e,t,n,r){const{centerX:i,centerY:s,centerZ:o,radiusX:a,radiusY:l,radiusZ:c}=r,u=(e-i)/(a+.5),d=(t-s)/(l+.5),h=(n-o)/(c+.5);return u*u+d*d+h*h<=1}function e7(e){const{ptA:t,ptB:n,penValue:r,drawBitmap:i,dims:s,penSize:o,penAxCorSag:a}=e,l=px({ptA:t,ptB:n,dims:s}),{x1:c,y1:u,z1:d,x2:h,y2:f,z2:p}=l,g={x:0,y:0,z:0,penValue:r,drawBitmap:i,dims:s,penSize:o,penAxCorSag:a};for(let v=d;v<=p;v++)for(let m=u;m<=f;m++)for(let A=c;A<=h;A++)g.x=A,g.y=m,g.z=v,Ni(g)}function t7(e){const{ptA:t,ptB:n,penValue:r,drawBitmap:i,dims:s,penSize:o,penAxCorSag:a}=e,l=px({ptA:t,ptB:n,dims:s}),{x1:c,y1:u,z1:d,x2:h,y2:f,z2:p}=l,g=JP(l),v={x:0,y:0,z:0,penValue:r,drawBitmap:i,dims:s,penSize:o,penAxCorSag:a};for(let m=d;m<=p;m++)for(let A=u;A<=f;A++)for(let x=c;x<=h;x++)$P(x,A,m,g)&&(v.x=x,v.y=A,v.z=m,Ni(v))}function n7(e,t,n){return e[0]+e[1]*t+e[2]*n}function r7(e,t,n){const r=Math.floor(e/n),i=Math.floor((e-r*n)/t);return[Math.floor(e%t),i,r]}function gx(e){const t=e[0],n=t*e[1],r=n*e[2];return{xyz2vx:i=>n7(i,t,n),vx2xyz:i=>r7(i,t,n),nx:t,nxy:n,nxyz:r}}function i7(e,t){return e?t===0?2:t===1?1:t===2?0:-1:-1}var wu={face:[[0,0,-1],[0,0,1],[0,-1,0],[0,1,0],[-1,0,0],[1,0,0]],edge:[[-1,-1,0],[1,-1,0],[-1,1,0],[1,1,0],[0,-1,-1],[0,1,-1],[-1,0,-1],[1,0,-1],[0,-1,1],[0,1,1],[-1,0,1],[1,0,1]],corner:[[-1,-1,-1],[1,-1,-1],[-1,1,-1],[1,1,-1],[-1,-1,1],[1,-1,1],[-1,1,1],[1,1,1]]};function s7(e){const{img:t,seedVx:n,dims:r,neighbors:i=6}=e,s=gx(r),o=[];o.push(n),t[n]=2;const a=[...wu.face];for(i>=18&&a.push(...wu.edge),i>=26&&a.push(...wu.corner);o.length>0;){const l=o.shift(),c=s.vx2xyz(l);for(const u of a){const d=[c[0]+u[0],c[1]+u[1],c[2]+u[2]];if(d[0]<0||d[1]<0||d[2]<0||d[0]>=r[0]||d[1]>=r[1]||d[2]>=r[2])continue;const h=s.xyz2vx(d);t[h]===1&&(t[h]=2,o.push(h))}}}function o7(e){const{voxelIntensity:t,thresholdPercent:n,calMin:r,calMax:i,autoIntensity:s,currentIntensityMin:o,currentIntensityMax:a,currentBright:l}=e;let c=o,u=a,d=l;if(s){if(n!==0){const h=t===0?.01:t;u=h*(1+n),c=h*(1-n)}d=t>(r+i)*.5}return{intensityMin:c,intensityMax:u,isBright:d}}function a7(e){return e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY}function l7(e){const{sourceBitmap:t,targetBitmap:n}=e;if(!t||!n||t.length!==n.length)return!1;const r=n.length;for(let i=0;i<r;i++)n[i]=t[i];return!0}function c7(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function u7(e){const{clusterImg:t,backImg:n,nxyz:r,fallbackIntensity:i}=e;let s=0,o=0;for(let a=0;a<r;a++)t[a]===2&&(s+=n[a],o++);return o>0?s/o:i}function N1(e,t,n,r){return isFinite(n)&&isFinite(r)?[n,r]:e===Number.POSITIVE_INFINITY?[t,1/0]:e===Number.NEGATIVE_INFINITY?[-1/0,t]:[-1/0,1/0]}function d7(e,t){return!(e[0]<0||e[1]<0||e[2]<0||e[0]>=t[0]||e[1]>=t[1]||e[2]>=t[2])}function h7(e){return e!==0}function f7(e,t,n,r){return n&&r!==0?e!==0:e!==0||t===0}function m7(e){const{img:t,targetBitmap:n,originalBitmap:r,newColor:i,nxyz:s,isPreviewMode:o}=e;let a=0;for(let l=0;l<s;l++)t[l]===2?(n[l]=i,a++):o&&(n[l]=r[l]);return a}function p7(e){const{img:t,dims:n}=e,r=n[1]*n[2]*n[3],i=new Uint8Array(r);for(let s=0;s<r;s++)t[s]!==0&&(i[s]=1);return{img:i,datatypeCode:2,cal_min:0,cal_max:1}}function g7(e){const{img:t,cal_min:n,cal_max:r,scl_inter:i,scl_slope:s,mlevel:o=2}=e,a=t.length;if(a<1)return[];const l=256,c=l-1,u=new Array(l).fill(0),d=n,h=r;if(h<=d)return[];const f=(h-d)/l;function p(w){return w*f+d}const g=(l-1)/Math.abs(h-d);for(let w=0;w<a;w++){let b=t[w]*s+i;b=Math.min(Math.max(b,d),h),b=Math.round((b-d)*g),u[b]++}const v=Array(l).fill(0).map(()=>Array(l).fill(0)),m=Array(l).fill(0).map(()=>Array(l).fill(0));for(let w=1;w<l;++w)v[w][w]=u[w],m[w][w]=w*u[w];for(let w=1;w<l-1;++w)v[1][w+1]=v[1][w]+u[w+1],m[1][w+1]=m[1][w]+(w+1)*u[w+1];for(let w=2;w<l;w++)for(let b=w+1;b<l;b++)v[w][b]=v[1][b]-v[1][w-1],m[w][b]=m[1][b]-m[1][w-1];for(let w=1;w<l;++w)for(let b=w+1;b<l;b++)v[w][b]!==0&&(v[w][b]=m[w][b]*m[w][b]/v[w][b]);let A=0;const x=[1/0,1/0,1/0];if(o>3)for(let w=0;w<l-3;w++)for(let b=w+1;b<l-2;b++)for(let y=b+1;y<l-1;y++){const C=v[0][w]+v[w+1][b]+v[b+1][y]+v[y+1][c];C>A&&(x[0]=w,x[1]=b,x[2]=y,A=C)}else if(o===3)for(let w=0;w<l-2;w++)for(let b=w+1;b<l-1;b++){const y=v[0][w]+v[w+1][b]+v[b+1][c];y>A&&(x[0]=w,x[1]=b,A=y)}else for(let w=0;w<l-1;w++){const b=v[0][w]+v[w+1][c];b>A&&(x[0]=w,A=b)}return[p(x[0]),p(x[1]),p(x[2])]}function A7(e){const{img:t,drawBitmap:n,thresholds:r}=e,i=t.length,s=new Uint8Array(n);for(let o=0;o<i;o++){if(s[o]!==0)continue;const a=t[o];a>r[0]&&(s[o]=1),a>r[1]&&(s[o]=2),a>r[2]&&(s[o]=3)}return s}function v7(e){const{level:t}=e;return t===5||t===1?4:t===4||t===2?3:2}function x7(e){const{level:t,thresholds:n}=e;return t===1?n[2]:t===2?n[1]:n[0]}function w7(e){const{img:t,scl_inter:n,scl_slope:r,global_min:i,threshold:s}=e,o=t.length;for(let a=0;a<o;a++)t[a]*r+n<s&&(t[a]=i)}function at(e,t,n,r){return n*r[0]*r[1]+t*r[0]+e}function Rf(e,t,n){let r=0;const i=new Uint32Array(n+5).fill(0);let o=2147483647;for(let a=0;a<n;a++){let l=t[a];for(r=0;e[l-1]!==l;)if(l=e[l-1],r++,r>100){k.info(`
Ooh no!!`);break}i[a]=l,o=Math.min(o,l)}for(let a=0;a<n;a++)e[i[a]-1]=o}function Ax(e,t,n,r,i,s,o,a){const l=new Uint32Array(27);let c=0;if(!i)return 0;const u=e[at(n,r,i,s)];if(o>=6){const d=at(n,r,i-1,s);u===e[d]&&(l[c++]=t[d])}if(o>=18){if(n){const d=at(n-1,r,i-1,s);u===e[d]&&(l[c++]=t[d])}if(r){const d=at(n,r-1,i-1,s);u===e[d]&&(l[c++]=t[d])}if(n<s[0]-1){const d=at(n+1,r,i-1,s);u===e[d]&&(l[c++]=t[d])}if(r<s[1]-1){const d=at(n,r+1,i-1,s);u===e[d]&&(l[c++]=t[d])}}if(o===26){if(n&&r){const d=at(n-1,r-1,i-1,s);u===e[d]&&(l[c++]=t[d])}if(n<s[0]-1&&r){const d=at(n+1,r-1,i-1,s);u===e[d]&&(l[c++]=t[d])}if(n&&r<s[1]-1){const d=at(n-1,r+1,i-1,s);u===e[d]&&(l[c++]=t[d])}if(n<s[0]-1&&r<s[1]-1){const d=at(n+1,r+1,i-1,s);u===e[d]&&(l[c++]=t[d])}}return c?(Rf(a,l,c),l[0]):0}function vx(e,t,n){let r=1;const i=8192;let s=i,o=new Uint32Array(s).fill(0);const a=new Uint32Array(t[0]*t[1]*t[2]).fill(0),l=new Uint32Array(27);for(let c=0;c<t[2];c++)for(let u=0;u<t[1];u++)for(let d=0;d<t[0];d++){let h=0;const f=e[at(d,u,c,t)];if(f!==0){if(l[0]=Ax(e,a,d,u,c,t,n,o),l[0]&&(h+=1),n>=6){if(d){const p=at(d-1,u,c,t);f===e[p]&&(l[h++]=a[p])}if(u){const p=at(d,u-1,c,t);f===e[p]&&(l[h++]=a[p])}}if(n>=18){if(u&&d){const p=at(d-1,u-1,c,t);f===e[p]&&(l[h++]=a[p])}if(u&&d<t[0]-1){const p=at(d+1,u-1,c,t);f===e[p]&&(l[h++]=a[p])}}if(h)a[at(d,u,c,t)]=l[0],Rf(o,l,h);else{if(a[at(d,u,c,t)]=r,r>=s){s+=i;const p=new Uint32Array(s);p.set(o),o=p}o[r-1]=r,r++}}}for(let c=0;c<r-1;c++){let u=c;for(;o[u]!==u+1;)u=o[u]-1;o[c]=u+1}return{labelCount:r-1,translationTable:o,initialLabels:a}}function xx(e,t,n,r){const i=t[0]*t[1]*t[2];let s=0;const o=new Uint32Array(i).fill(0);for(let c=0;c<r;c++)s=Math.max(s,n[c]);const a=new Uint32Array(s).fill(0);let l=0;for(let c=0;c<i;c++)e[c]&&(a[n[e[c]-1]-1]||(l+=1,a[n[e[c]-1]-1]=l),o[c]=a[n[e[c]-1]-1]);return{clusterCount:l,labels:o}}function wx(e,t,n){const r=e.length,i=new Uint32Array(t+1).fill(0),s=new Uint32Array(t+1).fill(0);for(let l=0;l<r;l++){const c=e[l],u=n[l];i[u]=c,s[u]++}let o=0;for(let l=0;l<t+1;l++){const c=i[l];o=Math.max(o,c);for(let u=0;u<t+1;u++)u!==l&&c===i[u]&&(s[l]<s[u]||s[l]===s[u]&&l<u)&&(i[l]=0)}const a=new Uint32Array(r).fill(0);for(let l=0;l<r;l++)a[l]=i[n[l]];return{maxValue:o,voxels:a}}function y7(e){const{img:t,dim:n,conn:r=26,binarize:i=!1,onlyLargestClusterPerClass:s=!1}=e,o=Date.now(),a=n[0]*n[1]*n[2],l=new Uint32Array(a).fill(0);if(![6,18,26].includes(r))return k.info("bwlabel: conn must be 6, 18 or 26."),{clusterCount:0,labels:l};if(n[0]<2||n[1]<2||n[2]<1)return k.info("bwlabel: img must be 2 or 3-dimensional"),{clusterCount:0,labels:l};if(i)for(let p=0;p<a;p++)t[p]!==0&&(l[p]=1);else l.set(t);let{labelCount:c,translationTable:u,initialLabels:d}=vx(l,n,r);u===void 0&&(u=new Uint32Array);const{clusterCount:h,labels:f}=xx(d,n,u,c);if(k.info(r+" neighbor clustering into "+h+" regions in "+(Date.now()-o)+"ms"),s){const{maxValue:p,voxels:g}=wx(l,h,f);return{clusterCount:p,labels:g}}return{clusterCount:h,labels:f}}function b7(e,t=0,n=255,r,i){const s=e.length,o=new Uint8Array(s);for(let a=0;a<s;a++){let l=e[a];l=t+i*(l-r),l=Math.max(l,t),l=Math.min(l,n),o[a]=l}return o}function C7(e,t=0,n=1,r,i){const s=e.length,o=new Float32Array(s);for(let a=0;a<s;a++){let l=e[a];l=t+i*(l-r),l=Math.max(l,t),l=Math.min(l,n),o[a]=l}return o}function k1(e){const{img:t,dims:n,global_min:r,global_max:i,datatypeCode:s,scl_slope:o,scl_inter:a,cal_min:l,cal_max:c,dst_min:u=0,dst_max:d=255,f_low:h=0,f_high:f=.999}=e;let p=r,g=i;if(s===2)return[p,1];if((!isFinite(h)||!isFinite(f))&&isFinite(l)&&isFinite(c)&&c>l){p=l,g=c;const F=(d-u)/(g-p);return k.info(" Robust Rescale:  min: "+p+"  max: "+g+" scale: "+F),[p,F]}const v=n[1]*n[2]*n[3];let m=t;if(o!==1||a!==0){const F=new Float32Array(v);for(let M=0;M<v;M++)F[M]=t[M]*o+a;m=F}if(p<0&&k.warn("WARNING: Input image has value(s) below 0.0 !"),k.info(" Input:    min: "+p+"  max: "+g),h===0&&f===1)return[p,1];let A=0;for(let F=0;F<v;F++)Math.abs(m[F])>=1e-15&&A++;const x=1e3,w=(g-p)/x,b=new Array(x).fill(0);for(let F=0;F<v;F++){const M=m[F];let B=Math.floor((M-p)/w);B=Math.min(B,x-1),b[B]++}const y=new Array(x).fill(0);y[0]=b[0];for(let F=1;F<x;F++)y[F]=y[F-1]+b[F];let C=Math.floor(h*v),S=0;for(;S<x&&!(y[S]>=C);)S++;const E=p;for(p=S*w+E,C=v-Math.floor((1-f)*A),S=0;S<x-1&&!(y[S+1]>=C);)S++;g=S*w+E;let T=1;return p!==g&&(T=(d-u)/(g-p)),k.info(" Rescale:  min: "+p+"  max: "+g+" scale: "+T),[p,T]}function S7(e){const{inDims:t,inAffine:n,outDim:r=256,outMM:i=1,toRAS:s=!1}=e,o=n.flat(),a=en(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]),l=Le(t[1]/2,t[2]/2,t[3]/2,1),c=Un(),u=ge();Ot(u,a),At(c,l,u);const d=q(c[0],c[1],c[2]),h=q(i,i,i);let f=en(-1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);s&&(f=en(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),Ot(f,f);const p=Le(r,r,r,1),g=ge();ev(g,f,h);const v=Le(p[0],p[1],p[2],1);At(v,v,g),hS(v,v,.5);const m=Te();Pe(m,d,q(v[0],v[1],v[2]));const A=ge();Ot(A,g),A[3]=m[0],A[7]=m[1],A[11]=m[2];const x=ge();zt(x,A);const w=ge();tv(w,a,x);const b=ge();return zt(b,w),{outAffine:A,vox2vox:w,invVox2vox:b}}function E7(e){const{inImg:t,inDims:n,outDim:r,invVox2vox:i,isLinear:s}=e,o=r*r*r,a=new Float32Array(o),l=n[1],c=n[2],u=n[3],d=l*c;function h(m,A,x){return m+A*l+x*d}const f=i[0],p=i[4],g=i[8];let v=-1;if(s)for(let m=0;m<r;m++)for(let A=0;A<r;A++){const x=A*i[1]+m*i[2]+i[3],w=A*i[5]+m*i[6]+i[7],b=A*i[9]+m*i[10]+i[11];for(let y=0;y<r;y++){const C=y*f+x,S=y*p+w,E=y*g+b,T=Math.floor(C),F=Math.floor(S),M=Math.floor(E);if(v++,T<0||F<0||M<0)continue;const B=Math.ceil(C),P=Math.ceil(S),z=Math.ceil(E);if(B>=l||P>=c||z>=u)continue;const U=C-T,G=S-F,L=E-M,Y=1-U,j=1-G,$=1-L,X=h(T,F,M);let H=0;H+=t[X]*Y*j*$,H+=t[X+d]*Y*j*L,H+=t[X+l]*Y*G*$,H+=t[X+l+d]*Y*G*L,H+=t[X+1]*U*j*$,H+=t[X+1+d]*U*j*L,H+=t[X+1+l]*U*G*$,H+=t[X+1+l+d]*U*G*L,a[v]=H}}else for(let m=0;m<r;m++)for(let A=0;A<r;A++){const x=A*i[1]+m*i[2]+i[3],w=A*i[5]+m*i[6]+i[7],b=A*i[9]+m*i[10]+i[11];for(let y=0;y<r;y++){const C=Math.round(y*f+x),S=Math.round(y*p+w),E=Math.round(y*g+b);v++,!(C<0||S<0||E<0)&&(C>=l||S>=c||E>=u||(a[v]=t[h(C,S,E)]))}}return a}function M7(e,t,n,r,i){const s=new Uint8Array(e);s.fill(0);let o=-1;if(t[0]===n[0])o=0;else if(t[1]===n[1])o=1;else if(t[2]===n[2])o=2;else return console.error("Error: No constant dimension found."),null;const l=[0,1,2].filter(y=>y!==o),c=[];c[o]=t[o],c[l[0]]=(t[l[0]]+n[l[0]])/2,c[l[1]]=(t[l[1]]+n[l[1]])/2;const u=Math.abs(n[l[0]]-t[l[0]])/2,d=Math.abs(n[l[1]]-t[l[1]])/2,h=r.dims[1],f=r.dims[2],p=Math.max(0,Math.floor(c[l[0]]-u)),g=Math.min(r.dims[l[0]+1]-1,Math.ceil(c[l[0]]+u)),v=Math.max(0,Math.floor(c[l[1]]-d)),m=Math.min(r.dims[l[1]+1]-1,Math.ceil(c[l[1]]+d)),A=c[o];if(A<0||A>=r.dims[o+1])return console.error("Error: Constant dimension value is out of bounds."),null;for(let y=p;y<=g;y++)for(let C=v;C<=m;C++){const S=[];S[o]=A,S[l[0]]=y,S[l[1]]=C;const E=(S[l[0]]-c[l[0]])/u,T=(S[l[1]]-c[l[1]])/d;if(E*E+T*T<=1){const M=S[0],B=S[1],z=S[2]*h*f+B*h+M;s[z]=1}}const x=u*i[l[0]+1],w=d*i[l[1]+1],b=Math.PI*x*w;return{mask:s,area:b}}function D7(e){const{nv:t,maskImages:n,drawBitmap:r,drawingIsMask:i,roiIsMask:s,startVox:o,endVox:a,hdr:l,pixDimsRAS:c}=e,u=new Uint8Array(t);u.fill(1);const d=null;if(n&&n.length>0){for(const h of n)if(h.length===t)for(let f=0;f<t;f++)(h[f]===0||isNaN(h[f]))&&(u[f]=0)}else if(i&&r)for(let h=0;h<t;h++)(r[h]===0||isNaN(r[h]))&&(u[h]=0);else if(s&&o&&a&&l&&c){const h=M7(t,o,a,l,c);return h?{mask:h.mask,area:h.area}:{mask:u,area:null}}return{mask:u,area:d}}function T7(e,t){const n=e.length;let r=0,i=0,s=0,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=0,c=0,u=0;for(let g=0;g<n;g++){if(t[g]<1)continue;const v=e[g];r++;let m=i+(v-i)/r;s=s+(v-i)*(v-m),i=m,v!==0&&(l++,m=c+(v-c)/l,u=u+(v-c)*(v-m),c=m,a=Math.min(v,a),o=Math.max(v,o))}const d=Math.sqrt(s/(r-1)),h=Math.sqrt(u/(l-1)),f=a,p=o;return r!==l&&(a=Math.min(0,a),o=Math.max(0,o)),{mean:i,stdev:d,nvox:r,min:a,max:o,meanNot0:c,stdevNot0:h,nvoxNot0:l,minNot0:f,maxNot0:p}}function I7(e,t,n){const r=e.length,i=new Float32Array(r);for(let s=0;s<r;s++)i[s]=e[s]*t+n;return i}var{version:B1}=GE,{MESH_EXTENSIONS:ha}=$v,{LEFT_MOUSE_BUTTON:fa,CENTER_MOUSE_BUTTON:V1,RIGHT_MOUSE_BUTTON:U1}=lx,L1={filename:"",isSaveDrawing:!1,volumeByIndex:0},di,F7=class{constructor(e=dn){R(this,"loaders",{}),R(this,"dicomLoader",null),R(this,"canvas",null),R(this,"_gl",null),R(this,"isBusy",!1),R(this,"needsRefresh",!1),R(this,"colormapTexture",null),R(this,"colormapLists",[]),R(this,"volumeTexture",null),R(this,"gradientTexture",null),R(this,"gradientTextureAmount",0),R(this,"useCustomGradientTexture",!1),R(this,"renderGradientValues",!1),R(this,"drawTexture",null),R(this,"paqdTexture",null),R(this,"drawUndoBitmaps",[]),R(this,"drawLut",Ee.makeDrawLut("$itksnap")),R(this,"drawOpacity",.8),R(this,"drawRimOpacity",-1),R(this,"clickToSegmentIsGrowing",!1),R(this,"clickToSegmentGrowingBitmap",null),R(this,"clickToSegmentXY",[0,0]),R(this,"renderDrawAmbientOcclusion",.4),R(this,"colorbarHeight",0),R(this,"drawPenLocation",[NaN,NaN,NaN]),R(this,"drawPenAxCorSag",-1),R(this,"drawFillOverwrites",!0),R(this,"drawPenFillPts",[]),R(this,"drawShapeStartLocation",[NaN,NaN,NaN]),R(this,"drawShapePreviewBitmap",null),R(this,"overlayTexture",null),R(this,"overlayTextureID",null),R(this,"sliceMMShader"),R(this,"slice2DShader"),R(this,"sliceV1Shader"),R(this,"orientCubeShader"),R(this,"orientCubeShaderVAO",null),R(this,"rectShader"),R(this,"rectOutlineShader"),R(this,"renderShader"),R(this,"lineShader"),R(this,"line3DShader"),R(this,"passThroughShader"),R(this,"renderGradientShader"),R(this,"renderGradientValuesShader"),R(this,"renderSliceShader"),R(this,"renderVolumeShader"),R(this,"pickingMeshShader"),R(this,"pickingImageShader"),R(this,"colorbarShader"),R(this,"customSliceShader",null),R(this,"fontShader",null),R(this,"fiberShader"),R(this,"fontTexture",null),R(this,"circleShader"),R(this,"matCapTexture",null),R(this,"bmpShader",null),R(this,"bmpTexture",null),R(this,"thumbnailVisible",!1),R(this,"bmpTextureWH",1),R(this,"growCutShader"),R(this,"orientShaderAtlasU",null),R(this,"orientShaderAtlasI",null),R(this,"orientShaderU",null),R(this,"orientShaderI",null),R(this,"orientShaderF",null),R(this,"orientShaderRGBU",null),R(this,"orientShaderPAQD",null),R(this,"surfaceShader",null),R(this,"blurShader",null),R(this,"sobelBlurShader",null),R(this,"sobelFirstOrderShader",null),R(this,"sobelSecondOrderShader",null),R(this,"genericVAO",null),R(this,"unusedVAO",null),R(this,"crosshairs3D",null),R(this,"DEFAULT_FONT_GLYPH_SHEET",u1),R(this,"DEFAULT_FONT_METRICS",d1),R(this,"fontMetrics"),R(this,"fontMets",null),R(this,"fontPx",12),R(this,"legendFontScaling",1),R(this,"backgroundMasksOverlays",0),R(this,"overlayOutlineWidth",0),R(this,"overlayAlphaShader",1),R(this,"position"),R(this,"extentsMin"),R(this,"extentsMax"),R(this,"resizeObserver",null),R(this,"resizeEventListener",null),R(this,"canvasObserver",null),R(this,"syncOpts",{"3d":!1,"2d":!1,zoomPan:!1,cal_min:!1,cal_max:!1,clipPlane:!1,gamma:!1,sliceType:!1,crosshair:!1}),R(this,"readyForSync",!1),R(this,"uiData",{mousedown:!1,touchdown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1,mouseDepthPicker:!1,clickedTile:-1,pan2DxyzmmAtMouseDown:[0,0,0,1],prevX:0,prevY:0,currX:0,currY:0,currentTouchTime:0,lastTouchTime:0,touchTimer:null,doubleTouch:!1,isDragging:!1,dragStart:[0,0],dragEnd:[0,0],dragClipPlaneStartDepthAziElev:[0,0,0],lastTwoTouchDistance:0,multiTouchGesture:!1,windowX:0,windowY:0,activeDragMode:null,activeDragButton:null,angleFirstLine:[0,0,0,0],angleState:"none",activeClipPlaneIndex:0}),li(this,di,null),R(this,"back",null),R(this,"overlays",[]),R(this,"deferredVolumes",[]),R(this,"deferredMeshes",[]),R(this,"furthestVertexFromOrigin",100),R(this,"volScale",[]),R(this,"vox",[]),R(this,"mousePos",[0,0]),R(this,"screenSlices",[]),R(this,"cuboidVertexBuffer"),R(this,"otherNV",null),R(this,"volumeObject3D",null),R(this,"pivot3D",[0,0,0]),R(this,"furthestFromPivot",10),R(this,"currentClipPlaneIndex",0),R(this,"lastCalled",new Date().getTime()),R(this,"selectedObjectId",-1),R(this,"CLIP_PLANE_ID",1),R(this,"VOLUME_ID",254),R(this,"DISTANCE_FROM_CAMERA",-.54),R(this,"graph",{LTWH:[0,0,640,480],opacity:0,vols:[0],autoSizeMultiplanar:!1,normalizeValues:!1,isRangeCalMinMax:!1}),R(this,"customLayout",[]),R(this,"meshShaders",UT()),R(this,"dragModes",{contrast:1,measurement:2,angle:7,none:0,pan:3,slicer3D:4,callbackOnly:5}),R(this,"sliceTypeAxial",0),R(this,"sliceTypeCoronal",1),R(this,"sliceTypeSagittal",2),R(this,"sliceTypeMultiplanar",3),R(this,"sliceTypeRender",4),R(this,"onDragRelease",()=>{}),R(this,"onMouseUp",()=>{}),R(this,"onLocationChange",()=>{}),R(this,"onIntensityChange",()=>{}),R(this,"onClickToSegment",()=>{}),R(this,"onImageLoaded",()=>{}),R(this,"onMeshLoaded",()=>{}),R(this,"onFrameChange",()=>{}),R(this,"onError",()=>{}),R(this,"onColormapChange",()=>{}),R(this,"onInfo",()=>{}),R(this,"onWarn",()=>{}),R(this,"onDebug",()=>{}),R(this,"onVolumeAddedFromUrl",()=>{}),R(this,"onVolumeWithUrlRemoved",()=>{}),R(this,"onVolumeUpdated",()=>{}),R(this,"onMeshAddedFromUrl",()=>{}),R(this,"onMeshAdded",()=>{}),R(this,"onMeshWithUrlRemoved",()=>{}),R(this,"onZoom3DChange",()=>{}),R(this,"onAzimuthElevationChange",()=>{}),R(this,"onClipPlaneChange",()=>{}),R(this,"onCustomMeshShaderAdded",()=>{}),R(this,"onMeshShaderChanged",()=>{}),R(this,"onMeshPropertyChanged",()=>{}),R(this,"onDicomLoaderFinishedWithImages",()=>{}),R(this,"onDocumentLoaded",()=>{}),R(this,"onOptsChange",()=>{}),R(this,"document",new Wa),R(this,"mediaUrlMap",new Map),R(this,"initialized",!1),R(this,"currentDrawUndoBitmap");for(const t in e)typeof e[t]=="function"?this[t]=e[t]:this.opts[t]=dn[t]===void 0?dn[t]:e[t];this.opts.forceDevicePixelRatio===0?this.uiData.dpr=window.devicePixelRatio||1:this.opts.forceDevicePixelRatio<0?this.uiData.dpr=1:this.uiData.dpr=this.opts.forceDevicePixelRatio,this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,this.opts.drawingEnabled&&this.createEmptyDrawing(),this.opts.thumbnail.length>0&&(this.thumbnailVisible=!0),k.setLogLevel(this.opts.logLevel),this.document.setOptsChangeCallback((t,n,r)=>{this.onOptsChange(t,n,r)})}get scene(){return this.document.scene}get opts(){return this.document.opts}get sliceMosaicString(){return this.document.opts.sliceMosaicString||""}set sliceMosaicString(e){this.document.opts.sliceMosaicString=e}get isAlphaClipDark(){return this.document.opts.isAlphaClipDark}set isAlphaClipDark(e){this.document.opts.isAlphaClipDark=e}cleanup(){jF(this.resizeObserver,this.canvasObserver,this.resizeEventListener),this.resizeEventListener=null,this.resizeObserver=null,this.canvasObserver=null,GF(oe(this,di)),Zn(this,di,null),this.document.removeOptsChangeCallback()}get volumes(){return this.document.volumes}set volumes(e){this.document.volumes=e}get meshes(){return this.document.meshes}set meshes(e){this.document.meshes=e}get drawBitmap(){return this.document.drawBitmap}set drawBitmap(e){this.document.drawBitmap=e}get volScaleMultiplier(){return this.scene.volScaleMultiplier}set volScaleMultiplier(e){this.setScale(e)}async saveScene(e="niivue.png"){function t(r,i){const s=document.createElement("a");document.body.appendChild(s),s.style.display="none";const o=window.URL.createObjectURL(r);s.href=o,s.download=i,s.click(),s.remove()}const n=this.canvas;if(!n)throw new Error("canvas not defined");this.drawScene(),n.toBlob(r=>{r&&(e===""&&(e=`niivue-screenshot-${new Date().toString()}.png`,e=e.replace(/\s/g,"_")),t(r,e))})}async attachTo(e,t=null){return await this.attachToCanvas(document.getElementById(e),t),k.debug("attached to element with id: ",e),this}async attachToCanvas(e,t=null){this.canvas=e,t===null&&(t=navigator.hardwareConcurrency>6,k.debug("AntiAlias ",t," Threads ",navigator.hardwareConcurrency));const{gl:n,max2D:r,max3D:i}=vD(this.canvas,t);return this.gl=n,this.uiData.max2D=r,this.uiData.max3D=i,k.info("NIIVUE VERSION ",B1),k.debug(`Max texture size 2D: ${this.uiData.max2D} 3D: ${this.uiData.max3D}`),this.canvas.parentElement.style.backgroundColor="black",this.opts.isResizeCanvas&&(S1(this.canvas),this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.resizeEventListener=UF(()=>this.resizeListener()),window.addEventListener("resize",this.resizeEventListener),this.resizeObserver=LF(()=>this.resizeListener()),this.resizeObserver.observe(this.canvas.parentElement),this.canvasObserver=OF(s=>{for(const o of s)if(o.type==="childList"&&o.removedNodes.length>0&&Array.from(o.removedNodes).includes(this.canvas)){this.cleanup();break}}),this.canvasObserver.observe(this.canvas.parentElement,{childList:!0})),this.opts.interactive&&this.registerInteractions(),await this.init(),this.drawScene(),this}syncWith(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts={...t}}broadcastTo(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts=t}doSync3d(e){e.scene.renderAzimuth=this.scene.renderAzimuth,e.scene.renderElevation=this.scene.renderElevation,e.scene.volScaleMultiplier=this.scene.volScaleMultiplier}doSync2d(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t),e.scene.pan2Dxyzmm=Nn(this.scene.pan2Dxyzmm)}doSyncGamma(e){const t=this.scene.gamma,n=e.scene.gamma;t!==n&&e.setGamma(t)}doSyncZoomPan(e){e.scene.pan2Dxyzmm=Nn(this.scene.pan2Dxyzmm)}doSyncCrosshair(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t)}doSyncCalMin(e){this.volumes[0].cal_min!==e.volumes[0].cal_min&&(e.volumes[0].cal_min=this.volumes[0].cal_min,e.updateGLVolume())}doSyncCalMax(e){this.volumes[0].cal_max!==e.volumes[0].cal_max&&(e.volumes[0].cal_max=this.volumes[0].cal_max,e.updateGLVolume())}doSyncSliceType(e){e.setSliceType(this.opts.sliceType)}doSyncClipPlane(e){e.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}sync(){if(!(!this.gl||!this.otherNV||typeof this.otherNV>"u")&&this.gl.canvas.matches(":focus"))for(let e=0;e<this.otherNV.length;e++)this.otherNV[e]!==this&&(this.syncOpts.gamma&&this.doSyncGamma(this.otherNV[e]),this.syncOpts.crosshair&&this.doSyncCrosshair(this.otherNV[e]),this.syncOpts.zoomPan&&this.doSyncZoomPan(this.otherNV[e]),this.syncOpts.sliceType&&this.doSyncSliceType(this.otherNV[e]),this.syncOpts.cal_min&&this.doSyncCalMin(this.otherNV[e]),this.syncOpts.cal_max&&this.doSyncCalMax(this.otherNV[e]),this.syncOpts.clipPlane&&this.doSyncClipPlane(this.otherNV[e]),this.syncOpts["2d"]&&this.doSync2d(this.otherNV[e]),this.syncOpts["3d"]&&this.doSync3d(this.otherNV[e]),this.otherNV[e].canvas!==this.canvas&&this.otherNV[e].drawScene(),this.otherNV[e].createOnLocationChange())}arrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((n,r)=>n===t[r])}textSizePoints(){this.opts.textHeight>=0&&(k.warn("textHeight is deprecated (use fontMinPx and fontSizeScaling)"),this.opts.fontMinPx=this.opts.textHeight*217,this.opts.fontSizeScaling=.4,this.opts.textHeight=-1);const e=this.uiData.dpr||1,t=this.opts.fontMinPx,n=this.gl.canvas.width/e,r=this.gl.canvas.height/e,i=n*r,s=800*600,o=Math.max(i/s,1),a=Math.pow(o,this.opts.fontSizeScaling),l=t*a*e;this.fontPx=l,k.debug(`${n.toFixed(0)}x${r.toFixed(0)} pts (dpi=${e}) => areaScale=${o.toFixed(2)}, scale=${a.toFixed(2)}, minPx=${this.opts.fontMinPx} fontScale=${this.opts.fontSizeScaling} fontPx=${l.toFixed(2)}`)}resizeListener(){if(!zF(this.canvas,this._gl))return;if(!this.opts.isResizeCanvas){this.opts.forceDevicePixelRatio>=0&&k.warn("this.opts.forceDevicePixelRatio requires isResizeCanvas"),this.drawScene();return}S1(this.canvas);const e=VF({canvas:this.canvas,gl:this.gl,isResizeCanvas:this.opts.isResizeCanvas,forceDevicePixelRatio:this.opts.forceDevicePixelRatio});this.uiData.dpr=e.dpr,k.debug("devicePixelRatio: "+this.uiData.dpr),this.canvas.width=e.width,this.canvas.height=e.height,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.textSizePoints(),this.drawScene()}getRelativeMousePosition(e,t){return ax(e,t)}getNoPaddingNoBorderCanvasRelativeMousePosition(e,t){return kF(e,t)}mouseContextMenuListener(e){e.preventDefault()}mouseDownListener(e){if(this.uiData.mousedown=!0,this.eventInBounds(e))this.opts.bounds&&(this.opts.showBoundsBorder=!0);else{this.opts.showBoundsBorder=!1,this.drawScene();return}e.preventDefault(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawShapeStartLocation=[NaN,NaN,NaN];const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(this.opts.dragMode===7&&this.uiData.angleState==="drawing_second_line"||(this.setDragStart(t.x,t.y),this.setDragEnd(t.x,t.y)),k.debug("mouse down"),k.debug(e),!t)return;const[n,r]=[t.x*this.uiData.dpr,t.y*this.uiData.dpr];this.opts.clickToSegment&&(this.clickToSegmentXY=[n,r]);const i=this.getLabelAtPoint([n,r]);if(i){if(i.onClick){i.onClick(i,e);return}for(const s of this.meshes){if(s.type!=="connectome"){if(Array.isArray(i.points)&&i.points.length===3&&i.points.every(Number.isFinite)){const[o,a,l]=i.points;this.scene.crosshairPos=this.mm2frac([o,a,l]),this.updateGLVolume()}continue}for(const o of s.nodes)o.label===i&&(this.scene.crosshairPos=this.mm2frac([o.x,o.y,o.z]),this.updateGLVolume())}}this.uiData.clickedTile=this.tileIndex(n,r),e.button===fa&&e.shiftKey?(this.uiData.mouseButtonCenterDown=!0,this.setActiveDragMode(fa,!0,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)):e.button===fa?(this.uiData.mouseButtonLeftDown=!0,this.setActiveDragMode(fa,!1,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)):e.button===U1?(this.uiData.mouseButtonRightDown=!0,this.setActiveDragMode(U1,e.shiftKey,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)):e.button===V1&&(this.uiData.mouseButtonCenterDown=!0,this.setActiveDragMode(V1,e.shiftKey,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)),this.drawScene()}getMouseButtonDragMode(e,t,n){return cx({button:e,shiftKey:t,ctrlKey:n,mouseConfig:this.opts.mouseEventConfig,dragMode:this.opts.dragMode,dragModePrimary:this.opts.dragModePrimary})}getTouchDragMode(e){return qF({isDoubleTouch:e,touchConfig:this.opts.touchEventConfig,dragMode:this.opts.dragMode,dragModePrimary:this.opts.dragModePrimary})}setActiveDragMode(e,t,n){const r=this.getMouseButtonDragMode(e,t,n),i=FR(r,e);this.uiData.activeDragMode=i.activeDragMode,this.uiData.activeDragButton=i.activeDragButton}getCurrentDragMode(){return TR({activeDragMode:this.uiData.activeDragMode,fallbackDragMode:this.opts.dragMode})}clearActiveDragMode(){const e=IR();this.uiData.activeDragMode=e.activeDragMode,this.uiData.activeDragButton=e.activeDragButton}handleMouseAction(e,t,n){if(e===8)this.mouseDown(n.x,n.y),this.mouseClick(n.x,n.y);else if(e===9)this.uiData.windowX=t.x,this.uiData.windowY=t.y;else{if(this.mousePos=[n.x*this.uiData.dpr,n.y*this.uiData.dpr],e===0)return;if(e===7)if(this.uiData.angleState==="none")this.uiData.angleState="drawing_first_line";else if(this.uiData.angleState==="drawing_second_line"){const r=[n.x*this.uiData.dpr,n.y*this.uiData.dpr],i=this.tileIndex(r[0],r[1]);let s={sliceIndex:-1,sliceType:0,slicePosition:0};if(i>=0&&i<this.screenSlices.length){const d=this.screenSlices[i].axCorSag;let h=0;d===0?h=this.scene.crosshairPos[2]:d===1?h=this.scene.crosshairPos[1]:d===2&&(h=this.scene.crosshairPos[0]),s={sliceIndex:i,sliceType:d,slicePosition:h}}const o=[this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3],r[0],r[1]],a=this.canvasPos2frac([this.uiData.angleFirstLine[0],this.uiData.angleFirstLine[1]]),l=this.canvasPos2frac([this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3]]),c=this.canvasPos2frac([o[0],o[1]]),u=this.canvasPos2frac([o[2],o[3]]);if(a[0]>=0&&l[0]>=0&&c[0]>=0&&u[0]>=0){const d=this.frac2mm(a),h=this.frac2mm(l),f=this.frac2mm(c),p=this.frac2mm(u),g={firstLineMM:{start:q(d[0],d[1],d[2]),end:q(h[0],h[1],h[2])},secondLineMM:{start:q(f[0],f[1],f[2]),end:q(p[0],p[1],p[2])},sliceIndex:s.sliceIndex,sliceType:s.sliceType,slicePosition:s.slicePosition,angle:this.calculateAngleBetweenLines(this.uiData.angleFirstLine,o)};this.document.completedAngles.push(g)}this.resetAngleMeasurement(),this.uiData.angleState="complete",this.drawScene();return}else this.uiData.angleState==="complete"&&(this.resetAngleMeasurement(),this.uiData.angleState="drawing_first_line");this.setDragStart(n.x,n.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=Nn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]}}calculateMinMaxVoxIdx(e){return RR(e)}calculateNewRange({volIdx:e=0}={}){if(this.opts.sliceType===4&&this.sliceMosaicString.length<1||!zd(this.uiData.dragStart,this.uiData.dragEnd))return;let t=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]);if(t[0]<0)return;const n=this.frac2vox(t,e);if(t=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),t[0]<0)return;const r=this.frac2vox(t,e),i=this.calculateMinMaxVoxIdx([n[0],r[0]]),s=this.calculateMinMaxVoxIdx([n[1],r[1]]),o=this.calculateMinMaxVoxIdx([n[2],r[2]]),a=LR(n,r,i,s,o),l=this.volumes[e].hdr,c=this.volumes[e].img;if(!l||!c)return;const u=UR({xrange:a.xrange,yrange:a.yrange,zrange:a.zrange,dims:l.dims,img:c});if(!u.hasVariation)return;const d=f1(l,u.lo),h=f1(l,u.hi);this.volumes[e].cal_min=d,this.volumes[e].cal_max=h,this.onIntensityChange(this.volumes[e])}generateMouseUpCallback(e,t){const n=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]),r=this.tileIndex(this.uiData.dragEnd[0],this.uiData.dragEnd[1]);let i=-1;n===r&&(i=r);let s=-1;i>=0&&(s=this.screenSlices[i].axCorSag);const o=this.frac2mm(e),a=this.frac2mm(t),l=Te();jm(l,q(o[0],o[1],o[2]),q(a[0],a[1],a[2]));const c=so(l),u=this.frac2vox(e),d=this.frac2vox(t);this.onDragRelease({fracStart:e,fracEnd:t,voxStart:u,voxEnd:d,mmStart:o,mmEnd:a,mmLength:c,tileIdx:i,axCorSag:s})}mouseUpListener(){this.uiData.mousedown=!1;const e={mouseButtonRightDown:this.uiData.mouseButtonRightDown,mouseButtonCenterDown:this.uiData.mouseButtonCenterDown,isDragging:this.uiData.isDragging,mousePos:this.mousePos,fracPos:this.canvasPos2frac(this.mousePos)};this.uiData.mouseButtonRightDown=!1;const t=this.uiData.mouseButtonCenterDown;this.uiData.mouseButtonCenterDown=!1,this.uiData.mouseButtonLeftDown=!1;const n=this.getCurrentDragMode();if(this.drawPenFillPts.length>0?this.drawPenFilled():this.opts.drawingEnabled&&!isNaN(this.drawPenLocation[0])?this.drawAddUndoBitmap():this.opts.drawingEnabled&&!isNaN(this.drawShapeStartLocation[0])&&(this.opts.penType===1||this.opts.penType===2)&&(this.opts.penValue===0?this.drawAddUndoBitmap():this.drawAddUndoBitmap(this.drawFillOverwrites),this.drawShapePreviewBitmap=null),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawShapeStartLocation=[NaN,NaN,NaN],this.drawShapePreviewBitmap&&(this.drawBitmap=this.drawShapePreviewBitmap,this.drawShapePreviewBitmap=null,this.refreshDrawing(!0,!1)),fx(this.onMouseUp)&&this.onMouseUp(e),this.uiData.isDragging){if(this.uiData.isDragging=!1,n===7){if(this.uiData.angleState==="drawing_first_line"){this.uiData.angleFirstLine=[this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],this.uiData.angleState="drawing_second_line",this.uiData.isDragging=!0,this.drawScene();return}if(this.uiData.angleState==="drawing_second_line"){this.uiData.angleState="complete",this.clearActiveDragMode(),this.drawScene();return}}n===5&&this.drawScene();const r=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),i=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(this.generateMouseUpCallback(r,i),n===6){this.clearActiveDragMode();return}if(n===1){if(t){this.clearActiveDragMode();return}if(!zd(this.uiData.dragStart,this.uiData.dragEnd)){this.clearActiveDragMode();return}this.calculateNewRange({volIdx:0}),this.refreshLayers(this.volumes[0],0)}if(n===2){const s=this.getCurrentSliceInfo(),o=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),a=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(o[0]>=0&&a[0]>=0){const l=this.frac2mm(o),c=this.frac2mm(a);this.document.completedMeasurements.push({startMM:q(l[0],l[1],l[2]),endMM:q(c[0],c[1],c[2]),sliceIndex:s.sliceIndex,sliceType:s.sliceType,slicePosition:s.slicePosition,distance:oS(q(l[0],l[1],l[2]),q(c[0],c[1],c[2]))})}this.clearActiveDragMode(),this.drawScene();return}}this.clearActiveDragMode(),this.drawScene()}checkMultitouch(e){if(sR({touchdown:this.uiData.touchdown,multiTouchGesture:this.uiData.multiTouchGesture})){const t=this.canvas.getBoundingClientRect(),n=fu({touch:e.touches[0],canvasRect:t});this.mouseDown(n.x,n.y),this.mouseClick(n.x,n.y)}}touchStartListener(e){e.preventDefault(),lR(this.uiData.touchTimer)&&(this.uiData.touchTimer=setTimeout(()=>{this.resetBriCon(e)},this.opts.longTouchTimeout));const t=new Date().getTime(),n=JF({currentTime:t,touchCount:e.touches.length,isTouchdown:this.uiData.touchdown});if(this.uiData.touchdown=n.touchdown,this.uiData.currentTouchTime=n.currentTouchTime,ZF({currentTime:t,lastTouchTime:this.uiData.lastTouchTime,doubleTouchTimeout:this.opts.doubleTouchTimeout}).isDoubleTap){const i=tR(t);this.uiData.doubleTouch=i.doubleTouch,this.uiData.lastTouchTime=i.lastTouchTime;const s=e.target.getBoundingClientRect(),o=fu({touch:e.targetTouches[0],canvasRect:s});this.setDragStart(o.x,o.y),this.resetBriCon(e);return}else{const i=eR(t);this.uiData.doubleTouch=i.doubleTouch,this.uiData.lastTouchTime=i.lastTouchTime,this.setDragStart(0,0),this.setDragEnd(0,0)}E1(this.uiData.touchdown,e.touches.length)?this.uiData.multiTouchGesture=!1:this.uiData.multiTouchGesture=!0,setTimeout(this.checkMultitouch.bind(this),1,e)}touchEndListener(e){e.preventDefault();const t=$F();if(this.uiData.touchdown=t.touchdown,this.uiData.lastTwoTouchDistance=t.lastTwoTouchDistance,this.uiData.multiTouchGesture=t.multiTouchGesture,this.uiData.touchTimer&&(clearTimeout(this.uiData.touchTimer),this.uiData.touchTimer=null),this.uiData.isDragging){this.uiData.isDragging=!1,this.getCurrentDragMode()===1&&(this.calculateNewRange(),this.refreshLayers(this.volumes[0],0));const n=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),r=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);this.generateMouseUpCallback(n,r)}this.mouseUpListener()}windowingHandler(e,t,n=0){const r=VR({x:e,y:t,windowX:this.uiData.windowX,windowY:this.uiData.windowY,currentCalMin:this.volumes[0].cal_min,currentCalMax:this.volumes[0].cal_max,globalMin:this.volumes[0].global_min,globalMax:this.volumes[0].global_max});this.volumes[n].cal_min=r.calMin,this.volumes[n].cal_max=r.calMax,this.refreshLayers(this.volumes[n],0),this.uiData.windowX=r.windowX,this.uiData.windowY=r.windowY}mouseLeaveListener(){if(this.clickToSegmentIsGrowing&&(k.debug("Mouse left canvas, stopping clickToSegment preview."),this.clickToSegmentIsGrowing=!1,this.refreshDrawing(!0,!1)),this.opts.drawingEnabled&&!isNaN(this.drawPenLocation[0])&&(k.debug("Mouse left canvas during drawing, resetting pen state."),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawPenFillPts=[]),this.opts.drawingEnabled&&!isNaN(this.drawShapeStartLocation[0])&&(k.debug("Mouse left canvas during shape drawing, resetting shape state."),this.drawShapeStartLocation=[NaN,NaN,NaN],this.drawShapePreviewBitmap&&(this.drawBitmap=this.drawShapePreviewBitmap,this.drawShapePreviewBitmap=null,this.refreshDrawing(!0,!1))),this.uiData.isDragging||this.uiData.mousedown){k.debug("Mouse left canvas during drag, resetting drag state."),this.uiData.isDragging=!1;const e=dx();this.uiData.mouseButtonLeftDown=e.mouseButtonLeftDown,this.uiData.mouseButtonCenterDown=e.mouseButtonCenterDown,this.uiData.mouseButtonRightDown=e.mouseButtonRightDown,this.uiData.mousedown=e.mousedown,this.drawScene()}this.mousePos=hx()}mouseMoveListener(e){this.uiData.mousedown&&this.drawScene();const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(t){if(!this.eventInBounds(e)){this.updateMousePos(t.x,t.y);return}if(this.uiData.mousedown){const n=t.x*this.uiData.dpr,r=t.y*this.uiData.dpr;if(this.tileIndex(n,r)!==this.uiData.clickedTile)return;const s=this.getCurrentDragMode();if(s===8){if(this.mouseMove(t.x,t.y),!!this.mouseClick(t.x,t.y)&&this.uiData.prevX===this.uiData.currX&&this.uiData.prevY===this.uiData.currY)return;this.mouseClick(t.x,t.y),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY;return}if(s===9){this.windowingHandler(t.x,t.y),this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY;return}this.setDragEnd(t.x,t.y),this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY}else if(this.getCurrentDragMode()===7&&this.uiData.angleState==="drawing_second_line"){const n=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!n)return;this.setDragEnd(n.x,n.y),this.drawScene()}else if(!this.uiData.mousedown&&this.opts.clickToSegment){const n=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!n)return;const r=n.x*this.uiData.dpr,i=n.y*this.uiData.dpr;this.mousePos=[r,i];const s=this.tileIndex(r,i);s>=0&&this.opts.drawingEnabled&&this.screenSlices[s].axCorSag<=2&&(this.clickToSegmentXY=[r,i],this.clickToSegmentIsGrowing=!0,this.doClickToSegment({x:r,y:i,tileIndex:s}))}}}resetBriCon(e=null){if(this.uiData.isDragging)return;if(!this.eventInBounds(e)){this.opts.showBoundsBorder=!1;return}let t=!1;this.opts.sliceType===4&&(t=!0);let n=0,r=0;if(e!==null&&("targetTouches"in e?(n=e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,r=e.targetTouches[0].clientY-e.target.getBoundingClientRect().top):(n=e.offsetX,r=e.offsetY),n*=this.uiData.dpr,r*=this.uiData.dpr,this.inRenderTile(n,r)>=0&&(t=!0)),t){this.uiData.mouseDepthPicker=!0,this.drawScene(),this.drawScene();return}this.getCurrentDragMode()!==4&&(this.volumes.length<1||this.uiData.doubleTouch||(this.volumes[0].cal_min=this.volumes[0].robust_min,this.volumes[0].cal_max=this.volumes[0].robust_max,this.onIntensityChange(this.volumes[0]),this.refreshLayers(this.volumes[0],0),this.drawScene()))}setDragStart(e,t){const[n,r]=M1(e,t,this.uiData.dpr);this.uiData.dragStart[0]=n,this.uiData.dragStart[1]=r}setDragEnd(e,t){const[n,r]=M1(e,t,this.uiData.dpr);this.uiData.dragEnd[0]=n,this.uiData.dragEnd[1]=r}touchMoveListener(e){if(E1(this.uiData.touchdown,e.touches.length)){const t=this.canvas.getBoundingClientRect();if(this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=Nn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,aR({doubleTouch:this.uiData.doubleTouch,isDragging:this.uiData.isDragging})){const i=fu({touch:e.targetTouches[0],canvasRect:e.target.getBoundingClientRect()});this.setDragEnd(i.x,i.y),this.drawScene();return}const n=this.getTouchDragMode(!1),r=iR({touch:e.touches[0],canvasRect:t});n===8?(this.mouseClick(r.x,r.y),this.mouseMove(r.x,r.y)):n===9&&(this.windowingHandler(r.pageX,r.pageY),this.drawScene())}else this.handlePinchZoom(e)}handlePinchZoom(e){if(rR(e.targetTouches.length,e.changedTouches.length)){const t=this.canvas.getBoundingClientRect(),n=nR({touch1:e.touches[0],touch2:e.touches[1],lastTwoTouchDistance:this.uiData.lastTwoTouchDistance}),r=oR({touch:e.touches[0],canvasRect:t});this.mousePos=r,this.uiData.lastTwoTouchDistance>0&&this.sliceScroll2D(n.scrollDelta,r[0],r[1]),this.uiData.lastTwoTouchDistance=n.distance}}cycleActiveClipPlane(){const e=fR({currentIndex:this.uiData.activeClipPlaneIndex,clipPlanesLength:this.scene.clipPlanes.length});this.uiData.activeClipPlaneIndex=e.newIndex;const t=e.newIndex;return this.scene.clipPlanes[t]||(this.scene.clipPlanes[t]=e.defaultClipPlane),this.scene.clipPlaneDepthAziElevs[t]||(this.scene.clipPlaneDepthAziElevs[t]=e.defaultDepthAziElev),t}keyUpListener(e){if(!this.cursorInBounds()){this.opts.showBoundsBorder=!1,this.drawScene();return}const t=new Date().getTime(),n=hR({currentTime:t,lastCalledTime:this.lastCalled,debounceTime:this.opts.keyDebounceTime});if(mu(e.code,this.opts.cycleClipPlaneHotKey)&&n){const r=this.cycleActiveClipPlane();console.log("Active clip plane cycled to:",r),console.log("clip planes",this.scene.clipPlanes),this.lastCalled=t}if(mu(e.code,this.opts.clipPlaneHotKey)){if(n){const r=mR({currentClipPlaneIndex:this.currentClipPlaneIndex});this.currentClipPlaneIndex=r.newIndex,this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]=r.depthAziElev,this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}this.lastCalled=t}else if(mu(e.code,this.opts.viewModeHotKey)&&n){const r=pR({currentSliceType:this.opts.sliceType,totalSliceTypes:5});this.setSliceType(r),this.lastCalled=t}this.drawScene()}keyDownListener(e){if(!this.cursorInBounds()){this.opts.showBoundsBorder=!1,this.drawScene();return}const{action:t}=uR({code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,sliceType:this.opts.sliceType});switch(t){case"render_azimuth_decrease":this.setRenderAzimuthElevation(this.scene.renderAzimuth-1,this.scene.renderElevation);break;case"render_azimuth_increase":this.setRenderAzimuthElevation(this.scene.renderAzimuth+1,this.scene.renderElevation);break;case"render_elevation_increase":this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation+1);break;case"render_elevation_decrease":this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation-1);break;case"crosshair_left":this.moveCrosshairInVox(-1,0,0);break;case"crosshair_right":this.moveCrosshairInVox(1,0,0);break;case"crosshair_up":this.moveCrosshairInVox(0,1,0);break;case"crosshair_down":this.moveCrosshairInVox(0,-1,0);break;case"crosshair_forward":this.moveCrosshairInVox(0,0,1);break;case"crosshair_backward":this.moveCrosshairInVox(0,0,-1);break;case"cycle_drag_mode":this.opts.dragMode=dR(this.opts.dragMode),k.info("drag mode changed to ",ao[this.opts.dragMode]);break;case"frame_previous":this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D-1);break;case"frame_next":this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D+1);break;case"show_version":alert(`NIIVUE VERSION: ${B1}`);break}this.drawScene()}wheelListener(e){const t=CR({thumbnailVisible:this.thumbnailVisible,mosaicStringLength:this.opts.sliceMosaicString.length,eventInBounds:this.eventInBounds(e),hasBounds:this.opts.bounds!==null});if(!t.shouldProcess){this.eventInBounds(e)||(this.opts.showBoundsBorder=!1,this.drawScene());return}if(this.opts.showBoundsBorder=t.showBoundsBorder,e.preventDefault(),e.stopPropagation(),AR({dragMode:this.getCurrentDragMode(),dragStart:this.uiData.dragStart,dragEnd:this.uiData.dragEnd})){const a=xR(e.deltaY),l=vR({dragStart:this.uiData.dragStart,dragEnd:this.uiData.dragEnd,delta:a});this.uiData.dragStart[0]=l.newDragStart[0],this.uiData.dragStart[1]=l.newDragStart[1],this.uiData.dragEnd[0]=l.newDragEnd[0],this.uiData.dragEnd[1]=l.newDragEnd[1],this.uiData.isDragging=!0,this.drawScene(),this.uiData.isDragging=!1;const c=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]);c>=0?this.generateMouseUpCallback(this.screenXY2TextureFrac(this.uiData.dragStart[0],this.uiData.dragStart[1],c),this.screenXY2TextureFrac(this.uiData.dragEnd[0],this.uiData.dragEnd[1],c)):k.warn("Could not generate drag release callback for ROI selection: Invalid tile index.");return}const n=gR({deltaY:e.deltaY,invertScrollDirection:this.opts.invertScrollDirection});if(this.opts.clickToSegment){this.opts.clickToSegmentPercent=bR({currentPercent:this.opts.clickToSegmentPercent,scrollAmount:n});const a=this.clickToSegmentXY[0],l=this.clickToSegmentXY[1],c=this.tileIndex(a,l);c>=0&&this.screenSlices[c].axCorSag<=2&&(k.debug(`Adjusting clickToSegment threshold: ${this.opts.clickToSegmentPercent.toFixed(3)}`),this.clickToSegmentIsGrowing=!0,this.doClickToSegment({x:a,y:l,tileIndex:c}));return}const r=this.canvas.getBoundingClientRect(),[i,s]=ER(e.clientX,e.clientY,r),o=this.inRenderTile(this.uiData.dpr*i,this.uiData.dpr*s)!==-1;if(SR({dragMode:this.getCurrentDragMode(),isInRenderTile:o})){const a=wR({currentZoom:this.scene.pan2Dxyzmm[3],scrollAmount:n});this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=a.newZoom),this.scene.pan2Dxyzmm[3]=a.newZoom;const l=this.frac2mm(this.scene.crosshairPos),c=yR({currentPan:[this.scene.pan2Dxyzmm[0],this.scene.pan2Dxyzmm[1],this.scene.pan2Dxyzmm[2]],zoomChange:a.zoomChange,crosshairMM:[l[0],l[1],l[2]]});this.scene.pan2Dxyzmm[0]=c[0],this.scene.pan2Dxyzmm[1]=c[1],this.scene.pan2Dxyzmm[2]=c[2],this.drawScene(),this.canvas.focus(),this.sync();return}this.sliceScroll2D(n,i,s)}registerInteractions(){if(!this.canvas)throw new Error("canvas undefined");Zn(this,di,new AbortController);const{signal:e}=oe(this,di);this.canvas.addEventListener("mousedown",this.mouseDownListener.bind(this),{signal:e}),this.canvas.addEventListener("mouseup",this.mouseUpListener.bind(this),{signal:e}),this.canvas.addEventListener("mousemove",this.mouseMoveListener.bind(this),{signal:e}),this.canvas.addEventListener("mouseleave",this.mouseLeaveListener.bind(this),{signal:e}),this.canvas.addEventListener("touchstart",this.touchStartListener.bind(this),{signal:e}),this.canvas.addEventListener("touchend",this.touchEndListener.bind(this),{signal:e}),this.canvas.addEventListener("touchmove",this.touchMoveListener.bind(this),{signal:e}),this.canvas.addEventListener("wheel",this.wheelListener.bind(this),{signal:e}),this.canvas.addEventListener("contextmenu",this.mouseContextMenuListener.bind(this),{signal:e}),this.canvas.addEventListener("dblclick",this.resetBriCon.bind(this),{signal:e}),this.canvas.addEventListener("dragenter",this.dragEnterListener.bind(this),{signal:e}),this.canvas.addEventListener("dragover",this.dragOverListener.bind(this),{signal:e}),this.canvas.addEventListener("drop",t=>{this.dropListener(t).catch(console.error)},{signal:e}),this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("keyup",this.keyUpListener.bind(this),{signal:e}),this.canvas.addEventListener("keydown",this.keyDownListener.bind(this),{signal:e})}dragEnterListener(e){ix(e)}dragOverListener(e){sx(e)}getFileExt(e,t=!0){return Cf(e,t)}async addVolumeFromUrl(e){const t=await mt.loadFromUrl(e);return this.document.addImageOptions(t,e),t.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(t,e.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(e,t),this.addVolume(t),t}async addVolumesFromUrl(e){const t=e.map(async r=>{const i=this.getFileExt(r.name||r.url);if(i==="DCM")throw new Error("DICOM files must be loaded using useDicomLoader");if(this.loaders[i]){let a=r.url;const l=this.loaders[i].toExt;let c=r.name||r.url;if(c=c.split("/").pop(),typeof r.url=="string"){const d=r.url;try{const h=await fetch(d);if(!h.ok)throw new Error(`Failed to load file: ${h.statusText}`);a=await h.arrayBuffer()}catch(h){throw new Error(`Failed to load url ${d}: ${h}`)}}const u=await this.loaders[i].loader(a);r.url=u,r.name=`${c}.${l}`}const s={url:r.url,headers:r.headers,name:r.name,colormap:r.colormap?r.colormap:r.colorMap,colormapNegative:r.colormapNegative?r.colormapNegative:r.colorMapNegative,opacity:r.opacity,urlImgData:r.urlImgData,cal_min:r.cal_min,cal_max:r.cal_max,trustCalMinMax:this.opts.trustCalMinMax,isManifest:r.isManifest,frame4D:r.frame4D,limitFrames4D:r.limitFrames4D||this.opts.limitFrames4D,colorbarVisible:r.colorbarVisible},o=await mt.loadFromUrl(s);return this.document.addImageOptions(o,s),o.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(o,s.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(s,o),o}),n=await Promise.all(t);for(let r=0;r<n.length;r++)this.addVolume(n[r]);return n}getMediaByUrl(e){return tx(e,this.mediaUrlMap)}removeVolumeByUrl(e){const t=this.getMediaByUrl(e);if(t)this.removeVolume(t);else throw new Error("No volume with URL present")}async traverseFileTree(e,t="",n){return Sf(e,t,n)}readDirectory(e){return rx(e)}isMeshExt(e){return ex(e)}async loadFromArrayBuffer(e,t){const n=this.getFileExt(t);if(ha.includes(n)){await this.addMeshFromUrl({url:t,buffer:e});return}const r=Oa(t);r.buffer=e,r.name=t,await this.addVolumeFromUrl(r)}async loadFromFile(e){const t=this.getFileExt(e.name);if(ha.includes(t)){await ui.loadFromFile({file:e,gl:this.gl,name:e.name}).then(n=>{this.addMesh(n)});return}await mt.loadFromFile({file:e,name:e.name}).then(n=>{this.addVolume(n)})}useLoader(e,t,n){this.loaders=nx({loaders:this.loaders,loader:e,fileExt:t,toExt:n})}useDicomLoader(e){this.dicomLoader=e}getDicomLoader(){return this.dicomLoader}async dropListener(e){if(this.eventInBounds(e))this.opts.bounds&&(this.opts.showBoundsBorder=!0);else{this.opts.showBoundsBorder=!1;return}if(e.stopPropagation(),e.preventDefault(),!this.opts.dragAndDropEnabled)return;const t=e.dataTransfer;if(!t)return;const n=XR(t);n?await this.handleUrlDrop(n):KR(t)&&await this.handleFilesDrop(t.items,e.shiftKey,e.altKey),this.drawScene()}async handleUrlDrop(e){const t=this.getFileExt(e);switch(k.debug("dropped ext:",t),D1(t)){case"mesh":await this.addMeshFromUrl({url:e});break;case"document":await this.loadDocumentFromUrl(e);break;default:await this.addVolumeFromUrl(Oa(e))}}async handleFilesDrop(e,t,n){!t&&!n&&(this.volumes=[],this.overlays=[],this.meshes=[]),this.closeDrawing(),this.closePAQD();const r=WR(e);for(const{entry:s,pairedEntry:o}of r)await this.handleFileEntry(s,o,n);const i=HR(e);for(const s of i)await this.handleDirectoryDrop(s)}async handleFileEntry(e,t,n){const r=this.getFileExt(e.name);if(this.loaders[r]){const o=await ED(e);await this.loadImages([{url:o,name:e.name}]);return}const i=await T1(e);switch(D1(r)){case"mesh":await this.handleMeshFileDrop(i);break;case"document":await this.handleDocumentFileDrop(i);break;default:await this.handleVolumeFileDrop(i,t,n)}}async handleMeshFileDrop(e){try{const t=await ui.loadFromFile({file:e,gl:this.gl,name:e.name});this.addMesh(t)}catch(t){console.error("Error loading mesh:",t)}}async handleDocumentFileDrop(e){try{const t=await Wa.loadFromFile(e);await this.loadDocument(t),k.debug("loaded document")}catch(t){console.error("Error loading document:",t)}}async handleVolumeFileDrop(e,t,n){try{let r;t&&(r=await T1(t));const i=await mt.loadFromFile({file:e,urlImgData:r,limitFrames4D:this.opts.limitFrames4D});n?(k.debug("alt key detected: assuming this is a drawing overlay"),this.drawClearAllUndoBitmaps(),this.loadDrawing(i)):this.addVolume(i)}catch(r){console.error("Error loading volume:",r)}}async handleDirectoryDrop(e){try{const t=await this.traverseFileTree(e,"",[]),n=this.getDicomLoader().loader;if(!n)throw new Error("No loader for DICOM files");const i=(await n(t)).map(o=>mt.loadFromUrl({url:o.data,name:o.name,limitFrames4D:this.opts.limitFrames4D})),s=await Promise.all(i);await this.onDicomLoaderFinishedWithImages(s)}catch(t){console.error("Error loading DICOM files:",t)}}setMultiplanarPadPixels(e){this.opts.multiplanarPadPixels=e,this.drawScene()}setMultiplanarLayout(e){typeof e=="string"&&(e=parseInt(e)),this.opts.multiplanarLayout=e,this.drawScene()}setCornerOrientationText(e){this.opts.isCornerOrientationText=e,this.updateGLVolume()}setIsOrientationTextVisible(e){this.opts.isOrientationTextVisible=e,this.drawScene()}setShowAllOrientationMarkers(e){this.opts.showAllOrientationMarkers=e,this.drawScene()}setHeroImage(e){this.opts.heroImageFraction=e,this.drawScene()}setCustomLayout(e){const t=iP({layout:e});if(!t.valid&&t.error)throw new Error(t.error);this.customLayout=e,this.drawScene()}clearCustomLayout(){this.customLayout=null,this.drawScene()}getCustomLayout(){return this.customLayout}setRadiologicalConvention(e){this.opts.isRadiologicalConvention=e,this.updateGLVolume()}setDefaults(e={},t=!1){this.document.opts={...dn},this.scene.sceneData={...Ya};for(const n in e)typeof e[n]=="function"?this[n]=e[n]:this.opts[n]=dn[n]===void 0?dn[n]:e[n];if(this.scene.pan2Dxyzmm=[0,0,0,1],t&&this.volumes&&this.volumes.length>0)for(let n=0;n<this.volumes.length;n++)this.volumes[n].cal_min=this.volumes[n].robust_min,this.volumes[n].cal_max=this.volumes[n].robust_max;this.updateGLVolume()}setMeshThicknessOn2D(e){this.opts.meshThicknessOn2D=e,this.updateGLVolume()}setSliceMosaicString(e){this.sliceMosaicString=e,this.updateGLVolume()}setSliceMM(e){this.opts.isSliceMM=e,this.updateGLVolume()}setAdditiveBlend(e){this.opts.isAdditiveBlend=e,this.updateGLVolume()}getRadiologicalConvention(){return this.opts.isRadiologicalConvention}setHighResolutionCapable(e){typeof e=="boolean"&&(e=e?0:-1),this.opts.forceDevicePixelRatio=e,this.resizeListener(),this.drawScene()}watchOptsChanges(e){this.onOptsChange=e}unwatchOptsChanges(){this.onOptsChange=()=>{}}addVolume(e){const t=ZT(this.volumes,e);this.volumes=t.volumes,this.setVolume(e,t.index),this.onImageLoaded(e),k.debug("loaded volume",e.name),k.debug(e)}addMesh(e){const t=VI(this.meshes,e);this.meshes=t.meshes,this.setMesh(e,t.index),this.onMeshLoaded(e)}getVolumeIndexByID(e){return $i(this.volumes,e)}drawAddUndoBitmap(e=!0){const t=jP({drawBitmap:this.drawBitmap,drawUndoBitmaps:this.drawUndoBitmaps,currentDrawUndoBitmap:this.currentDrawUndoBitmap,maxDrawUndoBitmaps:this.opts.maxDrawUndoBitmaps,drawFillOverwrites:e});this.drawBitmap=t.drawBitmap,this.drawUndoBitmaps=t.drawUndoBitmaps,this.currentDrawUndoBitmap=t.currentDrawUndoBitmap,t.needsRefresh&&this.refreshDrawing(!1)}drawClearAllUndoBitmaps(){const e=zP(this.drawUndoBitmaps,this.opts.maxDrawUndoBitmaps);this.drawUndoBitmaps=e.drawUndoBitmaps,this.currentDrawUndoBitmap=e.currentDrawUndoBitmap}drawUndo(){const{drawBitmap:e,currentDrawUndoBitmap:t}=NP({drawUndoBitmaps:this.drawUndoBitmaps,currentDrawUndoBitmap:this.currentDrawUndoBitmap,drawBitmap:this.drawBitmap});this.drawBitmap=e,this.currentDrawUndoBitmap=t,this.refreshDrawing(!0)}loadDrawing(e){if(this.drawBitmap&&k.debug("Overwriting open drawing!"),!this.back)throw new Error("back undefined");this.drawClearAllUndoBitmaps();const t=e.hdr.dims;if(!WP({drawingDims:t,backgroundDims:this.back.hdr.dims}))return k.debug("drawing dimensions do not match background image"),!1;e.img.constructor!==Uint8Array&&k.debug("Drawings should be UINT8");const n=e.permRAS,r=vu(t);this.drawBitmap=xu(r),this.opts.is2DSliceShader?this.drawTexture=this.r8Tex2D(this.drawTexture,we.TEXTURE7_DRAW,this.back.dims,!0):this.drawTexture=this.r8Tex(this.drawTexture,we.TEXTURE7_DRAW,this.back.dims,!0);const i=GP({permRAS:n,dims:t});return this.drawBitmap=YP({inputData:e.img,dims:t,xlut:i.xlut,ylut:i.ylut,zlut:i.zlut}),this.drawAddUndoBitmap(),this.refreshDrawing(!1),this.drawScene(),!0}binarize(e){const t=p7({img:e.img,dims:e.hdr.dims});e.img=t.img,e.hdr.datatypeCode=t.datatypeCode,e.hdr.cal_min=t.cal_min,e.hdr.cal_max=t.cal_max}async loadDrawingFromUrl(e,t=!1){this.drawBitmap&&k.debug("Overwriting open drawing!"),this.drawClearAllUndoBitmaps();let n=!1;try{const r=await mt.loadFromUrl(Oa(e));t&&await this.binarize(r),n=this.loadDrawing(r)}catch{k.error("loadDrawingFromUrl() failed to load "+e),this.drawClearAllUndoBitmaps()}return n}findOtsu(e=2){return this.volumes.length<1?[]:g7({img:this.volumes[0].img,cal_min:this.volumes[0].cal_min,cal_max:this.volumes[0].cal_max,scl_inter:this.volumes[0].hdr.scl_inter,scl_slope:this.volumes[0].hdr.scl_slope,mlevel:e})}drawOtsu(e=2){if(this.volumes.length===0)return;const t=this.findOtsu(e);if(t.length<3)return;this.drawBitmap||this.createEmptyDrawing();const n=A7({img:this.volumes[0].img,drawBitmap:this.drawBitmap,thresholds:t});this.drawBitmap.set(n),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}removeHaze(e=5,t=0){const n=this.volumes[t].img,r=this.volumes[t].hdr,i=v7({level:e}),s=this.findOtsu(i);if(s.length<3)return;const o=x7({level:e,thresholds:s});w7({img:n,scl_inter:r.scl_inter,scl_slope:r.scl_slope,global_min:this.volumes[t].global_min,threshold:o}),this.refreshLayers(this.volumes[t],0),this.drawScene()}async saveImage(e=L1){var o;const t={...L1,...e},{filename:n,isSaveDrawing:r,volumeByIndex:i}=t;return k.debug("saveImage",n,r,i),((o=this.back)==null?void 0:o.dims)===void 0?(k.debug("No voxelwise image open"),!1):r?this.drawBitmap?await this.volumes[0].saveToDisk(n,this.drawBitmap):(k.debug("No drawing open"),!1):(k.debug("saving image"),this.volumes[i].saveToDisk(n))}getMeshIndexByID(e){return Cr(this.meshes,e)}setMeshProperty(e,t,n){const r=LI({meshes:this.meshes,id:e,key:t,val:n,gl:this.gl});r<0||(this.updateGLVolume(),this.onMeshPropertyChanged(r,t,n))}indexNearestXYZmm(e,t,n,r){return OI({meshes:this.meshes,meshId:e,Xmm:t,Ymm:n,Zmm:r})}decimateHierarchicalMesh(e,t=3){const n=zI({meshes:this.meshes,meshId:e,gl:this.gl,order:t});return n&&this.updateGLVolume(),n}reverseFaces(e){jI({meshes:this.meshes,meshId:e,gl:this.gl})&&this.updateGLVolume()}async setMeshLayerProperty(e,t,n,r){await GI({meshes:this.meshes,meshId:e,layer:t,key:n,val:r,gl:this.gl})&&this.updateGLVolume()}setPan2Dxyzmm(e){this.scene.pan2Dxyzmm=e,this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=e[3]),this.drawScene()}setRenderAzimuthElevation(e,t){this.scene.renderAzimuth=e,this.scene.renderElevation=t,this.onAzimuthElevationChange(e,t),this.drawScene()}getOverlayIndexByID(e){return JT(this.volumes,e)}setVolume(e,t=0){const n=es(this.volumes,e,t);this.volumes=n.volumes,this.back=n.back,this.overlays=n.overlays,this.updateGLVolume()}setMesh(e,t=0){this.meshes.forEach(r=>{k.debug("MESH: ",r.name)});const n=UI(this.meshes,e,t);this.meshes=n.meshes,this.updateGLVolume(),this.meshes.forEach(r=>{k.debug(r.name)})}removeVolume(e){const t=Zv(this.volumes,e);if(this.volumes=t.volumes,this.back=this.volumes.length>0?this.volumes[0]:null,this.overlays=this.volumes.slice(1),this.mediaUrlMap.has(e)){const n=this.mediaUrlMap.get(e);this.onVolumeWithUrlRemoved(n),this.mediaUrlMap.delete(e)}this.updateGLVolume(),this.drawScene()}removeVolumeByIndex(e){const t=$T(this.volumes,e);t.removed&&this.removeVolume(t.removed)}removeMesh(e){if(e.unloadMesh(this.gl),this.setMesh(e,-1),this.mediaUrlMap.has(e)){const t=this.mediaUrlMap.get(e);this.onMeshWithUrlRemoved(t),this.mediaUrlMap.delete(e)}}removeMeshByUrl(e){const t=this.getMediaByUrl(e);t&&(this.removeMesh(t),this.mediaUrlMap.delete(t),this.onMeshWithUrlRemoved(e))}moveVolumeToBottom(e){const t=eI(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}moveVolumeUp(e){const t=tI(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}moveVolumeDown(e){const t=nI(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}moveVolumeToTop(e){const t=rI(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}mouseDown(e,t){const n=Od({x:e,y:t,dpr:this.uiData.dpr});this.mousePos=n.mousePos}updateMousePos(e,t){const n=Od({x:e,y:t,dpr:this.uiData.dpr});return this.mousePos=n.mousePos,n.mousePos}mouseMove(e,t){const n=ux({x:e,y:t,dpr:this.uiData.dpr,currentMousePos:this.mousePos});if(this.mousePos=n.mousePos,this.inRenderTile(n.scaledX,n.scaledY)<0||!xP({dx:n.dx,dy:n.dy}))return;const r=vP({currentAzimuth:this.scene.renderAzimuth,currentElevation:this.scene.renderElevation,deltaX:n.dx,deltaY:n.dy});(this.scene.renderAzimuth=r.azimuth)&&this.scene.renderElevation===r.elevation||(this.scene.renderAzimuth=r.azimuth,this.scene.renderElevation=r.elevation)}sph2cartDeg(e,t){return cc(e,t)}setClipPlanes(e){const t=TP({depthAziElevs:e});this.scene.clipPlanes=t.clipPlanes,this.scene.clipPlaneDepthAziElevs=t.clipPlaneDepthAziElevs,this.drawScene()}setClipPlane(e){if(!RP(e))return;const t=this.uiData.activeClipPlaneIndex??0,n=FP({clipPlanes:this.scene.clipPlanes,clipPlaneDepthAziElevs:this.scene.clipPlaneDepthAziElevs,index:t,depthAzimuthElevation:e});this.scene.clipPlanes=n.clipPlanes,this.scene.clipPlaneDepthAziElevs=n.clipPlaneDepthAziElevs,this.onClipPlaneChange(n.clipPlane),this.drawScene()}setCrosshairColor(e){this.opts.crosshairColor=e,this.drawScene()}setCrosshairWidth(e){this.opts.crosshairWidth=e,this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN),this.drawScene()}setDrawColormap(e){this.drawLut=Ee.makeDrawLut(e),this.updateGLVolume()}setDrawingEnabled(e){if(this.opts.drawingEnabled=e,this.opts.drawingEnabled)this.drawBitmap||this.createEmptyDrawing();else{const t=XP({clickToSegmentIsGrowing:this.clickToSegmentIsGrowing,drawPenLocation:this.drawPenLocation,drawPenAxCorSag:this.drawPenAxCorSag,drawPenFillPts:this.drawPenFillPts,drawShapeStartLocation:this.drawShapeStartLocation,drawShapePreviewBitmap:this.drawShapePreviewBitmap,drawBitmap:this.drawBitmap});this.clickToSegmentIsGrowing=t.clickToSegmentIsGrowing,this.drawPenLocation=t.drawPenLocation,this.drawPenAxCorSag=t.drawPenAxCorSag,this.drawPenFillPts=t.drawPenFillPts,this.drawShapeStartLocation=t.drawShapeStartLocation,this.drawShapePreviewBitmap=t.drawShapePreviewBitmap,this.drawBitmap=t.drawBitmap,t.needsRefresh&&this.refreshDrawing(!0,!1)}this.drawScene()}setPenValue(e,t=!1){this.opts.penValue=e,this.opts.isFilledPen=t,this.drawScene()}setDrawOpacity(e){this.drawOpacity=e,this.drawScene()}setSelectionBoxColor(e){this.opts.selectionBoxColor=e}setBounds(e){if(!Array.isArray(e)||e.length!==4)throw new Error("setBounds: expected [x1,y1,x2,y2] array");this.opts.bounds=[[e[0],e[1]],[e[2],e[3]]],this.gl&&this.drawScene()}sliceScroll2D(e,t,n,r=!0){if(!nP({scrollRequiresFocus:this.opts.scrollRequiresFocus,canvasHasFocus:this.canvas===document.activeElement})){k.warn("Canvas element does not have focus. Scroll events will not be processed.");return}if(this.inGraphTile(t,n)){let s=this.volumes[0].frame4D;e>0&&s++,e<0&&s--,this.setFrame4D(this.volumes[0].id,s);return}const i=this.inRenderTile(this.uiData.dpr*t,this.uiData.dpr*n)!==-1;if(rP({posChange:e,dragMode:this.opts.dragMode,isInRenderTile:i})){const s=this.frac2mm(this.scene.crosshairPos),o=eP({posChange:e,currentZoom:this.scene.pan2Dxyzmm[3],yoke3Dto2DZoom:this.opts.yoke3Dto2DZoom,crosshairMM:s});o.newVolScaleMultiplier!==void 0&&(this.scene.volScaleMultiplier=o.newVolScaleMultiplier),this.scene.pan2Dxyzmm[3]=o.newZoom,this.scene.pan2Dxyzmm[0]+=o.panOffsetX,this.scene.pan2Dxyzmm[1]+=o.panOffsetY,this.scene.pan2Dxyzmm[2]+=o.panOffsetZ,this.drawScene(),this.canvas.focus(),this.sync();return}this.mouseClick(t,n,e,r)}setSliceType(e){return this.opts.sliceType=e,this.drawScene(),this}setOpacity(e,t){iI(this.volumes,e,t),this.updateGLVolume()}setScale(e){this.scene.volScaleMultiplier=e,this.drawScene()}setClipPlaneColor(e){this.opts.clipPlaneColor=e,this.renderShader.use(this.gl),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.drawScene()}setClipPlaneThick(e){k.warn("setClipPlaneThick() has been removed. use setClipPlanes() instead.")}setClipVolume(e,t){k.warn("setClipVolume() has been removed. use setClipPlanes() instead.")}async setVolumeRenderIllumination(e=0){this.renderGradientValues=Number.isNaN(e),this.renderShader=this.renderVolumeShader,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:(this.opts.gradientAmount=e,e>0||this.opts.gradientOpacity>0?this.renderShader=this.renderGradientShader:e<0&&(this.renderShader=this.renderSliceShader)),this.initRenderShader(this.renderShader,e),this.renderShader.use(this.gl),this.setClipPlaneColor(this.opts.clipPlaneColor),Number.isNaN(e)?this.gradientTextureAmount=1:this.gradientTextureAmount=e,!(this.volumes.length<1)&&(await this.refreshLayers(this.volumes[0],0),this.drawScene())}async setGradientOpacity(e=0,t=0){this.opts.gradientOpacity=e,this.opts.renderSilhouette=t,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:this.gradientTextureAmount>0||e>0?this.renderShader=this.renderGradientShader:this.gradientTextureAmount<0&&(this.renderShader=this.renderSliceShader),this.initRenderShader(this.renderShader,this.gradientTextureAmount),this.renderShader.use(this.gl),this.gradientTextureAmount>0&&this.refreshLayers(this.volumes[0],0),this.drawScene()}overlayRGBA(e){return lI(e)}vox2mm(e,t){return PD(e,t)}cloneVolume(e){return sI(this.volumes,e)}async loadDocumentFromUrl(e){const t=await Wa.loadFromUrl(e);await this.loadDocument(t)}async loadDocument(e){this.volumes=[],this.meshes=[],this.document=e,this.document.labels=this.document.labels?this.document.labels:[];const t={...dn,...e.opts};this.scene.pan2Dxyzmm=e.scene.pan2Dxyzmm?e.scene.pan2Dxyzmm:[0,0,0,1],this.document.opts=t,this.scene.clipPlaneDepthAziElevs&&this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex??0]),k.debug("load document",e),this.mediaUrlMap.clear(),this.createEmptyDrawing();const n=e.encodedImageBlobs;for(let i=0;i<e.imageOptionsArray.length;i++){const s=e.imageOptionsArray[i],o=n[i];if(o){"colorMap"in s&&(s.colormap=s.colorMap);const a=await mt.loadFromBase64({base64:o,...s});if(a){if(a.colormapLabel){const l=Object.keys(a.colormapLabel.lut).length,c=new Uint8ClampedArray(l);for(const u in a.colormapLabel.lut)c[u]=a.colormapLabel.lut[u];a.colormapLabel.lut=c}this.addVolume(a)}}}this.volumes.length>0&&(this.back=this.volumes[0]);for(const i of e.meshDataObjects??[]){const s={gl:this.gl,...i};i.offsetPt0&&(s.rgba255[3]=0,s.tris=new Uint32Array(i.offsetPt0)),k.debug(s);const o=new ui(s.pts,s.tris,s.name,s.rgba255,s.opacity,s.visible,this.gl,s.connectome,s.dpg,s.dps,s.dpv);i.offsetPt0&&(o.fiberGroupColormap=i.fiberGroupColormap,o.fiberColor=i.fiberColor,o.fiberDither=i.fiberDither,o.fiberRadius=i.fiberRadius,o.colormap=i.colormap),o.meshShaderIndex=s.meshShaderIndex,o.layers=s.layers,o.updateMesh(this.gl),k.debug(o),this.addMesh(o)}if(e.data.connectomes)for(const i of e.data.connectomes){const s=JSON.parse(i),o=this.loadConnectomeAsMesh(s);o.updateMesh(this.gl),this.addMesh(o)}this.createEmptyDrawing();const r=e.encodedDrawingBlob;if(r){const i=await ue.b64toUint8(r);if(i){const s=this.back.dims;let o=s[1]*s[2]*s[3];if(i.length-352===o&&(o+=352),i.length!==o)throw new Error(`drawBitmap size does not match the texture dimensions (${s[1]}${s[2]}${s[3]}) ${o} != ${s[1]*s[2]*s[3]}.`);this.drawBitmap=i,this.refreshDrawing()}}return await this.setGradientOpacity(this.opts.gradientOpacity),await this.setVolumeRenderIllumination(this.opts.gradientAmount),this.updateGLVolume(),this.drawScene(),this.onDocumentLoaded(e),this}async generateLoadDocumentJavaScript(e,t){const n=this.json(),r=await ue.compressToBase64String(JSON.stringify(n));return`
        ${t}

        async function saveNiivueAsHtml(pageName) {
          //get new docstring
          const docString = nv1.json();
          const html =
          document.getElementsByTagName("html")[0]
              .innerHTML.replace(base64, await NVUtilities.compressToBase64String(JSON.stringify(docString)));
          NVUtilities.download(html, pageName, "application/html");
        }

        var nv1 = new Niivue();
        await nv1.attachTo("${e}");
        var base64 = "${r}";
        NVUtilities.decompressBase64String(base64).then((jsonText) => {
          var json = JSON.parse(jsonText); // string -> JSON
          var doc = NVDocument.loadFromJSON(json);
          nv1.loadDocument(doc);
          nv1.updateGLVolume();
        });

      `}async generateHTML(e="gl1",t){return`<!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width,initial-scale=1.0" />
            <title>Save as HTML</title>
            <style>
            html {
              height: auto;
              min-height: 100%;
              margin: 0;
            }
            body {
              display: flex;
              flex-direction: column;
              margin: 0;
              min-height: 100%;
              width: 100%;
              position: absolute;
              font-family: system-ui, Arial, Helvetica, sans-serif;
              background: #ffffff;
              color: black;
              user-select: none; /* Standard syntax */
            }
            header {
              margin: 10px;
            }
            main {
              flex: 1;
              background: #000000;
              position: relative;
            }
            footer {
              margin: 10px;
            }
            canvas {
              position: absolute;
              cursor: crosshair;
            }
            canvas:focus {
              outline: 0px;
            }
            div {
              display: table-row;
              background-color: blue;
            }
            </style>
          </head>
          <body>
            <noscript>niivue requires JavaScript.</noscript>
            <header>
            Save the current scene as HTML
            <button id="save">Save as HTML</button>
            </header>
            <main>
              <canvas id="gl1"></canvas>
            </main>
            <script type="module" async>
              ${await this.generateLoadDocumentJavaScript(e,t)}
              function saveAsHtml() {
                saveNiivueAsHtml("page.html");
              }
              // assign our event handler
              var button = document.getElementById("save");
              button.onclick = saveAsHtml;
            <\/script>
          </body>
        </html>`}async saveHTML(e="untitled.html",t="gl1",n){const r=await this.generateHTML(t,n);return ue.download(r,e,"application/html")}json(){return this.document.opts=this.opts,this.document.scene=this.scene,this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.json()}async saveDocument(e="untitled.nvd",t=!0,n={}){const{embedImages:r=!0,embedPreview:i=!0}=n;this.document.title=e,this.document.volumes=this.volumes,this.document.meshes=this.meshes,i?(this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL()):this.document.previewImageDataURL="",await this.document.download(e,t,{embedImages:r})}async loadImages(e){const t=[],n=[];for(const r of e)if("url"in r){const i=this.getFileExt(r.name?r.name:r.url);if(this.loaders[i]){const s=this.loaders[i].toExt.toUpperCase();ha.includes(s)?n.push(r):t.push(r);continue}ha.includes(i.toUpperCase())?n.push(r):t.push(r)}return t.length>0&&await this.loadVolumes(t),n.length>0&&await this.loadMeshes(n),this}async loadDicoms(e){if(!this.getDicomLoader())throw new Error("No dicom loader set. Please set a dicom loader before loading dicoms");this.drawScene(),this.volumes=[];const t=e.map(async r=>{let i=null;if(r.isManifest)i=await mt.fetchDicomData(r.url);else{const u=await fetch(r.url);if(!u.ok)throw new Error(`Failed to load file: ${u.statusText}`);const d=await u.arrayBuffer();i=[{name:r.url.split("/").pop(),data:d}]}const s=this.getDicomLoader().loader,o=await s(i),a=o[0].name,l=o[0].data;return await mt.loadFromUrl({url:l,name:a})}),n=await Promise.all(t);return n.length===1?this.addVolume(n[0]):this.onDicomLoaderFinishedWithImages(n),this}async loadVolumes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredVolumes=e,this):(this.volumes=[],this.closePAQD(),await this.addVolumesFromUrl(e),this)}async addMeshFromUrl(e){const t=this.getFileExt(e.url);if(t==="JCON"||t==="JSON"){let r;if(e.buffer){const s=ArrayBuffer.isView(e.buffer)?e.buffer:new Uint8Array(e.buffer),o=new TextDecoder("utf-8").decode(s);r=JSON.parse(o)}else r=await(await fetch(e.url)).json();const i=this.loadConnectomeAsMesh(r);return this.mediaUrlMap.set(i,e.url),this.onMeshAddedFromUrl(e,i),this.addMesh(i),i}const n=await ui.loadFromUrl({...e,gl:this.gl});return this.mediaUrlMap.set(n,e.url),this.onMeshAddedFromUrl(e,n),this.addMesh(n),n}async addMeshesFromUrl(e){const t=e.map(async r=>{const i=this.getFileExt(r.name||r.url);if(this.loaders[i]){let o=r.url;const a=this.loaders[i].toExt;let l=r.name||r.url;if(l=l.split("/").pop(),typeof r.url=="string"){const g=r.url;try{const v=await fetch(g);if(!v.ok)throw new Error(`Failed to load file: ${v.statusText}`);o=await v.arrayBuffer()}catch(v){throw new Error(`Failed to load url ${g}: ${v}`)}}const{positions:c,indices:u,colors:d=null,scalars:h=null,colormapLabel:f=null}=await this.loaders[i].loader(o);r.name=`${l}.${a}`;const p=await kr.createMZ3Async(c,u,!1,d,h,f);r.buffer=p}if(i==="JCON"||i==="JSON"){const a=await(await fetch(r.url,{})).json(),l=this.loadConnectomeAsMesh(a);return this.mediaUrlMap.set(l,r.url),this.onMeshAddedFromUrl(r,l),l}const s=await ui.loadFromUrl({...r,gl:this.gl});return this.mediaUrlMap.set(s,r.url),this.onMeshAddedFromUrl(r,s),s}),n=await Promise.all(t);for(let r=0;r<n.length;r++)this.addMesh(n[r]);return n}async loadMeshes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredMeshes=e,this):(this.initialized,this.meshes=[],await this.addMeshesFromUrl(e),this.updateGLVolume(),this.drawScene(),this)}async loadConnectomeFromUrl(e,t={}){const r=await(await fetch(e,{headers:t})).json();return this.loadConnectome(r)}async loadFreeSurferConnectomeFromUrl(e,t={}){const r=await(await fetch(e,{headers:t})).json();return this.loadFreeSurferConnectome(r)}async loadFreeSurferConnectome(e){const t=Xa.convertFreeSurferConnectome(e);return this.loadConnectome(t)}handleNodeAdded(e){const t=HI(e.detail.node);this.addLabel(t.text,t.style,t.position),this.drawScene()}loadConnectomeAsMesh(e){return WI({gl:this.gl,json:e})}loadConnectome(e){this.drawScene(),this.meshes=[];const t=this.loadConnectomeAsMesh(e);return this.addMesh(t),this.drawScene(),this}createEmptyDrawing(){if(this.back===null||!this.back.dims||Math.min(Math.min(this.back.dims[1],this.back.dims[2]),this.back.dims[3])<1)return;const t=vu(this.back.dims);this.drawBitmap=xu(t),this.clickToSegmentGrowingBitmap=xu(t),this.drawClearAllUndoBitmaps(),this.drawAddUndoBitmap(),this.opts.is2DSliceShader?this.drawTexture=this.r8Tex2D(this.drawTexture,we.TEXTURE7_DRAW,this.back.dims):this.drawTexture=this.r8Tex(this.drawTexture,we.TEXTURE7_DRAW,this.back.dims,!0),this.refreshDrawing(!1)}drawGrowCut(){if(!this.back||!this.back.dims)throw new Error("back not defined");const e=this.back.hdr,t=this.gl,n=e.dims[1]*e.dims[2]*e.dims[3];if(!this.drawBitmap||this.drawBitmap.length!==n){k.debug("bitmap dims are wrong");return}const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.disable(t.CULL_FACE),t.viewport(0,0,this.back.dims[1],this.back.dims[2]),t.disable(t.BLEND);let i=MD(this.back);const s=this.r16Tex(null,we.TEXTURE11_GC_BACK,this.back.dims,i);for(let w=1;w<n;w++)i[w]=this.drawBitmap[w];const o=this.r16Tex(null,we.TEXTURE14_GC_LABEL0,this.back.dims,i),a=this.r16Tex(null,we.TEXTURE15_GC_LABEL1,this.back.dims,i),l=1e4;for(let w=1;w<n;w++)i[w]>0&&(i[w]=l);const c=this.r16Tex(null,we.TEXTURE12_GC_STRENGTH0,this.back.dims,i),u=this.r16Tex(null,we.TEXTURE13_GC_STRENGTH1,this.back.dims,i);t.bindVertexArray(this.genericVAO);const d=this.growCutShader;d.use(t);const h=128;t.uniform1i(d.uniforms.finalPass,0),t.uniform1i(d.uniforms.backTex,11);for(let w=0;w<h;w++){t.uniform1i(d.uniforms.labelTex,14),t.uniform1i(d.uniforms.strengthTex,12);for(let b=0;b<this.back.dims[3];b++){const y=1/this.back.dims[3]*(b+.5);t.uniform1f(d.uniforms.coordZ,y),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,a,0,b),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,u,0,b),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&k.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}w===h-1&&t.uniform1i(d.uniforms.finalPass,1),t.uniform1i(d.uniforms.labelTex,15),t.uniform1i(d.uniforms.strengthTex,13);for(let b=0;b<this.back.dims[3];b++){const y=1/this.back.dims[3]*(b+.5);t.uniform1f(d.uniforms.coordZ,y),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,0,b),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,c,0,b),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&k.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}t.drawBuffers([t.COLOR_ATTACHMENT0]);const f=t.COLOR_ATTACHMENT1,p=o;t.readBuffer(f);const g=t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT),v=t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE);(g!==t.RED_INTEGER||v!==t.SHORT)&&k.debug("readPixels will fail."),i=new Int16Array;const m=this.back.dims[1]*this.back.dims[2],A=new Int16Array(m);for(let w=0;w<this.back.dims[3];w++)t.framebufferTextureLayer(t.FRAMEBUFFER,f,p,0,w),t.readPixels(0,0,this.back.dims[1],this.back.dims[2],g,v,A),i=Int16Array.from([...i,...A]);let x=i[0];for(let w=0;w<i.length;w++)x=Math.max(x,i[w]);for(let w=1;w<n;w++)this.drawBitmap[w]=i[w];t.deleteTexture(s),t.deleteTexture(c),t.deleteTexture(u),t.deleteTexture(o),t.deleteTexture(a),t.bindVertexArray(this.unusedVAO),t.viewport(0,0,t.canvas.width,t.canvas.height),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(r),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}drawPt(e,t,n,r,i=null){var o;const s=i??this.drawBitmap;if(!s)throw new Error("drawBitmap not set");if(!((o=this.back)!=null&&o.dims))throw new Error("back.dims not set");Ni({x:e,y:t,z:n,penValue:r,drawBitmap:s,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawPenLine(e,t,n){var r;if(!this.drawBitmap)throw new Error("drawBitmap not set");if(!((r=this.back)!=null&&r.dims))throw new Error("back.dims not set");QP({ptA:e,ptB:t,penValue:n,drawBitmap:this.drawBitmap,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawRectangleMask(e,t,n){var r;if(!this.drawBitmap)throw new Error("drawBitmap not set");if(!((r=this.back)!=null&&r.dims))throw new Error("back.dims not set");e7({ptA:e,ptB:t,penValue:n,drawBitmap:this.drawBitmap,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawEllipseMask(e,t,n){var r;if(!this.drawBitmap)throw new Error("drawBitmap not set");if(!((r=this.back)!=null&&r.dims))throw new Error("back.dims not set");t7({ptA:e,ptB:t,penValue:n,drawBitmap:this.drawBitmap,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawingBinaryDilationWithSeed(e,t=6){try{let n=function(v){return v[0]+v[1]*a+v[2]*l};const r=this.drawBitmap,i=this.back.dims[1],s=this.back.dims[2],o=this.back.dims[3],a=i,l=i*s,c=l*o,u=n(e);if(u<0||u>=c)throw new Error("Seed index is out of bounds.");const d=r[u];if(d===0)throw new Error("Seed voxel is not part of a filled cluster.");const h=r.slice();for(let v=0;v<c;v++)h[v]=h[v]===d?1:0;this.drawFloodFillCore(h,u,t);const f=r.slice(),p=[],g=[-l,l,-i,i,-1,1];p.push(...g),t>6&&p.push(-i-1,-i+1,i-1,i+1,-l-i,-l+i,-l-1,-l+1,l-i,l+i,l-1,l+1),t>18&&p.push(-l-i-1,-l-i+1,-l+i-1,-l+i+1,l-i-1,l-i+1,l+i-1,l+i+1);for(let v=0;v<c;v++)if(h[v]===2){const m=v%i,A=Math.floor(v%l/i),x=Math.floor(v/l);for(const w of p){const b=v+w;if(b<0||b>=c)continue;const y=b%i,C=Math.floor(b%l/i),S=Math.floor(b/l);Math.abs(y-m)>1||Math.abs(C-A)>1||Math.abs(S-x)>1||r[b]===0&&(f[b]=d)}}this.drawBitmap=f,this.drawAddUndoBitmap(),this.refreshDrawing(!0)}catch(n){k.error("Error in drawingBinaryDilationWithSeed:",n)}}drawFloodFillCore(e,t,n=6){var i;if(!((i=this.back)!=null&&i.dims))throw new Error("back.dims undefined");const r=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];s7({img:e,seedVx:t,dims:r,neighbors:n})}drawFloodFill(e,t=0,n=0,r=NaN,i=NaN,s=6,o=Number.POSITIVE_INFINITY,a=!1,l=null,c=!1){var E;if(!this.drawBitmap&&(k.warn("drawFloodFill called without an initialized drawBitmap."),this.createEmptyDrawing(),!this.drawBitmap)){k.error("Failed to create drawing bitmap.");return}if(this.clickToSegmentIsGrowing&&!this.clickToSegmentGrowingBitmap){if(k.warn("drawFloodFill called in preview mode without initialized clickToSegmentGrowingBitmap."),this.drawBitmap)this.clickToSegmentGrowingBitmap=this.drawBitmap.slice();else{k.error("Cannot initialize growing bitmap as drawBitmap is null.");return}if(!this.clickToSegmentGrowingBitmap){k.error("Failed to create growing bitmap.");return}}if(l===null&&(l=this.drawBitmap),!l){k.error("drawFloodFill targetBitmap is null.");return}if(!((E=this.back)!=null&&E.dims))throw new Error("back.dims undefined");t=Math.abs(t);const u=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];if(!d7(e,u))return;const d=gx(u),{nxyz:h}=d,f=this.clickToSegmentIsGrowing?this.drawBitmap:l;if(!f){k.error("Could not determine original bitmap state.");return}const p=new Uint8Array(h).fill(0),g=i7(a,this.drawPenAxCorSag),v=d.vx2xyz,m=d.xyz2vx,A=T=>this.vox2mm(T,this.back.matRAS),x=A(e),w=o**2;function b(T){const F=v(T);if(g>=0&&F[g]!==e[g])return!1;const M=A(F);return(M[0]-x[0])**2+(M[1]-x[1])**2+(M[2]-x[2])**2<=w}const y=m(e),C=f[y];if(c&&!h7(C)){k.debug("Grow/Erase Cluster tool requires starting on a masked voxel."),this.clickToSegmentIsGrowing&&this.clickToSegmentGrowingBitmap&&this.drawBitmap&&(this.clickToSegmentGrowingBitmap.set(this.drawBitmap),this.refreshDrawing(!0,!0));return}if(n===0&&C===t&&!c&&t!==0&&(k.debug("drawFloodFill selected voxel is already desired color"),!this.clickToSegmentIsGrowing))return;let S=NaN;if(c&&(n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)){const T=f.slice();for(let P=0;P<h;P++)T[P]=T[P]===C&&b(P)?1:0;if(T[y]!==1){k.error("Seed voxel could not be marked for cluster ID.");return}this.drawFloodFillCore(T,y,s);const F=this.volumes[0].img2RAS();S=u7({clusterImg:T,backImg:F,nxyz:h,fallbackIntensity:F[y]}),k.debug(`Grow Cluster using mean intensity: ${S.toFixed(2)} voxels.`);const[M,B]=N1(n,S,NaN,NaN);for(let P=0;P<h;P++)if(T[P]===2)p[P]=1;else if(f[P]===0){const z=F[P];z>=M&&z<=B&&b(P)&&(p[P]=1)}t=C}else if(n===0)if(c&&t===0){k.debug(`Erase Cluster: Identifying cluster with color ${C}`);for(let T=0;T<h;T++)p[T]=f[T]===C&&b(T)?1:0}else for(let T=0;T<h;T++)f[T]===C&&b(T)&&C!==0&&(p[T]=1);else{const T=this.volumes[0].img2RAS();S=T[y];const[F,M]=N1(n,S,r,i);for(let B=0;B<h;B++){const P=T[B];P>=F&&P<=M&&b(B)&&(p[B]=1)}t=f[y],t===0&&(t=this.opts.penValue,(t<1||!isFinite(t))&&(t=1))}if(p[y]!==1)if(f7(C,t,c,n)&&b(y))p[y]=1,k.debug("Forcing seed voxel to 1 in working buffer.");else{k.debug("Seed voxel not marked as candidate '1' and not valid originally."),this.clickToSegmentIsGrowing&&this.clickToSegmentGrowingBitmap&&this.drawBitmap&&this.clickToSegmentGrowingBitmap.set(this.drawBitmap);return}this.drawFloodFillCore(p,y,s),m7({img:p,targetBitmap:l,originalBitmap:f,newColor:t,nxyz:h,isPreviewMode:this.clickToSegmentIsGrowing&&l===this.clickToSegmentGrowingBitmap}),this.clickToSegmentIsGrowing?this.refreshDrawing(!0,!0):(this.drawAddUndoBitmap(),this.refreshDrawing(!0,!1))}floodFillSectionFIFO(e,t,n,r){mx({img2D:e,dims2D:t,minPt:n,maxPt:r})}drawPenFilled(){var n,r;if(this.drawPenFillPts.length<2){this.drawPenFillPts=[];return}if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(!((n=this.back)!=null&&n.dims))throw new Error("back.dims undefined");const e=((r=this.drawUndoBitmaps[this.currentDrawUndoBitmap])==null?void 0:r.length)>0?this.drawUndoBitmaps[this.currentDrawUndoBitmap]:null,t=ZP({penFillPts:this.drawPenFillPts,penAxCorSag:this.drawPenAxCorSag,drawBitmap:this.drawBitmap,dims:this.back.dims,penValue:this.opts.penValue,fillOverwrites:this.drawFillOverwrites,currentUndoBitmap:e});t.success&&(this.drawBitmap=t.drawBitmap),this.drawPenFillPts=[],this.drawAddUndoBitmap(),this.refreshDrawing(!1)}closeDrawing(){this.drawClearAllUndoBitmaps(),this.drawTexture=this.rgbaTex(this.drawTexture,we.TEXTURE7_DRAW,[2,2,2,2],!0),this.drawBitmap=null,this.clickToSegmentGrowingBitmap=null,this.drawScene()}refreshDrawing(e=!0,t=!1){var o;const n=HP({useClickToSegmentBitmap:t,drawingEnabled:this.opts.drawingEnabled,clickToSegment:this.opts.clickToSegment,drawBitmap:this.drawBitmap,clickToSegmentGrowingBitmap:this.clickToSegmentGrowingBitmap});n.warning&&k.warn(`refreshDrawing: ${n.warning}`);const r=n.bitmapDataSource;if(!((o=this.back)!=null&&o.dims)){k.warn("refreshDrawing: back.dims undefined, cannot refresh drawing texture yet.");return}const i=vu(this.back.dims);if(!r){k.warn(`refreshDrawing: Bitmap data source (${n.useClickToSegmentBitmap?"growing":"main"}) is null. Cannot update texture.`),e&&this.drawScene();return}const s=KP(r.length,this.back.dims.slice());if(_P(r.length,i)||k.warn(`Drawing bitmap length (${r.length}) must match the background image (${i})`),this.gl.activeTexture(we.TEXTURE7_DRAW),this.opts.is2DSliceShader){const a=this.frac2vox(this.scene.crosshairPos),l=Math.min(Math.max(a[2],0),s[3]-1),c=s[1]*s[2],u=l*c;k.debug(`refresh huge 2D drawing xyz ${s[1]}${s[2]}${s[3]} slice ${u}`);const d=r.subarray(u,u+c);this.gl.bindTexture(this.gl.TEXTURE_2D,this.drawTexture),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,s[1],s[2],this.gl.RED,this.gl.UNSIGNED_BYTE,d)}else this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,s[1],s[2],s[3],this.gl.RED,this.gl.UNSIGNED_BYTE,r);if(!this.drawTexture){k.error("refreshDrawing: drawTexture (GPU texture) is null.");return}e&&this.drawScene()}closePAQD(){!this._gl||!this.paqdTexture||(this.paqdTexture=this.rgbaTex(this.paqdTexture,we.TEXTURE8_PAQD,[2,2,2,2],!0))}r8Tex2D(e,t,n,r=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.R8,n[1],n[2]),r){const i=new Uint8Array(n[1]*n[2]);this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,n[1],n[2],this.gl.RED,this.gl.UNSIGNED_BYTE,i)}return e}initFontMets(){if(!this.fontMetrics)throw new Error("fontMetrics undefined");this.fontMets={distanceRange:this.fontMetrics.atlas.distanceRange,size:this.fontMetrics.atlas.size,mets:{}};for(let n=0;n<256;n++)this.fontMets.mets[n]={xadv:0,uv_lbwh:[0,0,0,0],lbwh:[0,0,0,0]};const e=this.fontMetrics.atlas.width,t=this.fontMetrics.atlas.height;for(let n=0;n<this.fontMetrics.glyphs.length;n++){const r=this.fontMetrics.glyphs[n],i=r.unicode;if(this.fontMets.mets[i].xadv=r.advance,r.planeBounds===void 0)continue;let s=r.atlasBounds.left/e,o=(t-r.atlasBounds.top)/t,a=(r.atlasBounds.right-r.atlasBounds.left)/e,l=(r.atlasBounds.top-r.atlasBounds.bottom)/t;this.fontMets.mets[i].uv_lbwh=[s,o,a,l],s=r.planeBounds.left,o=r.planeBounds.bottom,a=r.planeBounds.right-r.planeBounds.left,l=r.planeBounds.top-r.planeBounds.bottom,this.fontMets.mets[i].lbwh=[s,o,a,l]}}async loadFont(e=u1,t=d1){await this.loadFontTexture(e);const n=await fetch(t);if(!n.ok)throw Error(n.statusText);const r=await n.text();this.fontMetrics=JSON.parse(r),this.initFontMets(),this.fontShader.use(this.gl),this.drawScene()}async loadDefaultMatCap(){return this.loadMatCapTexture(mD)}async loadDefaultFont(){await this.loadFontTexture(this.DEFAULT_FONT_GLYPH_SHEET),this.fontMetrics=this.DEFAULT_FONT_METRICS,this.initFontMets()}async initText(){this.fontShader=new Ae(this.gl,$D,eT),this.fontShader.use(this.gl),await this.loadDefaultFont(),await this.loadDefaultMatCap(),this.drawLoadingText(this.opts.loadingText)}meshShaderNameToNumber(e="Phong"){return qv(e,this.meshShaders)}setMeshShader(e,t=2){const n=YI({meshes:this.meshes,meshShaders:this.meshShaders,id:e,meshShaderNameOrNumber:t,meshShaderNameToNumber:this.meshShaderNameToNumber.bind(this)});n!==null&&(this.updateGLVolume(),this.onMeshShaderChanged(n.meshIndex,n.shaderIndex))}createCustomMeshShader(e,t="Custom"){return OT({gl:this.gl,fragmentShaderText:e,name:t,meshShaders:this.meshShaders})}setCustomSliceShader(e=""){this.customSliceShader=LT({gl:this.gl,fragmentShaderText:e,drawOpacity:this.drawOpacity,customSliceShader:this.customSliceShader}),this.updateGLVolume()}setCustomMeshShader(e="",t="Custom"){const n=this.createCustomMeshShader(e,t);return this.meshShaders.push(n),this.onCustomMeshShaderAdded(e,t),this.meshShaders.length-1}async setCustomMeshShaderFromUrl(e,t=""){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch shader from ${e}: ${n.status} ${n.statusText}`);const r=await n.text();return(!t||t.trim()==="")&&(t=(e.split("/").pop()??e).split("?")[0].split("#")[0].replace(/\.[^/.]+$/,"")),this.setCustomMeshShader(r,t)}catch(n){throw new Error(`setCustomMeshShaderFromUrl(${e}) failed: ${n.message}`)}}meshShaderNames(e=!0){return zT(this.meshShaders,e)}initRenderShader(e,t=0){Ds({gl:this.gl,shader:e,gradientAmount:t,renderDrawAmbientOcclusion:this.renderDrawAmbientOcclusion,renderSilhouette:this.opts.renderSilhouette,gradientOpacity:this.opts.gradientOpacity})}async init(){const e=this.gl.getExtension("WEBGL_debug_renderer_info");if(e){const d=this.gl.getParameter(e.UNMASKED_VENDOR_WEBGL),h=this.gl.getParameter(e.UNMASKED_RENDERER_WEBGL);k.info("renderer vendor: ",d),k.info("renderer: ",h)}else k.info("debug_renderer_info unavailable");const t=this.gl.getParameter(this.gl.RENDERER);k.info("firefox renderer: ",t),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.volumeTexture=this.rgbaTex(this.volumeTexture,we.TEXTURE0_BACK_VOL,[2,2,2,2],!0),this.overlayTexture=this.rgbaTex(this.overlayTexture,we.TEXTURE2_OVERLAY_VOL,[2,2,2,2],!0),this.drawTexture=this.r8Tex(this.drawTexture,we.TEXTURE7_DRAW,[2,2,2,2],!0),this.paqdTexture=this.rgbaTex(this.paqdTexture,we.TEXTURE8_PAQD,[2,2,2,2],!0);const n=[1,1,0,1,0,0,0,1,0,0,0,0],r=this.gl;this.cuboidVertexBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.cuboidVertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(n),r.STATIC_DRAW),this.genericVAO=r.createVertexArray(),r.bindVertexArray(this.genericVAO),r.bindBuffer(r.ARRAY_BUFFER,this.cuboidVertexBuffer),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,3,r.FLOAT,!1,0,0),r.bindVertexArray(this.unusedVAO),this.pickingMeshShader=new Ae(r,yf,hT),this.pickingMeshShader.use(r),this.pickingImageShader=QT(r);const i=jT(r,this.drawOpacity);this.slice2DShader=i.slice2DShader,this.sliceMMShader=i.sliceMMShader,this.sliceV1Shader=i.sliceV1Shader;const s=GT(r,YE,this.unusedVAO);this.orientCubeShader=s.shader,this.orientCubeShaderVAO=s.vao;const o=YT(r);this.rectShader=o.rectShader,this.rectOutlineShader=o.rectOutlineShader,this.lineShader=o.lineShader,this.line3DShader=o.line3DShader,this.circleShader=o.circleShader;const a=WT({gl:r,renderDrawAmbientOcclusion:this.renderDrawAmbientOcclusion,renderSilhouette:this.opts.renderSilhouette,gradientOpacity:this.opts.gradientOpacity});this.renderVolumeShader=a.renderVolumeShader,this.renderSliceShader=a.renderSliceShader,this.renderGradientShader=a.renderGradientShader,this.renderGradientValuesShader=a.renderGradientValuesShader,this.renderShader=a.renderShader,this.colorbarShader=HT(r);const l=XT(r);this.blurShader=l.blurShader,this.sobelBlurShader=l.sobelBlurShader,this.sobelFirstOrderShader=l.sobelFirstOrderShader,this.sobelSecondOrderShader=l.sobelSecondOrderShader,this.growCutShader=l.growCutShader,this.passThroughShader=l.passThroughShader;const c=KT(r);this.orientShaderAtlasU=c.orientShaderAtlasU,this.orientShaderAtlasI=c.orientShaderAtlasI,this.orientShaderU=c.orientShaderU,this.orientShaderI=c.orientShaderI,this.orientShaderF=c.orientShaderF,this.orientShaderRGBU=c.orientShaderRGBU,this.orientShaderPAQD=c.orientShaderPAQD;const u=_T(r);return this.surfaceShader=u.surfaceShader,this.fiberShader=u.fiberShader,this.pickingImageShader.use(r),qT(r,this.meshShaders),this.bmpShader=new Ae(r,ZD,JD),await this.initText(),this.opts.thumbnail.length>0&&(await this.loadBmpTexture(this.opts.thumbnail),this.thumbnailVisible=!0),this.updateGLVolume(),this.initialized=!0,this.resizeListener(),this.drawScene(),this}gradientGL(e){this.gradientTexture=y1({gl:this.gl,hdr:e,genericVAO:this.genericVAO,unusedVAO:this.unusedVAO,volumeTexture:this.volumeTexture,paqdTexture:this.paqdTexture,gradientTexture:this.gradientTexture,gradientOrder:this.opts.gradientOrder,blurShader:this.blurShader,sobelBlurShader:this.sobelBlurShader,sobelFirstOrderShader:this.sobelFirstOrderShader,sobelSecondOrderShader:this.sobelSecondOrderShader,rgbaTex:this.rgbaTex.bind(this)})}getGradientTextureData(){var e;return nF({gl:this.gl,gradientTexture:this.gradientTexture,dims:((e=this.back)==null?void 0:e.dims)??null})}setCustomGradientTexture(e,t){var r,i;const n=rF({gl:this.gl,data:e,dims:t,backDims:((r=this.back)==null?void 0:r.dims)??null,gradientTexture:this.gradientTexture,gradientTextureAmount:this.gradientTextureAmount,hdr:((i=this.back)==null?void 0:i.hdr)??null,gradientGLFn:this.gradientGL.bind(this)});this.gradientTexture=n.gradientTexture,this.useCustomGradientTexture=n.useCustomGradientTexture,e!==null&&n.useCustomGradientTexture&&this.drawScene()}updateGLVolume(){var n;let e=0;const t=this.volumes.length;this.refreshColormaps(),this.closePAQD();for(let r=0;r<t;r++)this.volumes[r].toRAS&&(this.refreshLayers(this.volumes[r],e),e++);if(this.furthestVertexFromOrigin=0,t>0&&(this.furthestVertexFromOrigin=((n=this.volumeObject3D)==null?void 0:n.furthestVertexFromOrigin)??0),this.meshes)for(let r=0;r<this.meshes.length;r++)this.furthestVertexFromOrigin=Math.max(this.furthestVertexFromOrigin,this.meshes[r].furthestVertexFromOrigin);this.onVolumeUpdated&&this.onVolumeUpdated(),this.drawScene()}getDescriptives(e){const{layer:t=0,masks:n=[],drawingIsMask:r=!1,roiIsMask:i=!1,startVox:s=[0,0,0],endVox:o=[0,0,0]}=e,a=this.volumes[t].hdr,l=this.volumes[t].pixDimsRAS,c=isNaN(a.scl_slope)?1:a.scl_slope,u=isNaN(a.scl_inter)?1:a.scl_inter,d=this.volumes[t].img,h=d.length,f=I7(d,c,u),p=n.filter(A=>{const x=this.volumes[A].img.length===h;return x||k.debug("Mask resolution does not match image. Skipping masking layer "+A),x}).map(A=>this.volumes[A].img),{mask:g,area:v}=D7({nv:h,maskImages:p.length>0?p:void 0,drawBitmap:this.drawBitmap,drawingIsMask:n.length<1&&r,roiIsMask:n.length<1&&i,startVox:s,endVox:o,hdr:a,pixDimsRAS:l}),m=T7(f,g);return{...m,volumeMM3:m.nvox*a.pixDims[1]*a.pixDims[2]*a.pixDims[3],volumeML:m.nvox*a.pixDims[1]*a.pixDims[2]*a.pixDims[3]*.001,cal_min:this.volumes[t].cal_min,cal_max:this.volumes[t].cal_max,robust_min:this.volumes[t].robust_min,robust_max:this.volumes[t].robust_max,area:v}}refreshLayers(e,t){var m;if(this.volumes.length<1)return;this.refreshColormaps();const n=e.hdr,r=cI(e),i=e.opacity;if(t>1&&i===0)return;let s=null;if(!this.back)throw new Error("back undefined");this.gl.bindVertexArray(this.unusedVAO),this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN);let o=Qe(e.toRAS);if(t===0){this.volumeObject3D=gI({overlayItem:e,VOLUME_ID:this.VOLUME_ID,gl:this.gl}),zt(o,o),this.back.matRAS=e.matRAS,this.back.dims=e.dimsRAS,this.back.pixDims=e.pixDimsRAS;const{volScale:A,vox:x}=this.sliceScale(!0);this.volScale=A,this.vox=x,this.volumeObject3D.scale=Array.from(A);const{isAboveMax2D:w,isAboveMax3D:b}=uI({hdr:n,max2D:this.uiData.max2D,max3D:this.uiData.max3D});if(w&&k.error("Image dimensions exceed maximum texture size of hardware."),b&&n.datatypeCode===2304&&n.dims[3]<2){k.info(`Large RGBA image (>${this.uiData.max3D}) requires Texture2D`),this.opts.is2DSliceShader=!0,s=this.rgbaTex2D(this.volumeTexture,we.TEXTURE0_BACK_VOL,e.dimsRAS,r);return}if(b){k.info(`Large scalar image (>${this.uiData.max3D}) requires Texture2D (${n.dims[1]}${n.dims[2]}${n.dims[3]})`);const C=n.dims[1]*n.dims[2],S=this.frac2vox(this.scene.crosshairPos),T=Math.min(Math.max(S[2],0),n.dims[3]-1)*C,F=new Uint8Array(C*4),M=new Uint32Array(F.buffer),B=Math.floor(e.opacity*255),P=255*n.scl_slope/(e.cal_max-e.cal_min),z=255*(n.scl_inter-e.cal_min)/(e.cal_max-e.cal_min),U=new Uint8Array(this.colormap(e.colormap)),G=new Uint32Array(U.buffer);let L=-1;for(let Y=0;Y<C;Y++){const j=r[Y+T]*P+z,$=Math.round(Math.min(255,Math.max(0,j)));M[Y]=G[$],F[L+=4]=B}this.opts.is2DSliceShader=!0,s=this.rgbaTex2D(this.volumeTexture,we.TEXTURE0_BACK_VOL,e.dimsRAS,F,!1);return}if(b&&k.warn(`dimensions exceed 3D limits ${n.dims}`),this.opts.is2DSliceShader=!1,s=this.rgbaTex(this.volumeTexture,we.TEXTURE0_BACK_VOL,e.dimsRAS),!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.texVox,this.vox),this.gl.uniform3fv(this.renderShader.uniforms.volScale,this.volScale);const y=this.pickingImageShader;y.use(this.gl),this.gl.uniform1i(y.uniforms.volume,0),this.gl.uniform1i(y.uniforms.colormap,1),this.gl.uniform1i(y.uniforms.overlay,2),this.gl.uniform3fv(y.uniforms.volScale,this.volScale),k.debug(this.volumeObject3D)}else((m=this.back)==null?void 0:m.dims)===void 0&&k.error("Fatal error: Unable to render overlay: background dimensions not defined!"),o=AI({overlayItem:e,mm2frac:this.mm2frac.bind(this)}),t===1?(s=vI({gl:this.gl,layer:t,backDims:this.back.dims,rgbaTex:this.rgbaTex.bind(this)}).overlayTexture,this.overlayTexture=s,this.overlayTextureID=s):s=this.overlayTextureID;const a=xI(this.gl);this.gl.viewport(0,0,this.back.dims[1],this.back.dims[2]);const l=MI({gl:this.gl,TEXTURE9_ORIENT:we.TEXTURE9_ORIENT});if(!n)throw new Error("hdr undefined");if(!r)throw new Error("img undefined");let c=this.orientShaderU;if(n.datatypeCode===2304){const A=BI({gl:this.gl,hdr:n,img:r,overlayItem:e,layer:t,orientShaderRGBU:this.orientShaderRGBU,orientShaderPAQD:this.orientShaderPAQD,volumes:this.volumes,backDims:this.back.dims,rgbaTex:this.rgbaTex.bind(this),paqdTexture:this.paqdTexture,TEXTURE8_PAQD:we.TEXTURE8_PAQD,TEXTURE9_ORIENT:we.TEXTURE9_ORIENT});c=A.orientShader,A.outTexture!==null&&(s=A.outTexture),A.paqdTexture!==null&&(this.paqdTexture=A.paqdTexture)}else c=kI({gl:this.gl,hdr:n,img:r,orientShaderU:this.orientShaderU,orientShaderI:this.orientShaderI,orientShaderF:this.orientShaderF,orientShaderRGBU:this.orientShaderRGBU,orientShaderAtlasU:this.orientShaderAtlasU,orientShaderAtlasI:this.orientShaderAtlasI}).orientShader;e.global_min===void 0&&e.calMinMax(),this.gl.bindVertexArray(this.genericVAO);const u=wI({gl:this.gl,layer:t,backDims:this.back.dims,rgbaTex:this.rgbaTex.bind(this),passThroughShader:this.passThroughShader});c.use(this.gl),this.gl.activeTexture(we.TEXTURE1_COLORMAPS);const{colormapLabelTexture:d}=dI({gl:this.gl,overlayItem:e,orientShader:c,createColormapTexture:this.createColormapTexture.bind(this)});if(d===null&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.uniform1f(c.uniforms.cal_min,e.cal_min),this.gl.uniform1f(c.uniforms.cal_max,e.cal_max)),"alphaThreshold"in e&&(k.warn("alphaThreshold is deprecated: use colormapType"),e.alphaThreshold===!0&&(e.colormapType=2),e.alphaThreshold===!1&&(e.colormapType=1),delete e.alphaThreshold),!c)throw new Error("orientShader undefined");yI({gl:this.gl,overlayItem:e,orientShader:c,layer:t,isAdditiveBlend:this.opts.isAdditiveBlend});const{modulateTexture:h}=hI({gl:this.gl,overlayItem:e,hdr:n,volumes:this.volumes,orientShader:c,r8Tex:this.r8Tex.bind(this),TEXTURE7:this.gl.TEXTURE7});if(this.gl.bindTexture(this.gl.TEXTURE_3D,l),!this.back.dims)throw new Error("back.dims undefined");if(bI({gl:this.gl,orientShader:c,backDims:this.back.dims,outTexture:s,mtx:o,hdr:n,intensityVolTextureUnit:9,blendTextureUnit:10,colormapTextureUnit:1,modulationTextureUnit:7,opacity:i,atlasOutline:this.opts.atlasOutline,atlasActiveIndex:this.opts.atlasActiveIndex}),k.debug("back dims: ",this.back.dims),this.gl.bindVertexArray(this.unusedVAO),this.gl.deleteTexture(l),this.gl.deleteTexture(h),this.gl.deleteTexture(u),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.deleteFramebuffer(a),t===0&&(this.volumeTexture=s,this.gradientTexture=y1({gl:this.gl,hdr:n,genericVAO:this.genericVAO,unusedVAO:this.unusedVAO,volumeTexture:this.volumeTexture,paqdTexture:this.paqdTexture,gradientTexture:this.gradientTexture,gradientOrder:this.opts.gradientOrder,blurShader:this.blurShader,sobelBlurShader:this.sobelBlurShader,sobelFirstOrderShader:this.sobelFirstOrderShader,sobelSecondOrderShader:this.sobelSecondOrderShader,rgbaTex:this.rgbaTex.bind(this)})),!this.renderShader)throw new Error("renderShader undefined");if(!this.pickingImageShader)throw new Error("pickingImageShader undefined");const f=this.sliceScale(!0),p=f.vox,g=f.volScale,v=SI({is2DSliceShader:this.opts.is2DSliceShader,isV1SliceShader:this.opts.isV1SliceShader,sliceMMShader:this.sliceMMShader,slice2DShader:this.slice2DShader,sliceV1Shader:this.sliceV1Shader,customSliceShader:this.customSliceShader});CI({gl:this.gl,renderShader:this.renderShader,pickingImageShader:this.pickingImageShader,sliceShader:v,overlaysLength:this.overlays.length,clipPlaneColor:this.opts.clipPlaneColor,backOpacity:this.volumes[0].opacity,renderOverlayBlend:this.opts.renderOverlayBlend,clipPlane:this.scene.clipPlane,texVox:p,volScale:g,drawOpacity:this.drawOpacity,paqdUniforms:this.opts.paqdUniforms}),d!==null&&(this.gl.deleteTexture(d),this.gl.activeTexture(we.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture)),EI({gl:this.gl,shader:v,is2DSliceShader:this.opts.is2DSliceShader,drawTexture:this.drawTexture,paqdTexture:this.paqdTexture,TEXTURE7_DRAW:we.TEXTURE7_DRAW,TEXTURE8_PAQD:we.TEXTURE8_PAQD}),this.updateInterpolation(t)}colormaps(){return Ee.colormaps()}addColormap(e,t){Ee.addColormap(e,t)}setColormap(e,t){const n=this.getVolumeIndexByID(e);this.volumes[n].colormap=t,this.updateGLVolume()}idx(e,t,n,r){return at(e,t,n,r)}check_previous_slice(e,t,n,r,i,s,o,a){return Ax(e,t,n,r,i,s,o,a)}do_initial_labelling(e,t,n){const r=vx(e,t,n);return[r.labelCount,r.translationTable,r.initialLabels]}fill_tratab(e,t,n){Rf(e,t,n)}translate_labels(e,t,n,r){const i=xx(e,t,n,r);return[i.clusterCount,i.labels]}largest_original_cluster_labels(e,t,n){const r=wx(e,t,n);return[r.maxValue,r.voxels]}bwlabel(e,t,n=26,r=!1,i=!1){const s=y7({img:e,dim:t,conn:n,binarize:r,onlyLargestClusterPerClass:i});return[s.clusterCount,s.labels]}async createConnectedLabelImage(e,t=26,n=!1,r=!1){var u,d;const i=this.getVolumeIndexByID(e),s=Uint32Array.from(((u=this.volumes[i].dims)==null?void 0:u.slice(1,4))??[]),o=Uint32Array.from(((d=this.volumes[i].img)==null?void 0:d.slice())??[]),[a,l]=this.bwlabel(o,s,t,n,r),c=this.volumes[i].clone();c.opacity=.5,c.colormap="random";for(let h=0;h<c.img.length;h++)c.img[h]=l[h];return c.cal_min=0,c.cal_max=a,c}async createNiftiArray(e=[256,256,256],t=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],r=2,i=new Uint8Array){return await mt.createNiftiArray(e,t,n,r,i)}async niftiArray2NVImage(e=new Uint8Array){return await mt.loadFromUrl({url:e})}async loadFromUrl(e){return await mt.loadFromUrl({url:e})}async conform(e,t=!1,n=!0,r=!1,i=!1){const{outAffine:a,invVox2vox:l}=S7({inDims:e.hdr.dims,inAffine:e.hdr.affine.flat(),outDim:256,outMM:1,toRAS:t}),c=new Float32Array(e.img),u=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];if(e.hdr.scl_slope!==1||e.hdr.scl_inter!==0)for(let g=0;g<u;g++)c[g]=c[g]*e.hdr.scl_slope+e.hdr.scl_inter;const d=E7({inImg:c,inDims:e.hdr.dims,outDim:256,invVox2vox:l,isLinear:n}),h=i?NaN:0,f={img:e.img,dims:e.hdr.dims,global_min:e.global_min,global_max:e.global_max,datatypeCode:e.hdr.datatypeCode,scl_slope:e.hdr.scl_slope,scl_inter:e.hdr.scl_inter,cal_min:e.cal_min,cal_max:e.cal_max,f_low:h};let p;if(r){f.dst_min=0,f.dst_max=1;const[g,v]=k1(f),m=C7(d,0,1,g,v);p=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(a),16,new Uint8Array(m.buffer))}else{f.dst_min=0,f.dst_max=255;const[g,v]=k1(f),m=b7(d,0,255,g,v);p=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(a),2,m)}return this.niftiArray2NVImage(p)}setRenderDrawAmbientOcclusion(e){if(!this.renderShader)throw new Error("renderShader undefined");this.renderDrawAmbientOcclusion=e,this.renderShader.use(this.gl),this.gl.uniform1fv(this.renderShader.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.drawScene()}setColorMap(e,t){this.setColormap(e,t)}setColormapNegative(e,t){const n=this.getVolumeIndexByID(e);this.volumes[n].colormapNegative=t,this.updateGLVolume()}setModulationImage(e,t,n=0){const r=this.getVolumeIndexByID(e);let i=null;t.length>0&&(i=this.getVolumeIndexByID(t)),this.volumes[r].modulationImage=i,this.volumes[r].modulateAlpha=n,this.updateGLVolume()}setGamma(e=1){this.scene.gamma=e,Ee.gamma=e,this.updateGLVolume()}async loadDeferred4DVolumes(e){const t=this.getVolumeIndexByID(e),n=this.volumes[t];if(n.nTotalFrame4D<=n.nFrame4D)return;n.nTotalFrame4D=n.nFrame4D;let r;n.fileObject?r=await mt.loadFromFile({file:n.fileObject}):r=await mt.loadFromUrl({url:n.url}),r&&(n.img=r.img.slice(),n.nTotalFrame4D=r.nTotalFrame4D,n.nFrame4D=r.nFrame4D,this.updateGLVolume())}setFrame4D(e,t){const n=this.getVolumeIndexByID(e);if(n<0)return;const r=this.volumes[n].frame4D;oI(this.volumes,e,t),this.volumes[n].frame4D!==r&&(this.updateGLVolume(),this.onFrameChange(this.volumes[n],this.volumes[n].frame4D),this.createOnLocationChange())}getFrame4D(e){return aI(this.volumes,e)}colormapFromKey(e){return Ee.colormapFromKey(e)}colormap(e="",t=!1){return Ee.colormap(e,t)}createColormapTexture(e=null,t=0,n=256){return e!==null&&this.gl.deleteTexture(e),t<1||n<1?null:(e=this.gl.createTexture(),this.gl.activeTexture(we.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.RGBA8,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),e)}addColormapList(e="",t=NaN,n=NaN,r=!1,i=!1,s=!0,o=!1){e.length<1&&(s=!1),this.colormapLists.push({name:e,min:t,max:n,isColorbarFromZero:r,negative:i,visible:s,invert:o})}refreshColormaps(){if(this.colormapLists=[],this.volumes.length<1&&this.meshes.length<1)return;const e=this.volumes.length;if(e>0)for(let s=0;s<e;s++){const o=this.volumes[s],a=cu(o.cal_min,o.cal_max,o.cal_minNeg,o.cal_maxNeg),l=o.colormapType!==0;this.addColormapList(o.colormapNegative,a[0],a[1],l,!0,o.colorbarVisible,o.colormapInvert),this.addColormapList(o.colormap,o.cal_min,o.cal_max,l,!1,o.colorbarVisible,o.colormapInvert)}const t=this.meshes.length;if(t>0)for(let s=0;s<t;s++){const o=this.meshes[s];if(!o.colorbarVisible)continue;const a=o.layers.length,l=o.fiberColor.toLowerCase();if(o.offsetPt0&&l.startsWith("dp")){let c=null;const u=parseInt(l.substring(3));l.startsWith("dpg")&&!o.fiberGroupColormap&&(c=u<o.dpg.length?o.dpg[u]:o.dpg[0]),l.startsWith("dps")&&(c=u<o.dps.length?o.dps[u]:o.dps[0]),l.startsWith("dpv")&&(c=u<o.dpv.length?o.dpv[u]:o.dpv[0]),c&&typeof o.colormap=="string"&&this.addColormapList(o.colormap,c.cal_min,c.cal_max,!1,!1,!0,o.colormapInvert)}if("edgeColormap"in o&&"edges"in o&&o.edges!==void 0){const c=cu(o.edgeMin,o.edgeMax,NaN,NaN);this.addColormapList(o.edgeColormapNegative,c[0],c[1],!1,!0,!0,o.colormapInvert),this.addColormapList(o.edgeColormap,o.edgeMin,o.edgeMax,!1,!1,!0,o.colormapInvert)}if(!(a<1))for(let c=0;c<a;c++){const u=this.meshes[s].layers[c];if(!u.colorbarVisible||u.colormap.length<1)continue;const d=u.colormapType!==0;if(u.useNegativeCmap){const h=cu(u.cal_min,u.cal_max,u.cal_minNeg,u.cal_maxNeg);this.addColormapList(u.colormapNegative,h[0],h[1],d,!0,!0,u.colormapInvert)}this.addColormapList(u.colormap,u.cal_min,u.cal_max,d,!1,!0,u.colormapInvert)}}const n=this.colormapLists.length;if(n<1)return;this.colormapTexture=this.createColormapTexture(this.colormapTexture,n+1);let r=new Uint8ClampedArray;function i(s){const o=new Uint8ClampedArray(r.length+s.length);o.set(r),o.set(s,r.length),r=o}for(let s=0;s<n;s++)i(Array.from(this.colormap(this.colormapLists[s].name,this.colormapLists[s].invert)));return i(Array.from(this.drawLut.lut)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,256,n+1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r),this}sliceScale(e=!1){var t;if(!((t=this.back)!=null&&t.dims))throw new Error("back.dims undefined");return cP({forceVox:e,getScreenFieldOfViewMM:n=>this.screenFieldOfViewMM(n),getScreenFieldOfViewVox:n=>this.screenFieldOfViewVox(n),backDims:this.back.dims})}tileIndex(e,t){return If({x:e,y:t,screenSlices:this.screenSlices})}inRenderTile(e,t){return _R({x:e,y:t,screenSlices:this.screenSlices})}sliceScroll3D(e=0){const t=$R({posChange:e,volumesLength:this.volumes.length,clipPlaneDepthAziElevs:this.scene.clipPlaneDepthAziElevs,activeClipPlaneIndex:this.uiData.activeClipPlaneIndex,volScaleMultiplier:this.scene.volScaleMultiplier});if(t.action!=="none"){if(t.action==="clipPlane"&&t.newClipPlaneDepth!==void 0){const n=this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex].slice();return n[0]=t.newClipPlaneDepth,this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]=n,this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}t.action==="zoom"&&t.newVolScaleMultiplier!==void 0&&(this.scene.volScaleMultiplier=t.newVolScaleMultiplier,this.drawScene())}}inGraphTile(e,t){return QR({x:e,y:t,graph:this.graph,volumesLength:this.volumes.length,firstVolumeFrameCount:this.volumes.length>0?this.volumes[0].nFrame4D??0:0})}updateBitmapFromClickToSegment(){this.clickToSegmentGrowingBitmap===null||this.drawBitmap===null||l7({sourceBitmap:this.clickToSegmentGrowingBitmap,targetBitmap:this.drawBitmap})}sumBitmap(e){return c7(e)}doClickToSegment(e){const{tileIndex:t}=e;if(t<0||t>=this.screenSlices.length){k.warn(`Invalid tileIndex ${t} received in doClickToSegment.`);return}const n=this.screenSlices[t].axCorSag;if(n>2){k.warn("ClickToSegment attempted on non-2D slice tile.");return}const r=this.screenXY2TextureFrac(this.clickToSegmentXY[0],this.clickToSegmentXY[1],t,!1);if(r[0]<0){k.debug("Click location outside valid texture fraction for the tile.");return}const i=this.frac2vox(r),s=this.back.getValue(i[0],i[1],i[2]),o=o7({voxelIntensity:s,thresholdPercent:this.opts.clickToSegmentPercent,calMin:this.back.cal_min,calMax:this.back.cal_max,autoIntensity:this.opts.clickToSegmentAutoIntensity,currentIntensityMin:this.opts.clickToSegmentIntensityMin,currentIntensityMax:this.opts.clickToSegmentIntensityMax,currentBright:this.opts.clickToSegmentBright});this.opts.clickToSegmentIntensityMin=o.intensityMin,this.opts.clickToSegmentIntensityMax=o.intensityMax,this.opts.clickToSegmentBright=o.isBright;const a=a7(o.isBright);this.drawPenAxCorSag=n;const l=this.clickToSegmentIsGrowing?this.clickToSegmentGrowingBitmap:this.drawBitmap;if(!l){if(k.error("Target bitmap for flood fill is null."),this.clickToSegmentIsGrowing){if(this.drawBitmap||this.createEmptyDrawing(),!this.drawBitmap)return;this.clickToSegmentGrowingBitmap=this.drawBitmap.slice()}else if(this.createEmptyDrawing(),!this.drawBitmap)return;k.warn("Initialized missing bitmap in doClickToSegment.")}if(this.drawFloodFill([i[0],i[1],i[2]],this.opts.penValue,a,this.opts.clickToSegmentIntensityMin,this.opts.clickToSegmentIntensityMax,this.opts.floodFillNeighbors,this.opts.clickToSegmentMaxDistanceMM,this.opts.clickToSegmentIs2D,l),!this.clickToSegmentIsGrowing&&(k.debug("Applying clickToSegment mask to drawBitmap."),this.drawBitmap?(this.refreshDrawing(!1,!1),this.drawScene()):k.error("Cannot refresh drawing after click-to-segment apply, drawBitmap is null."),this.drawBitmap)){const c=this.getDescriptives({layer:0,masks:[],drawingIsMask:!0});this.onClickToSegment({mL:c.volumeML,mm3:c.volumeMM3})}this.createOnLocationChange(n)}mouseClick(e,t,n=0,r=!0){if(e*=this.uiData.dpr,t*=this.uiData.dpr,this.canvas.focus(),this.thumbnailVisible)return this.thumbnailVisible=!1,Promise.all([this.loadVolumes(this.deferredVolumes),this.loadMeshes(this.deferredMeshes)]).catch(i=>{throw i}),!0;if(this.inGraphTile(e,t)){if(!this.graph.plotLTWH)throw new Error("plotLTWH undefined");const i=[(e-this.graph.plotLTWH[0])/this.graph.plotLTWH[2],(t-this.graph.plotLTWH[1])/this.graph.plotLTWH[3]];if(i[0]>0&&i[1]>0&&i[0]<=1&&i[1]<=1){const s=Math.round(i[0]*(this.volumes[0].nFrame4D-1));return this.setFrame4D(this.volumes[0].id,s),!0}return i[0]>.5&&i[1]>1&&this.loadDeferred4DVolumes(this.volumes[0].id).catch(s=>{throw s}),!1}if(this.inRenderTile(e,t)>=0)return n===0?!1:(this.sliceScroll3D(n),this.drawScene(),!0);if(this.screenSlices.length<1||this.gl.canvas.height<1||this.gl.canvas.width<1)return!1;for(let i=0;i<this.screenSlices.length;i++){const s=this.screenSlices[i].axCorSag;if(this.drawPenAxCorSag>=0&&this.drawPenAxCorSag!==s||s>2&&!this.opts.clickToSegment&&n===0)continue;const o=this.screenXY2TextureFrac(e,t,i,!0);if(o[0]<0)continue;if(n!==0||!r){if(!r)return s<=2&&(this.scene.crosshairPos[2-s]=n,this.drawScene(),this.createOnLocationChange(s)),!0;const c=n<0?-1:1,u=[0,0,0];return s<=2&&(u[2-s]=c,this.moveCrosshairInVox(u[0],u[1],u[2])),!0}const a=this.opts.isForceMouseClickToVoxelCenters?this.vox2frac(this.frac2vox(o)):o;if(!!uS(this.scene.crosshairPos,a)&&!this.opts.drawingEnabled)return!1;if(this.scene.crosshairPos=fn(a),this.opts.drawingEnabled){const c=this.frac2vox(this.scene.crosshairPos);if(!isFinite(this.opts.penValue)||this.opts.penValue<0||Object.is(this.opts.penValue,-0)){let u=0,d=Math.abs(this.opts.penValue);const h=!0;return Object.is(this.opts.penValue,-0)?(u=0,d=0,k.debug("Erase Cluster selected")):(u=this.opts.penValue,k.debug("Intensity Grow selected",u)),this.drawFloodFill(c,d,u,NaN,NaN,this.opts.floodFillNeighbors,Number.POSITIVE_INFINITY,!1,this.drawBitmap,h),this.drawScene(),this.createOnLocationChange(s),!0}else{if(this.opts.clickToSegment)return s<=2&&(this.clickToSegmentIsGrowing=!1,this.doClickToSegment({x:this.clickToSegmentXY[0],y:this.clickToSegmentXY[1],tileIndex:i})),this.createOnLocationChange(s),!0;if(this.opts.penType===0){if(isNaN(this.drawPenLocation[0]))this.drawPenAxCorSag=s,this.drawPenFillPts=[],this.drawPt(...c,this.opts.penValue);else{if(c[0]===this.drawPenLocation[0]&&c[1]===this.drawPenLocation[1]&&c[2]===this.drawPenLocation[2])return this.drawScene(),this.createOnLocationChange(s),!0;this.drawPenLine(c,this.drawPenLocation,this.opts.penValue)}this.drawPenLocation=c,this.opts.isFilledPen&&this.drawPenFillPts.push(c),this.refreshDrawing(!1,!1)}else(this.opts.penType===1||this.opts.penType===2)&&(isNaN(this.drawShapeStartLocation[0])?(this.drawPenAxCorSag=s,this.drawShapeStartLocation=[...c],this.drawBitmap&&(this.drawShapePreviewBitmap=this.drawBitmap.slice())):this.drawShapePreviewBitmap&&this.drawBitmap&&(this.drawBitmap.set(this.drawShapePreviewBitmap),this.opts.penType===1?this.drawRectangleMask(this.drawShapeStartLocation,c,this.opts.penValue):this.opts.penType===2&&this.drawEllipseMask(this.drawShapeStartLocation,c,this.opts.penValue),this.refreshDrawing(!1,!1)))}}return this.drawScene(),this.createOnLocationChange(s),!0}return!1}drawRuler(){let e=[],t=[];for(let c=0;c<this.screenSlices.length;c++)if(this.screenSlices[c].axCorSag!==4&&this.screenSlices[c].fovMM.length>1){t=this.screenSlices[c].leftTopWidthHeight,e=this.screenSlices[c].fovMM;break}if(t.length<4)return;const[n,r,i,s]=this.getBoundsRegion(),o=Number(this.opts.rulerWidth),a=TF({fovMM:e,ltwh:t,rulerWidth:o,regionBounds:{x:n,y:r,w:i,h:s}});if(!a)return;const l=IF(this.opts.rulerColor);this.drawRuler10cm(a.startXYendXY,l,o+1),this.drawRuler10cm(a.startXYendXY,this.opts.rulerColor,o)}drawRuler10cm(e,t,n=1){if(!this.lineShader)throw new Error("lineShader undefined");this.gl.bindVertexArray(this.genericVAO),this.lineShader.use(this.gl),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,n),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const r=FF(e,this.opts.rulerWidth);for(const i of r)this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,i),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);this.gl.bindVertexArray(this.unusedVAO)}screenXY2mm(e,t,n=-1){return kD(e,t,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,forceSlice:n})}dragForPanZoom(e){const t=this.screenXY2mm(e[2],e[3]);if(isNaN(t[0]))return;const n=this.screenXY2mm(e[0],e[1],t[3]);if(isNaN(n[0])||isNaN(t[0])||isNaN(t[3]))return;const r=kR({startMM:n,endMM:t,pan2DxyzmmAtMouseDown:this.uiData.pan2DxyzmmAtMouseDown});this.scene.pan2Dxyzmm[0]=r.pan2Dxyzmm[0],this.scene.pan2Dxyzmm[1]=r.pan2Dxyzmm[1],this.scene.pan2Dxyzmm[2]=r.pan2Dxyzmm[2],this.canvas.focus()}dragForCenterButton(e){this.dragForPanZoom(e)}dragForSlicer3D(e){const t=this.frac2mm(this.scene.crosshairPos),n=BR({startY:e[1],endY:e[3],pan2DxyzmmAtMouseDown:this.uiData.pan2DxyzmmAtMouseDown,currentPan2Dxyzmm:this.scene.pan2Dxyzmm,crosshairMM:t,yoke3Dto2DZoom:this.opts.yoke3Dto2DZoom});n.volScaleMultiplier!==void 0&&(this.scene.volScaleMultiplier=n.volScaleMultiplier),this.scene.pan2Dxyzmm[0]=n.pan2Dxyzmm[0],this.scene.pan2Dxyzmm[1]=n.pan2Dxyzmm[1],this.scene.pan2Dxyzmm[2]=n.pan2Dxyzmm[2],this.scene.pan2Dxyzmm[3]=n.pan2Dxyzmm[3]}drawMeasurementTool(e,t=!0){const n=(c,u,d,h,f)=>RF({startXYendXY:[c,u,d,h],distance:f}),r=this.gl;if(r.viewport(0,0,r.canvas.width,r.canvas.height),r.bindVertexArray(this.genericVAO),r.depthFunc(r.ALWAYS),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),r.uniform4fv(this.lineShader.uniforms.lineColor,this.opts.rulerColor),r.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[r.canvas.width,r.canvas.height]),r.uniform1f(this.lineShader.uniforms.thickness,this.opts.rulerWidth),r.uniform4fv(this.lineShader.uniforms.startXYendXY,e),r.drawArrays(r.TRIANGLE_STRIP,0,4);const i=this.opts.measureLineColor;i[3]=1,r.uniform4fv(this.lineShader.uniforms.lineColor,i);const s=this.opts.rulerWidth;r.uniform1f(this.lineShader.uniforms.thickness,s*2);let o=[e[0],e[1]-s,e[0],e[1]+s];r.uniform4fv(this.lineShader.uniforms.startXYendXY,o),r.drawArrays(r.TRIANGLE_STRIP,0,4),o=[e[2],e[3]-s,e[2],e[3]+s],r.uniform4fv(this.lineShader.uniforms.startXYendXY,o),r.drawArrays(r.TRIANGLE_STRIP,0,4);let a=this.canvasPos2frac([e[0],e[1]]),l=this.canvasPos2frac([e[2],e[3]]);if(a[0]>=0&&l[0]>=0){const c=this.frac2mm(a);a=q(c[0],c[1],c[2]);const u=this.frac2mm(l);l=q(u[0],u[1],u[2]);const d=Te();jm(d,a,l);const h=so(d);let f=2;h>9&&(f=1),h>99&&(f=0);let p=h.toFixed(f);this.opts.showMeasureUnits&&(p=`${p} mm`);let g=e;const[v,m,A,x]=e,{origin:w,terminus:b}=n(v,m,A,x,30);switch(this.opts.measureTextJustify){case"start":g=[...w,...w.map(y=>y+1)];break;case"end":g=g=[...b,...b.map(y=>y+1)];break;default:g=e;break}t&&this.drawTextBetween(g,p,this.opts.measureTextHeight/.06,this.opts.measureTextColor)}r.bindVertexArray(this.unusedVAO)}drawAngleMeasurementTool(){this.uiData.angleState==="drawing_first_line"?this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],!1):this.uiData.angleState==="drawing_second_line"&&(this.drawMeasurementTool(this.uiData.angleFirstLine,!1),this.drawMeasurementTool([this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],!1),this.drawAngleText())}drawAngleText(){const e=this.uiData.angleFirstLine,t=[this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],n=this.calculateAngleBetweenLines(e,t),r=this.uiData.angleFirstLine[2],i=this.uiData.angleFirstLine[3],s=`${n.toFixed(1)}`;this.drawTextBetween([r,i,r+1,i+1],s,this.opts.measureTextHeight/.06,this.opts.measureTextColor)}drawAngleTextForAngle(e){const t=this.calculateAngleBetweenLines(e.firstLine,e.secondLine),n=e.firstLine[2],r=e.firstLine[3],i=`${t.toFixed(1)}`;this.drawTextBetween([n,r,n+1,r+1],i,this.opts.measureTextHeight/.06,this.opts.measureTextColor)}calculateAngleBetweenLines(e,t){return PR(e,t)}resetAngleMeasurement(){const e=NR();this.uiData.angleState=e.angleState,this.uiData.angleFirstLine=e.angleFirstLine}getCurrentSliceInfo(){return ZR({dragStart:this.uiData.dragStart,screenSlices:this.screenSlices,crosshairPos:this.scene.crosshairPos,currentSliceType:this.opts.sliceType,canvasPos2frac:e=>this.canvasPos2frac(e)})}getCurrentSlicePosition(e){return Pl({sliceType:e,crosshairPos:this.scene.crosshairPos})}shouldDrawOnCurrentSlice(e,t,n){return JR({sliceType:t,slicePosition:n,currentSliceTypeOpt:this.opts.sliceType,screenSlices:this.screenSlices,crosshairPos:this.scene.crosshairPos})}clearMeasurements(){this.document.completedMeasurements=[],this.drawScene()}clearAngles(){this.document.completedAngles=[],this.drawScene()}clearAllMeasurements(){this.document.completedMeasurements=[],this.document.completedAngles=[],this.drawScene()}setDragMode(e){const t=DR(e);if(t===null){console.warn(`Unknown drag mode: ${e}`);return}this.opts.dragMode=t,OR(this.opts.dragMode)||this.resetAngleMeasurement(),this.clearActiveDragMode()}setMouseEventConfig(e){this.opts.mouseEventConfig=e,this.clearActiveDragMode()}setTouchEventConfig(e){this.opts.touchEventConfig=e,this.clearActiveDragMode()}getMouseEventConfig(){return this.opts.mouseEventConfig}getTouchEventConfig(){return this.opts.touchEventConfig}drawRect(e,t=[1,0,0,-1]){if(t[3]<0&&(t=this.opts.crosshairColor),!this.rectShader)throw new Error("rectShader undefined");this.gl.disable(this.gl.CULL_FACE),this.opts.selectionBoxIsOutline?(this.drawCircle(e,t,.1),this.rectOutlineShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform1f(this.rectOutlineShader.uniforms.thickness,this.opts.selectionBoxLineThickness),this.gl.uniform4fv(this.rectOutlineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)):(this.rectShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.rectShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO))}drawBoundsBox(e,t,n=2){if(!this.rectOutlineShader)throw new Error("rectOutlineShader undefined");const r=this.gl,[i,s,o,a]=e;r.viewport(0,0,r.canvas.width,r.canvas.height),this.rectOutlineShader.use(r),r.enable(r.BLEND),r.uniform1f(this.rectOutlineShader.uniforms.thickness,n),r.uniform4fv(this.rectOutlineShader.uniforms.lineColor,t),r.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[r.canvas.width,r.canvas.height]),r.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,i,s,o,a),r.bindVertexArray(this.genericVAO),r.drawArrays(r.TRIANGLE_STRIP,0,4),r.bindVertexArray(this.unusedVAO)}drawCircle(e,t=this.opts.fontColor,n=1){if(!this.circleShader)throw new Error("circleShader undefined");this.circleShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.uniform2fv(this.circleShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.circleShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.uniform1f(this.circleShader.uniforms.fillPercent,n),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawSelectionBox(e){if(this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.getCurrentDragMode()===6){this.drawCircle(e,this.opts.selectionBoxColor,.1);return}this.drawRect(e,this.opts.selectionBoxColor)}effectiveCanvasHeight(){return aP({canvasHeight:this.gl.canvas.height,bounds:this.opts.bounds,colorbarHeight:this.colorbarHeight})}effectiveCanvasWidth(){return lP({canvasWidth:this.gl.canvas.width,bounds:this.opts.bounds,legendPanelWidth:this.getLegendPanelWidth()})}getAllLabels(){return XI({meshes:this.meshes,documentLabels:this.document.labels})}getConnectomeLabels(){return KI({meshes:this.meshes,documentLabels:this.document.labels})}getBulletMarginWidth(){const e=this.getConnectomeLabels();return dP({labels:e,fontPx:this.fontPx,textHeight:(t,n)=>this.textHeight(t,n)})}getLegendPanelWidth(){const e=this.getConnectomeLabels();return hP({labels:e,showLegend:this.opts.showLegend,fontPx:this.fontPx,canvasWidth:this.gl.canvas.width,textWidth:(t,n)=>this.textWidth(t,n),getBulletMarginWidth:()=>this.getBulletMarginWidth()})}getLegendPanelHeight(e=1){const t=this.getConnectomeLabels();return fP({labels:t,fontPx:this.fontPx,panelScale:e,textHeight:(n,r)=>this.textHeight(n,r)})}reserveColorbarPanel(){const e=mP({fontPx:this.fontPx,boundsRegion:this.getBoundsRegion(),colorbarWidth:this.opts.colorbarWidth});return this.colorbarHeight=e.colorbarHeight,e.leftTopWidthHeight}drawColorbarCore(e=0,t=[0,0,0,0],n=!1,r=0,i=1,s){if(t[2]<=0||t[3]<=0)return;const o=this.fontPx;if(o<=0)return;this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let a=o;const l=3*o;let c=o;if(t[3]<l){if(t[3]<3)return;a=1,c=t[3]-2}this.gl.disable(this.gl.DEPTH_TEST),this.colorbarHeight=t[3]+1;const u=[t[0]+a,t[1],t[2]-2*a,c],d=[u[0]-1,u[1]-1,u[2]+2,u[3]+2];if(this.opts.showColorbarBorder&&this.drawRect(d,this.opts.crosshairColor),!this.colorbarShader)throw new Error("colorbarShader undefined");this.colorbarShader.use(this.gl),this.gl.activeTexture(we.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);const h=e;if(this.gl.uniform1f(this.colorbarShader.uniforms.layer,h),this.gl.uniform2fv(this.colorbarShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.disable(this.gl.CULL_FACE),n){const y=[u[0]+u[2],u[1],-u[2],u[3]];this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,y)}else this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,u);this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let f=0;if(s&&i<0&&n?(f=i,i=0):s&&r>0&&(f=r,r=0),r===i||o<1)return;const p=Math.abs(i-r);let[g,v]=m1(r,i);v<r&&(v+=g);function m(y){return y.toFixed(6).replace(/\.?0*$/,"")}let A=v;const x=[0,u[1]+u[3]-o*.5,2,o*.75],w=x[1]+x[3],b=1;for(;A<=i;){x[0]=u[0]+(A-r)/p*u[2],this.drawRect(x);const y=m(b*A);this.drawTextBelow([x[0],w],y),A+=g}if(f!==0){const y=[u[0]+(f-r)/p*u[2],u[1]-u[3]*.25,2,u[3]*1.5];this.drawRect(y)}}drawColorbar(){const e=this.colormapLists,t=e.length;if(t<1)return;let n=0;for(let o=0;o<t;o++)e[o].visible&&n++;if(n<1)return;let r=this.reserveColorbarPanel();const i=3*this.fontPx;if(i<0)return;let s=r[2]/n;(r[2]<=0||r[3]<=0)&&(s=this.gl.canvas.width/n,r=[0,this.gl.canvas.height-i,s,i]),r[2]=s;for(let o=0;o<t;o++)e[o].visible&&(this.drawColorbarCore(o,r,e[o].negative,e[o].min,e[o].max,e[o].isColorbarFromZero),r[0]+=s)}textWidth(e,t){return bF({fontMets:this.fontMets,scale:e,str:t})}textHeight(e,t){return CF({fontMets:this.fontMets,scale:e,str:t})}drawChar(e,t,n){if(!this.fontShader)throw new Error("fontShader undefined");const r=this.fontMets.mets[n],i=e[0]+t*r.lbwh[0],s=-(t*r.lbwh[1]),o=t*r.lbwh[2],a=t*r.lbwh[3],l=e[1]+(s-a)+t;return this.gl.uniform4f(this.fontShader.uniforms.leftTopWidthHeight,i,l,o,a),this.gl.uniform4fv(this.fontShader.uniforms.uvLeftTopWidthHeight,r.uv_lbwh),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),t*r.xadv}drawLoadingText(e){if(!e)return;if(!this.canvas)throw new Error("canvas undefined");const[t,n,r,i]=this.getBoundsRegion();this.gl.viewport(t,n,r,i),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND);const s=t+r/2,o=n+i/2;this.drawTextBelow([s,o],e,3)}drawText(e,t,n=1,r=null){if(this.fontPx<=0)return;if(!this.fontShader)throw new Error("fontShader undefined");this.fontShader.use(this.gl);const i=this.fontPx*n;this.gl.enable(this.gl.BLEND),this.gl.uniform2f(this.fontShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height),r===null&&(r=this.opts.fontColor),this.gl.uniform4fv(this.fontShader.uniforms.fontColor,r);let s=i/this.fontMets.size*this.fontMets.distanceRange;s=Math.max(s,1),this.gl.uniform1f(this.fontShader.uniforms.screenPxRange,s);const o=new TextEncoder().encode(t);this.gl.bindVertexArray(this.genericVAO);for(let a=0;a<t.length;a++)e[0]+=this.drawChar(e,i,o[a]);this.gl.bindVertexArray(this.unusedVAO)}drawTextRight(e,t,n=1,r=null){this.fontPx<=0||(e[1]-=.5*this.fontPx,this.drawText(e,t,n,r))}drawTextLeft(e,t,n=1,r=null){if(this.fontPx<=0)return;const i=this.fontPx*n;e[0]-=this.textWidth(i,t),e[1]-=.5*i,this.drawText(e,t,n,r)}drawTextRightBelow(e,t,n=1,r=null){this.fontPx<=0||this.drawText(e,t,n,r)}drawTextBetween(e,t,n=1,r=null){if(this.fontPx<=0)return;const i=MF(e,t,this.fontPx,n,(o,a)=>this.textWidth(o,a)),s=DF(r,this.opts.crosshairColor);this.drawRect(i.rectLTWH,s),this.drawText([i.textX,i.textY],t,n,r)}drawTextBelow(e,t,n=1,r=null){if(this.fontPx<=0)return;if(!this.canvas)throw new Error("canvas undefined");const i=SF({xy:e,str:t,fontPx:this.fontPx,scale:n,canvasWidth:this.canvas.width},(s,o)=>this.textWidth(s,o));this.drawText([i.x,i.y],t,i.scale,r)}drawTextAbove(e,t,n=1,r=null){if(this.fontPx<=0)return;if(!this.canvas)throw new Error("canvas undefined");const i=EF({xy:e,str:t,fontPx:this.fontPx,scale:n,canvasWidth:this.canvas.width},(s,o)=>this.textWidth(s,o));this.drawText([i.x,i.y],t,i.scale,r)}updateInterpolation(e,t=!1){$I({gl:this.gl,layer:e,isForceLinear:t,isNearestInterpolation:this.opts.isNearestInterpolation,is2DSliceShader:this.opts.is2DSliceShader})}setAtlasOutline(e){this.opts.atlasOutline=e,this.updateGLVolume(),this.drawScene()}setInterpolation(e){this.opts.isNearestInterpolation=e;const t=this.volumes.length;if(!(t<1)){for(let n=0;n<t;n++)this.updateInterpolation(n);this.drawScene()}}calculateMvpMatrix2D(e,t,n,r=1/0,i=0,s=0,o=0,a=!1){this.gl.viewport(e[0],this.gl.canvas.height-(e[1]+e[3]),e[2],e[3]);let c=t[0],u=n[0],d=[c,t[1]],h=[u-c,n[1]-t[1]];a&&(d=[n[0],t[1]],h=[t[0]-n[0],n[1]-t[1]],c=-n[0],u=-t[0]);const f=2*Math.max(Math.abs(t[2]),Math.abs(n[2])),p=ge();let g=.01,v=f*8;if(r!==1/0){let y=a;o===0&&(s===0||s===180)&&(y=!y);let C=f*1.8-i;y||(C=f*1.8+i),v=C-r,g=C+r}Ml(p,c,u,t[1],n[1],v,g);const m=ge();m[0]=-1;const A=q(0,0,-f*1.8);Pi(m,m,A),Sl(m,m,or(270-o)),El(m,m,or(s-180));const x=ge();zt(x,m);const w=ge();Ot(w,x);const b=ge();return Gr(b,p,m),{modelViewProjectionMatrix:b,modelMatrix:m,normalMatrix:w,leftTopMM:d,fovMM:h}}swizzleVec3MM(e,t){return ND(e,t)}screenFieldOfViewVox(e=0){const t=fn(this.volumeObject3D.fieldOfViewDeObliqueMM);return this.swizzleVec3MM(t,e)}screenFieldOfViewMM(e=0,t=!1){if(this.volumes.length<1){let a=q(this.extentsMin[0],this.extentsMin[1],this.extentsMin[2]),l=q(this.extentsMax[0],this.extentsMax[1],this.extentsMax[2]);a=this.swizzleVec3MM(a,e),l=this.swizzleVec3MM(l,e);const c=Te();return Pe(c,l,a),c}if(!t&&!this.opts.isSliceMM)return this.screenFieldOfViewVox(e);const n=this.volumeObject3D.extentsMin,r=this.volumeObject3D.extentsMax;let i=q(n[0],n[1],n[2]),s=q(r[0],r[1],r[2]);i=this.swizzleVec3MM(i,e),s=this.swizzleVec3MM(s,e);const o=Te();return Pe(o,s,i),o}screenFieldOfViewExtendedVox(e=0){const t=this.volumes[0].extentsMinOrtho,n=this.volumes[0].extentsMaxOrtho;let r=q(t[0],t[1],t[2]),i=q(n[0],n[1],n[2]);const s=ge();r=this.swizzleVec3MM(r,e),i=this.swizzleVec3MM(i,e);const o=Te();return Pe(o,i,r),{mnMM:r,mxMM:i,rotation:s,fovMM:o}}screenFieldOfViewExtendedMM(e=0){if(this.volumes.length<1){let a=q(this.extentsMin[0],this.extentsMin[1],this.extentsMin[2]),l=q(this.extentsMax[0],this.extentsMax[1],this.extentsMax[2]);const c=ge();a=this.swizzleVec3MM(a,e),l=this.swizzleVec3MM(l,e);const u=Te();return Pe(u,l,a),{mnMM:a,mxMM:l,rotation:c,fovMM:u}}if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");const t=this.volumeObject3D.extentsMin,n=this.volumeObject3D.extentsMax;let r=q(t[0],t[1],t[2]),i=q(n[0],n[1],n[2]);const s=ge();r=this.swizzleVec3MM(r,e),i=this.swizzleVec3MM(i,e);const o=Te();return Pe(o,i,r),{mnMM:r,mxMM:i,rotation:s,fovMM:o}}drawSliceOrientationText(e,t,n=[NaN,NaN]){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let r="S";t===0&&(r="A");let i=this.opts.isRadiologicalConvention?"R":"L";t===2&&(i=this.opts.sagittalNoseLeft?"A":"P");let s="I";t===0&&(s="P");let o=this.opts.isRadiologicalConvention?"L":"R";if(t===2&&(o=this.opts.sagittalNoseLeft?"P":"A"),this.opts.isCornerOrientationText){this.drawTextRightBelow([e[0],e[1]],i+r);return}let a=!0,l=!0;const c=this.opts.showAllOrientationMarkers,u=this.opts.showAllOrientationMarkers;if(!isNaN(n[0])){const d=this.fontPx+2;n[1]>d&&(this.drawTextBelow([e[0]+e[2]*.5,e[1]+n[1]-d],r),a=!1);const h=this.textWidth(d,i)+2;n[0]>h&&(this.drawTextRight([e[0]+n[0]-h,e[1]+e[3]*.5],i),l=!1)}a&&this.drawTextBelow([e[0]+e[2]*.5,e[1]],r),l&&this.drawTextRight([e[0],e[1]+e[3]*.5],i),c&&this.drawTextAbove([e[0]+e[2]*.5,e[1]+e[3]],s),u&&this.drawTextLeft([e[0]+e[2],e[1]+e[3]*.5],o)}xyMM2xyzMM(e,t){return uP({axCorSag:e,sliceFrac:t,frac2mm:n=>this.frac2mm(n),swizzleVec3MM:(n,r)=>this.swizzleVec3MM(n,r)})}draw2DMain(e,t,n=NaN){let r=new Float32Array([0,0,0]);this.volumes.length>0&&(r=new Float32Array(this.volumes[0].frac2mm.slice()));let i=this.screenFieldOfViewExtendedMM(t),s=ge();!this.opts.isSliceMM&&this.volumes.length>0&&(r=new Float32Array(this.volumes[0].frac2mmOrtho.slice()),s=Qe(this.volumes[0].mm2ortho),i=this.screenFieldOfViewExtendedVox(t));let o=this.opts.isRadiologicalConvention&&t<2;n===1/0||n===-1/0?(o=n!==1/0,t===1&&(o=!o)):this.opts.sagittalNoseLeft&&t===2&&(o=!o);let a=0,l=0;t===2?l=o?90:-90:t===1?l=o?180:0:(l=o?180:0,a=o?-90:90);const c=this.gl;let u=!1;if(e[2]===0||e[3]===0){u=!0;const A=c.canvas.width/i.fovMM[0],x=c.canvas.height/i.fovMM[1],w=Math.min(A,x),b=A/w,y=x/w;i.fovMM[0]*=b,i.fovMM[1]*=y;let C=(i.mnMM[0]+i.mxMM[0])*.5;i.mnMM[0]=C-i.fovMM[0]*.5,i.mxMM[0]=C+i.fovMM[0]*.5,C=(i.mnMM[1]+i.mxMM[1])*.5,i.mnMM[1]=C-i.fovMM[1]*.5,i.mxMM[1]=C+i.fovMM[1]*.5,e=[0,0,c.canvas.width,c.canvas.height]}if(isNaN(n)){const A=this.scene.pan2Dxyzmm,x=this.swizzleVec3MM(q(A[0],A[1],A[2]),t),w=this.scene.pan2Dxyzmm[3];i.mnMM[0]-=x[0],i.mxMM[0]-=x[0],i.mnMM[1]-=x[1],i.mxMM[1]-=x[1],i.mnMM[0]/=w,i.mxMM[0]/=w,i.mnMM[1]/=w,i.mxMM[1]/=w}let d=2;t===1&&(d=1),t===2&&(d=0);let h=this.scene.crosshairPos[d],f=this.frac2mm(this.scene.crosshairPos);!isNaN(n)&&n!==1/0&&n!==-1/0&&(f=this.frac2mm([.5,.5,.5]),f[d]=n,h=this.mm2frac(f)[d]);const p=f[d],g=c.canvas.height-e[1]-e[3],v=[e[0],g,e[2],e[3]];this.clearBounds(c.DEPTH_BUFFER_BIT,v),c.viewport(v[0],v[1],v[2],v[3]);let m=this.calculateMvpMatrix2D(e,i.mnMM,i.mxMM,1/0,0,l,a,o);if(n===1/0||n===-1/0){const A=e.slice();this.draw3D(e,m.modelViewProjectionMatrix,m.modelMatrix,m.normalMatrix,l,a);const x=this.screenSlices[this.screenSlices.length-1];x.leftTopWidthHeight=A,x.axCorSag=t,x.sliceFrac=1/0,x.AxyzMxy=this.xyMM2xyzMM(t,h),x.leftTopMM=m.leftTopMM,x.fovMM=m.fovMM;return}if(c.enable(c.DEPTH_TEST),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.disable(c.BLEND),c.depthFunc(c.ALWAYS),c.disable(c.CULL_FACE),this.volumes.length>0){let A=this.sliceMMShader;if(this.opts.is2DSliceShader&&(A=this.slice2DShader),this.opts.isV1SliceShader&&(A=this.sliceV1Shader),this.customSliceShader&&(A=this.customSliceShader),!A)throw new Error("slice Shader undefined");A.use(this.gl),c.uniform1f(A.uniforms.overlayOutlineWidth,this.overlayOutlineWidth),c.uniform1f(A.uniforms.overlayAlphaShader,this.overlayAlphaShader),c.uniform1i(A.uniforms.isAlphaClipDark,this.isAlphaClipDark?1:0),c.uniform1i(A.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),c.uniform1f(A.uniforms.drawOpacity,this.drawOpacity),c.uniform1f(A.uniforms.drawRimOpacity,this.drawRimOpacity),c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.uniform1f(A.uniforms.opacity,this.volumes[0].opacity),c.uniform1i(A.uniforms.axCorSag,t),c.uniform1f(A.uniforms.slice,h),c.uniformMatrix4fv(A.uniforms.frac2mm,!1,r),c.uniformMatrix4fv(A.uniforms.mvpMtx,!1,m.modelViewProjectionMatrix.slice()),c.bindVertexArray(this.genericVAO),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.bindVertexArray(this.unusedVAO),this.screenSlices.push({leftTopWidthHeight:e,axCorSag:t,sliceFrac:h,AxyzMxy:this.xyMM2xyzMM(t,h),leftTopMM:m.leftTopMM,screen2frac:[],fovMM:m.fovMM})}if(c.depthMask(!0),c.depthFunc(c.LEQUAL),isNaN(n)&&this.drawCrosshairs3D(!0,1,m.modelViewProjectionMatrix,!0,this.opts.isSliceMM),this.opts.meshThicknessOn2D>0){this.opts.meshThicknessOn2D!==1/0&&(m=this.calculateMvpMatrix2D(e,i.mnMM,i.mxMM,this.opts.meshThicknessOn2D,p,l,a,o));const A=Qe(m.modelViewProjectionMatrix);Gr(A,A,s),this.drawMesh3D(!0,1,A,m.modelMatrix,m.normalMatrix,!0)}isNaN(n)&&this.drawCrosshairs3D(!1,.15,m.modelViewProjectionMatrix,!0,this.opts.isSliceMM),u&&this.opts.isOrientationTextVisible&&this.drawSliceOrientationText(e,t),this.readyForSync=!0}draw2D(e,t,n=NaN,r=[NaN,NaN]){const[i,s,o,a]=this.getBoundsRegion();let l;e[2]===0&&e[3]===0?this.opts.bounds?l=[i,s,o,a]:l=[0,0,this.gl.canvas.width,this.gl.canvas.height]:l=e.slice();const c=[NaN,NaN];if(r[0]===1/0){const u=this.sliceScale().volScale;let d=this.scaleSlice(u[0],u[1],[0,0],[l[2],l[3]]);t===1&&(d=this.scaleSlice(u[0],u[2],[0,0],[l[2],l[3]])),t===2&&(d=this.scaleSlice(u[1],u[2],[0,0],[l[2],l[3]])),r[0]=d[2],r[1]=d[3]}isNaN(r[0])?this.draw2DMain(l,t,n):(c[0]=Math.floor(.5*(l[2]-r[0])),c[1]=Math.floor(.5*(l[3]-r[1])),l[0]+=c[0],l[1]+=c[1],l[2]=r[0],l[3]=r[1],this.draw2DMain(l,t,n)),!(n===1/0||n===-1/0||t===4)&&l[2]!==0&&l[3]!==0&&this.opts.isOrientationTextVisible&&this.drawSliceOrientationText(l,t,c)}calculateMvpMatrix(e,t=[0,0,0,0],n,r){const i=xF({canvasWidth:this.gl.canvas.width,canvasHeight:this.gl.canvas.height,leftTopWidthHeight:t,azimuth:n,elevation:r,furthestFromPivot:this.furthestFromPivot,pivot3D:this.pivot3D,volScaleMultiplier:this.scene.volScaleMultiplier,position:this.position});return[i.mvpMatrix,i.modelMatrix,i.normalMatrix]}calculateModelMatrix(e,t){if(!this.back)throw new Error("back undefined");return Mf({azimuth:e,elevation:t,obliqueRAS:this.back.obliqueRAS})}calculateRayDirection(e,t){var n;return ox({azimuth:e,elevation:t,obliqueRAS:(n=this.back)==null?void 0:n.obliqueRAS})}sceneExtentsMinMax(e=!0){return Af({volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D},e)}setPivot3D(){const[e,t]=this.sceneExtentsMinMax(),n=wF({sceneMin:e,sceneMax:t});this.pivot3D=n.pivot3D,this.furthestFromPivot=n.furthestFromPivot,this.extentsMin=n.extentsMin,this.extentsMax=n.extentsMax}getMaxVols(){return yF({volumes:this.volumes})}detectPartialllyLoaded4D(){if(this.volumes.length<1)return!1;for(let e=0;e<this.volumes.length;e++)if(this.volumes[e].nFrame4D<this.volumes[e].hdr.dims[4])return!0;return!1}drawGraph(){if(this.getMaxVols()<2)return;const e=this.graph,[t,n,r,i]=this.getBoundsRegion();let s=0;if(e.autoSizeMultiplanar&&this.opts.sliceType===3)for(let X=0;X<this.screenSlices.length;X++){const H=this.screenSlices[X].axCorSag;if(H===0&&(s=this.screenSlices[X].leftTopWidthHeight[1]),H!==2)continue;const K=this.screenSlices[X].leftTopWidthHeight.slice();K[1]===s?(e.LTWH[0]=K[0]+K[2],e.LTWH[1]=K[1]):(e.LTWH[0]=K[0],e.LTWH[1]=K[1]+K[3]),e.LTWH[2]=K[2],e.LTWH[3]=K[2]}if(e.LTWH[0]=Math.max(t,e.LTWH[0]),e.LTWH[1]=Math.max(n,e.LTWH[1]),e.LTWH[2]=Math.min(r,e.LTWH[2]),e.LTWH[3]=Math.min(i,e.LTWH[3]),e.opacity<=0||e.LTWH[2]<=5||e.LTWH[3]<=5||Math.floor(e.LTWH[0]+e.LTWH[2])>t+r||Math.floor(e.LTWH[1]+e.LTWH[3])>n+i)return;e.backColor=[.15,.15,.15,e.opacity],e.lineColor=[1,1,1,1],this.opts.backColor[0]+this.opts.backColor[1]+this.opts.backColor[2]>1.5&&(e.backColor=[.95,.95,.95,e.opacity],e.lineColor=[0,0,0,1]);const o=.2,a=.3;e.lineColor[3]=o,e.textColor=e.lineColor.slice(),e.textColor[3]=1,e.lineThickness=3,e.gridLineThickness=1,e.lineAlpha=1,e.lines=[];const l=[];if(e.vols.length<1)this.volumes[0]!=null&&l.push(0);else for(let X=0;X<e.vols.length;X++){const H=e.vols[X];this.volumes[H]==null||this.volumes[H].nFrame4D<2||l.push(H)}if(l.length<1)return;const c=this.volumes[l[0]].nFrame4D;if(this.graph.selectedColumn=this.volumes[l[0]].frame4D,c<2){k.debug("Unable to generate a graph: Selected volume is 3D not 4D");return}for(let X=0;X<l.length;X++){e.lines[X]=[];const H=this.frac2vox(this.scene.crosshairPos),K=this.volumes[l[X]];let te=K.nFrame4D;te=Math.min(te,c);for(let ae=0;ae<te;ae++){const le=K.getValue(H[0],H[1],H[2],ae);e.lines[X].push(le)}}e.lineRGB=[[.8,0,0],[0,.7,0],[0,0,.9],[.7,.7,0],[.8,0,.8],[0,.7,.7],[.6,.6,.6],[0,0,0]];let u=e.lines[0][0],d=e.lines[0][0];for(let X=0;X<e.lines.length;X++)for(let H=0;H<e.lines[X].length;H++){const K=e.lines[X][H];u=Math.min(K,u),d=Math.max(K,d)}const h=this.volumes[l[0]].cal_min,f=this.volumes[l[0]].cal_max;if(e.isRangeCalMinMax&&h<f&&isFinite(h)&&isFinite(f)&&(u=h,d=f),e.normalizeValues&&d>u){const X=d-u;for(let H=0;H<e.lines.length;H++)for(let K=0;K<e.lines[H].length;K++){const te=e.lines[H][K];e.lines[H][K]=(te-u)/X}u=0,d=1}u>=d&&(d=u+1),this.drawRect(e.LTWH,e.backColor);const[p,g,v]=m1(u,d),m=Math.max(0,-1*Math.floor(Math.log(p)/Math.log(10)));u=Math.min(g,u),d=Math.max(v,d);function A(X){return X.toFixed(6).replace(/\.?0*$/,"")}let x=this.fontPx*.7;const w=r/this.uiData.dpr,b=i/this.uiData.dpr,y=w*b,C=800*600;y<C?x=0:x=Math.max(x,this.opts.fontMinPx);const S=x/this.fontPx;let E=0,T=g;if(x>0)for(;T<=d;){const X=T.toFixed(m),H=this.textWidth(x,X);E=Math.max(H,E),T+=p}const F=.05,M=Math.abs(e.LTWH[2]),B=Math.abs(e.LTWH[3]),P=[e.LTWH[0]+F*M+E,e.LTWH[1]+F*B,e.LTWH[2]-E-2*F*M,e.LTWH[3]-x-2.5*F*B];this.graph.LTWH=e.LTWH,this.graph.plotLTWH=P,this.drawRect(P,this.opts.backColor);const z=d-u,U=P[3]/z,G=P[2]/(e.lines[0].length-1),L=P[1]+P[3];T=g+.5*p;const Y=e.lineColor.slice();for(Y[3]=.5*e.lineColor[3];T<=d;){const X=L-(T-u)*U;this.drawLine([P[0],X,P[0]+P[2],X],e.gridLineThickness,Y),T+=p}T=g;const j=.5*e.gridLineThickness;for(;T<=d;){const X=L-(T-u)*U;this.drawLine([P[0]-j,X,P[0]+P[2]+e.gridLineThickness,X],e.gridLineThickness,e.lineColor);const H=T.toFixed(m);x>0&&this.drawTextLeft([P[0]-6,X],H,S,e.textColor),T+=p}let $=1;for(;e.lines[0].length/$>20;)$*=5;for(let X=0;X<e.lines[0].length;X+=$){const H=X*G+P[0];let K=e.gridLineThickness;if(X%2===1)K*=.5,this.drawLine([H,P[1],H,P[1]+P[3]],K,Y);else{const te=A(X);x>0&&this.drawTextBelow([H,2+P[1]+P[3]],te,S,e.textColor),this.drawLine([H,P[1],H,P[1]+P[3]],K,e.lineColor)}}for(let X=0;X<e.lines.length;X++){let H=[1,0,0,e.lineAlpha];X<e.lineRGB.length&&(H=[e.lineRGB[X][0],e.lineRGB[X][1],e.lineRGB[X][2],e.lineAlpha]);for(let K=1;K<e.lines[X].length;K++){const te=(K-1)*G,ae=K*G,le=(e.lines[X][K-1]-u)*U,De=(e.lines[X][K]-u)*U,fe=[P[0]+te,P[1]+P[3]-le,P[0]+ae,P[1]+P[3]-De];this.drawLine(fe,e.lineThickness,H)}}if(e.selectedColumn>=0&&e.selectedColumn<e.lines[0].length){const X=e.selectedColumn*G+P[0];this.drawLine([X,P[1],X,P[1]+P[3]],e.lineThickness,[e.lineRGB[0][0],e.lineRGB[0][1],e.lineRGB[0][2],a])}x>0&&e.LTWH[1]+e.LTWH[3]>P[1]+P[3]+x*2.4&&this.drawTextBelow([P[0]+.5*P[2],P[1]+P[3]+x*1.2],"Volume",S,e.textColor),this.detectPartialllyLoaded4D()&&this.drawTextBelow([P[0]+P[2],P[1]+P[3]+x*.5],"...",S,e.textColor)}depthPicker(e,t){if(!this.uiData.mouseDepthPicker)return;this.uiData.mouseDepthPicker=!1;const n=this.gl,r=this.mousePos[0]*e[2]/e[2],i=n.canvas.height-this.mousePos[1]*e[3]/e[3]-1,s=new Uint8Array(4);if(n.readPixels(r,i,1,1,n.RGBA,n.UNSIGNED_BYTE,s),this.selectedObjectId=s[3],this.selectedObjectId===this.VOLUME_ID){this.scene.crosshairPos=new Float32Array(s.slice(0,3)).map(d=>d/255);return}const o=DD(s);if(o>1)return;const a=(this.mousePos[0]-e[0])/e[2],l=(n.canvas.height-this.mousePos[1]-e[1])/e[3],c=ID(a,l,o,t),u=this.mm2frac(c,0,!0);u[0]<0||u[0]>1||u[1]<0||u[1]>1||u[2]<0||u[2]>1||(this.scene.crosshairPos=this.mm2frac(c,0,!0))}drawImage3D(e,t,n){var r;iF({gl:this.gl,mvpMatrix:e,azimuth:t,elevation:n,volumesLength:this.volumes.length,volumeObject3D:this.volumeObject3D,unusedVAO:this.unusedVAO,renderShader:this.renderShader,pickingImageShader:this.pickingImageShader,mouseDepthPicker:this.uiData.mouseDepthPicker,backgroundMasksOverlays:this.backgroundMasksOverlays,gradientTextureAmount:this.gradientTextureAmount,gradientTexture:this.gradientTexture,drawBitmap:this.drawBitmap,renderDrawAmbientOcclusion:this.renderDrawAmbientOcclusion,drawOpacity:this.drawOpacity,paqdUniforms:this.opts.paqdUniforms,matRAS:this.back.matRAS,crosshairPos:this.scene.crosshairPos,clipPlaneDepthAziElevs:this.scene.clipPlaneDepthAziElevs,isClipPlanesCutaway:this.opts.isClipPlanesCutaway,obliqueRAS:(r=this.back)==null?void 0:r.obliqueRAS})}drawOrientationCube(e,t=0,n=0){if(!this.opts.isOrientCube)return;const r=.05*Math.min(e[2],e[3]);if(r<5)return;const i=this.gl;i.enable(i.CULL_FACE),i.cullFace(i.BACK),i.disable(i.DEPTH_TEST),this.orientCubeShader.use(this.gl),i.bindVertexArray(this.orientCubeShaderVAO);const s=ge(),o=ge();Ml(o,0,i.canvas.width,0,i.canvas.height,-10*r,10*r);let a=0;e[1]===0&&(a=i.canvas.height-this.effectiveCanvasHeight()),Pi(s,s,[1.8*r+e[0],a+1.8*r+e[1],0]),ev(s,s,[r,r,r]),Sl(s,s,or(270-n)),El(s,s,or(-t));const l=ge();Gr(l,o,s),i.uniformMatrix4fv(this.orientCubeShader.uniforms.u_matrix,!1,l),i.drawArrays(i.TRIANGLE_STRIP,0,168),i.bindVertexArray(this.unusedVAO),this.gl.disable(this.gl.CULL_FACE)}createOnLocationChange(e=NaN){const[t,n,r]=this.sceneExtentsMinMax(!0),i=Math.max(Math.max(r[0],r[1]),r[2]);function s(d){return Math.max(0,-Math.ceil(Math.log10(Math.abs(d))))}let o=s(i*.001);const a=this.frac2mm(this.scene.crosshairPos,0,!0);function l(d,h=0){return parseFloat(Number(d).toFixed(h))}let c=l(a[0],o)+""+l(a[1],o)+""+l(a[2],o);if(this.volumes.length>0&&this.volumes[0].nFrame4D>0&&(c+=""+l(this.volumes[0].frame4D)),this.volumes.length>0){let d=" = ";for(let p=0;p<this.volumes.length;p++){const g=this.volumes[p].mm2vox(a);let v=this.volumes[p].getValue(g[0],g[1],g[2],this.volumes[p].frame4D);if(o=3,this.volumes[p].colormapLabel!==null){const m=Math.round(v);if(this.volumes[p].hdr.intent_code===1002&&this.volumes[p].hdr.datatypeCode===2304){const A=this.volumes[p].getValues(g[0],g[1],g[2],this.volumes[p].frame4D);if(A[2]>2){const x=Math.round(100*A[2]/255);if(d+=this.volumes[p].colormapLabel.labels[A[0]]+` (${x}%)`,A[3]>2){const w=Math.round(100*A[3]/255);d+=" "+this.volumes[p].colormapLabel.labels[A[1]]+` (${w}%)`}}}else m>=0&&this.volumes[p].colormapLabel.labels&&m<this.volumes[p].colormapLabel.labels.length?d+=this.volumes[p].colormapLabel.labels[m]:d+="undefined("+l(v,o)+")"}else d+=l(v,o);this.volumes[p].imaginary&&(v=this.volumes[p].getValue(g[0],g[1],g[2],this.volumes[p].frame4D,!0),v>=0&&(d+="+"),d+=l(v,o)),d+="   "}c+=d;const h=this.back.dimsRAS,f=h[1]*h[2]*h[3];if(this.drawBitmap&&this.drawBitmap.length===f){const p=this.frac2vox(this.scene.crosshairPos),g=p[0]+p[1]*h[1]+p[2]*h[1]*h[2];c+=" "+this.drawLut.labels[this.drawBitmap[g]]}}const u={mm:this.frac2mm(this.scene.crosshairPos,0,!0),axCorSag:e,vox:this.frac2vox(this.scene.crosshairPos),frac:this.scene.crosshairPos,xy:[this.mousePos[0],this.mousePos[1]],values:this.volumes.map(d=>{const h=this.frac2mm(this.scene.crosshairPos,0,!0),f=d.mm2vox(h),p=d.getValue(f[0],f[1],f[2],d.frame4D);return{name:d.name,value:p,id:d.id,mm:h,vox:f}}),string:c};this.onLocationChange(u)}addLabel(e,t,n,r,i){const s={textColor:this.opts.legendTextColor,textScale:1,textAlignment:"left",lineWidth:0,lineColor:this.opts.legendTextColor,lineTerminator:"none",bulletScale:0,bulletColor:this.opts.legendTextColor},o=t?{...s,...t}:{...s},a=new mf(e,{...o},n,r,i);return this.document.labels.push(a),a}calculateScreenPoint(e,t,n){const r=Un();return At(r,[...e,1],t),r[3]!==0&&(r[0]=(r[0]/r[3]+1)*.5*n[2],r[1]=(1-r[1]/r[3])*.5*n[3],r[2]/=r[3],r[0]+=n[0],r[1]+=n[1]),r}getLabelAtPoint(e){const t=this.legendFontScaling,n=this.fontPx*t,r=this.fontPx*t;for(const c of this.document.labels){if(c.anchor==null||c.anchor===0)continue;const u=this.fontPx*c.style.textScale*t,d=this.textHeight(u,c.text),h=this.textWidth(u,c.text);if(!(c.anchor&1&&e[0]>h)&&!(c.anchor&2&&(e[0]<(this.gl.canvas.width-h)/2||e[0]>(this.gl.canvas.width+h)/2))&&!(c.anchor&4&&e[0]<this.gl.canvas.width-h)&&!(c.anchor&8&&(e[1]<r/2||e[1]>d+r/2))&&!(c.anchor&16&&(e[1]<(this.gl.canvas.height-d-r)/2||e[1]>(this.gl.canvas.height+d-r/2)/2))&&!(c.anchor&32&&(e[1]<this.gl.canvas.height-d-r||e[1]>this.gl.canvas.height-r/2)))return c}k.debug("screenPoint",e);const i=this.getLegendPanelHeight(t),s=this.getLegendPanelWidth(),o=this.gl.canvas.width-s;let a=(this.canvas.height-i)/2;if(k.debug("panelrect",o,a,o+s,a+i),e[0]<o||e[1]<a||e[0]>o+s||e[1]>a+i)return null;const l=this.getConnectomeLabels();for(const c of l){const u=this.fontPx*c.style.textScale*t,d=this.textHeight(u,c.text);if(e[1]>=a&&e[1]<=a+d+n/2)return k.debug(`label clicked ${c.text}`),c;a+=d,a+=n/2}return null}drawLabelLine(e,t,n,r,i=!1){const s=Array.isArray(e.points)&&Array.isArray(e.points[0])?e.points:[e.points];for(const o of s){const a=this.calculateScreenPoint(o,n,r);i?this.drawDottedLine([...t,a[0],a[1]],e.style.lineWidth,e.style.lineColor):this.draw3DLine(t,[a[0],a[1],a[2]],e.style.lineWidth,e.style.lineColor)}}draw3DLabel(e,t,n,r,i,s,o,a=1){const l=e.text,c=t[0],u=t[1],d=this.fontPx*a,h=this.textHeight(e.style.textScale,l)*d;if(e.style.lineWidth>0&&Array.isArray(e.points)&&this.drawLabelLine(e,[c,u+h],n,r,o),e.style.bulletScale){const g=e.style.bulletScale*h,v=h-g,m=u+v/2+g/2,A=c+(i-g)/2;this.drawCircle([A,m,g,g],e.style.bulletColor)}let f=c;if(s)if(e.style.textAlignment!=="left"){const g=this.textWidth(e.style.textScale,e.text)*d;if(e.style.textAlignment==="right")f=c+s-d*1.5-g;else{const v=s-(i||d);f+=(v-g)/2}}else f+=i;const p=e.style.textScale;this.drawText([f,u],l,p,e.style.textColor)}draw3DLabels(e,t,n=!1){const r=this.getConnectomeLabels();if(!this.opts.showLegend||r.length===0)return;let i=this.getLegendPanelHeight(1);if(!this.canvas||i<1)return;const s=this.gl;if(s.disable(s.CULL_FACE),s.viewport(0,0,this.canvas.width,this.canvas.height),this.legendFontScaling=1,i>this.canvas.height){const f=10*this.uiData.dpr;this.legendFontScaling=Math.max(this.canvas.height-f,1)/i,k.debug(`Legend too large for screen, font reduction factor x${this.legendFontScaling}`),i=this.getLegendPanelHeight(this.legendFontScaling)}const o=this.fontPx*this.legendFontScaling,a=this.getBulletMarginWidth(),l=this.getLegendPanelWidth(),c=s.canvas.width-l;let u=(this.canvas.height-i)/2;this.drawRect([s.canvas.width-l,u,l-o,i],this.opts.legendBackgroundColor);const d=s.getParameter(s.BLEND),h=s.getParameter(s.DEPTH_FUNC);n||(s.disable(s.BLEND),s.depthFunc(s.LEQUAL));for(const f of r){this.draw3DLabel(f,[c,u],e,t,a,l,n,this.legendFontScaling);const p=this.fontPx*f.style.textScale,g=this.textHeight(p,f.text)*this.legendFontScaling;u+=g,u+=o/2}n||(s.depthFunc(h),d&&s.enable(s.BLEND))}drawAnchoredLabels(){const e=this.fontPx,t=this.document.labels.filter(n=>n.anchor!=null&&n.anchor!==0);for(const n of t){const r=n.text,i=this.textHeight(n.style.textScale,r)*e,s=this.textWidth(n.style.textScale,r)*e;let o,a;const c=this.fontPx*1,u=c;let d=c/4,h=0,f=0;n.anchor&1&&(o=0),n.anchor&4&&(o=this.canvas.width-s,h-=c/4),n.anchor&2&&(o=(this.canvas.width-s)/2,h-=c/4,d+=c/4),n.anchor&8&&(a=0),n.anchor&16&&(a=(this.canvas.height-i-c)/2,f-=c/4),n.anchor&32&&(a=this.canvas.height-i-c,f-=c/4),this.drawRect([o+h,a+f,s+d,i+u],n.style.backgroundColor),this.draw3DLabel(n,[o,a])}}draw3D(e=[0,0,0,0],t=null,n=null,r=null,i=null,s=0){const o=this.gl,[a,l,c,u]=this.getBoundsRegion();let d=[...e];(d[2]===0||d[3]===0)&&(d=this.opts.bounds?[a,l,c,u]:[0,0,o.canvas.width,o.canvas.height]);const h=i!==null;this.setPivot3D(),h||(i=this.scene.renderAzimuth,s=this.scene.renderElevation),t===null&&([t,n,r]=this.calculateMvpMatrix(null,d,i,s));const f=[...d];this.screenSlices.push({leftTopWidthHeight:d.slice(),axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[TD(n),0]});const p=[d[0],o.canvas.height-d[3]-d[1],d[2],d[3]];if(d[1]=o.canvas.height-d[3]-d[1],o.clear(o.DEPTH_BUFFER_BIT),o.enable(o.DEPTH_TEST),o.depthFunc(o.ALWAYS),o.depthMask(!0),this.draw3DLabels(t,f,!1),this.gl.viewport(p[0],p[1],p[2],p[3]),this.volumes.length>0&&(this.updateInterpolation(0,!0),this.updateInterpolation(1,!0),this.drawImage3D(t,i,s)),this.updateInterpolation(0),this.updateInterpolation(1),h||this.drawCrosshairs3D(!0,1,t),this.drawMesh3D(!0,1,t,n,r),this.uiData.mouseDepthPicker){this.depthPicker(d,t),this.createOnLocationChange(),this.draw3D(f,t,n,r,i,s);return}this.opts.meshXRay>0&&this.drawMesh3D(!1,this.opts.meshXRay,t,n,r),this.gl.disable(this.gl.CULL_FACE),this.draw3DLabels(t,f,!1),o.viewport(d[0],d[1],d[2],d[3]),h||this.drawCrosshairs3D(!1,.15,t),o.viewport(a,l,c,u),this.drawOrientationCube(d,i,s);const g="azimuth: "+this.scene.renderAzimuth.toFixed(0)+" elevation: "+this.scene.renderElevation.toFixed(0);return this.readyForSync=!0,this.sync(),this.draw3DLabels(t,f,!0),g}drawMesh3D(e=!0,t=1,n,r,i,s=!1){this.meshes.length<1||(n||([n,r,i]=this.calculateMvpMatrix(this.volumeObject3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),vF({gl:this.gl,meshes:this.meshes,isDepthTest:e,alpha:t,mvpMatrix:n,modelMatrix:r,normalMatrix:i,is2D:s,meshShaders:this.meshShaders,pickingMeshShader:this.pickingMeshShader,fiberShader:this.fiberShader,mouseDepthPicker:this.uiData.mouseDepthPicker,matCapTexture:this.matCapTexture,unusedVAO:this.unusedVAO,meshXRay:this.opts.meshXRay,meshThicknessOn2D:this.opts.meshThicknessOn2D,frac2mm:o=>this.frac2mm(o,0,this.opts.isSliceMM),crosshairPos:this.scene.crosshairPos}),this.readyForSync=!0)}drawCrosshairs3D(e=!0,t=1,n=null,r=!1,i=!0){var f,p;if(!this.opts.show3Dcrosshair&&!r||this.opts.crosshairWidth<=0&&r)return;const s=this.gl,o=this.frac2mm(this.scene.crosshairPos,0,i);let a=1;const[l,c,u]=this.sceneExtentsMinMax(i);if(this.volumes.length>0){if(!this.back)throw new Error("back undefined");a=.5*Math.min(Math.min(this.back.pixDims[1],this.back.pixDims[2]),this.back.pixDims[3])}else(u[0]<50||u[0]>1e3)&&(a=u[0]*.02);if(a*=this.opts.crosshairWidth,((f=this.opts)==null?void 0:f.crosshairWidthUnit)==="percent"&&(a=u[0]*this.opts.crosshairWidth*.5*.01),((p=this.opts)==null?void 0:p.crosshairWidthUnit)==="mm"&&(a=this.opts.crosshairWidth*.5),(this.crosshairs3D===null||this.crosshairs3D.mm[0]!==o[0]||this.crosshairs3D.mm[1]!==o[1]||this.crosshairs3D.mm[2]!==o[2])&&(this.crosshairs3D!==null&&(s.deleteBuffer(this.crosshairs3D.indexBuffer),s.deleteBuffer(this.crosshairs3D.vertexBuffer)),this.crosshairs3D=qr.generateCrosshairs(this.gl,1,o,l,c,a,20,this.opts.crosshairGap),this.crosshairs3D.mm=o),!this.surfaceShader)throw new Error("surfaceShader undefined");const d=this.surfaceShader;d.use(this.gl),n==null&&([n]=this.calculateMvpMatrix(this.crosshairs3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),s.uniformMatrix4fv(d.uniforms.mvpMtx,!1,n),s.disable(s.CULL_FACE),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.crosshairs3D.indexBuffer),s.enable(s.DEPTH_TEST);const h=[...this.opts.crosshairColor];e?(s.disable(s.BLEND),s.depthFunc(s.LEQUAL)):(s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.depthFunc(s.ALWAYS)),h[3]=t,s.uniform4fv(d.uniforms.surfaceColor,h),s.bindVertexArray(this.crosshairs3D.vao),s.drawElements(s.TRIANGLES,this.crosshairs3D.indexCount,s.UNSIGNED_INT,0),s.bindVertexArray(this.unusedVAO)}mm2frac(e,t=0,n=!1){return Wv(e,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,volIdx:t,isSliceMM:n||this.opts.isSliceMM})}vox2frac(e,t=0){return FD(e,this.volumes,t)}frac2vox(e,t=0){return RD(e,this.volumes,t)}moveCrosshairInVox(e,t,n){const r=this.frac2vox(this.scene.crosshairPos),i=tP({x:e,y:t,z:n,currentVox:r,dimsRAS:this.volumes[0].dimsRAS});this.scene.crosshairPos=this.vox2frac(i.newVox),this.createOnLocationChange(),this.opts.is2DSliceShader&&i.zChanged&&(this.updateGLVolume(),this.refreshDrawing(!1)),this.drawScene()}frac2mm(e,t=0,n=!1){return ac(e,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,volIdx:t,isSliceMM:n||this.opts.isSliceMM})}screenXY2TextureFrac(e,t,n,r=!0){return vf(e,t,this.screenSlices,n,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,restrict0to1:r})}canvasPos2frac(e){return BD(e,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM})}frac2canvasPosWithTile(e,t){return UD(e,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,preferredSliceType:t})}frac2canvasPos(e){return VD(e,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,sliceType:this.opts.sliceType})}scaleSlice(e,t,n=[0,0],r=[0,0]){const i=r[0]===0?this.effectiveCanvasWidth()-n[0]:r[0]-n[0],s=r[1]===0?this.effectiveCanvasHeight()-n[1]:r[1]-n[1];let o=i/e;t*o>s&&(o=s/t);const a=e*o,l=t*o;return[(i-a)*.5,(s-l)*.5,a,l,o]}drawThumbnail(){if(!this.bmpShader)throw new Error("bmpShader undefined");this.bmpShader.use(this.gl);const[e,t,n,r]=this.getBoundsRegion();this.gl.uniform2f(this.bmpShader.uniforms.canvasWidthHeight,n,r);const i=NF(n,r,this.bmpTextureWH),s=e+i.left,o=t+i.top;this.gl.uniform4f(this.bmpShader.uniforms.leftTopWidthHeight,s,o,i.width,i.height),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawLine(e,t=1,n=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),n[3]<0&&(n=this.opts.crosshairColor),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,n),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}draw3DLine(e,t,n=1,r=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.line3DShader)throw new Error("line3DShader undefined");this.line3DShader.use(this.gl),r[3]<0&&(r=this.opts.crosshairColor),this.gl.uniform4fv(this.line3DShader.uniforms.lineColor,r),this.gl.uniform2fv(this.line3DShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.line3DShader.uniforms.thickness,n),this.gl.uniform2fv(this.line3DShader.uniforms.startXY,e),this.gl.uniform3fv(this.line3DShader.uniforms.endXYZ,t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawDottedLine(e,t=1,n=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl);const r=n[3]<0?[...this.opts.crosshairColor]:[...n];r[3]=.3,this.gl.uniform4fv(this.lineShader.uniforms.lineColor,r),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t);const i=PF(e,this.fontPx,1);for(const s of i)this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,[s.startX,s.startY,s.endX,s.endY]),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);this.gl.bindVertexArray(this.unusedVAO)}drawGraphLine(e,t=[1,0,0,.5],n=2){this.drawLine(e,n,t)}drawCrossLinesMM(e,t,n,r,i){if(e<0||this.screenSlices.length<=e)return;const s=this.screenSlices[e];let o=s.sliceFrac;o===1/0&&k.debug("Rendering approximate cross lines in world view mode"),o===1/0&&(o=.5);const{linesH:l,linesV:c}=x1(t,n,r,i),u=Math.max(1,this.opts.crosshairWidth),d=h=>{const f=pS(0,0);return f[0]=s.leftTopWidthHeight[0]+(h[0]-s.leftTopMM[0])/s.fovMM[0]*s.leftTopWidthHeight[2],f[1]=s.leftTopWidthHeight[1]+s.leftTopWidthHeight[3]-(h[1]-s.leftTopMM[1])/s.fovMM[1]*s.leftTopWidthHeight[3],f};if(l.length>0&&t===0){const h=o,f=1;for(let p=0;p<l.length;p++){const g=this.frac2mm([.5,.5,.5]);g[f]=l[p];let v=this.mm2frac(g);v=v[f];let m=this.frac2mm([0,v,h]);m=je(m,[0,1,2]);let A=this.frac2mm([1,v,h]);A=je(A,[0,1,2]),m=d(m),A=d(A),this.drawLine([m[0],m[1],A[0],A[1]],u)}}if(l.length>0&&t===1){const h=o,f=2;for(let p=0;p<l.length;p++){const g=this.frac2mm([.5,.5,.5]);g[f]=l[p];let v=this.mm2frac(g);v=v[f];let m=this.frac2mm([0,h,v]);m=je(m,[0,2,1]);let A=this.frac2mm([1,h,v]);A=je(A,[0,2,1]),m=d(m),A=d(A),this.drawLine([m[0],m[1],A[0],A[1]],u)}}if(l.length>0&&t===2){const h=o,f=2;for(let p=0;p<l.length;p++){const g=this.frac2mm([.5,.5,.5]);g[f]=l[p];let v=this.mm2frac(g);v=v[f];let m=this.frac2mm([h,0,v]);m=je(m,[1,2,0]);let A=this.frac2mm([h,1,v]);A=je(A,[1,2,0]),m=d(m),A=d(A),this.drawLine([m[0],m[1],A[0],A[1]],u)}}if(c.length>0&&t===0){const h=o,f=0;for(let p=0;p<c.length;p++){const g=this.frac2mm([.5,.5,.5]);g[f]=c[p];let v=this.mm2frac(g);v=v[f];let m=this.frac2mm([v,0,h]);m=je(m,[0,1,2]);let A=this.frac2mm([v,1,h]);A=je(A,[0,1,2]),m=d(m),A=d(A),this.drawLine([m[0],m[1],A[0],A[1]],u)}}if(c.length>0&&t===1){const h=o,f=0;for(let p=0;p<c.length;p++){const g=this.frac2mm([.5,.5,.5]);g[f]=c[p];let v=this.mm2frac(g);v=v[f];let m=this.frac2mm([v,h,0]);m=je(m,[0,2,1]);let A=this.frac2mm([v,h,1]);A=je(A,[0,2,1]),m=d(m),A=d(A),this.drawLine([m[0],m[1],A[0],A[1]],u)}}if(c.length>0&&t===2){const h=o,f=1;for(let p=0;p<c.length;p++){const g=this.frac2mm([.5,.5,.5]);g[f]=c[p];let v=this.mm2frac(g);v=v[f];let m=this.frac2mm([h,v,0]);m=je(m,[1,2,0]);let A=this.frac2mm([h,v,1]);A=je(A,[1,2,0]),m=d(m),A=d(A),this.drawLine([m[0],m[1],A[0],A[1]],u)}}}drawCrossLines(e,t,n,r,i){if(e<0||this.screenSlices.length<=e)return;if(this.opts.isSliceMM)return this.drawCrossLinesMM(e,t,n,r,i);if(this.screenSlices[e].sliceFrac===1/0)return this.drawCrossLinesMM(e,t,n,r,i);const s=this.screenSlices[e],{linesH:o,linesV:a}=x1(t,n,r,i);if(o.length>0){const l=s.leftTopWidthHeight.slice();let c=2;t===0&&(c=1);const u=this.frac2mm([.5,.5,.5]);for(let d=0;d<o.length;d++){u[c]=o[d];const h=this.mm2frac(u);this.drawRect([l[0],l[1]+l[3]-h[c]*l[3],l[2],1])}}if(a.length>0){const l=s.leftTopWidthHeight.slice(),c=s.fovMM[0]<0;let u=0;t===2&&(u=1);const d=this.frac2mm([.5,.5,.5]);for(let h=0;h<a.length;h++){d[u]=a[h];const f=this.mm2frac(d);c?this.drawRect([l[0]+(l[2]-f[u]*l[2]),l[1],1,l[3]]):this.drawRect([l[0]+f[u]*l[2],l[1],1,l[3]])}}}drawMosaic(e){var v;this.screenSlices=[];const[t,n,r,i]=this.getBoundsRegion(),s=this.screenFieldOfViewMM(0,!0),o=this.screenFieldOfViewMM(0);e=e.replaceAll(";"," ;").trim();const a=[],l=[],c=[],u=e.split(/\s+/);let d=1;const h=this.fontPx;let f=0,p=0,g=0;(v=this.volumes[0])!=null&&v.dims||(g=Math.ceil(this.opts.tileMargin*.3));for(let m=0;m<2;m++){let A=!1,x=!1,w=0,b=0,y=0,C=0,S=!1,E=0,T=0,F=0,M=0;for(let z=0;z<u.length;z++){const U=u[z];if(U.includes("X")){x=!0;continue}if(U.includes("L")){S=!U.includes("-");continue}if(U.includes("H")){z++,T=Math.abs(Math.max(0,Math.min(1,parseFloat(u[z]))));continue}if(U.includes("V")){z++;continue}if(U.includes("A")){E=0;continue}if(U.includes("C")){E=1;continue}if(U.includes("S")){E=2;continue}if(U.includes("R")){A=!0;continue}if(U.includes(";")){y+=w,C=Math.max(C,b+F),w=0,b=0,F=0;continue}M=F,T>0&&!A&&(M=Math.round(M*(1-T))),b+=M,M=0;const G=parseFloat(U);if(isNaN(G))continue;let L=0,Y=o;if(A&&(Y=s),E===2?M=Y[1]:M=Y[0],E===0?L=Y[1]:L=Y[2],m===0)A||(E===0&&a.push(G),E===1&&l.push(G),E===2&&c.push(G));else{const j=[t+f+d*b,n+p+d*y,d*M,d*L];if(this.fontPx=S?h:0,A){let $=G<0?-1/0:1/0;Object.is(G,-0)&&($=-1/0),this.draw2D(j,E,$)}else this.draw2D(j,E,G);x&&this.drawCrossLines(this.screenSlices.length-1,E,a,l,c),A=!1,x=!1}F=M,b+=g,w=Math.max(w,L)}if(y+=w,C=Math.max(C,b+F),C<=0||y<=0)break;const B=(r-2*this.opts.tileMargin-g)/C,P=(i-2*this.opts.tileMargin)/y;d=Math.min(B,P),this.opts.centerMosaic?(f=Math.floor(.5*(r-C*d)),p=Math.floor(.5*(i-y*d))):(f=this.opts.tileMargin,p=this.opts.tileMargin)}this.fontPx=h}calculateWidthHeight(e,t,n,r){return eF(e,t,n,r)}getBoundsRegionCSS(){const e=this.gl.canvas.getBoundingClientRect();return oP({bounds:this.opts.bounds,rectWidth:e.width,rectHeight:e.height})}eventInBounds(e){const t=this.gl.canvas.getBoundingClientRect();let n,r;if(e instanceof MouseEvent)n=e.clientX,r=e.clientY;else if(e instanceof TouchEvent){const o=e.touches[0]??e.changedTouches[0];if(!o)return!1;n=o.clientX,r=o.clientY}else n=e.clientX,r=e.clientY;const i=n-t.left,s=r-t.top;return pP({x:i,y:s,boundsRegion:this.getBoundsRegionCSS()})}cursorInBounds(){return gP({mouseX:this.mousePos[0],mouseY:this.mousePos[1],boundsRegion:this.getBoundsRegion()})}getBoundsRegion(){var r;const e=this.gl,t=((r=this.uiData)==null?void 0:r.dpr)||window.devicePixelRatio||1,n=e.canvas;return sP({bounds:this.opts.bounds,canvasWidth:e.canvas.width,canvasHeight:e.canvas.height,cssWidth:n.clientWidth,cssHeight:n.clientHeight,dpr:t})}inBounds(e,t){return qR({x:e,y:t,dpr:this.uiData.dpr,canvasHeight:this.gl.canvas.height,boundsRegion:this.getBoundsRegion()})}bindTextures(){this.gl.activeTexture(we.TEXTURE0_BACK_VOL),this.gl.bindTexture(this.gl.TEXTURE_3D,this.volumeTexture),this.gl.activeTexture(we.TEXTURE2_OVERLAY_VOL),this.gl.bindTexture(this.gl.TEXTURE_3D,this.overlayTexture),this.gl.activeTexture(we.TEXTURE8_PAQD),this.gl.bindTexture(this.gl.TEXTURE_3D,this.paqdTexture),this.gl.activeTexture(we.TEXTURE3_FONT),this.gl.bindTexture(this.gl.TEXTURE_2D,this.fontTexture),this.gl.activeTexture(we.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.activeTexture(we.TEXTURE5_MATCAP),this.gl.bindTexture(this.gl.TEXTURE_2D,this.matCapTexture),this.gl.activeTexture(we.TEXTURE6_GRADIENT),this.gl.bindTexture(this.gl.TEXTURE_3D,this.gradientTexture)}clearBounds(e=this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT,t){const n=this.gl,[r,i,s,o]=t??this.getBoundsRegion(),a=n.canvas.height-i-o;e&n.DEPTH_BUFFER_BIT&&n.clearDepth(1),n.enable(n.SCISSOR_TEST),n.scissor(r,a,s,o),e&n.COLOR_BUFFER_BIT&&n.clearColor(this.opts.backColor[0],this.opts.backColor[1],this.opts.backColor[2],this.opts.backColor[3]),n.clear(e),n.disable(n.SCISSOR_TEST)}drawBoundsBorder(){if(!this.opts.showBoundsBorder)return;const[e,t,n,r]=this.getBoundsRegion();this.drawBoundsBox([e,t,n,r],this.opts.boundsBorderColor,this.opts.selectionBoxLineThickness)}drawSceneCore(){var u,d,h,f,p;if(!this.initialized)return;this.colorbarHeight=0;const[e,t,n,r]=this.getBoundsRegion();if(this.gl.viewport(e,t,n,r),this.clearBounds(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.bindTextures(),this.bmpTexture&&this.thumbnailVisible){this.drawThumbnail();return}let i="";if(this.volumes.length===0||typeof this.volumes[0].dims>"u"){if(this.meshes.length>0){if(this.sliceMosaicString.length>0){this.opts.isColorbar&&this.reserveColorbarPanel(),this.drawMosaic(this.sliceMosaicString),this.opts.isColorbar&&this.drawColorbar();return}this.screenSlices=[],this.draw3D([e,t,n,r]),this.opts.isColorbar&&this.drawColorbar();return}this.drawLoadingText(this.opts.loadingText);return}const s=((d=(u=this.scene.clipPlaneDepthAziElevs)==null?void 0:u[this.uiData.activeClipPlaneIndex])==null?void 0:d[0])??2;if(IP({isDragging:this.uiData.isDragging,activeClipPlaneDepth:s,dragStartTileIndex:this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])})){const g=this.uiData.dragStart[0]-this.uiData.dragEnd[0],v=this.uiData.dragStart[1]-this.uiData.dragEnd[1],m=EP({startDepthAziElev:this.uiData.dragClipPlaneStartDepthAziElev,dragDeltaX:g,dragDeltaY:v});if(m.changed)return this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]=m.depthAziElev,this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}if(this.sliceMosaicString.length<1&&this.opts.sliceType===4){this.opts.isColorbar&&this.reserveColorbarPanel(),this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.opts.isColorbar&&this.reserveColorbarPanel();const a=this.getMaxVols(),l=this.opts.sliceType===3&&a>1&&this.graph.autoSizeMultiplanar&&this.graph.opacity>0;if(this.sliceMosaicString.length>0)this.drawMosaic(this.sliceMosaicString);else{const g=[0,0];let v=!1;if(this.screenSlices=[],this.customLayout&&this.customLayout.length>0){this.screenSlices=[];const{volScale:m}=this.sliceScale();for(const A of this.customLayout){const{sliceType:x,position:w,sliceMM:b}=A,y=[e+w[0]*n,t+w[1]*r,w[2]*n,w[3]*r];if(y[0]+y[2]>e+n&&(k.warn("adjusting slice width because it would have been clipped"),y[2]=e+n-y[0]),y[1]+y[3]>t+r&&(k.warn("adjusting slice height because it would have been clipped"),y[3]=t+r-y[1]),x===4)this.draw3D(y);else{const C=this.calculateWidthHeight(x,m,y[2],y[3]);this.draw2D(y,x,b??NaN,C)}}}else if(this.opts.sliceType===0||this.opts.sliceType===1||this.opts.sliceType===2){const{volScale:m}=this.sliceScale(),A=[e,t,n,r],x=this.calculateWidthHeight(this.opts.sliceType,m,A[2],A[3]);this.draw2D([0,0,0,0],this.opts.sliceType,NaN,x)}else{let m=function(Ce,Se){return[(Ce-1)*y+Ce*C,(Se-1)*y+Se*C]},A=!1;this.opts.multiplanarForceRender?(A=!0,this.opts.multiplanarForceRender?this.opts.multiplanarShowRender=1:this.opts.multiplanarShowRender=2,delete this.opts.multiplanarForceRender):this.opts.multiplanarShowRender===1&&(A=!0);const x=isFinite(this.drawPenLocation[0])&&this.opts.drawingEnabled,{volScale:w}=this.sliceScale(),b=w.slice();this.opts.multiplanarEqualSize&&(w[0]=1,w[1]=1,w[2]=1),typeof this.opts.multiplanarPadPixels!="number"&&k.debug("multiplanarPadPixels must be numeric");const y=parseFloat(`${this.opts.multiplanarPadPixels}`)*this.uiData.dpr;let C=this.opts.tileMargin*this.uiData.dpr;C<0&&(C=2*(2+Math.ceil(this.fontPx)));const[S,E,T,F]=this.getBoundsRegion();let M=[this.effectiveCanvasWidth(),this.effectiveCanvasHeight()];this.opts.heroImageFraction>0&&this.opts.heroImageFraction<1&&(A=!1,v=!0,M[0]>M[1]&&this.opts.multiplanarLayout!==3?g[0]=M[0]*this.opts.heroImageFraction:g[1]=M[1]*this.opts.heroImageFraction,M=[M[0]-g[0],M[1]-g[1]]);const B=this.scaleSlice(w[0]+w[1],w[1]+w[2],m(2,2),M),P=Math.max(Math.max(w[1],w[2]),w[0]),z=this.scaleSlice(w[0]+w[0]+w[1],Math.max(w[1],w[2]),m(3,1),M),U=this.scaleSlice(w[0]+w[0]+w[1]+P,Math.max(w[1],w[2]),m(4,1),M),G=this.scaleSlice(P,w[1]+w[2]+w[2],m(1,3),M),L=this.scaleSlice(P,w[1]+w[2]+w[2]+P,m(1,4),M);let Y=!x&&(a<2||!l),j=!1,$=!1,X=!1;this.opts.multiplanarLayout===1?j=!0:this.opts.multiplanarLayout===2?$=!0:this.opts.multiplanarLayout===3?X=!0:G[4]>z[4]&&G[4]>B[4]?j=!0:z[4]>B[4]?X=!0:$=!0;let H=B;if(j?(H=G,!v&&(A||this.opts.multiplanarShowRender===2&&L[4]>=G[4])?H=L:Y=!1):X&&(H=z,!v&&(A||this.opts.multiplanarShowRender===2&&U[4]>=z[4])?H=U:Y=!1),v){const Ce=g[0]===0?T:g[0],Se=g[1]===0?F:g[1];if(((h=this.opts)==null?void 0:h.heroSliceType)===0||((f=this.opts)==null?void 0:f.heroSliceType)===1||((p=this.opts)==null?void 0:p.heroSliceType)===2)this.draw2D([S,E,Ce,Se],this.opts.heroSliceType,NaN,[1/0,1/0]);else{const tt=H.slice();Ce===T&&(tt[0]=0),this.draw3D([S+tt[0],E,Ce,Se])}H[0]+=g[0],H[1]+=g[1],Y=!1}const K=w[0]*H[4]+C,te=w[1]*H[4]+C,ae=w[2]*H[4]+C,le=b[0]*H[4],De=b[1]*H[4],fe=b[2]*H[4];if(j){if(this.draw2D([S+H[0],E+H[1],K,te],0,NaN,[le,De]),this.draw2D([S+H[0],E+H[1]+te+y,K,ae],1,NaN,[le,fe]),this.draw2D([S+H[0],E+H[1]+te+y+ae+y,te,ae],2,NaN,[De,fe]),Y){const Ce=P*H[4];this.draw3D([S+H[0],E+H[1]+te+ae+ae+y*3,Ce,Ce])}}else if(X){if(this.draw2D([S+H[0],E+H[1],K,te],0,NaN,[le,De]),this.draw2D([S+H[0]+K+y,E+H[1],K,ae],1,NaN,[le,fe]),this.draw2D([S+H[0]+K+K+y*2,E+H[1],te,ae],2,NaN,[De,fe]),Y){const Ce=P*H[4];this.draw3D([S+H[0]+K+K+te+y*3,E+H[1],Ce,Ce])}}else $&&(A||(Y=!1),this.opts.multiplanarShowRender===2&&(Y=!0),v&&(Y=!1),this.draw2D([S+H[0],E+H[1]+ae+y,K,te],0,NaN,[le,De]),this.draw2D([S+H[0],E+H[1],K,ae],1,NaN,[le,fe]),this.draw2D([S+H[0]+K+y,E+H[1],te,ae],2,NaN,[De,fe]),Y&&this.draw3D([S+H[0]+K+y,E+H[1]+ae+y,te,te]))}}if(this.opts.isRuler&&this.drawRuler(),this.opts.isColorbar&&this.drawColorbar(),l&&this.drawGraph(),this.uiData.isDragging){if(this.uiData.mouseButtonCenterDown){this.dragForCenterButton([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.getCurrentDragMode()===4){this.dragForSlicer3D([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.getCurrentDragMode()===3){this.dragForPanZoom([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0)return;this.getCurrentDragMode()===2&&this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),this.getCurrentDragMode()===7&&this.drawAngleMeasurementTool();const g=this.getCurrentDragMode();if(g===1||g===6){const v=Math.abs(this.uiData.dragStart[0]-this.uiData.dragEnd[0]),m=Math.abs(this.uiData.dragStart[1]-this.uiData.dragEnd[1]);this.drawSelectionBox([Math.min(this.uiData.dragStart[0],this.uiData.dragEnd[0]),Math.min(this.uiData.dragStart[1],this.uiData.dragEnd[1]),v,m])}}for(const g of this.document.completedMeasurements)if(this.shouldDrawOnCurrentSlice(g.sliceIndex,g.sliceType,g.slicePosition)){const v=this.mm2frac(g.startMM),m=this.mm2frac(g.endMM),A=this.frac2canvasPosWithTile(v,g.sliceType),x=this.frac2canvasPosWithTile(m,g.sliceType);A&&x&&A.tileIndex===x.tileIndex&&this.drawMeasurementTool([A.pos[0],A.pos[1],x.pos[0],x.pos[1]])}for(let g=0;g<this.document.completedAngles.length;g++){const v=this.document.completedAngles[g];if(this.shouldDrawOnCurrentSlice(v.sliceIndex,v.sliceType,v.slicePosition)){const A=this.mm2frac(v.firstLineMM.start),x=this.mm2frac(v.firstLineMM.end),w=this.mm2frac(v.secondLineMM.start),b=this.mm2frac(v.secondLineMM.end),y=this.frac2canvasPosWithTile(A,v.sliceType),C=this.frac2canvasPosWithTile(x,v.sliceType),S=this.frac2canvasPosWithTile(w,v.sliceType),E=this.frac2canvasPosWithTile(b,v.sliceType);if(y&&C&&S&&E&&y.tileIndex===C.tileIndex&&y.tileIndex===S.tileIndex&&y.tileIndex===E.tileIndex){this.drawMeasurementTool([y.pos[0],y.pos[1],C.pos[0],C.pos[1]],!1),this.drawMeasurementTool([S.pos[0],S.pos[1],E.pos[0],E.pos[1]],!1);const T={firstLine:[y.pos[0],y.pos[1],C.pos[0],C.pos[1]],secondLine:[S.pos[0],S.pos[1],E.pos[0],E.pos[1]],sliceIndex:v.sliceIndex,sliceType:v.sliceType,slicePosition:v.slicePosition};this.drawAngleTextForAngle(T)}}}const c=this.frac2mm([this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2]]);return i=c[0].toFixed(2)+""+c[1].toFixed(2)+""+c[2].toFixed(2),this.readyForSync=!0,this.sync(),this.drawAnchoredLabels(),this.drawBoundsBorder(),i}drawScene(){if(this.isBusy){this.needsRefresh=!0;return}this.isBusy=!1,this.needsRefresh=!1;let e=this.drawSceneCore();return this._gl!==null&&this.gl.finish(),this.needsRefresh&&(e=this.drawScene()),e}r8Tex(e,t,n,r=!1){return xD(this.gl,e,t,n,r)}r16Tex(e,t,n,r){return wD(this.gl,e,t,n,r)}rgbaTex2D(e,t,n,r=null,i=!0){return yD(this.gl,e,t,n,r,i)}rgbaTex(e,t,n,r=!1){return bD(this.gl,e,t,n,r)}rgba16Tex(e,t,n,r=!1){return CD(this.gl,e,t,n,r)}requestCORSIfNotSameOrigin(e,t){Yv(e,t)}async loadPngAsTexture(e,t){const n=await SD(this.gl,e,t,this.fontShader,this.bmpShader,this.fontTexture,this.bmpTexture,this.matCapTexture,r=>{this.bmpTextureWH=r},()=>{this.drawScene()});return t===3?this.fontTexture=n:t===4?this.bmpTexture=n:t===5&&(this.matCapTexture=n),n}async loadFontTexture(e){return this.loadPngAsTexture(e,3)}async loadBmpTexture(e){return this.loadPngAsTexture(e,4)}async loadMatCapTexture(e){return this.loadPngAsTexture(e,5)}get gl(){if(!this._gl)throw new Error("unable to get WebGL context. Maybe the browser doesn't support WebGL2.");return this._gl}set gl(e){this._gl=e}findDrawingBoundarySlices(e){if(!this.back||!this.back.dims||!this.drawBitmap)return null;const t={dimX:this.back.dims[1],dimY:this.back.dims[2],dimZ:this.back.dims[3]};return kP(e,this.drawBitmap,t)}interpolateMaskSlices(e,t,n={}){if(!this.back||!this.back.dims||!this.drawBitmap)throw new Error("Background image and drawing bitmap must be loaded");const r={dimX:this.back.dims[1],dimY:this.back.dims[2],dimZ:this.back.dims[3]},i=this.back.img,s=this.back.global_max;OP(this.drawBitmap,r,i,s,e,t,n,()=>this.refreshDrawing(!0))}};di=new WeakMap;const R7={none:{icon:Yy,label:"None",displayName:"none"},contrast:{icon:Sm,label:"Contrast",displayName:"contrast"},measurement:{icon:eb,label:"Measurement",displayName:"measurement"},pan:{icon:Hy,label:"Pan/Zoom",displayName:"pan/zoom"},slicer3D:{icon:Oy,label:"Slicer 3D",displayName:"slicer3D"},callbackOnly:{icon:Cy,label:"Callback Only",displayName:"callbackOnly"},roiSelection:{icon:ab,label:"ROI Selection",displayName:"roiSelection"},angle:{icon:Em,label:"Angle",displayName:"angle"},crosshair:{icon:Em,label:"Crosshair",displayName:"crosshair"},windowing:{icon:Sm,label:"Windowing",displayName:"windowing"}},P7=Object.keys(ao).filter(e=>isNaN(Number(e)));function N7({currentMode:e,onModeChange:t,availableModes:n=P7}){return D.jsx("div",{className:"flex items-center",children:D.jsx(ZA,{type:"single",value:e,onValueChange:r=>r&&t(r),children:n.map(r=>{const i=R7[r],s=i.icon;return D.jsxs(Rr,{value:r,"aria-label":i.label,title:i.label,children:[D.jsx(s,{className:"h-4 w-4 mr-1"}),D.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:i.displayName})]},r)})})})}function k7({onUpload:e,compact:t=!1}){const[n,r]=I.useState(!1),i=I.useRef(null),s=u=>{u.preventDefault(),r(!0)},o=()=>{r(!1)},a=u=>{if(u.preventDefault(),r(!1),u.dataTransfer.files&&u.dataTransfer.files.length>0){const d=Array.from(u.dataTransfer.files);e(d)}},l=u=>{if(u.target.files&&u.target.files.length>0){console.log("Files selected:",u.target.files);const d=Array.from(u.target.files);e(d)}},c=()=>{var u;(u=i.current)==null||u.click()};return t?D.jsxs("div",{className:"w-full",children:[D.jsxs(ze,{variant:"outline",className:"w-full",onClick:c,children:[D.jsx(vl,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),D.jsx("input",{type:"file",ref:i,onChange:l,accept:"image/*",multiple:!0,className:"hidden"})]}):D.jsx("div",{className:Ie("border-2 border-dashed rounded-lg p-12 text-center transition-colors",n?"border-primary bg-primary/5":"border-muted-foreground/25","max-w-xl mx-auto w-full"),onDragOver:s,onDragLeave:o,onDrop:a,children:D.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[D.jsx("div",{className:"rounded-full bg-background p-3 shadow-sm",children:D.jsx(Ny,{className:"h-10 w-10 text-muted-foreground"})}),D.jsxs("div",{className:"grid gap-1 text-center",children:[D.jsx("h3",{className:"text-lg font-semibold",children:"Upload Medical Images"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop your medical images here or click to browse"}),D.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported formats: NIfTI, GIfTI"})]}),D.jsxs(ze,{onClick:c,children:[D.jsx(vl,{className:"mr-2 h-4 w-4"}),"Select Files"]}),D.jsx("input",{type:"file",ref:i,onChange:l,multiple:!0,className:"hidden"})]})})}const jd={axial:{sliceType:0,showRender:Pr.NEVER},coronal:{sliceType:1,showRender:Pr.NEVER},sagittal:{sliceType:2,showRender:Pr.NEVER},ACS:{sliceType:3,showRender:Pr.NEVER},ACSR:{sliceType:3,showRender:Pr.ALWAYS},render:{sliceType:4,showRender:Pr.ALWAYS}};function B7({viewMode:e,nvRef:t}){const n=I.useRef(null),r=I.useRef(null),[i,s]=I.useState(!1);I.useEffect(()=>{var u;const l=n.current,c=t;console.log("Niivue attached to canvas",c),l&&c&&(c.attachToCanvas(l),c.setSliceType(((u=jd[e])==null?void 0:u.sliceType)||0),s(!0))},[]);const o=()=>null,a=()=>e==="ACSR"||e==="ACS"?null:D.jsxs("div",{className:"absolute top-2 left-2 bg-black/50 text-white px-2 py-1 rounded text-xs font-medium",children:[e.charAt(0).toUpperCase()+e.slice(1)," View"]});return D.jsxs("div",{ref:r,className:"niivue-canvas w-full h-full relative bg-[#111]",children:[D.jsx("canvas",{ref:n}),a(),o(),!i&&D.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:"Loading image..."})]})}const yu=new F7({loadingText:"Drag-drop images",dragAndDropEnabled:!0,textHeight:.02,backColor:[0,0,0,1],crosshairColor:[1,0,0,.5],multiplanarForceRender:!1});function V7(){var Yf,Wf,Hf,Xf,Kf,_f,Qf,qf,Zf,Jf,$f,e0,t0,n0,r0,i0,s0;const[e,t]=I.useState([]),[n,r]=I.useState(!0),[i,s]=I.useState(!0),[o,a]=I.useState(null),[l,c]=I.useState(!0),[u,d]=I.useState("nvds"),[h,f]=I.useState(!0),[p,g]=I.useState(!0),v=!0,m=I.useRef(yu),A=I.useRef(null),x=I.useRef(null),[w,b]=I.useState(!1),[y,C]=I.useState(null),[S,E]=I.useState(!1),[T,F]=I.useState(!1),[M,B]=I.useState({isDownloadMode:!1,document:{enabled:!1,location:""},volumes:[]}),[P,z]=I.useState(!1),[U,G]=I.useState({viewMode:"ACS",crosshairWidth:1,crosshairGap:0,crosshairVisible:!0,crosshairColor:[1,0,0,.5],rulerWidth:1,rulerVisible:!1,interpolateVoxels:!1,dragMode:"contrast",overlayOutlineWidth:0}),[L,Y]=I.useState(null),[j,$]=I.useState({enabled:!1,mode:"none",penValue:1,penFill:!0,penErases:!1,opacity:1,magicWand2dOnly:!0,magicWandMaxDistanceMM:15,magicWandThresholdPercent:yu.opts.clickToSegmentPercent||.05,filename:"drawing.nii.gz"}),[X,H]=I.useState([]),[K,te]=I.useState(null),ae=I.useRef(null),[le,De]=I.useState(null),fe=I.useRef(null),Ce=I.useRef(null),Se=I.useCallback(()=>{A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{m.current&&m.current.updateGLVolume()},100)},[]);I.useEffect(()=>()=>{A.current&&clearTimeout(A.current),fe.current&&clearTimeout(fe.current),Ce.current&&clearTimeout(Ce.current)},[]);const tt=I.useCallback(N=>{if(N&&m.current&&m.current.volumes.length>0){const V=m.current.volumes.map((W,_)=>{const Q=W.mm2vox(N.mm),ne=Math.round(Q[0]),xe=Math.round(Q[1]),Ne=Math.round(Q[2]),Mn=W.getValue(ne,xe,Ne,W.frame4D);return{name:W.name||`Volume ${_+1}`,voxel:[ne,xe,Ne],value:Mn}});Y({mm:N.mm,voxels:V})}},[]),xt=I.useCallback(()=>{if(m.current){const N=jd[U.viewMode];console.log("applyViewerOptions() -- viewConfig: ",N),m.current.opts.crosshairWidth=U.crosshairVisible?U.crosshairWidth:0,m.current.opts.crosshairGap=U.crosshairGap,m.current.setCrosshairColor(U.crosshairColor),m.current.opts.rulerWidth=U.rulerWidth,m.current.opts.isRuler=U.rulerVisible,m.current.setInterpolation(!U.interpolateVoxels),m.current.opts.dragMode=ao[U.dragMode],m.current.overlayOutlineWidth=U.overlayOutlineWidth,N?(m.current.opts.multiplanarShowRender=N.showRender,m.current.setSliceType(N.sliceType)):m.current.setSliceType(0)}},[U]),Sr=I.useCallback(()=>{if(m.current){const N=m.current;let V="ACS";for(const[_,Q]of Object.entries(jd))if(Q.sliceType===N.opts.sliceType){V=_;break}let W="contrast";for(const[_,Q]of Object.entries(ao))if(Q===N.opts.dragMode){W=_;break}G({viewMode:V,crosshairWidth:N.opts.crosshairWidth,crosshairGap:N.opts.crosshairGap??0,crosshairVisible:N.opts.crosshairWidth>0,crosshairColor:N.opts.crosshairColor?[...N.opts.crosshairColor]:[1,0,0,.5],rulerWidth:N.opts.rulerWidth??1,rulerVisible:N.opts.isRuler??!1,interpolateVoxels:!N.opts.isNearestInterpolation,dragMode:W,overlayOutlineWidth:N.overlayOutlineWidth})}},[]),Vo=I.useCallback(()=>{if(m.current&&j.mode==="wand"){const N=m.current;(N.opts.clickToSegmentPercent!==j.magicWandThresholdPercent||N.opts.clickToSegmentMaxDistanceMM!==j.magicWandMaxDistanceMM)&&$(V=>({...V,magicWandThresholdPercent:N.opts.clickToSegmentPercent,magicWandMaxDistanceMM:N.opts.clickToSegmentMaxDistanceMM}))}},[j.mode,j.magicWandThresholdPercent,j.magicWandMaxDistanceMM]);I.useEffect(()=>{m.current&&(m.current.onDragRelease=async()=>{await new Promise(N=>requestAnimationFrame(N)),Mr()},m.current.onLocationChange=tt,m.current.onOptsChange=Vo)},[tt,Vo]),I.useEffect(()=>{m.current&&(m.current.opts.dragAndDropEnabled=n&&e.length===0)},[e.length,n]),I.useEffect(()=>{d("sceneDetails")},[v]),I.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("nvd");if(V){console.log("Loading NVD from URL parameter:",V);const W={filename:V.split("/").pop()||V,url:V};bx(W)}},[]),I.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("vol");if(V){console.log("Loading volume from URL parameter:",V);const _={filename:V.split("/").pop()||V,url:V};yx(_)}},[]),I.useEffect(()=>{const N=async V=>{if(!V.detail||!m.current||window.__EMBEDDED_NVD_LOADED__)return;window.__EMBEDDED_NVD_LOADED__=!0,console.log("Loading embedded NVD data"),r(!1);let W=0;for(;!m.current.canvas&&W<20;)await new Promise(_=>setTimeout(_,100)),W++;m.current.canvas&&await Er(V.detail)};return window.addEventListener("loadEmbeddedNvd",N),window.__EMBEDDED_NVD_DATA__&&!window.__EMBEDDED_NVD_LOADED__&&window.dispatchEvent(new CustomEvent("loadEmbeddedNvd",{detail:window.__EMBEDDED_NVD_DATA__})),()=>window.removeEventListener("loadEmbeddedNvd",N)},[]);const Er=async N=>{var W;if(!m.current)return;const V=m.current;if(t([]),a(null),console.log("loadNvdData() -- jsonData: ",N),i){const _=await Wa.loadFromJSON(N);await _.fetchLinkedData(),console.log("loadNvdData() document: ",_);try{if(await V.loadDocument(_),N.encodedImageBlobs&&N.encodedImageBlobs.length>0){console.log("Loading encoded image blobs:",N.encodedImageBlobs.length);for(let Q=0;Q<N.encodedImageBlobs.length;Q++){const ne=N.encodedImageBlobs[Q];if(ne)try{const xe=((W=N.imageOptionsArray)==null?void 0:W[Q])||{},Ne=await mt.loadFromBase64({base64:ne,...xe});V.addVolume(Ne),console.log(`Loaded encoded image blob ${Q+1}/${N.encodedImageBlobs.length}`)}catch(xe){console.error(`Failed to load encoded image blob ${Q}:`,xe)}}}Sr()}catch(Q){throw console.error("nv.loadDocument failed:",Q),console.log("Current nv.volumes:",V.volumes),console.log("Current nv.meshes:",V.meshes),console.log("Current nv.drawBitmap:",V.drawBitmap),Q}if(N.imageOptionsArray&&V.volumes)for(let Q=0;Q<V.volumes.length&&Q<N.imageOptionsArray.length;Q++){const ne=N.imageOptionsArray[Q];ne.url&&(V.volumes[Q].url=ne.url)}}else{for(console.log("Loading directly without NVDocument");V.volumes.length>0;)V.removeVolumeByIndex(0);for(;V.meshes&&V.meshes.length>0;)V.removeMesh(V.meshes[0]);V.drawBitmap=null,V.setDrawingEnabled(!1),N.imageOptionsArray&&N.imageOptionsArray.length>0&&(console.log("Loading volumes directly:",N.imageOptionsArray),await V.loadVolumes(N.imageOptionsArray)),N.meshOptionsArray&&N.meshOptionsArray.length>0&&(console.log("Loading meshes:",N.meshOptionsArray),await V.loadMeshes(N.meshOptionsArray)),V.setDefaults(),N.opts&&(console.log("Applying options:",N.opts),V.setDefaults(N.opts)),Sr()}N.meshes&&N.meshes.length>0&&(console.log("Loading meshes:",N.meshes),await V.loadMeshes(N.meshes)),a(0),Mr(),uc(),V.setCrosshairColor([0,1,0,.1])};let Uf=async N=>{if(!m.current)return;const V=m.current;n&&r(!1);let W=0;for(;!V.canvas&&W<20;)console.log(`Waiting for canvas to be ready for file upload... attempt ${W+1}`),await new Promise(Q=>setTimeout(Q,100)),W++;if(!V.canvas)throw new Error("Canvas failed to initialize after 2 seconds");const _=N.filter(Q=>Q.name.toLowerCase().endsWith(".nvd")||Q.name.toLowerCase().endsWith(".json"));if(_.length>0){const Q=_[0];try{const ne=await Q.text(),xe=JSON.parse(ne);console.log("NVD data loaded from uploaded file:",xe),await Er(xe)}catch(ne){console.error("Error loading uploaded NVD file:",ne)}}else{const Q=N.map(async ne=>{const xe=await mt.loadFromFile({file:ne});return console.log("nv",V),V.addVolume(xe),xe});await Promise.all(Q),xt(),Mr(),o===null&&N.length>0&&a(0)}};const yx=async N=>{if(!m.current)return;const V=m.current;try{n&&r(!1);let W=0;for(;!V.canvas&&W<20;)console.log(`Waiting for canvas to be ready for imaging file... attempt ${W+1}`),await new Promise(ne=>setTimeout(ne,100)),W++;if(!V.canvas)throw new Error("Canvas failed to initialize after 2 seconds");const _=N.filename.split("/").pop()||N.filename,Q={url:N.url,name:_};console.log("Adding imaging file to scene:",Q),await V.addVolumeFromUrl(Q),xt(),Mr(),V.volumes.length>0&&a(V.volumes.length-1),console.log("Imaging file loaded successfully")}catch(W){console.error("Error loading imaging file:",W)}},bx=async N=>{if(!m.current)return;const V=m.current;try{const W=await fetch(N.url);if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const _=await W.json();console.log("json data returned from server:"),console.log(_),r(!1);let Q=0;for(;!V.canvas&&Q<20;)console.log(`Waiting for canvas to be ready... attempt ${Q+1}`),await new Promise(ne=>setTimeout(ne,100)),Q++;if(!V.canvas)throw new Error("Canvas failed to initialize after 2 seconds");await Er(_)}catch(W){console.error("Error loading NVD:",W)}},Mr=()=>{const N=m.current;if(N){const V=N.volumes.map((W,_)=>{const Q=W.nFrame4D&&W.nFrame4D>1;return{id:W.id,name:W.name||`Volume ${_+1}`,visible:W.opacity>0,colormap:W.colormap,opacity:W.opacity,contrastMin:W.cal_min??0,contrastMax:W.cal_max??100,globalMin:W.global_min??0,globalMax:Q?15e4:W.global_max??15e4,frame4D:W.frame4D??0,nFrame4D:W.nFrame4D??1}});t(V),console.log("updateImageDetails() loadedImages:",V),N.scene&&N.scene.crosshairPos&&tt({mm:N.scene.crosshairPos})}else console.log("updateImageDetails(): nvRef is ",m)},Cx=N=>{t(e.map(V=>{if(V.id===N){const W=!V.visible,_=V.opacity===0?1:V.opacity;if(m.current){const Q=m.current.getVolumeIndexByID(N);Q>=0&&m.current.setOpacity(Q,W?_:0)}return{...V,visible:W}}return V})),m.current&&m.current.updateGLVolume()},uc=()=>{const N=m.current;if(N&&N.meshes){const V=N.meshes.map((W,_)=>{const Q=W.name||`Surface ${_+1}`,ne=W.rgba255||new Uint8Array([255,255,0,255]);return{id:W.id,name:Q,visible:W.visible!==!1,opacity:W.opacity??1,rgba255:[ne[0],ne[1],ne[2],ne[3]],meshShaderIndex:W.meshShaderIndex??14}});H(V),console.log("updateSurfaceDetails() loadedSurfaces:",V),K===null&&V.length>0&&te(0)}},Sx=N=>{H(X.map((V,W)=>{if(V.id===N){const _=!V.visible;return m.current&&m.current.setMeshProperty(W,"visible",_),{...V,visible:_}}return V})),m.current&&m.current.updateGLVolume()},Uo=I.useCallback(N=>{if(m.current&&X[N]){const V=m.current.meshes[N];V&&(m.current.removeMesh(V),uc(),K===N?N>0?te(N-1):X.length>1?te(0):te(null):K!==null&&K>N&&te(K-1))}},[X,K]),Ex=I.useCallback(N=>{S?Uo(N):(De(N),b(!0))},[S,Uo]),Mx=I.useCallback(N=>{K!==null&&m.current&&X[K]&&(m.current.setMeshProperty(K,"opacity",N),Se(),H(V=>V.map((W,_)=>_===K?{...W,opacity:N}:W)))},[K,X,Se]),Dx=I.useCallback(N=>{if(K!==null&&m.current&&X[K]){const V=parseInt(N.slice(1,3),16),W=parseInt(N.slice(3,5),16),_=parseInt(N.slice(5,7),16);H(ne=>ne.map((xe,Ne)=>Ne===K?{...xe,rgba255:[V,W,_,255]}:xe)),fe.current&&clearTimeout(fe.current);const Q=K;fe.current=setTimeout(()=>{if(m.current){const ne=new Uint8Array([V,W,_,255]);m.current.setMeshProperty(Q,"rgba255",ne),m.current.updateGLVolume()}},50)}},[K,X]),Tx=I.useCallback(N=>{if(K!==null&&m.current&&X[K]){m.current.setMeshShader(K,N);const V=m.current.meshShaderNameToNumber(N)??0;Se(),H(W=>W.map((_,Q)=>Q===K?{..._,meshShaderIndex:V}:_))}},[K,X,Se]),Lf=N=>{const V=N[0].toString(16).padStart(2,"0"),W=N[1].toString(16).padStart(2,"0"),_=N[2].toString(16).padStart(2,"0");return`#${V}${W}${_}`},Ix=N=>m.current&&m.current.meshShaderNames(!1)[N]||"Phong",Fx=N=>{G(V=>({...V,viewMode:N}))},Rx=I.useCallback(N=>{if(o!==null&&m.current&&e[o]){const V=e[o].id,W=m.current.getVolumeIndexByID(V);W>=0&&(m.current.setOpacity(W,N),Se(),t(_=>_.map((Q,ne)=>ne===o?{...Q,opacity:N}:Q)))}},[o]),Px=I.useCallback(N=>{if(o!==null&&m.current&&e[o]){const V=e[o].id;m.current.setFrame4D(V,N),t(W=>W.map((_,Q)=>Q===o?{..._,frame4D:N}:_))}},[o,e]),Nx=I.useCallback(N=>{if(o!==null&&m.current&&e[o]){const V=e[o].id,W=m.current.getVolumeIndexByID(V);if(W>=0){const _=m.current.volumes[W];_.cal_min=N,Se(),t(Q=>Q.map((ne,xe)=>xe===o?{...ne,contrastMin:N}:ne))}}},[o]),kx=I.useCallback(N=>{if(o!==null&&m.current&&e[o]){const V=e[o].id,W=m.current.getVolumeIndexByID(V);if(W>=0){const _=m.current.volumes[W];_.cal_max=N,Se(),t(Q=>Q.map((ne,xe)=>xe===o?{...ne,contrastMax:N}:ne))}}},[o]),Bx=I.useCallback(N=>{const V=N.target.value;if(o!==null&&m.current&&e[o]){const W=m.current.getVolumeIndexByID(e[o].id);if(W>=0&&m.current.volumes[W]){const _=m.current.volumes[W];if(_.colormap===V)return;_.colormap=V,t(Q=>Q.map((ne,xe)=>xe===o?{...ne,colormap:V}:ne)),Se()}}},[o]),Vx=I.useCallback(()=>{var N;(N=x.current)==null||N.click()},[]),Of=I.useCallback((N=!1)=>{if(m.current){const V=m.current.volumes.map(W=>{const _=!!(W.url&&W.url.startsWith("http"));return{enabled:!_,isExternal:_,url:N?W.name||"":W.url||""}});B({isDownloadMode:N,document:{enabled:!1,location:""},volumes:V}),F(!0)}},[]),Ux=I.useCallback(async()=>{if(console.log("Saving scene to:",M.document.location),!!m.current){if(M.isDownloadMode){if(M.document.enabled&&M.document.location.trim()){const N=m.current.document.json(!0,!1);if(N.imageOptionsArray&&m.current.volumes)for(let Q=0;Q<N.imageOptionsArray.length&&Q<m.current.volumes.length;Q++)N.imageOptionsArray[Q].url="";const V=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),W=URL.createObjectURL(V),_=document.createElement("a");_.href=W,_.download=M.document.location.endsWith(".nvd")?M.document.location:`${M.document.location}.nvd`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(W)}for(let N=0;N<M.volumes.length;N++){const V=M.volumes[N];if(V.enabled&&m.current&&m.current.volumes[N]){const W=m.current.volumes[N],_=V.url||`volume_${N+1}.nii.gz`;try{const Q=await W.saveToUint8Array(_.endsWith(".nii.gz")?_:`${_}.nii.gz`),ne=new Blob([Q],{type:"application/octet-stream"}),xe=URL.createObjectURL(ne),Ne=document.createElement("a");Ne.href=xe,Ne.download=_.endsWith(".nii.gz")?_:`${_}.nii.gz`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(xe)}catch(Q){console.error(`Error downloading volume ${N}:`,Q)}}}}else{if(console.log("handleConfirmSave() -- nvRef.current.document:",m.current.document),M.document.enabled&&M.document.location.trim())try{const W={...m.current.document.json(!1,!1)};W.imageOptionsArray=W.imageOptionsArray.map((ne,xe)=>{const Ne=M.volumes[xe];return Ne!=null&&Ne.enabled&&Ne.url.trim()!==""?{...ne,url:Ne.url}:ne});const _=await fetch("/nvd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:M.document.location,data:W})});if(!_.ok)throw new Error(`Failed to save scene: ${_.statusText}`);const Q=await _.json();console.log("Scene saved successfully:",Q)}catch(V){console.error("Error saving scene:",V)}const N=M.volumes.map(async(V,W)=>{if(V.enabled&&m.current&&m.current.volumes[W]){const _=m.current.volumes[W];if(!V.url||V.url.trim()===""){console.log(`Skipping volume ${W}: no URL specified`);return}try{const ne=V.url.toLowerCase().endsWith(".gz")?V.url:V.url+".gz",xe=await _.saveToUint8Array(ne),Ne=Lx(xe),Mn=await fetch("/nii",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:V.url,data:Ne})});if(!Mn.ok)throw new Error(`Failed to save volume ${W}: ${Mn.statusText}`);const dc=await Mn.json();console.log(`Volume ${W} saved successfully:`,dc)}catch(Q){console.error(`Error saving volume ${W}:`,Q)}}});await Promise.all(N)}F(!1),B({isDownloadMode:!1,document:{enabled:!1,location:""},volumes:[]})}},[M]),zf=I.useCallback(()=>{F(!1),B({isDownloadMode:!1,document:{enabled:!1,location:""},volumes:[]})},[]),Lx=I.useCallback(N=>{let V="";for(let _=0;_<N.length;_+=8192){const Q=N.subarray(_,_+8192);V+=String.fromCharCode(...Q)}return btoa(V)},[]),Ox=I.useCallback((N,V)=>{B(W=>({...W,volumes:W.volumes.map((_,Q)=>Q===N?{..._,url:V}:_)}))},[]),zx=I.useCallback((N,V)=>{B(W=>({...W,volumes:W.volumes.map((_,Q)=>Q===N?V&&_.isExternal?{..._,enabled:V,url:""}:{..._,enabled:V}:_)}))},[]),jx=I.useCallback(N=>{B(V=>({...V,document:{...V.document,location:N}}))},[]),Gx=I.useCallback(N=>{B(V=>({...V,document:{...V.document,enabled:N}}))},[]),Yx=I.useCallback(N=>{if(N.target.files&&N.target.files.length>0){const V=Array.from(N.target.files);Uf(V)}N.target.value=""},[]),Wx=I.useCallback(()=>{var N;(N=ae.current)==null||N.click()},[]),Hx=I.useCallback(async N=>{if(N.target.files&&N.target.files.length>0&&m.current){const V=m.current,W=Array.from(N.target.files);n&&r(!1);let _=0;for(;!V.canvas&&_<20;)await new Promise(ne=>setTimeout(ne,100)),_++;if(!V.canvas){console.error("Canvas failed to initialize for surface upload");return}const Q=W.map(ne=>({url:URL.createObjectURL(ne),name:ne.name,rgba255:[255,255,0,255],meshShaderIndex:14}));try{await V.addMeshesFromUrl(Q),V.updateGLVolume()}catch(ne){console.error("Error loading surface files:",ne)}uc(),K===null&&V.meshes.length>0&&te(V.meshes.length-W.length)}N.target.value=""},[n,K]),Lo=I.useCallback(N=>{if(m.current&&e[N]){const V=e[N].id,W=m.current.getVolumeIndexByID(V);W>=0&&(m.current.removeVolumeByIndex(W),Mr(),o===N?N>0?a(N-1):e.length>1?a(0):a(null):o!==null&&o>N&&a(o-1))}},[e,o]),Xx=I.useCallback(N=>{S?Lo(N):(C(N),b(!0))},[S,Lo]),Kx=I.useCallback(async N=>{if(!m.current||!e[N])return;const V=m.current,W=e[N].id,_=V.getVolumeIndexByID(W);if(!(_<0))try{const Q=await V.saveImage({filename:"",isSaveDrawing:!1,volumeByIndex:_}),ne=e[N].name,xe=await V.niftiArray2NVImage(Q);V.removeVolumeByIndex(_),Mr(),V.volumes.length>0&&!V.back&&(console.log("Setting background to first remaining volume"),V.setVolume(V.volumes[0],0)),o===N?N>0?a(N-1):e.length>1?a(0):a(null):o!==null&&o>N&&a(o-1),V.loadDrawing(xe)||console.error("Failed to load drawing - dimensions may be incompatible"),$(Mn=>({...Mn,enabled:!0,mode:"none",filename:ne.endsWith(".nii.gz")?ne:`${ne}.nii.gz`})),V.setDrawingEnabled(!1),V.setPenValue(j.penValue,j.penFill),V.drawFillOverwrites=j.penFill,d("drawing")}catch(Q){console.error("Error converting volume to drawing:",Q)}},[e,o,j]),jf=I.useCallback(N=>{if(!m.current||!e[N])return!1;const V=m.current,W=e[N].id,_=V.getVolumeIndexByID(W);if(_<0)return!1;const Q=V.volumes[_],ne=V.back;if(!ne||Q===ne||!Q.hdr||!ne.hdr)return!1;const xe=Q.hdr.dims,Ne=ne.hdr.dims;if(xe[1]!==Ne[1]||xe[2]!==Ne[2]||xe[3]!==Ne[3]||!Q.hdr.affine||!ne.hdr.affine)return!1;const Mn=Q.hdr.affine,dc=ne.hdr.affine;for(let hc=0;hc<4;hc++)for(let fc=0;fc<4;fc++){const o0=hc*4+fc,hw=Number(Mn[o0]),fw=Number(dc[o0]);if(Math.abs(hw-fw)>1e-4)return!1}return!0},[e]),_x=I.useCallback(()=>{y!==null&&Lo(y),le!==null&&Uo(le),b(!1),C(null),De(null)},[y,Lo,le,Uo]),Gf=I.useCallback(()=>{b(!1),C(null),De(null)},[]),Qx=I.useCallback(N=>{G(V=>({...V,crosshairWidth:N})),Se()},[]),qx=I.useCallback(N=>{G(V=>({...V,crosshairGap:N})),Se()},[]),Zx=I.useCallback(N=>{G(V=>({...V,interpolateVoxels:N}))},[]),Jx=I.useCallback(N=>{G(V=>({...V,crosshairVisible:N}))},[]),$x=I.useCallback(N=>{const V=N.replace("#",""),W=parseInt(V.substr(0,2),16)/255,_=parseInt(V.substr(2,2),16)/255,Q=parseInt(V.substr(4,2),16)/255,ne=U.crosshairColor[3];Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout(()=>{m.current&&(m.current.setCrosshairColor([W,_,Q,ne]),m.current.updateGLVolume()),G(xe=>({...xe,crosshairColor:[W,_,Q,ne]}))},50)},[U.crosshairColor]);I.useCallback(N=>{G(V=>({...V,rulerWidth:N})),Se()},[]),I.useCallback(N=>{G(V=>({...V,rulerVisible:N}))},[]);const ew=I.useCallback(N=>{G(V=>({...V,overlayOutlineWidth:N})),m.current&&(m.current.overlayOutlineWidth=N,Se())},[Se]),tw=I.useCallback(()=>{if(m.current){m.current.setDrawingEnabled(!1);const N=j.penErases?0:j.penValue;m.current.setPenValue(N,j.penFill),m.current.setDrawOpacity(j.opacity),$(V=>({...V,enabled:!0,mode:"none"})),d("drawing")}},[j]);I.useCallback(N=>{const V=N.target.value;$(W=>({...W,colormap:V})),m.current&&m.current.drawBitmap&&(m.current.setDrawColormap(V),m.current.updateGLVolume())},[]);const nw=I.useCallback(N=>{if(console.log("handleDrawModeChange() ",N),$(V=>({...V,mode:N,penErases:N==="wand"?!1:V.penErases})),m.current)if(N==="pen"){const V=j.penErases?0:j.penValue;m.current.setPenValue(V,j.penFill),m.current.setDrawingEnabled(!0),m.current.opts.clickToSegment=!1}else if(N==="wand"){m.current.setDrawingEnabled(!0),m.current.opts.clickToSegment=!0,m.current.opts.clickToSegmentIs2D=j.magicWand2dOnly,m.current.opts.clickToSegmentAutoIntensity=!0,m.current.opts.clickToSegmentMaxDistanceMM=j.magicWandMaxDistanceMM,m.current.opts.clickToSegmentPercent=j.magicWandThresholdPercent;const V=j.penValue;m.current.setPenValue(V,!1)}else N==="none"&&(m.current.setDrawingEnabled(!1),m.current.opts.clickToSegment=!1)},[j]),rw=I.useCallback(N=>{if($(V=>({...V,penFill:N})),m.current&&(m.current.drawFillOverwrites=N,console.log(j.mode),j.mode==="pen")){const V=j.penErases?0:j.penValue;m.current.setPenValue(V,N)}},[j]),iw=I.useCallback(N=>{if($(V=>({...V,penErases:N})),m.current)if(j.mode==="pen"){const V=N?0:j.penValue;m.current.setPenValue(V,j.penFill)}else j.mode==="none"&&m.current.setDrawingEnabled(!1)},[j]),sw=I.useCallback(N=>{$(V=>({...V,penValue:N})),console.log("handlePenValueChange: ",N),m.current&&j.mode==="pen"&&!j.penErases&&m.current.setPenValue(N,j.penFill)},[j]),ow=I.useCallback(N=>{$(V=>({...V,opacity:N})),m.current&&(m.current.setDrawOpacity(N),Se())},[]),aw=I.useCallback(N=>{$(V=>({...V,magicWand2dOnly:N})),m.current&&j.mode==="wand"&&(m.current.opts.clickToSegmentIs2D=N)},[j.mode]),lw=I.useCallback(N=>{$(V=>({...V,magicWandMaxDistanceMM:N})),m.current&&j.mode==="wand"&&(m.current.opts.clickToSegmentMaxDistanceMM=N)},[j.mode]),cw=I.useCallback(N=>{$(V=>({...V,magicWandThresholdPercent:N})),m.current&&j.mode==="wand"&&(m.current.opts.clickToSegmentPercent=N)},[j.mode]),uw=I.useCallback(()=>{m.current&&m.current.drawUndo()},[]),dw=I.useCallback(async()=>{if(m.current&&m.current.drawBitmap)try{if(m.current.volumes.length===0){console.error("No reference volume loaded - cannot save drawing");return}const N=await m.current.saveImage({filename:"",isSaveDrawing:!0,volumeByIndex:0}),V=new File([N],j.filename,{type:"application/octet-stream"});m.current.setDrawingEnabled(!1),m.current.setPenValue(0,!1),m.current.opts.clickToSegment=!1,m.current.closeDrawing();const W=await mt.loadFromFile({file:V,name:j.filename});W.colormap="red",W.opacity=1,m.current.addVolume(W),$(_=>({..._,enabled:!1,mode:"none"})),d("sceneDetails"),Mr()}catch(N){console.error("Error saving drawing:",N)}},[j]);return I.useEffect(()=>{xt()},[xt]),I.useEffect(()=>{p?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[p]),D.jsxs("div",{className:"flex h-full flex-col",children:[D.jsx("header",{className:"border-b bg-background px-6 py-3",children:D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsxs("h1",{className:"text-xl font-semibold flex items-center",children:[D.jsx(Wc,{className:"h-6 w-6 mr-2"}),D.jsxs("a",{href:"https://github.com/freesurfer/freebrowse",target:"_blank",rel:"noopener noreferrer",children:["FreeBrowse ","2.2.1"]})]}),D.jsx("div",{className:"bg-background p-2",children:D.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[D.jsxs("div",{className:"flex items-center gap-2 border border-border rounded-md px-3 py-1",children:[D.jsx("span",{className:"text-sm font-medium",children:"View:"}),D.jsx(J6,{currentView:U.viewMode,onViewChange:Fx})]}),D.jsxs("div",{className:"flex items-center gap-2 border border-border rounded-md px-3 py-1",children:[D.jsx("span",{className:"text-sm font-medium",children:"Right drag:"}),D.jsx(N7,{currentMode:U.dragMode,onModeChange:N=>G(V=>({...V,dragMode:N})),availableModes:["contrast","pan"]})]})]})}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>c(!l),children:[l?D.jsx(Zy,{className:"h-4 w-4"}):D.jsx(Qy,{className:"h-4 w-4"}),D.jsx("span",{className:"ml-2 sr-only md:not-sr-only md:inline-block"})]}),D.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>f(!h),children:[D.jsx(Ky,{className:Ie("h-4 w-4",!h&&"rotate-180")}),D.jsx("span",{className:"ml-2 sr-only md:not-sr-only md:inline-block"})]}),D.jsx(ze,{variant:"outline",size:"sm",onClick:()=>g(!p),className:"h-8 w-8 p-0",title:p?"Switch to light mode":"Switch to dark mode",children:p?D.jsx(cb,{className:"h-4 w-4"}):D.jsx(jy,{className:"h-4 w-4"})}),D.jsx(ze,{variant:"outline",size:"sm",onClick:()=>z(!0),className:"h-8 w-8 p-0",children:D.jsx(rb,{className:"h-4 w-4"})})]})]})}),D.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[D.jsxs("div",{className:"flex flex-1 flex-col min-h-0",children:[D.jsx("main",{className:"flex-1 min-h-0 overflow-hidden flex flex-col",children:n?D.jsx("div",{className:"flex flex-1 items-center justify-center",children:D.jsx(k7,{onUpload:Uf})}):D.jsx("div",{className:"flex flex-1",children:D.jsx(B7,{viewMode:U.viewMode,nvRef:yu})})}),h&&D.jsx("footer",{className:"border-t bg-background px-4 py-4 flex-shrink-0",children:L?D.jsxs("div",{className:"space-y-2",children:[D.jsxs("div",{className:"grid grid-cols-[50%_auto_1fr] gap-4 items-center text-sm",children:[D.jsx("div",{}),D.jsxs("div",{className:"text-muted-foreground font-mono whitespace-nowrap",children:[D.jsx("span",{className:"inline-block w-16",children:"RAS"}),"[",L.mm[0].toFixed(1),","," ",L.mm[1].toFixed(1),","," ",L.mm[2].toFixed(1),"]"]}),D.jsx("div",{})]}),L.voxels.map((N,V)=>D.jsxs("div",{className:Ie("grid grid-cols-[50%_auto_1fr] gap-4 items-center text-sm px-2 py-1 rounded-sm",V%2===1&&"bg-accent"),children:[D.jsxs("div",{className:"font-medium overflow-x-auto whitespace-nowrap",children:[N.name,":"]}),D.jsxs("div",{className:"text-muted-foreground font-mono whitespace-nowrap",children:[D.jsx("span",{className:"inline-block w-16",children:"Voxel"}),"[",N.voxel[0],", ",N.voxel[1],", ",N.voxel[2],"]"]}),D.jsxs("div",{className:"text-muted-foreground",children:["Value: ",N.value.toFixed(2)]})]},V))]}):D.jsx("p",{className:"text-sm text-muted-foreground",children:"Load images to see coordinates"})})]}),l&&D.jsx("aside",{className:Ie("border-l bg-background w-80 overflow-hidden flex flex-col"),children:D.jsxs(ZC,{value:u,onValueChange:d,className:"flex flex-col flex-1 min-h-0",children:[D.jsxs(JC,{className:"w-full justify-start border-b rounded-none px-2 h-12 flex-shrink-0",children:[!v,!v,D.jsx(Zc,{value:"sceneDetails",className:"data-[state=active]:bg-muted",children:D.jsx(yg,{className:"h-4 w-4 mr-2"})}),D.jsx(Zc,{value:"surfaceDetails",className:"data-[state=active]:bg-muted",children:D.jsx(Wc,{className:"h-4 w-4 mr-2"})}),D.jsx(Zc,{value:"drawing",className:Ie("data-[state=active]:bg-muted",!j.enabled&&"text-muted-foreground"),disabled:!j.enabled,children:D.jsx(Kc,{className:"h-4 w-4 mr-2"})})]}),D.jsx(ds,{value:"nvds",className:"flex-1 min-h-0 p-0",children:!v}),D.jsx(ds,{value:"data",className:"flex-1 min-h-0 p-0",children:!v}),D.jsxs(ds,{value:"sceneDetails",className:"flex-1 min-h-0 p-0",children:[D.jsxs("div",{className:"border-b px-4 py-3",children:[D.jsx("h2",{className:"text-lg font-semibold",children:"Volumetric Details"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage volumes and adjust properties"})]}),D.jsxs("div",{className:"flex flex-col h-full",children:[D.jsxs(hs,{className:"max-h-[50%] min-h-0",children:[e.length>0?D.jsx("div",{className:"grid gap-2 p-4",children:e.map((N,V)=>D.jsxs("div",{className:Ie("flex items-center gap-2 p-2 rounded-md cursor-pointer",o===V?"bg-muted":"hover:bg-muted/50"),onClick:()=>a(V),children:[D.jsx("div",{className:"flex-shrink-0",children:D.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:W=>{W.stopPropagation(),Cx(N.id)},children:N.visible?D.jsx(Xc,{className:"h-3 w-3"}):D.jsx(Hc,{className:"h-3 w-3 opacity-50"})})}),D.jsx("div",{className:"flex-1 w-0",children:D.jsx("p",{className:"text-sm font-medium break-words",children:N.name})}),D.jsxs("div",{className:"flex-shrink-0 flex gap-1",children:[D.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-100 hover:text-blue-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent",onClick:W=>{W.stopPropagation(),Kx(V)},disabled:!jf(V),title:jf(V)?"Edit as drawing":"Cannot edit - must match background dimensions and affine",children:D.jsx(sb,{className:"h-3 w-3"})}),D.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-destructive hover:text-destructive-foreground",onClick:W=>{W.stopPropagation(),Xx(V)},title:"Delete volume",children:D.jsx(Dm,{className:"h-3 w-3"})})]})]},N.id))}):D.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center text-muted-foreground",children:[D.jsx(Uy,{className:"h-8 w-8 mb-2"}),D.jsx("p",{children:"No images"})]}),D.jsxs("div",{className:"p-2 border-t space-y-2",children:[D.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",onClick:Vx,children:[D.jsx(vl,{className:"mr-2 h-4 w-4"}),"Upload files"]}),D.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",onClick:tw,disabled:j.enabled||e.length===0,children:[D.jsx(Kc,{className:"mr-2 h-4 w-4"}),"Create empty drawing layer"]}),D.jsxs("div",{className:"flex gap-2",children:[D.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Of(!1),disabled:e.length===0||j.enabled||v,children:[D.jsx(Mm,{className:"mr-2 h-4 w-4"}),"Save"]}),D.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Of(!0),disabled:e.length===0||j.enabled,children:[D.jsx(Iy,{className:"mr-2 h-4 w-4"}),"Download"]})]})]})]}),D.jsx(hs,{className:"flex-1 min-h-0",children:o!=null?D.jsxs("div",{className:"grid gap-4 p-4 pb-20",children:[(((Yf=e[o])==null?void 0:Yf.nFrame4D)||1)>1&&D.jsx(jt,{label:"Frame",value:((Wf=e[o])==null?void 0:Wf.frame4D)||0,onValueChange:Px,min:0,max:(((Hf=e[o])==null?void 0:Hf.nFrame4D)||1)-1,step:1}),D.jsx(jt,{label:"Opacity",value:((Xf=e[o])==null?void 0:Xf.opacity)||1,onValueChange:Rx,min:0,max:1,step:.01}),D.jsx(jt,{label:"Contrast Min",value:((Kf=e[o])==null?void 0:Kf.contrastMin)||0,onValueChange:Nx,min:((_f=e[o])==null?void 0:_f.globalMin)??0,max:((Qf=e[o])==null?void 0:Qf.globalMax)??255,step:.1,decimalPlaces:1}),D.jsx(jt,{label:"Contrast Max",value:((qf=e[o])==null?void 0:qf.contrastMax)||100,onValueChange:kx,min:((Zf=e[o])==null?void 0:Zf.globalMin)??0,max:((Jf=e[o])==null?void 0:Jf.globalMax)??255,step:.1,decimalPlaces:1}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Colormap"}),D.jsx(Ra,{value:(($f=e[o])==null?void 0:$f.colormap)||"gray",onChange:Bx,children:(e0=m.current)==null?void 0:e0.colormaps().map(N=>D.jsx("option",{value:N,children:N},N))})]})]}):D.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center text-muted-foreground"})})]})]}),D.jsxs(ds,{value:"surfaceDetails",className:"flex-1 min-h-0 p-0",children:[D.jsxs("div",{className:"border-b px-4 py-3",children:[D.jsx("h2",{className:"text-lg font-semibold",children:"Surface Details"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage surfaces and adjust properties"})]}),D.jsxs("div",{className:"flex flex-col h-full",children:[D.jsxs(hs,{className:"max-h-[50%] min-h-0",children:[X.length>0?D.jsx("div",{className:"grid gap-2 p-4",children:X.map((N,V)=>D.jsxs("div",{className:Ie("flex items-center gap-2 p-2 rounded-md cursor-pointer",K===V?"bg-muted":"hover:bg-muted/50"),onClick:()=>te(V),children:[D.jsx("div",{className:"flex-shrink-0",children:D.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:W=>{W.stopPropagation(),Sx(N.id)},children:N.visible?D.jsx(Xc,{className:"h-3 w-3"}):D.jsx(Hc,{className:"h-3 w-3 opacity-50"})})}),D.jsx("div",{className:"flex-1 w-0",children:D.jsx("p",{className:"text-sm font-medium break-words",children:N.name})}),D.jsx("div",{className:"flex-shrink-0 flex gap-1",children:D.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-destructive hover:text-destructive-foreground",onClick:W=>{W.stopPropagation(),Ex(V)},title:"Delete surface",children:D.jsx(Dm,{className:"h-3 w-3"})})})]},N.id))}):D.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center text-muted-foreground",children:[D.jsx(Wc,{className:"h-8 w-8 mb-2"}),D.jsx("p",{children:"No surfaces"})]}),D.jsx("div",{className:"p-2 border-t space-y-2",children:D.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",onClick:Wx,children:[D.jsx(vl,{className:"mr-2 h-4 w-4"}),"Upload surfaces"]})})]}),D.jsx(hs,{className:"flex-1 min-h-0",children:K!=null&&X[K]?D.jsxs("div",{className:"grid gap-4 p-4 pb-20",children:[D.jsx(jt,{label:"Opacity",value:((t0=X[K])==null?void 0:t0.opacity)||1,onValueChange:Mx,min:0,max:1,step:.01}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Color"}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("input",{type:"color",value:Lf(((n0=X[K])==null?void 0:n0.rgba255)||[255,255,0,255]),onChange:N=>Dx(N.target.value),className:"h-9 w-16 rounded-md border border-input cursor-pointer"}),D.jsx("span",{className:"text-sm text-muted-foreground",children:Lf(((r0=X[K])==null?void 0:r0.rgba255)||[255,255,0,255])})]})]}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Mesh Shader"}),D.jsx(Ra,{value:Ix(((i0=X[K])==null?void 0:i0.meshShaderIndex)||0),onChange:N=>Tx(N.target.value),children:(s0=m.current)==null?void 0:s0.meshShaderNames(!0).map(N=>D.jsx("option",{value:N,children:N},N))})]})]}):D.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center text-muted-foreground"})})]})]}),D.jsxs(ds,{value:"drawing",className:"flex-1 min-h-0 p-0",children:[D.jsxs("div",{className:"border-b px-4 py-3",children:[D.jsx("h2",{className:"text-lg font-semibold",children:"Drawing Tools"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Edit annotations"})]}),D.jsx(hs,{className:"h-full",children:D.jsx("div",{className:"p-4 space-y-4",children:j.enabled?D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"space-y-2",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Filename"}),D.jsx(Si,{type:"text",value:j.filename,onChange:N=>$(V=>({...V,filename:N.target.value})),placeholder:"Enter filename..."})]}),D.jsx(jt,{label:"Drawing Opacity",value:j.opacity,onValueChange:ow,min:0,max:1,step:.01}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Draw Mode"}),D.jsxs(Ra,{value:j.mode,onChange:N=>nw(N.target.value),children:[D.jsx("option",{value:"none",children:"None"}),D.jsx("option",{value:"pen",children:"Pen"}),D.jsx("option",{value:"wand",children:"Magic Wand"})]})]}),(j.mode==="pen"||j.mode==="wand")&&D.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",onClick:uw,children:[D.jsx(hb,{className:"mr-2 h-4 w-4"}),"Undo"]}),(j.mode==="pen"||j.mode==="wand")&&D.jsxs(D.Fragment,{children:[j.mode==="pen"&&D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx(Kn,{id:"pen-fill",checked:j.penFill,onCheckedChange:rw}),D.jsx(ft,{htmlFor:"pen-fill",className:"text-sm font-medium",children:"Pen Fill"})]}),j.mode==="pen"&&D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx(Kn,{id:"pen-erases",checked:j.penErases,onCheckedChange:iw}),D.jsx(ft,{htmlFor:"pen-erases",className:"text-sm font-medium",children:"Pen Erases"})]}),j.mode==="wand"&&D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx(Kn,{id:"magic-wand-2d-only",checked:j.magicWand2dOnly,onCheckedChange:aw}),D.jsx(ft,{htmlFor:"magic-wand-2d-only",className:"text-sm font-medium",children:"2D Only"})]}),j.mode==="wand"&&D.jsx(jt,{label:"Max Distance (mm)",value:j.magicWandMaxDistanceMM,onValueChange:lw,min:2,max:500,step:1}),j.mode==="wand"&&D.jsx(jt,{label:"Threshold Percentage",value:j.magicWandThresholdPercent,onValueChange:cw,min:0,max:1,step:.01}),D.jsx(jt,{label:"Pen Value",value:j.penValue,onValueChange:sw,min:1,max:255,step:1,disabled:j.penErases})]}),D.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",onClick:dw,children:[D.jsx(Mm,{className:"mr-2 h-4 w-4"}),"Save Drawing"]})]}):D.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center text-muted-foreground",children:[D.jsx(Kc,{className:"h-8 w-8 mb-2"}),D.jsx("p",{children:"No drawing layer active"}),D.jsx("p",{className:"text-xs",children:"Create a drawing layer to access drawing tools"})]})})})]})]})})]}),D.jsx("input",{type:"file",ref:x,onChange:Yx,multiple:!0,className:"hidden"}),D.jsx("input",{type:"file",ref:ae,onChange:Hx,multiple:!0,className:"hidden"}),D.jsx(Jc,{open:w,onOpenChange:b,children:D.jsxs(Ta,{onClose:Gf,children:[D.jsxs($c,{children:[D.jsx(Ia,{children:le!==null?"Remove Surface":"Remove Volume"}),D.jsxs(Fa,{children:["Are you sure you want to remove this ",le!==null?"surface":"volume","?"]})]}),D.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[D.jsx(Kn,{id:"dont-ask-again",checked:S,onCheckedChange:N=>E(N===!0)}),D.jsx(ft,{htmlFor:"dont-ask-again",className:"text-sm",children:"Don't ask me again"})]}),D.jsxs(eu,{children:[D.jsx(ze,{variant:"outline",onClick:Gf,children:"Cancel"}),D.jsx(ze,{variant:"destructive",onClick:_x,children:"Remove"})]})]})}),D.jsx(Jc,{open:T,onOpenChange:F,children:D.jsxs(Ta,{onClose:zf,children:[D.jsxs($c,{children:[D.jsx(Ia,{children:M.isDownloadMode?"Download Scene":"Save Scene"}),D.jsx(Fa,{children:M.isDownloadMode?"Select the files you want to download.":"Enter the location where you want to save the scene."})]}),D.jsx("div",{className:"mt-4",children:D.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[D.jsx(Kn,{id:"document-checkbox",checked:M.document.enabled,onCheckedChange:Gx,disabled:!M.document.location.trim()}),D.jsxs("div",{className:"flex-1 min-w-0",children:[D.jsx(ft,{htmlFor:"document-checkbox",className:"text-sm font-medium",children:M.isDownloadMode?"Niivue Document Name":"Niivue Document Save Location"}),D.jsx(Si,{id:"save-location",type:"text",placeholder:M.isDownloadMode?"Enter filename...":"Enter file path...",value:M.document.location,onChange:N=>jx(N.target.value),className:"mt-1"})]})]})}),M.volumes.length>0&&D.jsxs("div",{className:"mt-4",children:[D.jsxs(ft,{className:"text-sm font-medium",children:["Volumes to ",M.isDownloadMode?"Download":"Save"]}),D.jsx("div",{className:"mt-2 space-y-4 max-h-48 overflow-y-auto",children:M.volumes.map((N,V)=>{var _;const W=(_=m.current)==null?void 0:_.volumes[V];return!N||!W?null:D.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[D.jsx(Kn,{id:`volume-${V}`,checked:N.enabled,onCheckedChange:Q=>zx(V,Q===!0)}),D.jsxs("div",{className:"flex-1 min-w-0",children:[D.jsx(ft,{htmlFor:`volume-${V}`,className:"text-sm font-medium",children:W.name||`Volume ${V+1}`}),D.jsx(Si,{type:"text",placeholder:M.isDownloadMode?"Enter filename...":"Enter path...",value:N.url||"",onChange:Q=>Ox(V,Q.target.value),className:"mt-1 text-xs"}),!M.isDownloadMode&&N.isExternal&&!N.enabled&&D.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"External URL - check to save with custom path"})]})]},V)})})]}),D.jsxs(eu,{children:[D.jsx(ze,{variant:"outline",onClick:zf,children:"Cancel"}),D.jsx(ze,{onClick:Ux,disabled:!M.document.enabled&&!M.volumes.some(N=>N.enabled),children:"OK"})]})]})}),D.jsx(Jc,{open:P,onOpenChange:z,children:D.jsxs(Ta,{onClose:()=>z(!1),children:[D.jsxs($c,{children:[D.jsx(Ia,{children:"FreeBrowse Settings"}),D.jsx(Fa,{children:"Configure the FreeBrowse viewer settings"})]}),D.jsxs("div",{className:"space-y-6 py-4",children:[D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Crosshair Width"}),D.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Jx(!U.crosshairVisible),children:U.crosshairVisible?D.jsx(Xc,{className:"h-4 w-4"}):D.jsx(Hc,{className:"h-4 w-4 opacity-50"})})]}),D.jsx(jt,{label:"",value:U.crosshairWidth,onValueChange:Qx,min:0,max:5,step:.1,decimalPlaces:1,disabled:!U.crosshairVisible})]}),D.jsx("div",{className:"space-y-2",children:D.jsx(jt,{label:"Crosshair Gap",value:U.crosshairGap,onValueChange:qx,min:0,max:10,step:.5,decimalPlaces:1,disabled:!U.crosshairVisible})}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(ft,{className:"text-sm font-medium",children:"Crosshair Color"}),D.jsx(Si,{type:"color",value:`#${Math.round(U.crosshairColor[0]*255).toString(16).padStart(2,"0")}${Math.round(U.crosshairColor[1]*255).toString(16).padStart(2,"0")}${Math.round(U.crosshairColor[2]*255).toString(16).padStart(2,"0")}`,onChange:N=>$x(N.target.value),className:"w-full h-10"})]}),D.jsx("div",{className:"space-y-2",children:D.jsx(jt,{label:"Overlay Outline Width",value:U.overlayOutlineWidth,onValueChange:ew,min:0,max:2,step:.1,decimalPlaces:1})}),D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx(Kn,{id:"interpolate-voxels",checked:U.interpolateVoxels,onCheckedChange:N=>Zx(N)}),D.jsx(ft,{htmlFor:"interpolate-voxels",className:"text-sm font-medium",children:"Interpolate Voxels"})]}),D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx(Kn,{id:"skip-remove-confirmation",checked:S,onCheckedChange:N=>E(N)}),D.jsx(ft,{htmlFor:"skip-remove-confirmation",className:"text-sm font-medium",children:"Don't ask me to confirm removals"})]})]}),D.jsx(eu,{children:D.jsx(ze,{onClick:()=>z(!1),children:"Close"})})]})})]})}const U7=ry;tg(document.getElementById("root")).render(D.jsx(U7,{basename:void 0,children:D.jsx(k4,{children:D.jsx(fg,{path:"/",element:D.jsx("div",{className:"app-container",children:D.jsx("div",{className:"main-content",children:D.jsx(V7,{})})})})})}));
